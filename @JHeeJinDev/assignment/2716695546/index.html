<!doctype html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>항해플러스 프론트엔드 6기 기술블로그</title>
  <link rel="icon" href="/front_6th/favicon.ico"/>
  
  <script type="module" crossorigin src="/front_6th/assets/index-CNXDb5PB.js"></script>
  <link rel="stylesheet" crossorigin href="/front_6th/assets/index-Bn_76fmk.css">
</head>
<body>
<div id="root"><div data-slot="sidebar-wrapper" style="--sidebar-width:16rem;--sidebar-width-icon:3rem" class="group/sidebar-wrapper has-data-[variant=inset]:bg-sidebar flex min-h-svh w-full"><div class="min-h-screen flex w-full"><div class="group peer text-sidebar-foreground hidden md:block" data-state="expanded" data-collapsible="" data-variant="sidebar" data-side="left" data-slot="sidebar"><div data-slot="sidebar-gap" class="relative w-(--sidebar-width) bg-transparent transition-[width] duration-200 ease-linear group-data-[collapsible=offcanvas]:w-0 group-data-[side=right]:rotate-180 group-data-[collapsible=icon]:w-(--sidebar-width-icon)"></div><div data-slot="sidebar-container" class="fixed inset-y-0 z-10 hidden h-svh transition-[left,right,width] duration-200 ease-linear md:flex left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)] group-data-[collapsible=icon]:w-(--sidebar-width-icon) group-data-[side=left]:border-r group-data-[side=right]:border-l w-64"><div data-sidebar="sidebar" data-slot="sidebar-inner" class="bg-sidebar group-data-[variant=floating]:border-sidebar-border flex h-full w-full flex-col group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:shadow-sm"><div data-slot="sidebar-content" data-sidebar="content" class="flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden bg-card border-r border-border"><a class="p-4" href="/front_6th/" data-discover="true"><div class="flex items-center space-x-2 mb-6"><div class="w-8 h-8 bg-gradient-primary rounded-lg flex items-center justify-center"><span class="text-white font-bold text-sm">6기</span></div><h4 class="text-lg font-bold text-primary">항해플러스 프론트엔드</h4></div></a><div data-slot="sidebar-group" data-sidebar="group" class="relative flex w-full min-w-0 flex-col p-2"><div data-slot="sidebar-group-label" data-sidebar="group-label" class="ring-sidebar-ring flex h-8 shrink-0 items-center rounded-md text-xs font-medium outline-hidden transition-[margin,opacity] duration-200 ease-linear focus-visible:ring-2 [&amp;&gt;svg]:size-4 [&amp;&gt;svg]:shrink-0 group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0 text-muted-foreground px-4">학습 관리</div><div data-slot="sidebar-group-content" data-sidebar="group-content" class="w-full text-sm"><ul data-slot="sidebar-menu" data-sidebar="menu" class="flex w-full min-w-0 flex-col gap-1 px-2"><li data-slot="sidebar-menu-item" data-sidebar="menu-item" class="group/menu-item relative"><a data-slot="sidebar-menu-button" data-sidebar="menu-button" data-size="default" data-active="false" class="peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left outline-hidden ring-sidebar-ring transition-[width,height,padding] focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-data-[sidebar=menu-action]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:size-8! group-data-[collapsible=icon]:p-2! [&amp;&gt;span:last-child]:truncate [&amp;&gt;svg]:size-4 [&amp;&gt;svg]:shrink-0 hover:bg-sidebar-accent hover:text-sidebar-accent-foreground text-sm h-12 text-foreground hover:bg-secondary hover:text-secondary-foreground rounded-lg transition-all duration-300" href="/front_6th/" data-discover="true"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-users h-5 w-5" aria-hidden="true"><path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"></path><path d="M16 3.128a4 4 0 0 1 0 7.744"></path><path d="M22 21v-2a4 4 0 0 0-3-3.87"></path><circle cx="9" cy="7" r="4"></circle></svg><span class="ml-3">수강생 목록</span></a></li><li data-slot="sidebar-menu-item" data-sidebar="menu-item" class="group/menu-item relative"><a data-slot="sidebar-menu-button" data-sidebar="menu-button" data-size="default" data-active="false" class="peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left outline-hidden ring-sidebar-ring transition-[width,height,padding] focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-data-[sidebar=menu-action]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:size-8! group-data-[collapsible=icon]:p-2! [&amp;&gt;span:last-child]:truncate [&amp;&gt;svg]:size-4 [&amp;&gt;svg]:shrink-0 hover:bg-sidebar-accent hover:text-sidebar-accent-foreground text-sm h-12 text-foreground hover:bg-secondary hover:text-secondary-foreground rounded-lg transition-all duration-300" href="/front_6th/assignments" data-discover="true"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-book-open h-5 w-5" aria-hidden="true"><path d="M12 7v14"></path><path d="M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z"></path></svg><span class="ml-3">과제 목록</span></a></li></ul></div></div></div></div></div></div><div class="flex-1 min-w-0"><header class="h-12 flex items-center border-b border-border bg-card px-4"><button data-slot="sidebar-trigger" class="inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 size-7 mr-4 text-white" data-sidebar="trigger"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-panel-left" aria-hidden="true"><rect width="18" height="18" x="3" y="3" rx="2"></rect><path d="M9 3v18"></path></svg><span class="sr-only">Toggle Sidebar</span></button><h4 class="text-lg font-semibold "><a href="/front_6th/@JHeeJinDev/" data-discover="true">JHeeJinDev<!-- --> 님의 상세페이지</a> ＞ <!-- -->[6팀 장희진] Chapter 2-2. 디자인 패턴과 함수형 프로그래밍</h4></header><main class="p-6"><div><div class="card-wrap"><div data-slot="card" class="card text-card-foreground flex flex-col gap-6 shadow-sm mb-6 p-6 border border-gray-700 bg-gray-800 rounded-lg"><a href="https://github.com/hanghae-plus/front_6th_chapter2-2/pull/27" target="_blank"><div class="flex items-start gap-4"><div class="flex-shrink-0"><svg xmlns="http://www.w3.org/2000/svg" height="32" aria-hidden="true" viewBox="0 0 24 24" width="32" fill="white" class="w-8 h-8"><path d="M12 1C5.923 1 1 5.923 1 12c0 4.867 3.149 8.979 7.521 10.436.55.096.756-.233.756-.522 0-.262-.013-1.128-.013-2.049-2.764.509-3.479-.674-3.699-1.292-.124-.317-.66-1.293-1.127-1.554-.385-.207-.936-.715-.014-.729.866-.014 1.485.797 1.691 1.128.99 1.663 2.571 1.196 3.204.907.096-.715.385-1.196.701-1.471-2.448-.275-5.005-1.224-5.005-5.432 0-1.196.426-2.186 1.128-2.956-.111-.275-.496-1.402.11-2.915 0 0 .921-.288 3.024 1.128a10.193 10.193 0 0 1 2.75-.371c.936 0 1.871.123 2.75.371 2.104-1.43 3.025-1.128 3.025-1.128.605 1.513.221 2.64.111 2.915.701.77 1.127 1.747 1.127 2.956 0 4.222-2.571 5.157-5.019 5.432.399.344.743 1.004.743 2.035 0 1.471-.014 2.654-.014 3.025 0 .289.206.632.756.522C19.851 20.979 23 16.854 23 12c0-6.077-4.922-11-11-11Z"></path></svg></div><div class="flex-1 min-w-0"><div class="flex items-center gap-2 mb-2"><h3 class="text-lg font-semibold text-white truncate">[6팀 장희진] Chapter 2-2. 디자인 패턴과 함수형 프로그래밍</h3></div><div class="flex items-center gap-4 text-xs text-gray-500"><span>by <!-- -->JHeeJinDev</span><span>2025. 8. 4.</span></div></div></div></a></div></div><div class="overflow-auto"><div data-color-mode="dark" class="wmde-markdown wmde-markdown-color p-6 max-w-full" style="word-wrap:break-word;overflow-wrap:break-word"><p><a href="https://jheejindev.github.io/front_6th_chapter2-2/">https://jheejindev.github.io/front_6th_chapter2-2/</a></p>
<h2 id="과제의-핵심취지"><a class="anchor" aria-hidden="true" tabindex="-1" href="#과제의-핵심취지"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>과제의 핵심취지</h2>
<ul>
<li>React의 hook 이해하기</li>
<li>함수형 프로그래밍에 대한 이해</li>
<li>액션과 순수함수의 분리</li>
</ul>
<h2 id="과제에서-꼭-알아가길-바라는-점"><a class="anchor" aria-hidden="true" tabindex="-1" href="#과제에서-꼭-알아가길-바라는-점"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>과제에서 꼭 알아가길 바라는 점</h2>
<ul>
<li>엔티티를 다루는 상태와 그렇지 않은 상태 - cart, isCartFull vs isShowPopup</li>
<li>엔티티를 다루는 컴포넌트와 훅 - CartItemView, useCart(), useProduct()</li>
<li>엔티티를 다루지 않는 컴포넌트와 훅 - Button, useRoute, useEvent 등</li>
<li>엔티티를 다루는 함수와 그렇지 않은 함수 - calculateCartTotal(cart) vs capaitalize(str)</li>
</ul>
<h3 id="기본과제"><a class="anchor" aria-hidden="true" tabindex="-1" href="#기본과제"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>기본과제</h3>
<ul class="contains-task-list">
<li>
<p>Component에서 비즈니스 로직을 분리하기</p>
</li>
<li>
<p>비즈니스 로직에서 특정 엔티티만 다루는 계산을 분리하기</p>
</li>
<li>
<p>뷰데이터와 엔티티데이터의 분리에 대한 이해</p>
</li>
<li>
<p>entities -&gt; features -&gt; UI 계층에 대한 이해</p>
</li>
<li class="task-list-item">
<p><input type="checkbox" disabled="" checked=""/> Component에서 사용되는 Data가 아닌 로직들은 hook으로 옮겨졌나요?</p>
</li>
<li class="task-list-item">
<p><input type="checkbox" disabled="" checked=""/> 주어진 hook의 책임에 맞도록 코드가 분리가 되었나요?</p>
</li>
<li class="task-list-item">
<p><input type="checkbox" disabled="" checked=""/> 계산함수는 순수함수로 작성이 되었나요?</p>
</li>
<li class="task-list-item">
<p><input type="checkbox" disabled="" checked=""/> Component에서 사용되는 Data가 아닌 로직들은 hook으로 옮겨졌나요?</p>
</li>
<li class="task-list-item">
<p><input type="checkbox" disabled="" checked=""/> 주어진 hook의 책임에 맞도록 코드가 분리가 되었나요?</p>
</li>
<li class="task-list-item">
<p><input type="checkbox" disabled="" checked=""/> 계산함수는 순수함수로 작성이 되었나요?</p>
</li>
<li class="task-list-item">
<p><input type="checkbox" disabled="" checked=""/> 특정 Entitiy만 다루는 함수는 분리되어 있나요?</p>
</li>
<li class="task-list-item">
<p><input type="checkbox" disabled="" checked=""/> 특정 Entitiy만 다루는 Component와 UI를 다루는 Component는 분리되어 있나요?</p>
</li>
<li class="task-list-item">
<p><input type="checkbox" disabled="" checked=""/> 데이터 흐름에 맞는 계층구조를 이루고 의존성이 맞게 작성이 되었나요?</p>
</li>
</ul>
<h3 id="심화과제"><a class="anchor" aria-hidden="true" tabindex="-1" href="#심화과제"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>심화과제</h3>
<ul class="contains-task-list">
<li>
<p>재사용 가능한 Custom UI 컴포넌트를 만들어 보기</p>
</li>
<li>
<p>재사용 가능한 Custom 라이브러리 Hook을 만들어 보기</p>
</li>
<li>
<p>재사용 가능한 Custom 유틸 함수를 만들어 보기</p>
</li>
<li>
<p>그래서 엔티티와는 어떤 다른 계층적 특징을 가지는지 이해하기</p>
</li>
<li class="task-list-item">
<p><input type="checkbox" disabled="" checked=""/> UI 컴포넌트 계층과 엔티티 컴포넌트의 계층의 성격이 다르다는 것을 이해하고 적용했는가?</p>
</li>
<li class="task-list-item">
<p><input type="checkbox" disabled="" checked=""/> 엔티티 Hook과 라이브러리 훅과의 계층의 성격이 다르다는 것을 이해하고 적용했는가?</p>
</li>
<li class="task-list-item">
<p><input type="checkbox" disabled="" checked=""/> 엔티티 순수함수와 유틸리티 함수의 계층의 성격이 다르다는 것을 이해하고 적용했는가?</p>
</li>
</ul>
<h2 id="과제-셀프회고"><a class="anchor" aria-hidden="true" tabindex="-1" href="#과제-셀프회고"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>과제 셀프회고</h2>
<!-- -->
<p>과제를 시작하기 전에는 디자인 패턴에 대해 대략적으로만 알고 있었고, 그 중요성이나 구체적인 적용 방법에 대해서는 깊이 있게 이해하지 못했습니다. 특히, 내 코드가 어떤 패턴을 따르고 있는지, 왜 그런 설계를 해야 하는지에 대한 기준이 없었습니다.
(사실 실무에서 배운 방식을 그냥 따라 했던 것 같습니다...)</p>
<p>하지만 이번에는 디자인 패턴에 대해 직접 찾아보고, 최대한 그 원칙에 맞춰 구현해보자는 마음가짐으로 시작했습니다.</p>
<p><strong>1. basic 과제</strong>
이번 과제에서는 Jotai 같은 전역 상태 관리 도구 없이, 상위 컴포넌트에서 상태를 모두 관리하고 하위 컴포넌트로 전달하는 구조로 구현했습니다.
이 과정에서 Props Drilling을 자연스럽게 경험할 수 있었고, 상태 관리의 어려움도 체감할 수 있었습니다.</p>
<p>App 컴포넌트는 전체 상태와 로직을 책임지는 <strong>Container</strong> 역할을 했고, 하위 컴포넌트들은 주어진 props만으로 동작하는 <strong>Presenter</strong>처럼 구성했습니다.</p>
<p>특히 여러 핸들러 함수들을 productHandlers, cartHandlers, couponHandlers 등으로 묶어서 넘기는 방식은 <strong>Facade Pattern</strong> 느껴졌고, 실제로 컴포넌트 간의 인터페이스가 훨씬 단순해지는 장점이 있었습니다.</p>
<p>또한, useCart, useProducts, useCoupons 같은 커스텀 훅을 활용해 상태 관리와 비즈니스 로직을 분리했습니다. 이 구조 덕분에 App 컴포넌트는 훨씬 읽기 쉬워졌고, 로직의 재사용성도 높일 수 있었습니다.</p>
<p>전체적으로는 관심사 분리와 상태 흐름에 대한 감각을 익히기에 좋은 구조였고, 동시에 전역 상태가 없을 때의 한계도 자연스럽게 체감할 수 있었습니다.</p>
<hr/>
<p><strong>2. advanced 과제 (Jotai 활용)</strong>
이번 과제에서는 첫 번째 과제에서 경험한 Props Drilling의 한계와 복잡한 상태 관리 문제를 해결하고 한번도 사용해보지 못한 Jotai도 공부해 볼겸 jotai를 도입하였습니다</p>
<p>디자인 패턴 적용 후 달라진 점</p>
<p>컨테이너-프레젠터 패턴:
이전에는 App 컴포넌트가 컨테이너 역할을 했지만, 이제 그 역할이 useAdminCoupons나 useProducts와 같은 <strong>커스텀 훅</strong>으로 옮겨갔습니다. 이 훅들이 Jotai의 상태와 로직을 모두 책임지게 되면서, AdminPage나 CartSection 같은 <strong>컴포넌트들</strong>은 그저 훅이 주는 데이터와 함수를 받아서 화면을 보여주는 <strong>프레젠터가 되었습니다.</strong></p>
<p>옵저버 패턴:
Jotai의 atoms를 활용하면서 옵저버 패턴의 개념을 자연스럽게 적용할 수 있었습니다. atoms는 **상태 변화를 알리는 주제(Subject)**가 되고, useAtom을 사용하는 모든 컴포넌트나 훅은 그 변화를 지켜보는 **관찰자(Observer)**가 되었습니다.</p>
<p>파사드 패턴:
첫 과제에서 productHandlers처럼 함수들을 묶어 넘겼던 역할은, 이제 <strong>store/actions 폴더의 액션 아톰</strong>들이 대신하게 되었습니다. addProductAtom, removeCouponAtom 같은 액션들이 <strong>복잡한 로직을 캡슐화하고, 커스텀 훅을 통해 파사드</strong>가 되었습니다.</p>
<p>전체적인 소감
Jotai를 사용하면서 상태 관리와 컴포넌트 간의 책임 분리가 훨씬 명확해지는 것을 느꼈습니다. 첫 과제에서는 힘들었던 Props Drilling이 사라졌고, 코드도 훨씬 읽기 쉬워졌습니다.</p>
<hr/>
<p><strong>트러블 슈팅 기록</strong></p>
<p>Jotai 테스트 환경 구축 및 상태 오염 문제 해결
문제 인식: 전역 상태 오염과 불안정한 DOM 선택자
심화 과제를 진행하며 Jotai를 사용한 컴포넌트의 테스트 코드를 작성할 때, 제공된 테스트 코드가 예상치 못한 에러와 함께 실패하는 문제가 발생했습니다.
이러한 문제의 원인을 파악하는 데 어려움을 겪었고, 6팀 팀원들과 함께 문제를 찾아보며 많은 도움을 받을 수 있었습니다. 동료와 논의하는 과정에서 Jotai의 전역 스토어 생명주기에 대한 이해를 깊게 할 수 있었고, 해결책을 찾는 데 큰 실마리를 얻었습니다.</p>
<p>원인은 React Testing Library는 각 테스트마다 컴포넌트를 다시 렌더링하지만, Jotai의 전역 스토어는 자동으로 초기화되지 않습니다. 이 때문에 이전 테스트에서 변경된 상태가 다음 테스트에 영향을 주어 테스트 간의 독립성이 깨지는 문제가 있었습니다.</p>
<p>해결 과정: Jotai 테스트 환경 최적화
이 문제를 해결하기 위해 가장 먼저 테스트 간의 상태 독립성을 확보하는 데 집중했습니다. 기존에는 Jotai의 <provider>를 한 번만 렌더링하는 방식이었지만, 각 테스트마다 새로운 <provider>와 스토어를 생성하는 전략을 채택했습니다.</provider></provider></p>
<p>이를 위해 Jotai의 useHydrateAtoms 훅을 활용하여 테스트 시작 전에 Atom의 초기 상태를 원하는 값으로 미리 설정하는 헬퍼 함수를 구현했습니다.</p>
<ol>
<li>초기값 주입을 위한 헬퍼 컴포넌트 구현: initialValues라는 prop을 받아 useHydrateAtoms를 호출하는 <hydrateatoms> 컴포넌트를 만들었습니다. 이 컴포넌트는 모든 자식 컴포넌트가 렌더링되기 전에 Atom에 초기 상태를 주입하는 역할을 합니다.</hydrateatoms></li>
</ol>
<pre class="language-js"><code class="language-js code-highlight"><span class="code-line"><span class="token keyword">const</span> <span class="token function-variable function"><span class="token maybe-class-name">HydrateAtoms</span></span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> initialValues<span class="token punctuation">,</span> children <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token function">useHydrateAtoms</span><span class="token punctuation">(</span>initialValues<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token keyword control-flow">return</span> children<span class="token punctuation">;</span>
</span><span class="code-line"><span class="token punctuation">}</span><span class="token punctuation">;</span>
</span></code><div class="copied" data-code="const HydrateAtoms = ({ initialValues, children }) =&gt; {
  useHydrateAtoms(initialValues);
  return children;
};
"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
<ol start="2">
<li>테스트 렌더링 헬퍼 함수 생성: render 함수를 래핑하는 renderApp 함수를 만들었습니다. 이 함수는 매 테스트마다 새로운 스토어를 createStore()로 생성하고, <provider>와 <hydrateatoms>로 App 컴포넌트를 감싸도록 했습니다.</hydrateatoms></provider></li>
</ol>
<pre class="language-js"><code class="language-js code-highlight"><span class="code-line"><span class="token keyword">const</span> <span class="token function-variable function">renderApp</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">initialValues <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span></span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token function">createStore</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token keyword control-flow">return</span> <span class="token function">render</span><span class="token punctuation">(</span>
</span><span class="code-line">    <span class="token operator">&lt;</span><span class="token maybe-class-name">Provider</span> store<span class="token operator">=</span><span class="token punctuation">{</span>store<span class="token punctuation">}</span><span class="token operator">&gt;</span>
</span><span class="code-line">      <span class="token operator">&lt;</span><span class="token maybe-class-name">HydrateAtoms</span> initialValues<span class="token operator">=</span><span class="token punctuation">{</span>initialValues<span class="token punctuation">}</span><span class="token operator">&gt;</span>
</span><span class="code-line">        <span class="token operator">&lt;</span><span class="token maybe-class-name">App</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
</span><span class="code-line">      <span class="token operator">&lt;</span><span class="token operator">/</span><span class="token maybe-class-name">HydrateAtoms</span><span class="token operator">&gt;</span>
</span><span class="code-line">    <span class="token operator">&lt;</span><span class="token operator">/</span><span class="token maybe-class-name">Provider</span><span class="token operator">&gt;</span>
</span><span class="code-line">  <span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token punctuation">}</span><span class="token punctuation">;</span>
</span></code><div class="copied" data-code="const renderApp = (initialValues = []) =&gt; {
  const store = createStore();
  return render(
    &lt;Provider store={store}&gt;
      &lt;HydrateAtoms initialValues={initialValues}&gt;
        &lt;App /&gt;
      &lt;/HydrateAtoms&gt;
    &lt;/Provider&gt;
  );
};
"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
<p>이제 각 테스트는 renderApp 헬퍼 함수를 통해 완전히 독립된 상태에서 시작할 수 있게 되었고, initialValues를 전달하여 테스트 시나리오에 맞는 초기 상태를 유연하게 설정할 수 있게 되었습니다.</p>
<p><strong>배운 점</strong>
이 과정을 통해 Jotai와 같은 전역 상태 관리 라이브러리를 사용할 때 테스트 환경을 어떻게 구성해야 하는지 깊이 있게 이해하게 되었습니다. 단순한 컴포넌트 렌더링을 넘어, 전역 상태의 생명주기를 테스트 환경에 맞게 관리하는 것도 중요하다고 느꼇습니다.(사실 1주차때도 겪었던 문제..)</p>
<p>또한, 페어 코딩과 팀의 중요성도 함께 느꼈습니다. 혼자서는 해결하기 어려웠던 문제를 동료와 함께 논의하고 해결책을 찾아가는 과정 자체가 매우 의미 있는 학습 경험이었습니다.</p>
<h3 id="과제를-하면서-내가-제일-신경-쓴-부분은-무엇인가요"><a class="anchor" aria-hidden="true" tabindex="-1" href="#과제를-하면서-내가-제일-신경-쓴-부분은-무엇인가요"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>과제를 하면서 내가 제일 신경 쓴 부분은 무엇인가요?</h3>
<p>제가 가장 신경 쓴 부분은 <strong>디자인 패턴의 의도적인 적용</strong>과 <strong>함수의 순수성 확보</strong>, 그리고 <strong>유연한 설계</strong>였습니다.</p>
<p>과제를 시작하기 전, 저는 디자인 패턴에 대해 막연하게 알고 있었고, 그 중요성이나 구체적인 적용 방법에는 익숙하지 않았습니다. 하지만 이번 기회를 통해 **&#x27;기능에 따른 단순한 파일 정리&#x27;**를 넘어, 의도적으로 디자인 패턴을 적용하고 구현하는 것에 집중했습니다.</p>
<ol>
<li>디자인 패턴의 의도적인 적용</li>
</ol>
<ul>
<li>
<p>Props Drilling 경험: 첫 번째 과제에서 Jotai 없이 상태를 관리하며 Props Drilling의 비효율성을 경험했습니다. 이를 통해 상위 컴포넌트는 컨테이너 역할을, 하위 컴포넌트는 프레젠터 역할을 충실히 하도록 설계하는 것의 중요성을 깨달았습니다.</p>
</li>
<li>
<p>Jotai를 활용한 패턴 구체화: Jotai를 도입한 심화 과제에서는 이전 과제의 한계를 해결하며 디자인 패턴을 더욱 명확하게 적용했습니다. App 컴포넌트의 컨테이너 역할을 커스텀 훅으로 분리하고, Jotai의 atoms를 활용하여 옵저버 패턴을 적용했습니다. 또한, 여러 핸들러 함수를 하나로 묶어 전달하는 방식을 통해 파사드 패턴을 구현하여 컴포넌트의 인터페이스를 단순화했습니다.</p>
</li>
</ul>
<ol start="2">
<li>함수의 순수성 확보
디자인 패턴과 함께 함수의 순수성에 대해서도 깊이 고민했습니다. 순수 함수는 같은 입력에 대해 항상 같은 출력을 반환하고, 외부 상태를 변경하지 않는 부수 효과(side effect)가 없어야 합니다.</li>
</ol>
<ul>
<li>초기 코드의 문제점: 초기에 작성한 calculateItemTotal 같은 함수는 외부의 전역 상태를 직접 변경하지 않았지만, getMaxApplicableDiscount와 같은 다른 함수에 암묵적으로 의존하고 있었습니다. 이는 완벽한 순수 함수라고 볼 수 없었고, 예측 가능성을 떨어뜨리는 원인이었습니다.</li>
</ul>
<pre class="language-js"><code class="language-js code-highlight"><span class="code-line"><span class="token keyword module">export</span> <span class="token keyword">const</span> calculateItemTotal <span class="token operator">=</span> <span class="token punctuation">(</span>
</span><span class="code-line">  <span class="token literal-property property">item</span><span class="token operator">:</span> <span class="token maybe-class-name">CartItem</span><span class="token punctuation">,</span>
</span><span class="code-line">  <span class="token literal-property property">cart</span><span class="token operator">:</span> <span class="token maybe-class-name">CartItem</span><span class="token punctuation">[</span><span class="token punctuation">]</span>
</span><span class="code-line"><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token parameter">number</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token keyword">const</span> <span class="token punctuation">{</span> price <span class="token punctuation">}</span> <span class="token operator">=</span> item<span class="token punctuation">.</span><span class="token property-access">product</span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token keyword">const</span> <span class="token punctuation">{</span> quantity <span class="token punctuation">}</span> <span class="token operator">=</span> item<span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token keyword">const</span> discount <span class="token operator">=</span> <span class="token function">getMaxApplicableDiscount</span><span class="token punctuation">(</span>item<span class="token punctuation">,</span> cart<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token keyword">const</span> finalPrice <span class="token operator">=</span> price <span class="token operator">*</span> quantity <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">-</span> discount<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="token keyword control-flow">return</span> <span class="token known-class-name class-name">Math</span><span class="token punctuation">.</span><span class="token method function property-access">round</span><span class="token punctuation">(</span>finalPrice<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token punctuation">}</span><span class="token punctuation">;</span>
</span></code><div class="copied" data-code="export const calculateItemTotal = (
  item: CartItem,
  cart: CartItem[]
): number =&gt; {
  const { price } = item.product;
  const { quantity } = item;
  const discount = getMaxApplicableDiscount(item, cart);
  const finalPrice = price * quantity * (1 - discount);

  return Math.round(finalPrice);
};
"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
<ul>
<li>리팩토링을 통한 개선: 이 문제를 해결하기 위해 함수형 프로그래밍 원칙을 적용하여 함수를 리팩토링했습니다. 의존하는 함수들을 직접 호출하는 대신, 인자로 명시적으로 받도록 코드를 수정했습니다. 이를 통해 함수는 외부의 어떤 것도 참조하지 않는 &#x27;완전한 순수 함수&#x27;가 되었습니다.</li>
</ul>
<pre class="language-js"><code class="language-js code-highlight"><span class="code-line"><span class="token comment">// getMaxApplicableDiscount 함수를 외부에서 주입받기 위한 타입 정의</span>
</span><span class="code-line">type <span class="token function-variable function"><span class="token maybe-class-name">DiscountCalculator</span></span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">item</span><span class="token operator">:</span> <span class="token maybe-class-name">CartItem</span><span class="token punctuation">,</span> <span class="token literal-property property">cart</span><span class="token operator">:</span> <span class="token maybe-class-name">CartItem</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> number<span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword module">export</span> <span class="token keyword">const</span> calculateItemTotal <span class="token operator">=</span> <span class="token punctuation">(</span>
</span><span class="code-line">  <span class="token literal-property property">item</span><span class="token operator">:</span> <span class="token maybe-class-name">CartItem</span><span class="token punctuation">,</span>
</span><span class="code-line">  <span class="token literal-property property">cart</span><span class="token operator">:</span> <span class="token maybe-class-name">CartItem</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
</span><span class="code-line">  <span class="token literal-property property">getMaxDiscount</span><span class="token operator">:</span> <span class="token maybe-class-name">DiscountCalculator</span> <span class="token comment">// 계산 함수를 인자로 받음</span>
</span><span class="code-line"><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token parameter">number</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token keyword">const</span> <span class="token punctuation">{</span> price <span class="token punctuation">}</span> <span class="token operator">=</span> item<span class="token punctuation">.</span><span class="token property-access">product</span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token keyword">const</span> <span class="token punctuation">{</span> quantity <span class="token punctuation">}</span> <span class="token operator">=</span> item<span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token keyword">const</span> discount <span class="token operator">=</span> <span class="token function">getMaxDiscount</span><span class="token punctuation">(</span>item<span class="token punctuation">,</span> cart<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token keyword">const</span> finalPrice <span class="token operator">=</span> price <span class="token operator">*</span> quantity <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">-</span> discount<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="token keyword control-flow">return</span> <span class="token known-class-name class-name">Math</span><span class="token punctuation">.</span><span class="token method function property-access">round</span><span class="token punctuation">(</span>finalPrice<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token punctuation">}</span><span class="token punctuation">;</span>
</span></code><div class="copied" data-code="// getMaxApplicableDiscount 함수를 외부에서 주입받기 위한 타입 정의
type DiscountCalculator = (item: CartItem, cart: CartItem[]) =&gt; number;

export const calculateItemTotal = (
  item: CartItem,
  cart: CartItem[],
  getMaxDiscount: DiscountCalculator // 계산 함수를 인자로 받음
): number =&gt; {
  const { price } = item.product;
  const { quantity } = item;
  const discount = getMaxDiscount(item, cart);
  const finalPrice = price * quantity * (1 - discount);

  return Math.round(finalPrice);
};
"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
<ol start="3">
<li>라이브러리 전환에 대비한 설계
준일코치님 멘토링을 청강하던 중, &quot;Jotai로 상태 관리 라이브러리를 구성했는데, 갑자기 Zustand로 바꿔야 하는 상황&quot;과 같은 요구사항을 기반으로 생각해보라는 조언을 들었습니다. 이 조언은 단순히 기능을 구현하는 것을 넘어, 미래의 변화에 대비하는 유연한 코드 설계의 중요성을 깨닫게 해주었습니다.</li>
</ol>
<ul>
<li>기존 코드</li>
</ul>
<pre class="language-js"><code class="language-js code-highlight"><span class="code-line"><span class="token comment">// useAdminProducts.ts (훅 내부에서 Jotai와 로컬 상태를 모두 관리)</span>
</span><span class="code-line"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> useState <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">&quot;react&quot;</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> useAtom <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">&quot;jotai&quot;</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> productsAtom<span class="token punctuation">,</span> <span class="token spread operator">...</span> <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">&quot;store/atoms&quot;</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> addProductAtom<span class="token punctuation">,</span> <span class="token spread operator">...</span> <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">&quot;store/actions&quot;</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword module">export</span> <span class="token keyword">const</span> <span class="token function-variable function">useAdminProducts</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token keyword">const</span> <span class="token punctuation">[</span>products<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useAtom</span><span class="token punctuation">(</span>productsAtom<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token keyword">const</span> <span class="token punctuation">[</span><span class="token punctuation">,</span> addProduct<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useAtom</span><span class="token punctuation">(</span>addProductAtom<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token keyword">const</span> <span class="token punctuation">[</span>showProductForm<span class="token punctuation">,</span> setShowProductForm<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token comment">// ... 기타 로직과 핸들러 함수들</span>
</span><span class="code-line">  
</span><span class="code-line">  <span class="token keyword control-flow">return</span> <span class="token punctuation">{</span>
</span><span class="code-line">    products<span class="token punctuation">,</span>
</span><span class="code-line">    showProductForm<span class="token punctuation">,</span>
</span><span class="code-line">    <span class="token comment">// ... 모든 상태와 핸들러 함수 반환</span>
</span><span class="code-line">  <span class="token punctuation">}</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token punctuation">}</span><span class="token punctuation">;</span>
</span></code><div class="copied" data-code="// useAdminProducts.ts (훅 내부에서 Jotai와 로컬 상태를 모두 관리)
import { useState } from &quot;react&quot;;
import { useAtom } from &quot;jotai&quot;;
import { productsAtom, ... } from &quot;store/atoms&quot;;
import { addProductAtom, ... } from &quot;store/actions&quot;;

export const useAdminProducts = () =&gt; {
  const [products] = useAtom(productsAtom);
  const [, addProduct] = useAtom(addProductAtom);
  const [showProductForm, setShowProductForm] = useState(false);
  // ... 기타 로직과 핸들러 함수들
  
  return {
    products,
    showProductForm,
    // ... 모든 상태와 핸들러 함수 반환
  };
};
"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
<ul>
<li>리팩토링 코드</li>
</ul>
<pre class="language-js"><code class="language-js code-highlight"><span class="code-line"><span class="token comment">// AdminProductSection.tsx (훅만 사용)</span>
</span><span class="code-line"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> useAdminProducts <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">&quot;./hooks/useAdminProducts&quot;</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword module">export</span> <span class="token keyword">const</span> <span class="token function-variable function"><span class="token maybe-class-name">AdminProductSection</span></span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token keyword">const</span> <span class="token punctuation">{</span>
</span><span class="code-line">    products<span class="token punctuation">,</span>
</span><span class="code-line">    showProductForm<span class="token punctuation">,</span>
</span><span class="code-line">    editingProduct<span class="token punctuation">,</span>
</span><span class="code-line">    <span class="token comment">// ... 모든 상태와 핸들러 함수를 훅에서 받아옴</span>
</span><span class="code-line">  <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useAdminProducts</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">  
</span><span class="code-line">  <span class="token keyword control-flow">return</span> <span class="token punctuation">(</span>
</span><span class="code-line">    <span class="token comment">// ... 훅에서 받은 값들로 UI만 구성</span>
</span><span class="code-line">  <span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token punctuation">}</span><span class="token punctuation">;</span>
</span></code><div class="copied" data-code="// AdminProductSection.tsx (훅만 사용)
import { useAdminProducts } from &quot;./hooks/useAdminProducts&quot;;

export const AdminProductSection = () =&gt; {
  const {
    products,
    showProductForm,
    editingProduct,
    // ... 모든 상태와 핸들러 함수를 훅에서 받아옴
  } = useAdminProducts();
  
  return (
    // ... 훅에서 받은 값들로 UI만 구성
  );
};
"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
<p>이 경험을 통해 유지보수와 확장성에 강한 라이브러리 독립적인 설계의 중요성을 체감했습니다.</p>
<h3 id="과제를-다시-해보면-더-잘-할-수-있었겠다-아쉬운-점이-있다면-무엇인가요"><a class="anchor" aria-hidden="true" tabindex="-1" href="#과제를-다시-해보면-더-잘-할-수-있었겠다-아쉬운-점이-있다면-무엇인가요"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>과제를 다시 해보면 더 잘 할 수 있었겠다 아쉬운 점이 있다면 무엇인가요?</h3>
<p>과제를 다시 해본다면 더 잘할 수 있었겠다고 느낀 점은, 프로젝트 구조와 코드 설계 부분입니다.
다른 분들과 코드도 보고 이야기를 나누면서 느낀 점은, 기능을 분류하고 구조화하는 방법이 생각보다 다양하다는 것이었습니다.</p>
<p>예를 들어, 저는 기존에 단순히 디렉터리만 나눴지만, 다른 분들은 features, shared, entities, pages 등으로 세분화해 도메인 중심, 재사용 중심으로 잘 나누고 있었습니다. 이런 구조를 미리 알았다면 좀 더 깔끔하고 확장성 있는 설계를 할 수 있었을 텐데 하는 아쉬움이 남았습니다.</p>
<p>또, 상태 관리도 처음에는 단순하게 관리했지만, Jotai에서 Zustand로 바꾸면서 느꼈던 것처럼, 상태의 위치나 역할에 따라 어디에 위치시킬지 고민하는 것도 중요하다는 걸 느꼈습니다.</p>
<h3 id="리뷰-받고-싶은-내용이나-궁금한-것에-대한-질문-편하게-남겨주세요-"><a class="anchor" aria-hidden="true" tabindex="-1" href="#리뷰-받고-싶은-내용이나-궁금한-것에-대한-질문-편하게-남겨주세요-"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>리뷰 받고 싶은 내용이나 궁금한 것에 대한 질문 편하게 남겨주세요 :)</h3>
<ol>
<li>
<p>이번 과제에서 컨테이너-프레젠터, 파사드, 옵저버 패턴을 의도적으로 적용해보았습니다. 제가 이해하고 적용한 방식이 실제 의도와 잘 맞는지, 개선할 점은 없는지 궁금합니다!</p>
</li>
<li>
<p>함수에서 의존 함수를 인자로 주입하는 방식이 한편으로는 오히려 복잡도를 높이는 건 아닌지 우려되기도 하는데요.  순수성을 확보하는 데 효과적인 패턴인지 궁금합니다!</p>
</li>
</ol>
<h2 id="리뷰-받고-싶은-내용이나-궁금한-것에-대한-질문"><a class="anchor" aria-hidden="true" tabindex="-1" href="#리뷰-받고-싶은-내용이나-궁금한-것에-대한-질문"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>리뷰 받고 싶은 내용이나 궁금한 것에 대한 질문</h2></div></div><div class="overflow-auto mt-9"><div data-color-mode="dark" class="wmde-markdown wmde-markdown-color p-6 max-w-full" style="word-wrap:break-word;overflow-wrap:break-word"><h2 id="과제-피드백"><a class="anchor" aria-hidden="true" tabindex="-1" href="#과제-피드백"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>과제 피드백</h2>
<p>안녕하세요 희진! 수고했습니다. 이번 과제는 React 코드의 구조적 분리와 함수형 프로그래밍 원칙을 이해하고 적용해보는 것이 핵심이었습니다. 특히 엔티티를 다루는 코드와 UI를 다루는 코드의 분리, 순수함수의 활용 등 현대적인 프론트엔드 개발의 중요한 패턴들을 경험했기를 바래요 :)</p>
<p>회고를 보니 디자인 패턴을 의도적으로 적용하려는 노력이 인상적입니다. 특히 Props Drilling을 경험하고 이를 개선하기 위해 컨테이너-프레젠터 패턴과 Jotai를 활용한 상태 관리 구조를 구현하신 과정이 정말 좋은 학습 경험이었을 것 같아요. 옵저버 패턴과 파사드 패턴을 자연스럽게 적용하신 부분도 훌륭합니다.</p>
<p>코드를 살펴보니 상태와 로직을 커스텀 훅으로 캡슐화하여 컴포넌트를 깔끔하게 유지하신 부분이 돋보입니다. 특히 useAdminProducts, useCart 같은 훅을 통해 비즈니스 로직을 분리하고, 컴포넌트는 UI 렌더링에만 집중하도록 한 점은 매우 좋은 접근법입니다.</p>
<p>순수함수의 의존성 주입에 대한 고민도 흥미롭네요. calculateItemTotal 함수에 getMaxDiscount를 인자로 주입하여 순수성을 확보하려고 했던 시도가 인상적이었습니다. 사실 순수함수 + 순수함수 = 순수함수이기에 내부적으로 순수함수를 사용한다고 해도 의존성에 대한 문제는 발생하지 않아요. 다만 지금처럼 외부의존을 밖으로 빼내기도 용이하고 실제로 다른 전략을 써야한다면 OCP방식으로 필요한 부분만 빼내기도 용이한 방식이 되겠죠. 해당 과제의 경우 getMaxApplicableDiscount(item)만 되어 있는 경우에는 문제가 되는 코드였지만 이미 getMaxApplicableDiscount(item, cart) 형태로 순수하게 만들어두게 되면서 암묵적 문제는 해결이 된 상태랍니다. getMaxDiscount의 경우 전략적으로 선택을 해야하는 상황이 아니라면 내부에 두면 되고 필요할때 빼내어도 좋아요! 함수형 프로그래밍의 장점과 확장에 대한 체험을 제대로 했다고 생각이 드네요. 잘했씁니다.</p>
<p>1 이번 과제에서 컨테이너-프레젠터, 파사드, 옵저버 패턴을 의도적으로 적용해보았습니다. 제가 이해하고 적용한 방식이 실제 의도와 잘 맞는지, 개선할 점은 없는지 궁금합니다!
=&gt; 잘했습니다. 디자인 패턴은 어떻게 하거나 적용하는게 아니라 말 그대로 패턴인거죠. 내가 일반적으로 더 좋은 코드의 형태로 구조를 바꾸게 되는 여러가지 패턴들이 있는게 하고보니 우리가 하고 있던 패턴들이었던거죠. 그런 측면에서 컨테이너-프레젠터, 파사드, 옵저버 패턴을 특정 구현 방법이 아닌 패턴이라는 측면에서 아주 잘 활용했다고 생각합니다.</p>
<p>2 함수에서 의존 함수를 인자로 주입하는 방식이 한편으로는 오히려 복잡도를 높이는 건 아닌지 우려되기도 하는데요. 순수성을 확보하는 데 효과적인 패턴인지 궁금합니다!
=&gt; 위에서 설명한대로 순수함수 + 순수함수 = 순수함수이기 때문에 인자로 주입하지 않아도 됩니다. 인자로 주입을 한다는건 외부에서 전략을 바꿀 수 있도록 위임하는 것이죠. 마치 Array.map Array.filter와 같은 식으로요.</p>
<p>=&gt; 필요한 경우에는 어렵지 않게 외부의존을 담을 수 있다는게 장점이고 필요없다면 그냥 사용해도 무방합니다. 무조건적인 적용이 아니라 점진적확장의 형태로 처음에는 가장 단순한 형태로 시작해서 필요할때 필요한 만큼 복잡하게 만든다라는 식으로 적용하면 됩니다.</p>
<p>아니면 이렇게도 할수 있습니다. 외부에서도 받을 수 있게 만들면서 기본 값은 적용하는 방식이죠. 이렇게 하면 순수함과 외부의존성 전략패턴과 간결함 모두 얻을 수 있습니다.</p>
<p>export const calculateItemTotal = (
item: CartItem,
cart: CartItem[],
getMaxDiscount = defaultGetMaxDiscount // 기본 구현 제공
): number =&gt; {
const discount = getMaxDiscount(item, cart);
return Math.round(item.product.price * item.quantity * (1 - discount));
};</p>
<p>그렇다고 이 방법이 만능이니 다 이렇게 해야되냐? 하면 필요없다면 이 역시도 오버엔지니어링이죠. 필요할때 필요한만큼!</p>
<p>아주 아주 잘했습니다. 6주차 과제에서 지금의 고민들을 많이 적용해보길 바래요!!</p></div></div><div class="mt-9"></div></div></main></div></div></div></div>
</body>
</html>
