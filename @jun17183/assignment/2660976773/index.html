<!doctype html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="icon" href="/front_6th/favicon.ico"/>
  
    <title>[9팀 신홍준] Chapter 1-2. 프레임워크 없이 SPA 만들기 (2) - 신홍준 | 항해플러스 프론트엔드 6기</title>
    <meta name="description" content=" [항해플러스 프론트엔드 6기] 신홍준님이 제출한 [9팀 신홍준] Chapter 1-2. 프레임워크 없이 SPA 만들기 (2) 과제를 확인하세요. 코드 구현, 문제 해결 과정, 피드백 내용을 상세히 살펴볼 수 있습니다." />
    <meta name="keywords" content="항해플러스, 프론트엔드, 개발자교육, React, TypeScript, JavaScript, 기술면접, 웹개발, 신홍준, [9팀 신홍준] Chapter 1-2. 프레임워크 없이 SPA 만들기 (2), 과제상세, 코드리뷰, 피드백, Pull Request" />
    <meta property="og:title" content="[9팀 신홍준] Chapter 1-2. 프레임워크 없이 SPA 만들기 (2) - 신홍준 | 항해플러스 프론트엔드 6기" />
    <meta property="og:description" content=" [항해플러스 프론트엔드 6기] 신홍준님이 제출한 [9팀 신홍준] Chapter 1-2. 프레임워크 없이 SPA 만들기 (2) 과제를 확인하세요. 코드 구현, 문제 해결 과정, 피드백 내용을 상세히 살펴볼 수 있습니다." />
    <meta property="og:image" content="/defaultThumbnail.jpg" />
    <meta property="og:type" content="website" />
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="[9팀 신홍준] Chapter 1-2. 프레임워크 없이 SPA 만들기 (2) - 신홍준 | 항해플러스 프론트엔드 6기" />
    <meta name="twitter:description" content=" [항해플러스 프론트엔드 6기] 신홍준님이 제출한 [9팀 신홍준] Chapter 1-2. 프레임워크 없이 SPA 만들기 (2) 과제를 확인하세요. 코드 구현, 문제 해결 과정, 피드백 내용을 상세히 살펴볼 수 있습니다." />
    <meta name="twitter:image" content="/defaultThumbnail.jpg" />
  
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-6J8QP7YK1E"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-6J8QP7YK1E');
  </script>
  <script type="module" crossorigin src="/front_6th/assets/index-DtEqFcg_.js"></script>
  <link rel="stylesheet" crossorigin href="/front_6th/assets/index-BXO68frB.css">
</head>
<body>
<div id="root"><div data-slot="sidebar-wrapper" style="--sidebar-width:16rem;--sidebar-width-icon:3rem" class="group/sidebar-wrapper has-data-[variant=inset]:bg-sidebar flex min-h-svh w-full"><div class="min-h-screen flex w-full"><div class="group peer text-sidebar-foreground hidden md:block" data-state="expanded" data-collapsible="" data-variant="sidebar" data-side="left" data-slot="sidebar"><div data-slot="sidebar-gap" class="relative w-(--sidebar-width) bg-transparent transition-[width] duration-200 ease-linear group-data-[collapsible=offcanvas]:w-0 group-data-[side=right]:rotate-180 group-data-[collapsible=icon]:w-(--sidebar-width-icon)"></div><div data-slot="sidebar-container" class="fixed inset-y-0 z-10 hidden h-svh transition-[left,right,width] duration-200 ease-linear md:flex left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)] group-data-[collapsible=icon]:w-(--sidebar-width-icon) group-data-[side=left]:border-r group-data-[side=right]:border-l w-64"><div data-sidebar="sidebar" data-slot="sidebar-inner" class="bg-sidebar group-data-[variant=floating]:border-sidebar-border flex h-full w-full flex-col group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:shadow-sm"><div data-slot="sidebar-content" data-sidebar="content" class="flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden bg-card border-r border-border"><a class="p-4" href="/front_6th/" data-discover="true"><div class="flex items-center space-x-2 mb-6"><div class="w-8 h-8 bg-gradient-primary rounded-lg flex items-center justify-center"><span class="text-white font-bold text-sm">6기</span></div><h4 class="text-lg font-bold text-primary">항해플러스 프론트엔드</h4></div></a><div data-slot="sidebar-group" data-sidebar="group" class="relative flex w-full min-w-0 flex-col p-2"><div data-slot="sidebar-group-label" data-sidebar="group-label" class="ring-sidebar-ring flex h-8 shrink-0 items-center rounded-md text-xs font-medium outline-hidden transition-[margin,opacity] duration-200 ease-linear focus-visible:ring-2 [&amp;&gt;svg]:size-4 [&amp;&gt;svg]:shrink-0 group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0 text-muted-foreground px-4">학습 관리</div><div data-slot="sidebar-group-content" data-sidebar="group-content" class="w-full text-sm"><ul data-slot="sidebar-menu" data-sidebar="menu" class="flex w-full min-w-0 flex-col gap-1 px-2"><li data-slot="sidebar-menu-item" data-sidebar="menu-item" class="group/menu-item relative"><a data-slot="sidebar-menu-button" data-sidebar="menu-button" data-size="default" data-active="false" class="peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left outline-hidden ring-sidebar-ring transition-[width,height,padding] focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-data-[sidebar=menu-action]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:size-8! group-data-[collapsible=icon]:p-2! [&amp;&gt;span:last-child]:truncate [&amp;&gt;svg]:size-4 [&amp;&gt;svg]:shrink-0 hover:bg-sidebar-accent hover:text-sidebar-accent-foreground text-sm h-12 text-foreground hover:bg-secondary hover:text-secondary-foreground rounded-lg transition-all duration-300" href="/front_6th/" data-discover="true"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-users h-5 w-5" aria-hidden="true"><path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"></path><path d="M16 3.128a4 4 0 0 1 0 7.744"></path><path d="M22 21v-2a4 4 0 0 0-3-3.87"></path><circle cx="9" cy="7" r="4"></circle></svg><span class="ml-3">수강생 목록</span></a></li><li data-slot="sidebar-menu-item" data-sidebar="menu-item" class="group/menu-item relative"><a data-slot="sidebar-menu-button" data-sidebar="menu-button" data-size="default" data-active="false" class="peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left outline-hidden ring-sidebar-ring transition-[width,height,padding] focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-data-[sidebar=menu-action]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:size-8! group-data-[collapsible=icon]:p-2! [&amp;&gt;span:last-child]:truncate [&amp;&gt;svg]:size-4 [&amp;&gt;svg]:shrink-0 hover:bg-sidebar-accent hover:text-sidebar-accent-foreground text-sm h-12 text-foreground hover:bg-secondary hover:text-secondary-foreground rounded-lg transition-all duration-300" href="/front_6th/assignments/" data-discover="true"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-book-open h-5 w-5" aria-hidden="true"><path d="M12 7v14"></path><path d="M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z"></path></svg><span class="ml-3">과제 목록</span></a></li></ul></div></div></div></div></div></div><div class="flex-1 min-w-0"><header class="h-12 flex items-center border-b border-border bg-card px-4"><button data-slot="sidebar-trigger" class="inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 size-7 mr-4 text-white" data-sidebar="trigger"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-panel-left" aria-hidden="true"><rect width="18" height="18" x="3" y="3" rx="2"></rect><path d="M9 3v18"></path></svg><span class="sr-only">Toggle Sidebar</span></button><h4 class="text-lg font-semibold "><a href="/front_6th/@jun17183/" data-discover="true">jun17183<!-- --> 님의 상세페이지</a> ＞ <!-- -->[9팀 신홍준] Chapter 1-2. 프레임워크 없이 SPA 만들기 (2)</h4></header><main class="p-6"><div><div class="card-wrap"><div data-slot="card" class="card text-card-foreground flex flex-col gap-6 shadow-sm mb-6 p-6 border border-gray-700 bg-gray-800 rounded-lg"><a href="https://github.com/hanghae-plus/front_6th_chapter1-2/pull/2" target="_blank"><div class="flex items-start gap-4"><div class="flex-shrink-0"><svg xmlns="http://www.w3.org/2000/svg" height="32" aria-hidden="true" viewBox="0 0 24 24" width="32" fill="white" class="w-8 h-8"><path d="M12 1C5.923 1 1 5.923 1 12c0 4.867 3.149 8.979 7.521 10.436.55.096.756-.233.756-.522 0-.262-.013-1.128-.013-2.049-2.764.509-3.479-.674-3.699-1.292-.124-.317-.66-1.293-1.127-1.554-.385-.207-.936-.715-.014-.729.866-.014 1.485.797 1.691 1.128.99 1.663 2.571 1.196 3.204.907.096-.715.385-1.196.701-1.471-2.448-.275-5.005-1.224-5.005-5.432 0-1.196.426-2.186 1.128-2.956-.111-.275-.496-1.402.11-2.915 0 0 .921-.288 3.024 1.128a10.193 10.193 0 0 1 2.75-.371c.936 0 1.871.123 2.75.371 2.104-1.43 3.025-1.128 3.025-1.128.605 1.513.221 2.64.111 2.915.701.77 1.127 1.747 1.127 2.956 0 4.222-2.571 5.157-5.019 5.432.399.344.743 1.004.743 2.035 0 1.471-.014 2.654-.014 3.025 0 .289.206.632.756.522C19.851 20.979 23 16.854 23 12c0-6.077-4.922-11-11-11Z"></path></svg></div><div class="flex-1 min-w-0"><div class="flex items-center gap-2 mb-2"><h3 class="text-lg font-semibold text-white truncate">[9팀 신홍준] Chapter 1-2. 프레임워크 없이 SPA 만들기 (2)</h3></div><div class="flex items-center gap-4 text-xs text-gray-500"><span>by <!-- -->jun17183</span><span>2025. 7. 12.</span></div></div></div></a></div></div><div class="overflow-auto"><div data-color-mode="dark" class="wmde-markdown wmde-markdown-color p-6 max-w-full" style="word-wrap:break-word;overflow-wrap:break-word"><h2 id="과제-체크포인트"><a class="anchor" aria-hidden="true" tabindex="-1" href="#과제-체크포인트"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>과제 체크포인트</h2>
<h3 id="배포-링크"><a class="anchor" aria-hidden="true" tabindex="-1" href="#배포-링크"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>배포 링크</h3>
<p><a href="https://jun17183.github.io/front_6th_chapter1-2/">https://jun17183.github.io/front_6th_chapter1-2/</a></p>
<h3 id="기본과제"><a class="anchor" aria-hidden="true" tabindex="-1" href="#기본과제"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>기본과제</h3>
<h4 id="가상돔을-기반으로-렌더링하기"><a class="anchor" aria-hidden="true" tabindex="-1" href="#가상돔을-기반으로-렌더링하기"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>가상돔을 기반으로 렌더링하기</h4>
<ul class="contains-task-list">
<li class="task-list-item"><input type="checkbox" disabled="" checked=""/> createVNode 함수를 이용하여 vNode를 만든다.</li>
<li class="task-list-item"><input type="checkbox" disabled="" checked=""/> normalizeVNode 함수를 이용하여 vNode를 정규화한다.</li>
<li class="task-list-item"><input type="checkbox" disabled="" checked=""/> createElement 함수를 이용하여 vNode를 실제 DOM으로 만든다.</li>
<li class="task-list-item"><input type="checkbox" disabled="" checked=""/> 결과적으로, JSX를 실제 DOM으로 변환할 수 있도록 만들었다.</li>
</ul>
<h4 id="이벤트-위임"><a class="anchor" aria-hidden="true" tabindex="-1" href="#이벤트-위임"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>이벤트 위임</h4>
<ul class="contains-task-list">
<li class="task-list-item"><input type="checkbox" disabled="" checked=""/> 노드를 생성할 때 이벤트를 직접 등록하는게 아니라 이벤트 위임 방식으로 등록해야 한다</li>
<li class="task-list-item"><input type="checkbox" disabled="" checked=""/> 동적으로 추가된 요소에도 이벤트가 정상적으로 작동해야 한다</li>
<li class="task-list-item"><input type="checkbox" disabled="" checked=""/> 이벤트 핸들러가 제거되면 더 이상 호출되지 않아야 한다</li>
</ul>
<h3 id="심화-과제"><a class="anchor" aria-hidden="true" tabindex="-1" href="#심화-과제"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>심화 과제</h3>
<h4 id="diff-알고리즘-구현"><a class="anchor" aria-hidden="true" tabindex="-1" href="#diff-알고리즘-구현"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Diff 알고리즘 구현</h4>
<ul class="contains-task-list">
<li class="task-list-item"><input type="checkbox" disabled="" checked=""/> 초기 렌더링이 올바르게 수행되어야 한다</li>
<li class="task-list-item"><input type="checkbox" disabled="" checked=""/> diff 알고리즘을 통해 변경된 부분만 업데이트해야 한다</li>
<li class="task-list-item"><input type="checkbox" disabled="" checked=""/> 새로운 요소를 추가하고 불필요한 요소를 제거해야 한다</li>
<li class="task-list-item"><input type="checkbox" disabled="" checked=""/> 요소의 속성만 변경되었을 때 요소를 재사용해야 한다</li>
<li class="task-list-item"><input type="checkbox" disabled="" checked=""/> 요소의 타입이 변경되었을 때 새로운 요소를 생성해야 한다</li>
</ul>
<hr/>
<h2 id="과제-셀프회고"><a class="anchor" aria-hidden="true" tabindex="-1" href="#과제-셀프회고"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>과제 셀프회고</h2>
<p>이번 과제는 테스트 코드를 요구사항 명세서처럼 참고하며 순차적으로 진행하면 수월하게 통과할 수 있는 과제였습니다. 난이도가 상대적으로 이전 주차보다 쉽고 진행방향이 명확하기에 1주차보다 좀 더 체계적이면서 개념을 잘 익힐 수 있도록 문서로 정리해 가며 진행하기로 했습니다.</p>
<p>우선 AI에게 과제의 주제와 목표에 대해 설명했습니다. 가상 돔을 구현하는 과제로, UI나 서비스 등은 미리 구현이 되어 있는 템플릿이 주어지며 내용이 비어있는 함수를 구현하면 된다고 알려주었습니다. 목표는 basic 테스트를 우선으로 advanced를 거쳐 e2e 테스트까지 성공하는 것이며, 하나의 테스트 케이스씩 통과하기 위해 코드를 추가하는 방향으로 진행해 달라고 하였습니다. 또한 각 함수 구현에 앞서 중요한 개념 학습을 먼저 거친 후에 코드를 작성하였습니다.</p>
<p>예시)
Q. createVNode를 구현하기 전에 이해가 부족한 거 같아. 가상 돔을 만들기 위한 객체를 만드는 역할 정도로만 이해하고 있어. 하지만 왜 평탄화가 필요한지, 언제 호출되는지 등은 모르겠어.
A. (평탄화가 필요한 이유...) (JSX (설계도) → createVNode (부품 정리) → createElement (실제 조립)...)</p>
<p>Q. 평탄화를 하지 않은 채로 createElement를 호출한다면?
A. 매번 타입을 체크할 필요 없이 일관되게 처리 가능. 성능에 큰 차이는 없지만 불변 조건을 만들어 단순성을 보장하고 버그를 방지</p>
<p>테스트 코드) null, undefined, boolean 값은 빈 문자열로 변환되어야 한다.
코드 추가)</p>
<pre class="language-js"><code class="language-js code-highlight"><span class="code-line"><span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>vNode <span class="token operator">===</span> <span class="token keyword null nil">null</span> <span class="token operator">||</span> vNode <span class="token operator">===</span> <span class="token keyword nil">undefined</span> <span class="token operator">||</span> <span class="token keyword">typeof</span> vNode <span class="token operator">===</span> <span class="token string">&#x27;boolean&#x27;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token keyword control-flow">return</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span><span class="code-line"><span class="token comment">// 여기까지 추가하고 다음 테스트 진행</span>
</span></code><div class="copied" data-code="if (vNode === null || vNode === undefined || typeof vNode === &#x27;boolean&#x27;) {
  return &quot;&quot;;
}
// 여기까지 추가하고 다음 테스트 진행
"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
<p>코드 작성 진행 전 아래와 같이 문서를 작성하였고, 테스트 코드를 하나씩 통과하며 문서를 업데이트 하였습니다.</p>
<details>
<summary>createVNode</summary>
createVNode는 파싱된 jsx로부터 노드 정보를 받아 가상 노드 객체로 바꾸어 주는 함수
<h4 id="구성-요소"><a aria-hidden="true" tabindex="-1" href="#구성-요소"><span class="icon icon-link"></span></a>구성 요소</h4>
<ol>
<li>type: text나 div와 같은 태그명</li>
<li>props: 태그 속성</li>
<li>children: 자식 node</li>
</ol>
<h4 id="평탄화"><a aria-hidden="true" tabindex="-1" href="#평탄화"><span class="icon icon-link"></span></a>평탄화</h4>
<p>평탄화는 중첩된 배열을 하나의 평평한 배열로 만드는 과정을 말한다.</p>
<pre class="language-jsx"><code class="language-jsx code-highlight"><span class="code-line"><span class="token keyword">const</span> items <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&#x27;apple&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;banana&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">&gt;</span></span><span class="token plain-text"> 
</span></span><span class="code-line"><span class="token plain-text">	</span><span class="token punctuation">{</span>items<span class="token punctuation">.</span><span class="token method function property-access">map</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token arrow operator">=&gt;</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">key</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>item<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span>item<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token plain-text"> 
</span></span><span class="code-line"><span class="token plain-text"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span>
</span></code><div class="copied" data-code="const items = [&#x27;apple&#x27;, &#x27;banana&#x27;];

&lt;ul&gt; 
	{items.map(item =&gt; &lt;li key={item}&gt;{item}&lt;/li&gt;)} 
&lt;/ul&gt;
"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
<p>위와 같은 jsx가 있을 때 평탄화 하기 전 객체는 아래와 같다.</p>
<pre class="language-js"><code class="language-js code-highlight"><span class="code-line"><span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token string-property property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ul&quot;</span><span class="token punctuation">,</span>
</span><span class="code-line">  <span class="token string-property property">&quot;props&quot;</span><span class="token operator">:</span> <span class="token keyword null nil">null</span><span class="token punctuation">,</span>
</span><span class="code-line">  <span class="token string-property property">&quot;children&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
</span><span class="code-line">    <span class="token punctuation">[</span>
</span><span class="code-line">      <span class="token punctuation">{</span>
</span><span class="code-line">        <span class="token string-property property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;li&quot;</span><span class="token punctuation">,</span>
</span><span class="code-line">        <span class="token string-property property">&quot;props&quot;</span><span class="token operator">:</span> <span class="token keyword null nil">null</span><span class="token punctuation">,</span>
</span><span class="code-line">        <span class="token string-property property">&quot;children&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
</span><span class="code-line">          <span class="token string">&quot;apple&quot;</span>
</span><span class="code-line">        <span class="token punctuation">]</span>
</span><span class="code-line">      <span class="token punctuation">}</span><span class="token punctuation">,</span>
</span><span class="code-line">      <span class="token punctuation">{</span>
</span><span class="code-line">        <span class="token string-property property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;li&quot;</span><span class="token punctuation">,</span>
</span><span class="code-line">        <span class="token string-property property">&quot;props&quot;</span><span class="token operator">:</span> <span class="token keyword null nil">null</span><span class="token punctuation">,</span>
</span><span class="code-line">        <span class="token string-property property">&quot;children&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
</span><span class="code-line">          <span class="token string">&quot;banana&quot;</span>
</span><span class="code-line">        <span class="token punctuation">]</span>
</span><span class="code-line">      <span class="token punctuation">}</span>
</span><span class="code-line">    <span class="token punctuation">]</span>
</span><span class="code-line">  <span class="token punctuation">]</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code><div class="copied" data-code="{
  &quot;type&quot;: &quot;ul&quot;,
  &quot;props&quot;: null,
  &quot;children&quot;: [
    [
      {
        &quot;type&quot;: &quot;li&quot;,
        &quot;props&quot;: null,
        &quot;children&quot;: [
          &quot;apple&quot;
        ]
      },
      {
        &quot;type&quot;: &quot;li&quot;,
        &quot;props&quot;: null,
        &quot;children&quot;: [
          &quot;banana&quot;
        ]
      }
    ]
  ]
}
"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
<p>이 객체를 평탄화하지 않은 채로 실제 DOM에 적용하려면 아래와 같이 코드가 복잡해진다.</p>
<pre class="language-js"><code class="language-js code-highlight"><span class="code-line"><span class="token comment">// 1. 평탄화 없는 createVNode </span>
</span><span class="code-line"><span class="token keyword">function</span> <span class="token function">createVNodeWithoutFlatten</span><span class="token punctuation">(</span><span class="token parameter">type<span class="token punctuation">,</span> props<span class="token punctuation">,</span> <span class="token spread operator">...</span>children</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
</span><span class="code-line">	<span class="token keyword control-flow">return</span> <span class="token punctuation">{</span> type<span class="token punctuation">,</span> props<span class="token punctuation">,</span> children <span class="token punctuation">}</span><span class="token punctuation">;</span> 
</span><span class="code-line"><span class="token punctuation">}</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment">// 3. createElement 함수 (평탄화 X) </span>
</span><span class="code-line"><span class="token keyword">function</span> <span class="token function">createElement</span><span class="token punctuation">(</span><span class="token parameter">vNode</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
</span><span class="code-line">	<span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token string">&#x27;createElement 호출:&#x27;</span><span class="token punctuation">,</span> vNode<span class="token punctuation">)</span><span class="token punctuation">;</span> 
</span><span class="code-line">	
</span><span class="code-line">	<span class="token keyword control-flow">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> vNode <span class="token operator">===</span> <span class="token string">&#x27;string&#x27;</span> <span class="token operator">||</span> <span class="token keyword">typeof</span> vNode <span class="token operator">===</span> <span class="token string">&#x27;number&#x27;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
</span><span class="code-line">		<span class="token keyword control-flow">return</span> <span class="token dom variable">document</span><span class="token punctuation">.</span><span class="token method function property-access">createTextNode</span><span class="token punctuation">(</span>vNode<span class="token punctuation">)</span><span class="token punctuation">;</span> 
</span><span class="code-line">	<span class="token punctuation">}</span> 
</span><span class="code-line">	
</span><span class="code-line">	<span class="token keyword control-flow">if</span> <span class="token punctuation">(</span><span class="token known-class-name class-name">Array</span><span class="token punctuation">.</span><span class="token method function property-access">isArray</span><span class="token punctuation">(</span>vNode<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
</span><span class="code-line">		<span class="token comment">// 복잡한 로직 필요 </span>
</span><span class="code-line">		<span class="token keyword">const</span> fragment <span class="token operator">=</span> <span class="token dom variable">document</span><span class="token punctuation">.</span><span class="token method function property-access">createDocumentFragment</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
</span><span class="code-line">		vNode<span class="token punctuation">.</span><span class="token method function property-access">forEach</span><span class="token punctuation">(</span><span class="token parameter">child</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span> 
</span><span class="code-line">			fragment<span class="token punctuation">.</span><span class="token method function property-access">appendChild</span><span class="token punctuation">(</span><span class="token function">createElement</span><span class="token punctuation">(</span>child<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
</span><span class="code-line">		<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
</span><span class="code-line">		<span class="token keyword control-flow">return</span> fragment<span class="token punctuation">;</span> 
</span><span class="code-line">	<span class="token punctuation">}</span> 
</span><span class="code-line">	
</span><span class="code-line">	<span class="token keyword">const</span> element <span class="token operator">=</span> <span class="token dom variable">document</span><span class="token punctuation">.</span><span class="token method function property-access">createElement</span><span class="token punctuation">(</span>vNode<span class="token punctuation">.</span><span class="token property-access">type</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
</span><span class="code-line">	
</span><span class="code-line">	<span class="token comment">// 속성 처리 </span>
</span><span class="code-line">	<span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>vNode<span class="token punctuation">.</span><span class="token property-access">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
</span><span class="code-line">		<span class="token known-class-name class-name">Object</span><span class="token punctuation">.</span><span class="token method function property-access">entries</span><span class="token punctuation">(</span>vNode<span class="token punctuation">.</span><span class="token property-access">props</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">[</span>key<span class="token punctuation">,</span> value<span class="token punctuation">]</span></span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span> 
</span><span class="code-line">			<span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>key <span class="token operator">===</span> <span class="token string">&#x27;className&#x27;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
</span><span class="code-line">				element<span class="token punctuation">.</span><span class="token property-access">className</span> <span class="token operator">=</span> value<span class="token punctuation">;</span> 
</span><span class="code-line">			<span class="token punctuation">}</span> <span class="token keyword control-flow">else</span> <span class="token punctuation">{</span> 
</span><span class="code-line">				element<span class="token punctuation">.</span><span class="token method function property-access">setAttribute</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span> 
</span><span class="code-line">			<span class="token punctuation">}</span> 
</span><span class="code-line">		<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
</span><span class="code-line">	<span class="token punctuation">}</span> 
</span><span class="code-line">	
</span><span class="code-line">	<span class="token comment">// 자식 처리</span>
</span><span class="code-line">	vNode<span class="token punctuation">.</span><span class="token property-access">children</span><span class="token punctuation">.</span><span class="token method function property-access">forEach</span><span class="token punctuation">(</span><span class="token parameter">child</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span> 
</span><span class="code-line">		<span class="token keyword control-flow">try</span> <span class="token punctuation">{</span> 
</span><span class="code-line">			element<span class="token punctuation">.</span><span class="token method function property-access">appendChild</span><span class="token punctuation">(</span><span class="token function">createElement</span><span class="token punctuation">(</span>child<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
</span><span class="code-line">		<span class="token punctuation">}</span> <span class="token keyword control-flow">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span> 
</span><span class="code-line">			<span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">error</span><span class="token punctuation">(</span><span class="token string">&#x27;createElement 에러:&#x27;</span><span class="token punctuation">,</span> error<span class="token punctuation">.</span><span class="token property-access">message</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">			element<span class="token punctuation">.</span><span class="token method function property-access">appendChild</span><span class="token punctuation">(</span><span class="token dom variable">document</span><span class="token punctuation">.</span><span class="token method function property-access">createTextNode</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">[ERROR:</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>error<span class="token punctuation">.</span><span class="token property-access">message</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">]</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
</span><span class="code-line">		<span class="token punctuation">}</span> 
</span><span class="code-line">	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
</span><span class="code-line">			
</span><span class="code-line">	<span class="token keyword control-flow">return</span> element<span class="token punctuation">;</span> 
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code><div class="copied" data-code="// 1. 평탄화 없는 createVNode 
function createVNodeWithoutFlatten(type, props, ...children) { 
	return { type, props, children }; 
}

// 3. createElement 함수 (평탄화 X) 
function createElement(vNode) { 
	console.log(&#x27;createElement 호출:&#x27;, vNode); 
	
	if (typeof vNode === &#x27;string&#x27; || typeof vNode === &#x27;number&#x27;) { 
		return document.createTextNode(vNode); 
	} 
	
	if (Array.isArray(vNode)) { 
		// 복잡한 로직 필요 
		const fragment = document.createDocumentFragment(); 
		vNode.forEach(child =&gt; { 
			fragment.appendChild(createElement(child)); 
		}); 
		return fragment; 
	} 
	
	const element = document.createElement(vNode.type); 
	
	// 속성 처리 
	if (vNode.props) { 
		Object.entries(vNode.props).forEach(([key, value]) =&gt; { 
			if (key === &#x27;className&#x27;) { 
				element.className = value; 
			} else { 
				element.setAttribute(key, value); 
			} 
		}); 
	} 
	
	// 자식 처리
	vNode.children.forEach(child =&gt; { 
		try { 
			element.appendChild(createElement(child)); 
		} catch (error) { 
			console.error(&#x27;createElement 에러:&#x27;, error.message);
			element.appendChild(document.createTextNode(`[ERROR:${error.message}]`)); 
		} 
	}); 
			
	return element; 
}
"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
<p>하지만 평탄화가 되어 있다면 아래와 같이 코드가 간단해진다.</p>
<pre class="language-js"><code class="language-js code-highlight"><span class="code-line"><span class="token comment">// 평탄화</span>
</span><span class="code-line"><span class="token keyword">function</span> <span class="token function">flattenArray</span><span class="token punctuation">(</span><span class="token parameter">arr</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
</span><span class="code-line">	<span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span> 
</span><span class="code-line">	
</span><span class="code-line">	<span class="token keyword control-flow">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> item <span class="token keyword">of</span> arr<span class="token punctuation">)</span> <span class="token punctuation">{</span> 
</span><span class="code-line">		<span class="token keyword control-flow">if</span> <span class="token punctuation">(</span><span class="token known-class-name class-name">Array</span><span class="token punctuation">.</span><span class="token method function property-access">isArray</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
</span><span class="code-line">			result<span class="token punctuation">.</span><span class="token method function property-access">push</span><span class="token punctuation">(</span><span class="token spread operator">...</span><span class="token method function property-access">flattenArray</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
</span><span class="code-line">		<span class="token punctuation">}</span> <span class="token keyword control-flow">else</span> <span class="token punctuation">{</span> 
</span><span class="code-line">			result<span class="token punctuation">.</span><span class="token method function property-access">push</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">;</span> 
</span><span class="code-line">		<span class="token punctuation">}</span> 
</span><span class="code-line">	<span class="token punctuation">}</span> 
</span><span class="code-line">	
</span><span class="code-line">	<span class="token keyword control-flow">return</span> result<span class="token punctuation">;</span> 
</span><span class="code-line"><span class="token punctuation">}</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment">// vNode 생성</span>
</span><span class="code-line"><span class="token keyword">function</span> <span class="token function">createVNodeWithFlatten</span><span class="token punctuation">(</span><span class="token parameter">type<span class="token punctuation">,</span> props<span class="token punctuation">,</span> <span class="token spread operator">...</span>children</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
</span><span class="code-line">	<span class="token keyword control-flow">return</span> <span class="token punctuation">{</span> 
</span><span class="code-line">		type<span class="token punctuation">,</span> 
</span><span class="code-line">		props<span class="token punctuation">,</span> 
</span><span class="code-line">		<span class="token literal-property property">children</span><span class="token operator">:</span> <span class="token function">flattenArray</span><span class="token punctuation">(</span>children<span class="token punctuation">)</span> 
</span><span class="code-line">	<span class="token punctuation">}</span><span class="token punctuation">;</span> 
</span><span class="code-line"><span class="token punctuation">}</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment">// DOM 생성이 단순해짐 </span>
</span><span class="code-line"><span class="token keyword">function</span> <span class="token function">createElement</span><span class="token punctuation">(</span><span class="token parameter">vNode</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
</span><span class="code-line">	<span class="token keyword control-flow">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> vNode <span class="token operator">===</span> <span class="token string">&#x27;string&#x27;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
</span><span class="code-line">		<span class="token keyword control-flow">return</span> <span class="token dom variable">document</span><span class="token punctuation">.</span><span class="token method function property-access">createTextNode</span><span class="token punctuation">(</span>vNode<span class="token punctuation">)</span><span class="token punctuation">;</span> 
</span><span class="code-line">	<span class="token punctuation">}</span> 
</span><span class="code-line">	
</span><span class="code-line">	<span class="token keyword">const</span> element <span class="token operator">=</span> <span class="token dom variable">document</span><span class="token punctuation">.</span><span class="token method function property-access">createElement</span><span class="token punctuation">(</span>vNode<span class="token punctuation">.</span><span class="token property-access">type</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
</span><span class="code-line">	
</span><span class="code-line">	<span class="token comment">// 배열 중첩 걱정 없이 단순하게 처리 </span>
</span><span class="code-line">	vNode<span class="token punctuation">.</span><span class="token property-access">children</span><span class="token punctuation">.</span><span class="token method function property-access">forEach</span><span class="token punctuation">(</span><span class="token parameter">child</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span> 
</span><span class="code-line">		element<span class="token punctuation">.</span><span class="token method function property-access">appendChild</span><span class="token punctuation">(</span><span class="token function">createElement</span><span class="token punctuation">(</span>child<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
</span><span class="code-line">	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
</span><span class="code-line">	
</span><span class="code-line">	<span class="token keyword control-flow">return</span> element<span class="token punctuation">;</span> 
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code><div class="copied" data-code="// 평탄화
function flattenArray(arr) { 
	const result = []; 
	
	for (const item of arr) { 
		if (Array.isArray(item)) { 
			result.push(...flattenArray(item)); 
		} else { 
			result.push(item); 
		} 
	} 
	
	return result; 
}

// vNode 생성
function createVNodeWithFlatten(type, props, ...children) { 
	return { 
		type, 
		props, 
		children: flattenArray(children) 
	}; 
}

// DOM 생성이 단순해짐 
function createElement(vNode) { 
	if (typeof vNode === &#x27;string&#x27;) { 
		return document.createTextNode(vNode); 
	} 
	
	const element = document.createElement(vNode.type); 
	
	// 배열 중첩 걱정 없이 단순하게 처리 
	vNode.children.forEach(child =&gt; { 
		element.appendChild(createElement(child)); 
	}); 
	
	return element; 
}
"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
<h4 id="구현-코드"><a aria-hidden="true" tabindex="-1" href="#구현-코드"><span class="icon icon-link"></span></a>구현 코드</h4>
<pre class="language-js"><code class="language-js code-highlight"><span class="code-line"><span class="token keyword">function</span> <span class="token function">flattenArray</span><span class="token punctuation">(</span><span class="token parameter">arr</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
</span><span class="code-line">	<span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span> 
</span><span class="code-line">	
</span><span class="code-line">	<span class="token keyword control-flow">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> item <span class="token keyword">of</span> arr<span class="token punctuation">)</span> <span class="token punctuation">{</span> 
</span><span class="code-line">		<span class="token keyword control-flow">if</span> <span class="token punctuation">(</span><span class="token known-class-name class-name">Array</span><span class="token punctuation">.</span><span class="token method function property-access">isArray</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
</span><span class="code-line">			result<span class="token punctuation">.</span><span class="token method function property-access">push</span><span class="token punctuation">(</span><span class="token spread operator">...</span><span class="token method function property-access">flattenArray</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
</span><span class="code-line">		<span class="token punctuation">}</span> 
</span><span class="code-line">		<span class="token comment">// jsx 파싱 결과 null, undefined, false가 arr에 들어갈 수도 있기에</span>
</span><span class="code-line">		<span class="token comment">// 이를 걸러준다.</span>
</span><span class="code-line">		<span class="token keyword control-flow">else</span> <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>item <span class="token operator">!==</span> <span class="token keyword null nil">null</span> <span class="token operator">&amp;&amp;</span> item <span class="token operator">!==</span> <span class="token keyword nil">undefined</span> <span class="token operator">&amp;&amp;</span> item <span class="token operator">!==</span> <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">		    result<span class="token punctuation">.</span><span class="token method function property-access">push</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">;</span> 
</span><span class="code-line">	    <span class="token punctuation">}</span>
</span><span class="code-line">	<span class="token punctuation">}</span> 
</span><span class="code-line">	
</span><span class="code-line">	<span class="token keyword control-flow">return</span> result<span class="token punctuation">;</span> 
</span><span class="code-line"><span class="token punctuation">}</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword module">export</span> <span class="token keyword">function</span> <span class="token function">createVNode</span><span class="token punctuation">(</span><span class="token parameter">type<span class="token punctuation">,</span> props<span class="token punctuation">,</span> <span class="token spread operator">...</span>children</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">	<span class="token keyword control-flow">return</span> <span class="token punctuation">{</span>
</span><span class="code-line">	    type<span class="token punctuation">,</span>
</span><span class="code-line">	    props<span class="token punctuation">,</span>
</span><span class="code-line">	    children<span class="token operator">:</span> <span class="token function">flattenArray</span><span class="token punctuation">(</span>children<span class="token punctuation">)</span><span class="token punctuation">,</span>
</span><span class="code-line">	<span class="token punctuation">}</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code><div class="copied" data-code="function flattenArray(arr) { 
	const result = []; 
	
	for (const item of arr) { 
		if (Array.isArray(item)) { 
			result.push(...flattenArray(item)); 
		} 
		// jsx 파싱 결과 null, undefined, false가 arr에 들어갈 수도 있기에
		// 이를 걸러준다.
		else if (item !== null &amp;&amp; item !== undefined &amp;&amp; item !== false) {
		    result.push(item); 
	    }
	} 
	
	return result; 
}

export function createVNode(type, props, ...children) {
	return {
	    type,
	    props,
	    children: flattenArray(children),
	};
}
"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
</details>
<details>
<summary>normalizeVNode</summary>
<p>createVNode가 jsx를 가상 노드(vNode)로 바꾸어 주는 함수라면 normalizeVNode는 vNode를 렌더링 가능한 형태로 변환하는 역할이다.</p>
<p>createVNode 호출 시점은 컴파일 타임으로 배열 평탄화만을 담당하지만, normalizeVNode는 런타임(렌더링 직전) 시 호출하여 함수 컴포넌트 실행, 타입 변환, 재귀 정규화를 담당한다. 이때 함수 컴포넌트는 HTML 태그로 변환된다.</p>
<blockquote>
<p>JSX → createVNode → normalizeVNode → createElement → DOM</p>
</blockquote>
<h4 id="jsx와-함수형-컴포넌트"><a aria-hidden="true" tabindex="-1" href="#jsx와-함수형-컴포넌트"><span class="icon icon-link"></span></a>JSX와 함수형 컴포넌트</h4>
<p>normalizeVNode 시 주의해야 할 점 첫 번째, 함수형 컴포넌트는 JSX의 children을 props로 받는다. 상세한 변환 과정은 아래와 같다.</p>
<pre class="language-jsx"><code class="language-jsx code-highlight"><span class="code-line"><span class="token comment">// JSX 원본</span>
</span><span class="code-line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">UnorderedList</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
</span></span><span class="code-line"><span class="token plain-text">	</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Item 1</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
</span></span><span class="code-line"><span class="token plain-text">	</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Item 2</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
</span></span><span class="code-line"><span class="token plain-text"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">UnorderedList</span></span><span class="token punctuation">&gt;</span></span>
</span></code><div class="copied" data-code="// JSX 원본
&lt;UnorderedList&gt;
	&lt;li&gt;Item 1&lt;/li&gt;
	&lt;li&gt;Item 2&lt;/li&gt;
&lt;/UnorderedList&gt;
"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
<pre class="language-jsx"><code class="language-jsx code-highlight"><span class="code-line"><span class="token comment">// 함수 컴포넌트 정의</span>
</span><span class="code-line"><span class="token keyword">const</span> <span class="token function-variable function"><span class="token maybe-class-name">UnorderedList</span></span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> children <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">	<span class="token comment">// children = [&lt;li&gt;Item 1&lt;/li&gt;, &lt;li&gt;Item 2&lt;/li&gt;]</span>
</span><span class="code-line">	<span class="token keyword control-flow">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span>children<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token punctuation">}</span><span class="token punctuation">;</span>
</span></code><div class="copied" data-code="// 함수 컴포넌트 정의
const UnorderedList = ({ children }) =&gt; {
	// children = [&lt;li&gt;Item 1&lt;/li&gt;, &lt;li&gt;Item 2&lt;/li&gt;]
	return &lt;ul&gt;{children}&lt;/ul&gt;;
};
"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
<pre class="language-js"><code class="language-js code-highlight"><span class="code-line"><span class="token comment">// 1. JSX → createVNode 변환</span>
</span><span class="code-line"><span class="token function">createVNode</span><span class="token punctuation">(</span><span class="token maybe-class-name">UnorderedList</span><span class="token punctuation">,</span> <span class="token keyword null nil">null</span><span class="token punctuation">,</span>
</span><span class="code-line">	<span class="token function">createVNode</span><span class="token punctuation">(</span><span class="token string">&#x27;li&#x27;</span><span class="token punctuation">,</span> <span class="token keyword null nil">null</span><span class="token punctuation">,</span> <span class="token string">&#x27;Item 1&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
</span><span class="code-line">	<span class="token function">createVNode</span><span class="token punctuation">(</span><span class="token string">&#x27;li&#x27;</span><span class="token punctuation">,</span> <span class="token keyword null nil">null</span><span class="token punctuation">,</span> <span class="token string">&#x27;Item 2&#x27;</span><span class="token punctuation">)</span>
</span><span class="code-line"><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment">// 2. 결과 vNode 구조</span>
</span><span class="code-line"><span class="token punctuation">{</span>
</span><span class="code-line">	<span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token maybe-class-name">UnorderedList</span><span class="token punctuation">,</span>  <span class="token comment">// 함수</span>
</span><span class="code-line">	<span class="token literal-property property">props</span><span class="token operator">:</span> <span class="token keyword null nil">null</span><span class="token punctuation">,</span>
</span><span class="code-line">	<span class="token literal-property property">children</span><span class="token operator">:</span> <span class="token punctuation">[</span>           
</span><span class="code-line">		<span class="token punctuation">{</span> <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&#x27;li&#x27;</span><span class="token punctuation">,</span> <span class="token literal-property property">children</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#x27;Item 1&#x27;</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
</span><span class="code-line">	    <span class="token punctuation">{</span> <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&#x27;li&#x27;</span><span class="token punctuation">,</span> <span class="token literal-property property">children</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#x27;Item 2&#x27;</span><span class="token punctuation">]</span> <span class="token punctuation">}</span>
</span><span class="code-line">	<span class="token punctuation">]</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment">// 3. 함수 호출 시 children을 props로 전달</span>
</span><span class="code-line"><span class="token function"><span class="token maybe-class-name">UnorderedList</span></span><span class="token punctuation">(</span><span class="token punctuation">{</span>
</span><span class="code-line">	<span class="token literal-property property">children</span><span class="token operator">:</span> <span class="token punctuation">[</span>           <span class="token comment">// props.children으로 전달</span>
</span><span class="code-line">	    <span class="token punctuation">{</span> <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&#x27;li&#x27;</span><span class="token punctuation">,</span> <span class="token literal-property property">children</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#x27;Item 1&#x27;</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
</span><span class="code-line">	    <span class="token punctuation">{</span> <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&#x27;li&#x27;</span><span class="token punctuation">,</span> <span class="token literal-property property">children</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#x27;Item 2&#x27;</span><span class="token punctuation">]</span> <span class="token punctuation">}</span>
</span><span class="code-line">	<span class="token punctuation">]</span>
</span><span class="code-line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></code><div class="copied" data-code="// 1. JSX → createVNode 변환
createVNode(UnorderedList, null,
	createVNode(&#x27;li&#x27;, null, &#x27;Item 1&#x27;),
	createVNode(&#x27;li&#x27;, null, &#x27;Item 2&#x27;)
);

// 2. 결과 vNode 구조
{
	type: UnorderedList,  // 함수
	props: null,
	children: [           
		{ type: &#x27;li&#x27;, children: [&#x27;Item 1&#x27;] },
	    { type: &#x27;li&#x27;, children: [&#x27;Item 2&#x27;] }
	]
}

// 3. 함수 호출 시 children을 props로 전달
UnorderedList({
	children: [           // props.children으로 전달
	    { type: &#x27;li&#x27;, children: [&#x27;Item 1&#x27;] },
	    { type: &#x27;li&#x27;, children: [&#x27;Item 2&#x27;] }
	]
});
"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
<p>두 번째, 함수형 컴포넌트에서 children이 1개라면 배열 그대로 props에 넘겨줄 필요 없이 children 1개만 넘겨주면 처리를 줄일 수 있다.</p>
<p>그래서 만약 vNode가 함수라면 아래와 같은 조건을 작성할 수 있다.</p>
<pre class="language-js"><code class="language-js code-highlight"><span class="code-line"><span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>vNode <span class="token operator">&amp;&amp;</span> <span class="token keyword">typeof</span> vNode <span class="token operator">===</span> <span class="token string">&#x27;object&#x27;</span> <span class="token operator">&amp;&amp;</span> <span class="token keyword">typeof</span> vNode<span class="token punctuation">.</span><span class="token property-access">type</span> <span class="token operator">===</span> <span class="token string">&#x27;function&#x27;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token keyword">const</span> props <span class="token operator">=</span> vNode<span class="token punctuation">.</span><span class="token property-access">props</span> <span class="token operator">||</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
</span><span class="code-line">    
</span><span class="code-line">    <span class="token comment">// children을 props로 전달해야 함</span>
</span><span class="code-line">    <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>vNode<span class="token punctuation">.</span><span class="token property-access">children</span> <span class="token operator">&amp;&amp;</span> vNode<span class="token punctuation">.</span><span class="token property-access">children</span><span class="token punctuation">.</span><span class="token property-access">length</span> <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">	    <span class="token comment">// children이 있으면 props.children으로 전달</span>
</span><span class="code-line">	    props<span class="token punctuation">.</span><span class="token property-access">children</span> <span class="token operator">=</span> vNode<span class="token punctuation">.</span><span class="token property-access">children</span><span class="token punctuation">.</span><span class="token property-access">length</span> <span class="token operator">===</span> <span class="token number">1</span> 
</span><span class="code-line">		    <span class="token operator">?</span> vNode<span class="token punctuation">.</span><span class="token property-access">children</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> 
</span><span class="code-line">		    <span class="token operator">:</span> vNode<span class="token punctuation">.</span><span class="token property-access">children</span><span class="token punctuation">;</span>
</span><span class="code-line">    <span class="token punctuation">}</span>
</span><span class="code-line">
</span><span class="code-line">    <span class="token keyword">const</span> result <span class="token operator">=</span> vNode<span class="token punctuation">.</span><span class="token method function property-access">type</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">    <span class="token keyword control-flow">return</span> <span class="token function">normalizeVNode</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code><div class="copied" data-code="if (vNode &amp;&amp; typeof vNode === &#x27;object&#x27; &amp;&amp; typeof vNode.type === &#x27;function&#x27;) {
    const props = vNode.props || {};
    
    // children을 props로 전달해야 함
    if (vNode.children &amp;&amp; vNode.children.length &gt; 0) {
	    // children이 있으면 props.children으로 전달
	    props.children = vNode.children.length === 1 
		    ? vNode.children[0] 
		    : vNode.children;
    }

    const result = vNode.type(props);
    return normalizeVNode(result);
}
"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
<h4 id="구현-코드-1"><a aria-hidden="true" tabindex="-1" href="#구현-코드-1"><span class="icon icon-link"></span></a>구현 코드</h4>
<pre class="language-js"><code class="language-js code-highlight"><span class="code-line"><span class="token keyword module">export</span> <span class="token keyword">function</span> <span class="token function">normalizeVNode</span><span class="token punctuation">(</span><span class="token parameter">vNode</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">	<span class="token comment">// 1. null, undefined, boolean → &quot;&quot;</span>
</span><span class="code-line">	<span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>vNode <span class="token operator">===</span> <span class="token keyword null nil">null</span> <span class="token operator">||</span> vNode <span class="token operator">===</span> <span class="token keyword nil">undefined</span> <span class="token operator">||</span> <span class="token keyword">typeof</span> vNode <span class="token operator">===</span> <span class="token string">&#x27;boolean&#x27;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">		<span class="token keyword control-flow">return</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
</span><span class="code-line">	<span class="token punctuation">}</span>
</span><span class="code-line">
</span><span class="code-line">	<span class="token comment">// 2. 문자열, 숫자 → 문자열</span>
</span><span class="code-line">	<span class="token keyword control-flow">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> vNode <span class="token operator">===</span> <span class="token string">&#x27;string&#x27;</span> <span class="token operator">||</span> <span class="token keyword">typeof</span> vNode <span class="token operator">===</span> <span class="token string">&#x27;number&#x27;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">	    <span class="token keyword control-flow">return</span> <span class="token known-class-name class-name">String</span><span class="token punctuation">(</span>vNode<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">	<span class="token punctuation">}</span>
</span><span class="code-line">
</span><span class="code-line">	<span class="token comment">// 3. 함수형 컴포넌트 처리</span>
</span><span class="code-line">	<span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>vNode <span class="token operator">&amp;&amp;</span> <span class="token keyword">typeof</span> vNode <span class="token operator">===</span> <span class="token string">&#x27;object&#x27;</span> <span class="token operator">&amp;&amp;</span> <span class="token keyword">typeof</span> vNode<span class="token punctuation">.</span><span class="token property-access">type</span> <span class="token operator">===</span> <span class="token string">&#x27;function&#x27;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">	    <span class="token keyword">const</span> props <span class="token operator">=</span> vNode<span class="token punctuation">.</span><span class="token property-access">props</span> <span class="token operator">||</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
</span><span class="code-line">    
</span><span class="code-line">	    <span class="token comment">// children을 props로 전달해야 함</span>
</span><span class="code-line">	    <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>vNode<span class="token punctuation">.</span><span class="token property-access">children</span> <span class="token operator">&amp;&amp;</span> vNode<span class="token punctuation">.</span><span class="token property-access">children</span><span class="token punctuation">.</span><span class="token property-access">length</span> <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">		    <span class="token comment">// children이 있으면 props.children으로 전달</span>
</span><span class="code-line">			props<span class="token punctuation">.</span><span class="token property-access">children</span> <span class="token operator">=</span> vNode<span class="token punctuation">.</span><span class="token property-access">children</span><span class="token punctuation">.</span><span class="token property-access">length</span> <span class="token operator">===</span> <span class="token number">1</span> 
</span><span class="code-line">				<span class="token operator">?</span> vNode<span class="token punctuation">.</span><span class="token property-access">children</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> 
</span><span class="code-line">				<span class="token operator">:</span> vNode<span class="token punctuation">.</span><span class="token property-access">children</span><span class="token punctuation">;</span>
</span><span class="code-line">		<span class="token punctuation">}</span>
</span><span class="code-line">	    
</span><span class="code-line">		<span class="token keyword">const</span> result <span class="token operator">=</span> vNode<span class="token punctuation">.</span><span class="token method function property-access">type</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">		<span class="token keyword control-flow">return</span> <span class="token function">normalizeVNode</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">	<span class="token punctuation">}</span>
</span><span class="code-line">  
</span><span class="code-line">	<span class="token comment">// 4. 일반 vNode 객체 처리 (children 정규화)</span>
</span><span class="code-line">	<span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>vNode <span class="token operator">&amp;&amp;</span> <span class="token keyword">typeof</span> vNode <span class="token operator">===</span> <span class="token string">&#x27;object&#x27;</span> <span class="token operator">&amp;&amp;</span> vNode<span class="token punctuation">.</span><span class="token property-access">children</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">	    <span class="token keyword control-flow">return</span> <span class="token punctuation">{</span>
</span><span class="code-line">		    <span class="token spread operator">...</span>vNode<span class="token punctuation">,</span>
</span><span class="code-line">		    <span class="token literal-property property">children</span><span class="token operator">:</span> vNode<span class="token punctuation">.</span><span class="token property-access">children</span>
</span><span class="code-line">		        <span class="token punctuation">.</span><span class="token method function property-access">map</span><span class="token punctuation">(</span><span class="token parameter">child</span> <span class="token arrow operator">=&gt;</span> <span class="token function">normalizeVNode</span><span class="token punctuation">(</span>child<span class="token punctuation">)</span><span class="token punctuation">)</span>
</span><span class="code-line">		        <span class="token punctuation">.</span><span class="token method function property-access">filter</span><span class="token punctuation">(</span><span class="token parameter">child</span> <span class="token arrow operator">=&gt;</span> child <span class="token operator">!==</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">)</span> <span class="token comment">// 빈 문자열 제거</span>
</span><span class="code-line">	    <span class="token punctuation">}</span><span class="token punctuation">;</span>
</span><span class="code-line">	<span class="token punctuation">}</span>
</span><span class="code-line">
</span><span class="code-line">	<span class="token keyword control-flow">return</span> vNode<span class="token punctuation">;</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code><div class="copied" data-code="export function normalizeVNode(vNode) {
	// 1. null, undefined, boolean → &quot;&quot;
	if (vNode === null || vNode === undefined || typeof vNode === &#x27;boolean&#x27;) {
		return &quot;&quot;;
	}

	// 2. 문자열, 숫자 → 문자열
	if (typeof vNode === &#x27;string&#x27; || typeof vNode === &#x27;number&#x27;) {
	    return String(vNode);
	}

	// 3. 함수형 컴포넌트 처리
	if (vNode &amp;&amp; typeof vNode === &#x27;object&#x27; &amp;&amp; typeof vNode.type === &#x27;function&#x27;) {
	    const props = vNode.props || {};
    
	    // children을 props로 전달해야 함
	    if (vNode.children &amp;&amp; vNode.children.length &gt; 0) {
		    // children이 있으면 props.children으로 전달
			props.children = vNode.children.length === 1 
				? vNode.children[0] 
				: vNode.children;
		}
	    
		const result = vNode.type(props);
		return normalizeVNode(result);
	}
  
	// 4. 일반 vNode 객체 처리 (children 정규화)
	if (vNode &amp;&amp; typeof vNode === &#x27;object&#x27; &amp;&amp; vNode.children) {
	    return {
		    ...vNode,
		    children: vNode.children
		        .map(child =&gt; normalizeVNode(child))
		        .filter(child =&gt; child !== &quot;&quot;) // 빈 문자열 제거
	    };
	}

	return vNode;
}
"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
</details>
<details>
<summary>createElement</summary>
<p>normalizeVNode를 통해 변환된 정보를 가지고 DOM 요소로 변환하는 함수</p>
<pre class="language-js"><code class="language-js code-highlight"><span class="code-line"><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token template-punctuation string">`</span></span>`js
</span><span class="code-line"><span class="token comment">// vNode (메모리) → DOM 요소 (브라우저) </span>
</span><span class="code-line"><span class="token punctuation">{</span> <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&quot;div&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">props</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token spread operator">...</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token literal-property property">children</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token spread operator">...</span><span class="token punctuation">]</span> <span class="token punctuation">}</span> 
</span><span class="code-line">→ <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;...&quot;</span><span class="token operator">&gt;</span><span class="token spread operator">...</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
</span></code><div class="copied" data-code="```js
// vNode (메모리) → DOM 요소 (브라우저) 
{ type: &quot;div&quot;, props: {...}, children: [...] } 
→ &lt;div class=&quot;...&quot;&gt;...&lt;/div&gt;
"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
<ul>
<li><code>document.createElement()</code> - HTML 요소 생성</li>
<li><code>document.createTextNode()</code> - 텍스트 노드 생성</li>
<li><code>document.createDocumentFragment()</code> - 여러 요소 컨테이너</li>
<li><code>element.appendChild()</code> - 자식 요소 추가</li>
<li><code>element.setAttribute()</code> - 속성 설정</li>
</ul>
<h4 id="documentfragment"><a aria-hidden="true" tabindex="-1" href="#documentfragment"><span class="icon icon-link"></span></a>DocumentFragment</h4>
<p>실제 DOM에 연결되지 않은 메모리 상의 노드로 임시 컨테이너 역할을 한다. DOM에 추가될 때 자신은 사라지고 내용만 남긴다.</p>
<blockquote>
<p>왜 사용하는가?</p>
</blockquote>
<ol>
<li>성능 최적화</li>
</ol>
<pre class="language-js"><code class="language-js code-highlight"><span class="code-line"><span class="token comment">// ❌ 비효율 (3번의 리플로우)</span>
</span><span class="code-line">container<span class="token punctuation">.</span><span class="token method function property-access">appendChild</span><span class="token punctuation">(</span>div1<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">container<span class="token punctuation">.</span><span class="token method function property-access">appendChild</span><span class="token punctuation">(</span>div2<span class="token punctuation">)</span><span class="token punctuation">;</span>  
</span><span class="code-line">container<span class="token punctuation">.</span><span class="token method function property-access">appendChild</span><span class="token punctuation">(</span>div3<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment">// ✅ 효율 (1번의 리플로우)</span>
</span><span class="code-line">fragment<span class="token punctuation">.</span><span class="token method function property-access">appendChild</span><span class="token punctuation">(</span>div1<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">fragment<span class="token punctuation">.</span><span class="token method function property-access">appendChild</span><span class="token punctuation">(</span>div2<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">fragment<span class="token punctuation">.</span><span class="token method function property-access">appendChild</span><span class="token punctuation">(</span>div3<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">container<span class="token punctuation">.</span><span class="token method function property-access">appendChild</span><span class="token punctuation">(</span>fragment<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></code><div class="copied" data-code="// ❌ 비효율 (3번의 리플로우)
container.appendChild(div1);
container.appendChild(div2);  
container.appendChild(div3);

// ✅ 효율 (1번의 리플로우)
fragment.appendChild(div1);
fragment.appendChild(div2);
fragment.appendChild(div3);
container.appendChild(fragment);
"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
<ol start="2">
<li>배열 처리</li>
</ol>
<pre class="language-js"><code class="language-js code-highlight"><span class="code-line"><span class="token comment">// 가상 DOM에서 배열을 어떻게 DOM 노드로 변환할까?</span>
</span><span class="code-line"><span class="token punctuation">[</span>vNode1<span class="token punctuation">,</span> vNode2<span class="token punctuation">,</span> vNode3<span class="token punctuation">]</span>  <span class="token comment">// ← 이걸 뭘로 변환?</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment">// ❌ div로 감싸면 불필요한 태그 추가</span>
</span><span class="code-line"><span class="token comment">// ✅ Fragment 사용하면 깔끔하게 여러 요소 반환</span>
</span></code><div class="copied" data-code="// 가상 DOM에서 배열을 어떻게 DOM 노드로 변환할까?
[vNode1, vNode2, vNode3]  // ← 이걸 뭘로 변환?

// ❌ div로 감싸면 불필요한 태그 추가
// ✅ Fragment 사용하면 깔끔하게 여러 요소 반환
"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
<ol start="3">
<li>자기  소멸 특성</li>
</ol>
<pre class="language-js"><code class="language-js code-highlight"><span class="code-line">fragment<span class="token punctuation">.</span><span class="token method function property-access">appendChild</span><span class="token punctuation">(</span>div1<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">fragment<span class="token punctuation">.</span><span class="token method function property-access">appendChild</span><span class="token punctuation">(</span>div2<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span>fragment<span class="token punctuation">.</span><span class="token property-access">childNodes</span><span class="token punctuation">.</span><span class="token property-access">length</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 2</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token dom variable">document</span><span class="token punctuation">.</span><span class="token property-access">body</span><span class="token punctuation">.</span><span class="token method function property-access">appendChild</span><span class="token punctuation">(</span>fragment<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span>fragment<span class="token punctuation">.</span><span class="token property-access">childNodes</span><span class="token punctuation">.</span><span class="token property-access">length</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 0 (비워짐!)</span>
</span><span class="code-line"><span class="token comment">// div1, div2만 body에 남음, fragment는 사라짐</span>
</span></code><div class="copied" data-code="fragment.appendChild(div1);
fragment.appendChild(div2);
console.log(fragment.childNodes.length); // 2

document.body.appendChild(fragment);
console.log(fragment.childNodes.length); // 0 (비워짐!)
// div1, div2만 body에 남음, fragment는 사라짐
"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
<h4 id="구현-코드-2"><a aria-hidden="true" tabindex="-1" href="#구현-코드-2"><span class="icon icon-link"></span></a>구현 코드</h4>
<pre class="language-js"><code class="language-js code-highlight"><span class="code-line"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> addEvent <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">&quot;./eventManager&quot;</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword">function</span> <span class="token function">updateAttributes</span><span class="token punctuation">(</span><span class="token parameter">$el<span class="token punctuation">,</span> props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>props<span class="token punctuation">)</span> <span class="token keyword control-flow">return</span><span class="token punctuation">;</span>
</span><span class="code-line">  
</span><span class="code-line">  <span class="token known-class-name class-name">Object</span><span class="token punctuation">.</span><span class="token method function property-access">entries</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">[</span>key<span class="token punctuation">,</span> value<span class="token punctuation">]</span></span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>key<span class="token punctuation">.</span><span class="token method function property-access">startsWith</span><span class="token punctuation">(</span><span class="token string">&#x27;on&#x27;</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token keyword">typeof</span> value <span class="token operator">===</span> <span class="token string">&#x27;function&#x27;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">      <span class="token comment">// 이벤트는 addEvent 함수 사용</span>
</span><span class="code-line">      <span class="token keyword">const</span> eventType <span class="token operator">=</span> key<span class="token punctuation">.</span><span class="token method function property-access">slice</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// onClick → click</span>
</span><span class="code-line">      <span class="token function">addEvent</span><span class="token punctuation">(</span>$el<span class="token punctuation">,</span> eventType<span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">    <span class="token punctuation">}</span> <span class="token keyword control-flow">else</span> <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>key <span class="token operator">===</span> <span class="token string">&#x27;className&#x27;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">      $el<span class="token punctuation">.</span><span class="token property-access">className</span> <span class="token operator">=</span> value<span class="token punctuation">;</span>
</span><span class="code-line">    <span class="token punctuation">}</span> <span class="token keyword control-flow">else</span> <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>key <span class="token operator">===</span> <span class="token string">&#x27;style&#x27;</span> <span class="token operator">&amp;&amp;</span> <span class="token keyword">typeof</span> value <span class="token operator">===</span> <span class="token string">&#x27;object&#x27;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">      <span class="token known-class-name class-name">Object</span><span class="token punctuation">.</span><span class="token method function property-access">entries</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">[</span>styleKey<span class="token punctuation">,</span> styleValue<span class="token punctuation">]</span></span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">        $el<span class="token punctuation">.</span><span class="token property-access">style</span><span class="token punctuation">[</span>styleKey<span class="token punctuation">]</span> <span class="token operator">=</span> styleValue<span class="token punctuation">;</span>
</span><span class="code-line">      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">    <span class="token punctuation">}</span> <span class="token keyword control-flow">else</span> <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> value <span class="token operator">===</span> <span class="token string">&#x27;boolean&#x27;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">      <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>value<span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">        $el<span class="token punctuation">.</span><span class="token method function property-access">setAttribute</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> <span class="token string">&#x27;&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">      <span class="token punctuation">}</span>
</span><span class="code-line">    <span class="token punctuation">}</span> <span class="token keyword control-flow">else</span> <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>value <span class="token operator">!=</span> <span class="token keyword null nil">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">      $el<span class="token punctuation">.</span><span class="token method function property-access">setAttribute</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> <span class="token known-class-name class-name">String</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">    <span class="token punctuation">}</span>
</span><span class="code-line">  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword module">export</span> <span class="token keyword">function</span> <span class="token function">createElement</span><span class="token punctuation">(</span><span class="token parameter">vNode</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token comment">// 1. Falsy 값 처리</span>
</span><span class="code-line">  <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>vNode <span class="token operator">==</span> <span class="token keyword null nil">null</span> <span class="token operator">||</span> <span class="token keyword">typeof</span> vNode <span class="token operator">===</span> <span class="token string">&#x27;boolean&#x27;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token keyword control-flow">return</span> <span class="token dom variable">document</span><span class="token punctuation">.</span><span class="token method function property-access">createTextNode</span><span class="token punctuation">(</span><span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token punctuation">}</span>
</span><span class="code-line">  
</span><span class="code-line">  <span class="token comment">// 2. 원시값 처리</span>
</span><span class="code-line">  <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> vNode <span class="token operator">===</span> <span class="token string">&#x27;string&#x27;</span> <span class="token operator">||</span> <span class="token keyword">typeof</span> vNode <span class="token operator">===</span> <span class="token string">&#x27;number&#x27;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token keyword control-flow">return</span> <span class="token dom variable">document</span><span class="token punctuation">.</span><span class="token method function property-access">createTextNode</span><span class="token punctuation">(</span><span class="token known-class-name class-name">String</span><span class="token punctuation">(</span>vNode<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token punctuation">}</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="token comment">// 3. 배열 처리 - DocumentFragment 생성</span>
</span><span class="code-line">  <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span><span class="token known-class-name class-name">Array</span><span class="token punctuation">.</span><span class="token method function property-access">isArray</span><span class="token punctuation">(</span>vNode<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token keyword">const</span> fragment <span class="token operator">=</span> <span class="token dom variable">document</span><span class="token punctuation">.</span><span class="token method function property-access">createDocumentFragment</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">    vNode<span class="token punctuation">.</span><span class="token method function property-access">forEach</span><span class="token punctuation">(</span><span class="token parameter">child</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">      fragment<span class="token punctuation">.</span><span class="token method function property-access">appendChild</span><span class="token punctuation">(</span><span class="token function">createElement</span><span class="token punctuation">(</span>child<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 재귀 호출</span>
</span><span class="code-line">    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">    <span class="token keyword control-flow">return</span> fragment<span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token punctuation">}</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="token comment">// 4. 함수 컴포넌트 오류</span>
</span><span class="code-line">  <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>vNode <span class="token operator">&amp;&amp;</span> <span class="token keyword">typeof</span> vNode <span class="token operator">===</span> <span class="token string">&#x27;object&#x27;</span> <span class="token operator">&amp;&amp;</span> <span class="token keyword">typeof</span> vNode<span class="token punctuation">.</span><span class="token property-access">type</span> <span class="token operator">===</span> <span class="token string">&#x27;function&#x27;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token keyword control-flow">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">&#x27;함수 컴포넌트는 normalizeVNode로 먼저 변환해야 합니다.&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token punctuation">}</span>
</span><span class="code-line">  
</span><span class="code-line">  <span class="token comment">// 5. 일반 vNode</span>
</span><span class="code-line">  <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>vNode <span class="token operator">&amp;&amp;</span> <span class="token keyword">typeof</span> vNode <span class="token operator">===</span> <span class="token string">&#x27;object&#x27;</span> <span class="token operator">&amp;&amp;</span> <span class="token keyword">typeof</span> vNode<span class="token punctuation">.</span><span class="token property-access">type</span> <span class="token operator">===</span> <span class="token string">&#x27;string&#x27;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token keyword">const</span> $el <span class="token operator">=</span> <span class="token dom variable">document</span><span class="token punctuation">.</span><span class="token method function property-access">createElement</span><span class="token punctuation">(</span>vNode<span class="token punctuation">.</span><span class="token property-access">type</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">    
</span><span class="code-line">    <span class="token comment">// 기존 updateAttributes 함수 사용</span>
</span><span class="code-line">    <span class="token function">updateAttributes</span><span class="token punctuation">(</span>$el<span class="token punctuation">,</span> vNode<span class="token punctuation">.</span><span class="token property-access">props</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">    
</span><span class="code-line">    <span class="token comment">// children 처리</span>
</span><span class="code-line">    <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>vNode<span class="token punctuation">.</span><span class="token property-access">children</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">      vNode<span class="token punctuation">.</span><span class="token property-access">children</span><span class="token punctuation">.</span><span class="token method function property-access">forEach</span><span class="token punctuation">(</span><span class="token parameter">child</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">        $el<span class="token punctuation">.</span><span class="token method function property-access">appendChild</span><span class="token punctuation">(</span><span class="token function">createElement</span><span class="token punctuation">(</span>child<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">    <span class="token punctuation">}</span>
</span><span class="code-line">    
</span><span class="code-line">    <span class="token keyword control-flow">return</span> $el<span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token punctuation">}</span>
</span><span class="code-line">  
</span><span class="code-line">  <span class="token keyword control-flow">return</span> <span class="token dom variable">document</span><span class="token punctuation">.</span><span class="token method function property-access">createTextNode</span><span class="token punctuation">(</span><span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code><div class="copied" data-code="import { addEvent } from &quot;./eventManager&quot;;

function updateAttributes($el, props) {
  if (!props) return;
  
  Object.entries(props).forEach(([key, value]) =&gt; {
    if (key.startsWith(&#x27;on&#x27;) &amp;&amp; typeof value === &#x27;function&#x27;) {
      // 이벤트는 addEvent 함수 사용
      const eventType = key.slice(2).toLowerCase(); // onClick → click
      addEvent($el, eventType, value);
    } else if (key === &#x27;className&#x27;) {
      $el.className = value;
    } else if (key === &#x27;style&#x27; &amp;&amp; typeof value === &#x27;object&#x27;) {
      Object.entries(value).forEach(([styleKey, styleValue]) =&gt; {
        $el.style[styleKey] = styleValue;
      });
    } else if (typeof value === &#x27;boolean&#x27;) {
      if (value) {
        $el.setAttribute(key, &#x27;&#x27;);
      }
    } else if (value != null) {
      $el.setAttribute(key, String(value));
    }
  });
}

export function createElement(vNode) {
  // 1. Falsy 값 처리
  if (vNode == null || typeof vNode === &#x27;boolean&#x27;) {
    return document.createTextNode(&quot;&quot;);
  }
  
  // 2. 원시값 처리
  if (typeof vNode === &#x27;string&#x27; || typeof vNode === &#x27;number&#x27;) {
    return document.createTextNode(String(vNode));
  }

  // 3. 배열 처리 - DocumentFragment 생성
  if (Array.isArray(vNode)) {
    const fragment = document.createDocumentFragment();
    vNode.forEach(child =&gt; {
      fragment.appendChild(createElement(child)); // 재귀 호출
    });
    return fragment;
  }

  // 4. 함수 컴포넌트 오류
  if (vNode &amp;&amp; typeof vNode === &#x27;object&#x27; &amp;&amp; typeof vNode.type === &#x27;function&#x27;) {
    throw new Error(&#x27;함수 컴포넌트는 normalizeVNode로 먼저 변환해야 합니다.&#x27;);
  }
  
  // 5. 일반 vNode
  if (vNode &amp;&amp; typeof vNode === &#x27;object&#x27; &amp;&amp; typeof vNode.type === &#x27;string&#x27;) {
    const $el = document.createElement(vNode.type);
    
    // 기존 updateAttributes 함수 사용
    updateAttributes($el, vNode.props);
    
    // children 처리
    if (vNode.children) {
      vNode.children.forEach(child =&gt; {
        $el.appendChild(createElement(child));
      });
    }
    
    return $el;
  }
  
  return document.createTextNode(&quot;&quot;);
}
"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
</details>
<details>
<summary>eventManager</summary>
<p>eventManager는 이벤트 위임을 관리하는 함수</p>
<ol>
<li><code>addEvent</code>: 핸들러를 eventStore에 저장</li>
<li><code>setupEventListeners</code>: 루트에 위임 리스너 등록</li>
<li>클릭 발생 → 버블링으로 루트까지 전파</li>
<li>위임 리스너가 e.target 확인 → eventStore에서 핸들러 찾아 실행</li>
<li><code>eventStore</code> 조회: 해당 요소의 핸들러 찾기</li>
<li>핸들러 실행: 모든 등록된 핸들러 호출</li>
</ol>
<blockquote>
<p>이벤트 위임이란?</p>
</blockquote>
<p>개별 요소마나 이벤트 리스너를 등록하지 않고 공통 조상에 하나의 리스너만 등록하는 방식</p>
<pre class="language-js"><code class="language-js code-highlight"><span class="code-line"><span class="token comment">// ❌ 기존 방식 (개별 등록)</span>
</span><span class="code-line"><span class="token operator">&lt;</span>div id<span class="token operator">=</span><span class="token string">&quot;container&quot;</span><span class="token operator">&gt;</span>
</span><span class="code-line">  <span class="token operator">&lt;</span>button id<span class="token operator">=</span><span class="token string">&quot;btn1&quot;</span><span class="token operator">&gt;</span><span class="token maybe-class-name">Button</span> <span class="token number">1</span><span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
</span><span class="code-line">  <span class="token operator">&lt;</span>button id<span class="token operator">=</span><span class="token string">&quot;btn2&quot;</span><span class="token operator">&gt;</span><span class="token maybe-class-name">Button</span> <span class="token number">2</span><span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
</span><span class="code-line">  <span class="token operator">&lt;</span>button id<span class="token operator">=</span><span class="token string">&quot;btn3&quot;</span><span class="token operator">&gt;</span><span class="token maybe-class-name">Button</span> <span class="token number">3</span><span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
</span><span class="code-line"><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment">// 각각 개별 등록</span>
</span><span class="code-line">btn1<span class="token punctuation">.</span><span class="token method function property-access">addEventListener</span><span class="token punctuation">(</span><span class="token string">&#x27;click&#x27;</span><span class="token punctuation">,</span> handler1<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">btn2<span class="token punctuation">.</span><span class="token method function property-access">addEventListener</span><span class="token punctuation">(</span><span class="token string">&#x27;click&#x27;</span><span class="token punctuation">,</span> handler2<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">btn3<span class="token punctuation">.</span><span class="token method function property-access">addEventListener</span><span class="token punctuation">(</span><span class="token string">&#x27;click&#x27;</span><span class="token punctuation">,</span> handler3<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment">// ✅ 이벤트 위임</span>
</span><span class="code-line"><span class="token operator">&lt;</span>div id<span class="token operator">=</span><span class="token string">&quot;container&quot;</span><span class="token operator">&gt;</span>
</span><span class="code-line">  <span class="token operator">&lt;</span>button id<span class="token operator">=</span><span class="token string">&quot;btn1&quot;</span><span class="token operator">&gt;</span><span class="token maybe-class-name">Button</span> <span class="token number">1</span><span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
</span><span class="code-line">  <span class="token operator">&lt;</span>button id<span class="token operator">=</span><span class="token string">&quot;btn2&quot;</span><span class="token operator">&gt;</span><span class="token maybe-class-name">Button</span> <span class="token number">2</span><span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
</span><span class="code-line">  <span class="token operator">&lt;</span>button id<span class="token operator">=</span><span class="token string">&quot;btn3&quot;</span><span class="token operator">&gt;</span><span class="token maybe-class-name">Button</span> <span class="token number">3</span><span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
</span><span class="code-line"><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment">// 조상에 하나만 등록</span>
</span><span class="code-line">container<span class="token punctuation">.</span><span class="token method function property-access">addEventListener</span><span class="token punctuation">(</span><span class="token string">&#x27;click&#x27;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span><span class="token property-access">target</span><span class="token punctuation">.</span><span class="token property-access">id</span> <span class="token operator">===</span> <span class="token string">&#x27;btn1&#x27;</span><span class="token punctuation">)</span> <span class="token function">handler1</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span><span class="token property-access">target</span><span class="token punctuation">.</span><span class="token property-access">id</span> <span class="token operator">===</span> <span class="token string">&#x27;btn2&#x27;</span><span class="token punctuation">)</span> <span class="token function">handler2</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span><span class="token property-access">target</span><span class="token punctuation">.</span><span class="token property-access">id</span> <span class="token operator">===</span> <span class="token string">&#x27;btn3&#x27;</span><span class="token punctuation">)</span> <span class="token function">handler3</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span></code><div class="copied" data-code="// ❌ 기존 방식 (개별 등록)
&lt;div id=&quot;container&quot;&gt;
  &lt;button id=&quot;btn1&quot;&gt;Button 1&lt;/button&gt;
  &lt;button id=&quot;btn2&quot;&gt;Button 2&lt;/button&gt;
  &lt;button id=&quot;btn3&quot;&gt;Button 3&lt;/button&gt;
&lt;/div&gt;

// 각각 개별 등록
btn1.addEventListener(&#x27;click&#x27;, handler1);
btn2.addEventListener(&#x27;click&#x27;, handler2);
btn3.addEventListener(&#x27;click&#x27;, handler3);

// ✅ 이벤트 위임
&lt;div id=&quot;container&quot;&gt;
  &lt;button id=&quot;btn1&quot;&gt;Button 1&lt;/button&gt;
  &lt;button id=&quot;btn2&quot;&gt;Button 2&lt;/button&gt;
  &lt;button id=&quot;btn3&quot;&gt;Button 3&lt;/button&gt;
&lt;/div&gt;

// 조상에 하나만 등록
container.addEventListener(&#x27;click&#x27;, (e) =&gt; {
  if (e.target.id === &#x27;btn1&#x27;) handler1(e);
  if (e.target.id === &#x27;btn2&#x27;) handler2(e);
  if (e.target.id === &#x27;btn3&#x27;) handler3(e);
});

"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
<pre class="language-html"><code class="language-html code-highlight"><span class="code-line"><span class="token comment">&lt;!-- 이벤트 전파 과정 --&gt;</span>
</span><span class="code-line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>root<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>   <span class="token comment">&lt;!-- 여기서 이벤트 감지 --&gt;</span>
</span><span class="code-line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>section</span><span class="token punctuation">&gt;</span></span>
</span><span class="code-line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>article</span><span class="token punctuation">&gt;</span></span>
</span><span class="code-line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span><span class="token punctuation">&gt;</span></span>클릭!<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>  <span class="token comment">&lt;!-- 실제 클릭 --&gt;</span>
</span><span class="code-line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>article</span><span class="token punctuation">&gt;</span></span>
</span><span class="code-line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>section</span><span class="token punctuation">&gt;</span></span>
</span><span class="code-line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment">&lt;!-- 이벤트 전파: button → article → section → div#root --&gt;</span>
</span></code><div class="copied" data-code="&lt;!-- 이벤트 전파 과정 --&gt;
&lt;div id=&quot;root&quot;&gt;   &lt;!-- 여기서 이벤트 감지 --&gt;
  &lt;section&gt;
    &lt;article&gt;
      &lt;button&gt;클릭!&lt;/button&gt;  &lt;!-- 실제 클릭 --&gt;
    &lt;/article&gt;
  &lt;/section&gt;
&lt;/div&gt;

&lt;!-- 이벤트 전파: button → article → section → div#root --&gt;
"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
<h4 id="구현-코드-3"><a aria-hidden="true" tabindex="-1" href="#구현-코드-3"><span class="icon icon-link"></span></a>구현 코드</h4>
<pre class="language-js"><code class="language-js code-highlight"><span class="code-line"><span class="token comment">// 전역 저장소들</span>
</span><span class="code-line"><span class="token keyword">const</span> eventStore <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">WeakMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token keyword">const</span> registeredRoots <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">WeakSet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword module">export</span> <span class="token keyword">function</span> <span class="token function">setupEventListeners</span><span class="token punctuation">(</span><span class="token parameter">root</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token comment">// 이미 등록된 루트면 종료</span>
</span><span class="code-line">  <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>registeredRoots<span class="token punctuation">.</span><span class="token method function property-access">has</span><span class="token punctuation">(</span>root<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword control-flow">return</span><span class="token punctuation">;</span>
</span><span class="code-line">  registeredRoots<span class="token punctuation">.</span><span class="token method function property-access">add</span><span class="token punctuation">(</span>root<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="token keyword">const</span> eventTypes <span class="token operator">=</span> <span class="token punctuation">[</span>
</span><span class="code-line">    <span class="token string">&#x27;click&#x27;</span><span class="token punctuation">,</span>
</span><span class="code-line">    <span class="token string">&#x27;input&#x27;</span><span class="token punctuation">,</span> 
</span><span class="code-line">    <span class="token string">&#x27;change&#x27;</span><span class="token punctuation">,</span>
</span><span class="code-line">    <span class="token string">&#x27;keydown&#x27;</span><span class="token punctuation">,</span>
</span><span class="code-line">    <span class="token string">&#x27;keyup&#x27;</span><span class="token punctuation">,</span>
</span><span class="code-line">    <span class="token string">&#x27;submit&#x27;</span><span class="token punctuation">,</span>
</span><span class="code-line">    <span class="token string">&#x27;mouseover&#x27;</span><span class="token punctuation">,</span>
</span><span class="code-line">    <span class="token string">&#x27;mouseout&#x27;</span><span class="token punctuation">,</span>
</span><span class="code-line">    <span class="token string">&#x27;mousedown&#x27;</span><span class="token punctuation">,</span>
</span><span class="code-line">    <span class="token string">&#x27;mouseup&#x27;</span><span class="token punctuation">,</span> 
</span><span class="code-line">    <span class="token string">&#x27;focus&#x27;</span><span class="token punctuation">,</span>
</span><span class="code-line">    <span class="token string">&#x27;blur&#x27;</span>
</span><span class="code-line">  <span class="token punctuation">]</span><span class="token punctuation">;</span>
</span><span class="code-line">  
</span><span class="code-line">  eventTypes<span class="token punctuation">.</span><span class="token method function property-access">forEach</span><span class="token punctuation">(</span><span class="token parameter">eventType</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token comment">// 이벤트 위임 리스너 등록</span>
</span><span class="code-line">    root<span class="token punctuation">.</span><span class="token method function property-access">addEventListener</span><span class="token punctuation">(</span>eventType<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">      <span class="token keyword">let</span> currentElement <span class="token operator">=</span> e<span class="token punctuation">.</span><span class="token property-access">target</span><span class="token punctuation">;</span>
</span><span class="code-line">      
</span><span class="code-line">      <span class="token comment">// 타겟에서 루트까지 거슬러 올라가며 핸들러 찾기</span>
</span><span class="code-line">      <span class="token keyword control-flow">while</span> <span class="token punctuation">(</span>currentElement <span class="token operator">&amp;&amp;</span> currentElement <span class="token operator">!==</span> root<span class="token punctuation">.</span><span class="token property-access">parentNode</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">        <span class="token keyword">const</span> elementEvents <span class="token operator">=</span> eventStore<span class="token punctuation">.</span><span class="token method function property-access">get</span><span class="token punctuation">(</span>currentElement<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">        
</span><span class="code-line">        <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>elementEvents<span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">          <span class="token keyword">const</span> handlers <span class="token operator">=</span> elementEvents<span class="token punctuation">.</span><span class="token method function property-access">get</span><span class="token punctuation">(</span>eventType<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">          
</span><span class="code-line">          <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>handlers <span class="token operator">&amp;&amp;</span> handlers<span class="token punctuation">.</span><span class="token property-access">size</span> <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">            <span class="token comment">// 등록된 모든 핸들러 실행</span>
</span><span class="code-line">            handlers<span class="token punctuation">.</span><span class="token method function property-access">forEach</span><span class="token punctuation">(</span><span class="token parameter">handler</span> <span class="token arrow operator">=&gt;</span> <span class="token function">handler</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">            <span class="token keyword control-flow">return</span><span class="token punctuation">;</span> <span class="token comment">// 핸들러 발견시 즉시 중단</span>
</span><span class="code-line">          <span class="token punctuation">}</span>
</span><span class="code-line">        <span class="token punctuation">}</span>
</span><span class="code-line">        
</span><span class="code-line">        currentElement <span class="token operator">=</span> currentElement<span class="token punctuation">.</span><span class="token property-access">parentNode</span><span class="token punctuation">;</span>
</span><span class="code-line">      <span class="token punctuation">}</span>
</span><span class="code-line">    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 버블링 단계에서 처리</span>
</span><span class="code-line">  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword module">export</span> <span class="token keyword">function</span> <span class="token function">addEvent</span><span class="token punctuation">(</span><span class="token parameter">element<span class="token punctuation">,</span> eventType<span class="token punctuation">,</span> handler</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token comment">// 요소별 이벤트 맵 초기화</span>
</span><span class="code-line">  <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>eventStore<span class="token punctuation">.</span><span class="token method function property-access">has</span><span class="token punctuation">(</span>element<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">    eventStore<span class="token punctuation">.</span><span class="token method function property-access">set</span><span class="token punctuation">(</span>element<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token punctuation">}</span>
</span><span class="code-line">  
</span><span class="code-line">  <span class="token keyword">const</span> elementEvents <span class="token operator">=</span> eventStore<span class="token punctuation">.</span><span class="token method function property-access">get</span><span class="token punctuation">(</span>element<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">  
</span><span class="code-line">  <span class="token comment">// 이벤트 타입별 핸들러 Set 초기화</span>
</span><span class="code-line">  <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>elementEvents<span class="token punctuation">.</span><span class="token method function property-access">has</span><span class="token punctuation">(</span>eventType<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">    elementEvents<span class="token punctuation">.</span><span class="token method function property-access">set</span><span class="token punctuation">(</span>eventType<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token punctuation">}</span>
</span><span class="code-line">  
</span><span class="code-line">  <span class="token comment">// 핸들러 추가 (Set이 자동으로 중복 방지)</span>
</span><span class="code-line">  elementEvents<span class="token punctuation">.</span><span class="token method function property-access">get</span><span class="token punctuation">(</span>eventType<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">add</span><span class="token punctuation">(</span>handler<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword module">export</span> <span class="token keyword">function</span> <span class="token function">removeEvent</span><span class="token punctuation">(</span><span class="token parameter">element<span class="token punctuation">,</span> eventType<span class="token punctuation">,</span> handler</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token keyword">const</span> elementEvents <span class="token operator">=</span> eventStore<span class="token punctuation">.</span><span class="token method function property-access">get</span><span class="token punctuation">(</span>element<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>elementEvents<span class="token punctuation">)</span> <span class="token keyword control-flow">return</span><span class="token punctuation">;</span>
</span><span class="code-line">  
</span><span class="code-line">  <span class="token keyword">const</span> handlers <span class="token operator">=</span> elementEvents<span class="token punctuation">.</span><span class="token method function property-access">get</span><span class="token punctuation">(</span>eventType<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>handlers<span class="token punctuation">)</span> <span class="token keyword control-flow">return</span><span class="token punctuation">;</span>
</span><span class="code-line">  
</span><span class="code-line">  <span class="token comment">// 핸들러 제거</span>
</span><span class="code-line">  handlers<span class="token punctuation">.</span><span class="token method function property-access">delete</span><span class="token punctuation">(</span>handler<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">  
</span><span class="code-line">  <span class="token comment">// 메모리 정리: 빈 구조 제거</span>
</span><span class="code-line">  <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>handlers<span class="token punctuation">.</span><span class="token property-access">size</span> <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">    elementEvents<span class="token punctuation">.</span><span class="token method function property-access">delete</span><span class="token punctuation">(</span>eventType<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">    <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>elementEvents<span class="token punctuation">.</span><span class="token property-access">size</span> <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">      eventStore<span class="token punctuation">.</span><span class="token method function property-access">delete</span><span class="token punctuation">(</span>element<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">    <span class="token punctuation">}</span>
</span><span class="code-line">  <span class="token punctuation">}</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code><div class="copied" data-code="// 전역 저장소들
const eventStore = new WeakMap();
const registeredRoots = new WeakSet();

export function setupEventListeners(root) {
  // 이미 등록된 루트면 종료
  if (registeredRoots.has(root)) return;
  registeredRoots.add(root);

  const eventTypes = [
    &#x27;click&#x27;,
    &#x27;input&#x27;, 
    &#x27;change&#x27;,
    &#x27;keydown&#x27;,
    &#x27;keyup&#x27;,
    &#x27;submit&#x27;,
    &#x27;mouseover&#x27;,
    &#x27;mouseout&#x27;,
    &#x27;mousedown&#x27;,
    &#x27;mouseup&#x27;, 
    &#x27;focus&#x27;,
    &#x27;blur&#x27;
  ];
  
  eventTypes.forEach(eventType =&gt; {
    // 이벤트 위임 리스너 등록
    root.addEventListener(eventType, (e) =&gt; {
      let currentElement = e.target;
      
      // 타겟에서 루트까지 거슬러 올라가며 핸들러 찾기
      while (currentElement &amp;&amp; currentElement !== root.parentNode) {
        const elementEvents = eventStore.get(currentElement);
        
        if (elementEvents) {
          const handlers = elementEvents.get(eventType);
          
          if (handlers &amp;&amp; handlers.size &gt; 0) {
            // 등록된 모든 핸들러 실행
            handlers.forEach(handler =&gt; handler(e));
            return; // 핸들러 발견시 즉시 중단
          }
        }
        
        currentElement = currentElement.parentNode;
      }
    }, false); // 버블링 단계에서 처리
  });
}

export function addEvent(element, eventType, handler) {
  // 요소별 이벤트 맵 초기화
  if (!eventStore.has(element)) {
    eventStore.set(element, new Map());
  }
  
  const elementEvents = eventStore.get(element);
  
  // 이벤트 타입별 핸들러 Set 초기화
  if (!elementEvents.has(eventType)) {
    elementEvents.set(eventType, new Set());
  }
  
  // 핸들러 추가 (Set이 자동으로 중복 방지)
  elementEvents.get(eventType).add(handler);
}

export function removeEvent(element, eventType, handler) {
  const elementEvents = eventStore.get(element);
  if (!elementEvents) return;
  
  const handlers = elementEvents.get(eventType);
  if (!handlers) return;
  
  // 핸들러 제거
  handlers.delete(handler);
  
  // 메모리 정리: 빈 구조 제거
  if (handlers.size === 0) {
    elementEvents.delete(eventType);
    if (elementEvents.size === 0) {
      eventStore.delete(element);
    }
  }
}
"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
</details>
<details>
<summary>renderElement</summary>
<p>renderElement는 지금까지의 가상 DOM 시스템의 최종 실행자. 모든 것을 통합하여 실제 화면을 만드는 핵심 함수</p>
<blockquote>
<p>지금까지의 흐름</p>
</blockquote>
<p>JSX → babel로 파싱 → createVNode(자동) → renderElement(App 렌더링 시 개발자가 호출) → 내부에서 normalizeVNode → createElement → setupEventListeners</p>
<h4 id="구현-코드-4"><a aria-hidden="true" tabindex="-1" href="#구현-코드-4"><span class="icon icon-link"></span></a>구현 코드</h4>
<pre class="language-js"><code class="language-js code-highlight"><span class="code-line"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> setupEventListeners <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">&quot;./eventManager&quot;</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> createElement <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">&quot;./createElement&quot;</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> normalizeVNode <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">&quot;./normalizeVNode&quot;</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> updateElement <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">&quot;./updateElement&quot;</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword module">export</span> <span class="token keyword">function</span> <span class="token function">renderElement</span><span class="token punctuation">(</span><span class="token parameter">vNode<span class="token punctuation">,</span> container</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token comment">// 1. vNode 정규화</span>
</span><span class="code-line">  <span class="token keyword">const</span> normalizedVNode <span class="token operator">=</span> <span class="token function">normalizeVNode</span><span class="token punctuation">(</span>vNode<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">  
</span><span class="code-line">  <span class="token comment">// 2. 초기 렌더링 여부 확인</span>
</span><span class="code-line">  <span class="token keyword">const</span> isInitialRender <span class="token operator">=</span> <span class="token operator">!</span>container<span class="token punctuation">.</span><span class="token property-access">_vNode</span><span class="token punctuation">;</span>
</span><span class="code-line">  
</span><span class="code-line">  <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>isInitialRender<span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token comment">// 3. 최초 렌더링</span>
</span><span class="code-line">    container<span class="token punctuation">.</span><span class="token property-access">innerHTML</span> <span class="token operator">=</span> <span class="token string">&#x27;&#x27;</span><span class="token punctuation">;</span>
</span><span class="code-line">    <span class="token keyword">const</span> domElement <span class="token operator">=</span> <span class="token function">createElement</span><span class="token punctuation">(</span>normalizedVNode<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">    container<span class="token punctuation">.</span><span class="token method function property-access">appendChild</span><span class="token punctuation">(</span>domElement<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token punctuation">}</span> <span class="token keyword control-flow">else</span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token comment">// 4. 업데이트 렌더링: updateElement 사용</span>
</span><span class="code-line">    <span class="token function">updateElement</span><span class="token punctuation">(</span>container<span class="token punctuation">,</span> normalizedVNode<span class="token punctuation">,</span> container<span class="token punctuation">.</span><span class="token property-access">_vNode</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token punctuation">}</span>
</span><span class="code-line">  
</span><span class="code-line">  <span class="token comment">// 5. 이전 vNode 저장</span>
</span><span class="code-line">  container<span class="token punctuation">.</span><span class="token property-access">_vNode</span> <span class="token operator">=</span> normalizedVNode<span class="token punctuation">;</span>
</span><span class="code-line">  
</span><span class="code-line">  <span class="token comment">// 6. 이벤트 위임 설정</span>
</span><span class="code-line">  <span class="token function">setupEventListeners</span><span class="token punctuation">(</span>container<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code><div class="copied" data-code="import { setupEventListeners } from &quot;./eventManager&quot;;
import { createElement } from &quot;./createElement&quot;;
import { normalizeVNode } from &quot;./normalizeVNode&quot;;
import { updateElement } from &quot;./updateElement&quot;;

export function renderElement(vNode, container) {
  // 1. vNode 정규화
  const normalizedVNode = normalizeVNode(vNode);
  
  // 2. 초기 렌더링 여부 확인
  const isInitialRender = !container._vNode;
  
  if (isInitialRender) {
    // 3. 최초 렌더링
    container.innerHTML = &#x27;&#x27;;
    const domElement = createElement(normalizedVNode);
    container.appendChild(domElement);
  } else {
    // 4. 업데이트 렌더링: updateElement 사용
    updateElement(container, normalizedVNode, container._vNode, 0);
  }
  
  // 5. 이전 vNode 저장
  container._vNode = normalizedVNode;
  
  // 6. 이벤트 위임 설정
  setupEventListeners(container);
}
"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
</details>
<details>
<summary>updateAttributes</summary>
<p>DOM 요소의 속성들을 이전 상태와 새로운 상태를 비교해서 필요한 부분만 업데이트 하는 함수</p>
<ol>
<li>일반 속성</li>
</ol>
<pre class="language-js"><code class="language-js code-highlight"><span class="code-line"><span class="token comment">// 예시: id, data-*, aria-* 등</span>
</span><span class="code-line"><span class="token literal-property property">oldProps</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token string">&quot;old-id&quot;</span> <span class="token punctuation">}</span>
</span><span class="code-line"><span class="token literal-property property">newProps</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token string">&quot;new-id&quot;</span> <span class="token punctuation">}</span>
</span><span class="code-line">→ element<span class="token punctuation">.</span><span class="token method function property-access">setAttribute</span><span class="token punctuation">(</span><span class="token string">&#x27;id&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;new-id&#x27;</span><span class="token punctuation">)</span>
</span></code><div class="copied" data-code="// 예시: id, data-*, aria-* 등
oldProps: { id: &quot;old-id&quot; }
newProps: { id: &quot;new-id&quot; }
→ element.setAttribute(&#x27;id&#x27;, &#x27;new-id&#x27;)
"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
<ol start="2">
<li>className 속성</li>
</ol>
<pre class="language-js"><code class="language-js code-highlight"><span class="code-line"><span class="token comment">// 특별 처리 필요</span>
</span><span class="code-line"><span class="token literal-property property">oldProps</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">className</span><span class="token operator">:</span> <span class="token string">&quot;old-class&quot;</span> <span class="token punctuation">}</span>
</span><span class="code-line"><span class="token literal-property property">newProps</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">className</span><span class="token operator">:</span> <span class="token string">&quot;new-class&quot;</span> <span class="token punctuation">}</span>
</span><span class="code-line">→ element<span class="token punctuation">.</span><span class="token property-access">className</span> <span class="token operator">=</span> <span class="token string">&quot;new-class&quot;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment">// 제거 시</span>
</span><span class="code-line"><span class="token literal-property property">newProps</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token comment">// className 없음</span>
</span><span class="code-line">→ element<span class="token punctuation">.</span><span class="token method function property-access">removeAttribute</span><span class="token punctuation">(</span><span class="token string">&#x27;class&#x27;</span><span class="token punctuation">)</span>
</span></code><div class="copied" data-code="// 특별 처리 필요
oldProps: { className: &quot;old-class&quot; }
newProps: { className: &quot;new-class&quot; }
→ element.className = &quot;new-class&quot;

// 제거 시
newProps: {} // className 없음
→ element.removeAttribute(&#x27;class&#x27;)
"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
<ol start="3">
<li>checked, selected</li>
</ol>
<pre class="language-js"><code class="language-js code-highlight"><span class="code-line"><span class="token literal-property property">oldProps</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">checked</span><span class="token operator">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span>
</span><span class="code-line"><span class="token literal-property property">newProps</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">checked</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span>
</span><span class="code-line">→ element<span class="token punctuation">.</span><span class="token property-access">checked</span> <span class="token operator">=</span> <span class="token boolean">true</span>   <span class="token comment">// property 설정</span>
</span></code><div class="copied" data-code="oldProps: { checked: false }
newProps: { checked: true }
→ element.checked = true   // property 설정
"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
<ol start="4">
<li>disabled, readonly</li>
</ol>
<pre class="language-js"><code class="language-js code-highlight"><span class="code-line"><span class="token literal-property property">oldProps</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">disabled</span><span class="token operator">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span>
</span><span class="code-line"><span class="token literal-property property">newProps</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">disabled</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span>
</span><span class="code-line">→ element<span class="token punctuation">.</span><span class="token property-access">disabled</span><span class="token operator">=</span> <span class="token boolean">true</span>        <span class="token comment">// property 설정</span>
</span><span class="code-line">→ element<span class="token punctuation">.</span><span class="token method function property-access">setAttribute</span><span class="token punctuation">(</span><span class="token string">&#x27;disabled&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;&#x27;</span><span class="token punctuation">)</span>  <span class="token comment">// attribute 설정</span>
</span></code><div class="copied" data-code="oldProps: { disabled: false }
newProps: { disabled: true }
→ element.disabled= true        // property 설정
→ element.setAttribute(&#x27;disabled&#x27;, &#x27;&#x27;)  // attribute 설정
"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
<ol start="5">
<li>이벤트 핸들러</li>
</ol>
<pre class="language-js"><code class="language-js code-highlight"><span class="code-line"><span class="token comment">// onClick, onMouseOver 등</span>
</span><span class="code-line"><span class="token literal-property property">oldProps</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">onClick</span><span class="token operator">:</span> oldHandler <span class="token punctuation">}</span>
</span><span class="code-line"><span class="token literal-property property">newProps</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">onClick</span><span class="token operator">:</span> newHandler <span class="token punctuation">}</span>
</span><span class="code-line">→ <span class="token function">removeEvent</span><span class="token punctuation">(</span>element<span class="token punctuation">,</span> <span class="token string">&#x27;click&#x27;</span><span class="token punctuation">,</span> oldHandler<span class="token punctuation">)</span>
</span><span class="code-line">→ <span class="token function">addEvent</span><span class="token punctuation">(</span>element<span class="token punctuation">,</span> <span class="token string">&#x27;click&#x27;</span><span class="token punctuation">,</span> newHandler<span class="token punctuation">)</span>
</span></code><div class="copied" data-code="// onClick, onMouseOver 등
oldProps: { onClick: oldHandler }
newProps: { onClick: newHandler }
→ removeEvent(element, &#x27;click&#x27;, oldHandler)
→ addEvent(element, &#x27;click&#x27;, newHandler)
"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
<ol start="6">
<li>변경 감지</li>
</ol>
<pre class="language-js"><code class="language-js code-highlight"><span class="code-line"><span class="token keyword">const</span> allKeys <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
</span><span class="code-line">  <span class="token spread operator">...</span><span class="token known-class-name class-name">Object</span><span class="token punctuation">.</span><span class="token method function property-access">keys</span><span class="token punctuation">(</span>oldProps <span class="token operator">||</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
</span><span class="code-line">  <span class="token spread operator">...</span><span class="token known-class-name class-name">Object</span><span class="token punctuation">.</span><span class="token method function property-access">keys</span><span class="token punctuation">(</span>newProps <span class="token operator">||</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</span><span class="code-line"><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line">allKeys<span class="token punctuation">.</span><span class="token method function property-access">forEach</span><span class="token punctuation">(</span><span class="token parameter">key</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token keyword">const</span> newValue <span class="token operator">=</span> newProps<span class="token operator">?.</span><span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token keyword">const</span> oldValue <span class="token operator">=</span> oldProps<span class="token operator">?.</span><span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">;</span>
</span><span class="code-line">  
</span><span class="code-line">  <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>newValue <span class="token operator">===</span> oldValue<span class="token punctuation">)</span> <span class="token keyword control-flow">return</span><span class="token punctuation">;</span> <span class="token comment">// 변경 없음 - 건너뛰기</span>
</span><span class="code-line">  
</span><span class="code-line">  <span class="token comment">// 변경된 속성만 처리</span>
</span><span class="code-line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></code><div class="copied" data-code="const allKeys = new Set([
  ...Object.keys(oldProps || {}),
  ...Object.keys(newProps || {})
]);

allKeys.forEach(key =&gt; {
  const newValue = newProps?.[key];
  const oldValue = oldProps?.[key];
  
  if (newValue === oldValue) return; // 변경 없음 - 건너뛰기
  
  // 변경된 속성만 처리
});
"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
<ol start="7">
<li>속성 제거</li>
</ol>
<pre class="language-js"><code class="language-js code-highlight"><span class="code-line"><span class="token comment">// 이전에 있었지만 새로운 props에는 없는 경우</span>
</span><span class="code-line"><span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>oldValue <span class="token operator">!==</span> <span class="token keyword nil">undefined</span> <span class="token operator">&amp;&amp;</span> newValue <span class="token operator">===</span> <span class="token keyword nil">undefined</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">  element<span class="token punctuation">.</span><span class="token method function property-access">removeAttribute</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code><div class="copied" data-code="// 이전에 있었지만 새로운 props에는 없는 경우
if (oldValue !== undefined &amp;&amp; newValue === undefined) {
  element.removeAttribute(key);
}
"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
<h4 id="구현-코드-5"><a aria-hidden="true" tabindex="-1" href="#구현-코드-5"><span class="icon icon-link"></span></a>구현 코드</h4>
<pre class="language-js"><code class="language-js code-highlight"><span class="code-line"><span class="token comment">// 속성 업데이트</span>
</span><span class="code-line"><span class="token keyword">function</span> <span class="token function">updateAttributes</span><span class="token punctuation">(</span><span class="token parameter">target<span class="token punctuation">,</span> newProps<span class="token punctuation">,</span> oldProps</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token keyword">const</span> allKeys <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
</span><span class="code-line">    <span class="token spread operator">...</span><span class="token known-class-name class-name">Object</span><span class="token punctuation">.</span><span class="token method function property-access">keys</span><span class="token punctuation">(</span>oldProps <span class="token operator">||</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
</span><span class="code-line">    <span class="token spread operator">...</span><span class="token known-class-name class-name">Object</span><span class="token punctuation">.</span><span class="token method function property-access">keys</span><span class="token punctuation">(</span>newProps <span class="token operator">||</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</span><span class="code-line">  <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">  
</span><span class="code-line">  allKeys<span class="token punctuation">.</span><span class="token method function property-access">forEach</span><span class="token punctuation">(</span><span class="token parameter">key</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token keyword">const</span> newValue <span class="token operator">=</span> newProps<span class="token operator">?.</span><span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">;</span>
</span><span class="code-line">    <span class="token keyword">const</span> oldValue <span class="token operator">=</span> oldProps<span class="token operator">?.</span><span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">;</span>
</span><span class="code-line">    
</span><span class="code-line">    <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>newValue <span class="token operator">===</span> oldValue<span class="token punctuation">)</span> <span class="token keyword control-flow">return</span><span class="token punctuation">;</span>
</span><span class="code-line">    
</span><span class="code-line">    <span class="token comment">// 이벤트 핸들러 처리</span>
</span><span class="code-line">    <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>key<span class="token punctuation">.</span><span class="token method function property-access">startsWith</span><span class="token punctuation">(</span><span class="token string">&#x27;on&#x27;</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token keyword">typeof</span> oldValue <span class="token operator">===</span> <span class="token string">&#x27;function&#x27;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">      <span class="token keyword">const</span> eventType <span class="token operator">=</span> key<span class="token punctuation">.</span><span class="token method function property-access">slice</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">      <span class="token function">removeEvent</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> eventType<span class="token punctuation">,</span> oldValue<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">    <span class="token punctuation">}</span>
</span><span class="code-line">    <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>key<span class="token punctuation">.</span><span class="token method function property-access">startsWith</span><span class="token punctuation">(</span><span class="token string">&#x27;on&#x27;</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token keyword">typeof</span> newValue <span class="token operator">===</span> <span class="token string">&#x27;function&#x27;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">      <span class="token keyword">const</span> eventType <span class="token operator">=</span> key<span class="token punctuation">.</span><span class="token method function property-access">slice</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">      <span class="token function">addEvent</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> eventType<span class="token punctuation">,</span> newValue<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">      <span class="token keyword control-flow">return</span><span class="token punctuation">;</span>
</span><span class="code-line">    <span class="token punctuation">}</span>
</span><span class="code-line">    
</span><span class="code-line">    <span class="token comment">// className 처리</span>
</span><span class="code-line">    <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>key <span class="token operator">===</span> <span class="token string">&#x27;className&#x27;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">      <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>newValue<span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">        target<span class="token punctuation">.</span><span class="token property-access">className</span> <span class="token operator">=</span> newValue<span class="token punctuation">;</span>
</span><span class="code-line">      <span class="token punctuation">}</span> <span class="token keyword control-flow">else</span> <span class="token punctuation">{</span>
</span><span class="code-line">        target<span class="token punctuation">.</span><span class="token method function property-access">removeAttribute</span><span class="token punctuation">(</span><span class="token string">&#x27;class&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">      <span class="token punctuation">}</span>
</span><span class="code-line">      <span class="token keyword control-flow">return</span><span class="token punctuation">;</span>
</span><span class="code-line">    <span class="token punctuation">}</span>
</span><span class="code-line">    
</span><span class="code-line">    <span class="token comment">// checked와 selected는 property만 설정 (attribute 건드리지 않음)</span>
</span><span class="code-line">    <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>key <span class="token operator">===</span> <span class="token string">&#x27;checked&#x27;</span> <span class="token operator">||</span> key <span class="token operator">===</span> <span class="token string">&#x27;selected&#x27;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">      target<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token operator">!</span><span class="token operator">!</span>newValue<span class="token punctuation">;</span>
</span><span class="code-line">      <span class="token keyword control-flow">return</span><span class="token punctuation">;</span>
</span><span class="code-line">    <span class="token punctuation">}</span>
</span><span class="code-line">    
</span><span class="code-line">    <span class="token comment">// 다른 Boolean 속성들 (disabled, readOnly)</span>
</span><span class="code-line">    <span class="token keyword">const</span> otherBooleanProps <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&#x27;disabled&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;readOnly&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
</span><span class="code-line">    <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>otherBooleanProps<span class="token punctuation">.</span><span class="token method function property-access">includes</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">      target<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token operator">!</span><span class="token operator">!</span>newValue<span class="token punctuation">;</span>
</span><span class="code-line">      <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>newValue<span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">        target<span class="token punctuation">.</span><span class="token method function property-access">setAttribute</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> <span class="token string">&#x27;&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">      <span class="token punctuation">}</span> <span class="token keyword control-flow">else</span> <span class="token punctuation">{</span>
</span><span class="code-line">        target<span class="token punctuation">.</span><span class="token method function property-access">removeAttribute</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">      <span class="token punctuation">}</span>
</span><span class="code-line">      <span class="token keyword control-flow">return</span><span class="token punctuation">;</span>
</span><span class="code-line">    <span class="token punctuation">}</span>
</span><span class="code-line">    
</span><span class="code-line">    <span class="token comment">// 일반 속성 처리</span>
</span><span class="code-line">    <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>newValue <span class="token operator">==</span> <span class="token keyword null nil">null</span> <span class="token operator">||</span> newValue <span class="token operator">===</span> <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">      target<span class="token punctuation">.</span><span class="token method function property-access">removeAttribute</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">    <span class="token punctuation">}</span> <span class="token keyword control-flow">else</span> <span class="token punctuation">{</span>
</span><span class="code-line">      target<span class="token punctuation">.</span><span class="token method function property-access">setAttribute</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> <span class="token known-class-name class-name">String</span><span class="token punctuation">(</span>newValue<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">    <span class="token punctuation">}</span>
</span><span class="code-line">  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code><div class="copied" data-code="// 속성 업데이트
function updateAttributes(target, newProps, oldProps) {
  const allKeys = new Set([
    ...Object.keys(oldProps || {}),
    ...Object.keys(newProps || {})
  ]);
  
  allKeys.forEach(key =&gt; {
    const newValue = newProps?.[key];
    const oldValue = oldProps?.[key];
    
    if (newValue === oldValue) return;
    
    // 이벤트 핸들러 처리
    if (key.startsWith(&#x27;on&#x27;) &amp;&amp; typeof oldValue === &#x27;function&#x27;) {
      const eventType = key.slice(2).toLowerCase();
      removeEvent(target, eventType, oldValue);
    }
    if (key.startsWith(&#x27;on&#x27;) &amp;&amp; typeof newValue === &#x27;function&#x27;) {
      const eventType = key.slice(2).toLowerCase();
      addEvent(target, eventType, newValue);
      return;
    }
    
    // className 처리
    if (key === &#x27;className&#x27;) {
      if (newValue) {
        target.className = newValue;
      } else {
        target.removeAttribute(&#x27;class&#x27;);
      }
      return;
    }
    
    // checked와 selected는 property만 설정 (attribute 건드리지 않음)
    if (key === &#x27;checked&#x27; || key === &#x27;selected&#x27;) {
      target[key] = !!newValue;
      return;
    }
    
    // 다른 Boolean 속성들 (disabled, readOnly)
    const otherBooleanProps = [&#x27;disabled&#x27;, &#x27;readOnly&#x27;];
    if (otherBooleanProps.includes(key)) {
      target[key] = !!newValue;
      if (newValue) {
        target.setAttribute(key, &#x27;&#x27;);
      } else {
        target.removeAttribute(key);
      }
      return;
    }
    
    // 일반 속성 처리
    if (newValue == null || newValue === false) {
      target.removeAttribute(key);
    } else {
      target.setAttribute(key, String(newValue));
    }
  });
}
"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
</details>
<details>
<summary>updateElement</summary>
<p>이전 가상 DOM과 새로운 가상 DOM을 비교하여 실제 DOM을 최소한으로 변경하는 함수</p>
<ul>
<li><code>parentElement</code> : 부모 DOM 요소</li>
<li><code>newNode</code> : 새로운 가상 DOM 노드</li>
<li><code>oldNode</code> : 이전 가상 DOM 노드</li>
<li><code>index</code> : 부모 내에서의 위치</li>
</ul>
<h4 id="비교-전략"><a aria-hidden="true" tabindex="-1" href="#비교-전략"><span class="icon icon-link"></span></a>비교 전략</h4>
<ol>
<li>노드 존재 여부 체크</li>
</ol>
<pre class="language-js"><code class="language-js code-highlight"><span class="code-line"><span class="token comment">// 새 노드가 없으면 기존 노드 제거</span>
</span><span class="code-line"><span class="token keyword control-flow">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>newNode <span class="token operator">&amp;&amp;</span> oldNode<span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token keyword">const</span> childToRemove <span class="token operator">=</span> parentElement<span class="token punctuation">.</span><span class="token property-access">childNodes</span><span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>childToRemove<span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">    parentElement<span class="token punctuation">.</span><span class="token method function property-access">removeChild</span><span class="token punctuation">(</span>childToRemove<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token punctuation">}</span>
</span><span class="code-line">  <span class="token keyword control-flow">return</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment">// 기존 노드가 없으면 새 노드 추가</span>
</span><span class="code-line"><span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>newNode <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>oldNode<span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token keyword">const</span> newElement <span class="token operator">=</span> <span class="token function">createElement</span><span class="token punctuation">(</span>newNode<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">  parentElement<span class="token punctuation">.</span><span class="token method function property-access">appendChild</span><span class="token punctuation">(</span>newElement<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token keyword control-flow">return</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code><div class="copied" data-code="// 새 노드가 없으면 기존 노드 제거
if (!newNode &amp;&amp; oldNode) {
  const childToRemove = parentElement.childNodes[index];
  if (childToRemove) {
    parentElement.removeChild(childToRemove);
  }
  return;
}

// 기존 노드가 없으면 새 노드 추가
if (newNode &amp;&amp; !oldNode) {
  const newElement = createElement(newNode);
  parentElement.appendChild(newElement);
  return;
}
"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
<ol start="2">
<li>텍스트 노드 처리</li>
</ol>
<pre class="language-js"><code class="language-js code-highlight"><span class="code-line"><span class="token comment">// 둘 다 텍스트 노드면서 다를 경우 업데이트</span>
</span><span class="code-line"><span class="token keyword control-flow">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> newNode <span class="token operator">===</span> <span class="token string">&#x27;string&#x27;</span> <span class="token operator">&amp;&amp;</span> <span class="token keyword">typeof</span> oldNode <span class="token operator">===</span> <span class="token string">&#x27;string&#x27;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>newNode <span class="token operator">!==</span> oldNode<span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">    parentElement<span class="token punctuation">.</span><span class="token property-access">childNodes</span><span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token property-access">textContent</span> <span class="token operator">=</span> newNode<span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token punctuation">}</span>
</span><span class="code-line">  <span class="token keyword control-flow">return</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code><div class="copied" data-code="// 둘 다 텍스트 노드면서 다를 경우 업데이트
if (typeof newNode === &#x27;string&#x27; &amp;&amp; typeof oldNode === &#x27;string&#x27;) {
  if (newNode !== oldNode) {
    parentElement.childNodes[index].textContent = newNode;
  }
  return;
}
"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
<ol start="3">
<li>요소 타입 비교</li>
</ol>
<pre class="language-js"><code class="language-js code-highlight"><span class="code-line"><span class="token comment">// 노드 타입이 다르면 교체</span>
</span><span class="code-line"><span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>newNode<span class="token punctuation">.</span><span class="token property-access">type</span> <span class="token operator">!==</span> oldNode<span class="token punctuation">.</span><span class="token property-access">type</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token keyword">const</span> newElement <span class="token operator">=</span> <span class="token function">createElement</span><span class="token punctuation">(</span>newNode<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token keyword">const</span> oldElement <span class="token operator">=</span> parentElement<span class="token punctuation">.</span><span class="token property-access">childNodes</span><span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">;</span>
</span><span class="code-line">  parentElement<span class="token punctuation">.</span><span class="token method function property-access">replaceChild</span><span class="token punctuation">(</span>newElement<span class="token punctuation">,</span> oldElement<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token keyword control-flow">return</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code><div class="copied" data-code="// 노드 타입이 다르면 교체
if (newNode.type !== oldNode.type) {
  const newElement = createElement(newNode);
  const oldElement = parentElement.childNodes[index];
  parentElement.replaceChild(newElement, oldElement);
  return;
}
"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
<ol start="4">
<li>같은 타입 요소 업데이트</li>
</ol>
<pre class="language-js"><code class="language-js code-highlight"><span class="code-line"><span class="token comment">// 같은 타입이면 속성과 자식만 업데이트</span>
</span><span class="code-line"><span class="token keyword">const</span> currentElement <span class="token operator">=</span> parentElement<span class="token punctuation">.</span><span class="token property-access">childNodes</span><span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token function">updateAttributes</span><span class="token punctuation">(</span>currentElement<span class="token punctuation">,</span> newNode<span class="token punctuation">.</span><span class="token property-access">props</span><span class="token punctuation">,</span> oldNode<span class="token punctuation">.</span><span class="token property-access">props</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></code><div class="copied" data-code="// 같은 타입이면 속성과 자식만 업데이트
const currentElement = parentElement.childNodes[index];
updateAttributes(currentElement, newNode.props, oldNode.props);
"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
<ol start="5">
<li>자식 노드</li>
</ol>
<pre class="language-js"><code class="language-js code-highlight"><span class="code-line"><span class="token comment">// 같은 타입이면 속성과 자식만 업데이트</span>
</span><span class="code-line"><span class="token keyword">const</span> currentElement <span class="token operator">=</span> parentElement<span class="token punctuation">.</span><span class="token property-access">childNodes</span><span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token function">updateAttributes</span><span class="token punctuation">(</span>currentElement<span class="token punctuation">,</span> newNode<span class="token punctuation">.</span><span class="token property-access">props</span><span class="token punctuation">,</span> oldNode<span class="token punctuation">.</span><span class="token property-access">props</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment">// 자식 노드들 업데이트</span>
</span><span class="code-line"><span class="token keyword">const</span> newChildren <span class="token operator">=</span> newNode<span class="token punctuation">.</span><span class="token property-access">children</span> <span class="token operator">||</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token keyword">const</span> oldChildren <span class="token operator">=</span> oldNode<span class="token punctuation">.</span><span class="token property-access">children</span> <span class="token operator">||</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token keyword">const</span> maxLength <span class="token operator">=</span> <span class="token known-class-name class-name">Math</span><span class="token punctuation">.</span><span class="token method function property-access">max</span><span class="token punctuation">(</span>newChildren<span class="token punctuation">.</span><span class="token property-access">length</span><span class="token punctuation">,</span> oldChildren<span class="token punctuation">.</span><span class="token property-access">length</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment">// 먼저 기존 자식들을 새로운 자식들과 비교/업데이트</span>
</span><span class="code-line"><span class="token keyword control-flow">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token known-class-name class-name">Math</span><span class="token punctuation">.</span><span class="token method function property-access">min</span><span class="token punctuation">(</span>newChildren<span class="token punctuation">.</span><span class="token property-access">length</span><span class="token punctuation">,</span> oldChildren<span class="token punctuation">.</span><span class="token property-access">length</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token function">updateElement</span><span class="token punctuation">(</span>currentElement<span class="token punctuation">,</span> newChildren<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> oldChildren<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment">// 새로운 자식이 더 많으면 추가</span>
</span><span class="code-line"><span class="token keyword control-flow">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> oldChildren<span class="token punctuation">.</span><span class="token property-access">length</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> newChildren<span class="token punctuation">.</span><span class="token property-access">length</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token keyword">const</span> newElement <span class="token operator">=</span> <span class="token function">createElement</span><span class="token punctuation">(</span>newChildren<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">  currentElement<span class="token punctuation">.</span><span class="token method function property-access">appendChild</span><span class="token punctuation">(</span>newElement<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment">// 기존 자식이 더 많으면 제거</span>
</span><span class="code-line"><span class="token comment">// 인덱스 관리를 위해 역순으로 처리</span>
</span><span class="code-line"><span class="token keyword control-flow">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> oldChildren<span class="token punctuation">.</span><span class="token property-access">length</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&gt;=</span> newChildren<span class="token punctuation">.</span><span class="token property-access">length</span><span class="token punctuation">;</span> i<span class="token operator">--</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token keyword">const</span> childToRemove <span class="token operator">=</span> currentElement<span class="token punctuation">.</span><span class="token property-access">childNodes</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>childToRemove<span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">    currentElement<span class="token punctuation">.</span><span class="token method function property-access">removeChild</span><span class="token punctuation">(</span>childToRemove<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token punctuation">}</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code><div class="copied" data-code="// 같은 타입이면 속성과 자식만 업데이트
const currentElement = parentElement.childNodes[index];
updateAttributes(currentElement, newNode.props, oldNode.props);

// 자식 노드들 업데이트
const newChildren = newNode.children || [];
const oldChildren = oldNode.children || [];
const maxLength = Math.max(newChildren.length, oldChildren.length);

// 먼저 기존 자식들을 새로운 자식들과 비교/업데이트
for (let i = 0; i &lt; Math.min(newChildren.length, oldChildren.length); i++) {
  updateElement(currentElement, newChildren[i], oldChildren[i], i);
}

// 새로운 자식이 더 많으면 추가
for (let i = oldChildren.length; i &lt; newChildren.length; i++) {
  const newElement = createElement(newChildren[i]);
  currentElement.appendChild(newElement);
}

// 기존 자식이 더 많으면 제거
// 인덱스 관리를 위해 역순으로 처리
for (let i = oldChildren.length - 1; i &gt;= newChildren.length; i--) {
  const childToRemove = currentElement.childNodes[i];
  if (childToRemove) {
    currentElement.removeChild(childToRemove);
  }
}
"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
<h4 id="구현-코드-6"><a aria-hidden="true" tabindex="-1" href="#구현-코드-6"><span class="icon icon-link"></span></a>구현 코드</h4>
<pre class="language-js"><code class="language-js code-highlight"><span class="code-line"><span class="token comment">// 엘리먼트 업데이트</span>
</span><span class="code-line"><span class="token keyword module">export</span> <span class="token keyword">function</span> <span class="token function">updateElement</span><span class="token punctuation">(</span><span class="token parameter">parentElement<span class="token punctuation">,</span> newNode<span class="token punctuation">,</span> oldNode<span class="token punctuation">,</span> index <span class="token operator">=</span> <span class="token number">0</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token comment">// 1. 새 노드가 없으면 기존 노드 제거</span>
</span><span class="code-line">  <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>newNode <span class="token operator">&amp;&amp;</span> oldNode<span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token keyword">const</span> childToRemove <span class="token operator">=</span> parentElement<span class="token punctuation">.</span><span class="token property-access">childNodes</span><span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">;</span>
</span><span class="code-line">    <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>childToRemove<span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">      parentElement<span class="token punctuation">.</span><span class="token method function property-access">removeChild</span><span class="token punctuation">(</span>childToRemove<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">    <span class="token punctuation">}</span>
</span><span class="code-line">    <span class="token keyword control-flow">return</span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token punctuation">}</span>
</span><span class="code-line">  
</span><span class="code-line">  <span class="token comment">// 2. 기존 노드가 없으면 새 노드 추가</span>
</span><span class="code-line">  <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>newNode <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>oldNode<span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token keyword">const</span> newElement <span class="token operator">=</span> <span class="token function">createElement</span><span class="token punctuation">(</span>newNode<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">    parentElement<span class="token punctuation">.</span><span class="token method function property-access">appendChild</span><span class="token punctuation">(</span>newElement<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">    <span class="token keyword control-flow">return</span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token punctuation">}</span>
</span><span class="code-line">  
</span><span class="code-line">  <span class="token comment">// 3. 둘 다 텍스트 노드면서 다를 경우 업데이트</span>
</span><span class="code-line">  <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> newNode <span class="token operator">===</span> <span class="token string">&#x27;string&#x27;</span> <span class="token operator">&amp;&amp;</span> <span class="token keyword">typeof</span> oldNode <span class="token operator">===</span> <span class="token string">&#x27;string&#x27;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>newNode <span class="token operator">!==</span> oldNode<span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">      parentElement<span class="token punctuation">.</span><span class="token property-access">childNodes</span><span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token property-access">textContent</span> <span class="token operator">=</span> newNode<span class="token punctuation">;</span>
</span><span class="code-line">    <span class="token punctuation">}</span>
</span><span class="code-line">    <span class="token keyword control-flow">return</span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token punctuation">}</span>
</span><span class="code-line">  
</span><span class="code-line">  <span class="token comment">// 4. 노드 타입이 다르면 교체</span>
</span><span class="code-line">  <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>newNode<span class="token punctuation">.</span><span class="token property-access">type</span> <span class="token operator">!==</span> oldNode<span class="token punctuation">.</span><span class="token property-access">type</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token keyword">const</span> newElement <span class="token operator">=</span> <span class="token function">createElement</span><span class="token punctuation">(</span>newNode<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">    <span class="token keyword">const</span> oldElement <span class="token operator">=</span> parentElement<span class="token punctuation">.</span><span class="token property-access">childNodes</span><span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">;</span>
</span><span class="code-line">    parentElement<span class="token punctuation">.</span><span class="token method function property-access">replaceChild</span><span class="token punctuation">(</span>newElement<span class="token punctuation">,</span> oldElement<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">    <span class="token keyword control-flow">return</span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token punctuation">}</span>
</span><span class="code-line">  
</span><span class="code-line">  <span class="token comment">// 5. 같은 타입이면 속성과 자식만 업데이트</span>
</span><span class="code-line">  <span class="token keyword">const</span> currentElement <span class="token operator">=</span> parentElement<span class="token punctuation">.</span><span class="token property-access">childNodes</span><span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token function">updateAttributes</span><span class="token punctuation">(</span>currentElement<span class="token punctuation">,</span> newNode<span class="token punctuation">.</span><span class="token property-access">props</span><span class="token punctuation">,</span> oldNode<span class="token punctuation">.</span><span class="token property-access">props</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">  
</span><span class="code-line">  <span class="token comment">// 6. 자식 노드들 업데이트</span>
</span><span class="code-line">  <span class="token keyword">const</span> newChildren <span class="token operator">=</span> newNode<span class="token punctuation">.</span><span class="token property-access">children</span> <span class="token operator">||</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token keyword">const</span> oldChildren <span class="token operator">=</span> oldNode<span class="token punctuation">.</span><span class="token property-access">children</span> <span class="token operator">||</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token keyword">const</span> maxLength <span class="token operator">=</span> <span class="token known-class-name class-name">Math</span><span class="token punctuation">.</span><span class="token method function property-access">max</span><span class="token punctuation">(</span>newChildren<span class="token punctuation">.</span><span class="token property-access">length</span><span class="token punctuation">,</span> oldChildren<span class="token punctuation">.</span><span class="token property-access">length</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">  
</span><span class="code-line">  <span class="token comment">// 7. 먼저 기존 자식들을 새로운 자식들과 비교/업데이트</span>
</span><span class="code-line">  <span class="token keyword control-flow">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token known-class-name class-name">Math</span><span class="token punctuation">.</span><span class="token method function property-access">min</span><span class="token punctuation">(</span>newChildren<span class="token punctuation">.</span><span class="token property-access">length</span><span class="token punctuation">,</span> oldChildren<span class="token punctuation">.</span><span class="token property-access">length</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token function">updateElement</span><span class="token punctuation">(</span>currentElement<span class="token punctuation">,</span> newChildren<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> oldChildren<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token punctuation">}</span>
</span><span class="code-line">  
</span><span class="code-line">  <span class="token comment">// 8. 새로운 자식이 더 많으면 추가</span>
</span><span class="code-line">  <span class="token keyword control-flow">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> oldChildren<span class="token punctuation">.</span><span class="token property-access">length</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> newChildren<span class="token punctuation">.</span><span class="token property-access">length</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token keyword">const</span> newElement <span class="token operator">=</span> <span class="token function">createElement</span><span class="token punctuation">(</span>newChildren<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">    currentElement<span class="token punctuation">.</span><span class="token method function property-access">appendChild</span><span class="token punctuation">(</span>newElement<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token punctuation">}</span>
</span><span class="code-line">  
</span><span class="code-line">  <span class="token comment">// 9. 기존 자식이 더 많으면 제거</span>
</span><span class="code-line">  <span class="token comment">// 인덱스 관리를 위해 역순으로 처리</span>
</span><span class="code-line">  <span class="token keyword control-flow">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> oldChildren<span class="token punctuation">.</span><span class="token property-access">length</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&gt;=</span> newChildren<span class="token punctuation">.</span><span class="token property-access">length</span><span class="token punctuation">;</span> i<span class="token operator">--</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token keyword">const</span> childToRemove <span class="token operator">=</span> currentElement<span class="token punctuation">.</span><span class="token property-access">childNodes</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
</span><span class="code-line">    <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>childToRemove<span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">      currentElement<span class="token punctuation">.</span><span class="token method function property-access">removeChild</span><span class="token punctuation">(</span>childToRemove<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">    <span class="token punctuation">}</span>
</span><span class="code-line">  <span class="token punctuation">}</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code><div class="copied" data-code="// 엘리먼트 업데이트
export function updateElement(parentElement, newNode, oldNode, index = 0) {
  // 1. 새 노드가 없으면 기존 노드 제거
  if (!newNode &amp;&amp; oldNode) {
    const childToRemove = parentElement.childNodes[index];
    if (childToRemove) {
      parentElement.removeChild(childToRemove);
    }
    return;
  }
  
  // 2. 기존 노드가 없으면 새 노드 추가
  if (newNode &amp;&amp; !oldNode) {
    const newElement = createElement(newNode);
    parentElement.appendChild(newElement);
    return;
  }
  
  // 3. 둘 다 텍스트 노드면서 다를 경우 업데이트
  if (typeof newNode === &#x27;string&#x27; &amp;&amp; typeof oldNode === &#x27;string&#x27;) {
    if (newNode !== oldNode) {
      parentElement.childNodes[index].textContent = newNode;
    }
    return;
  }
  
  // 4. 노드 타입이 다르면 교체
  if (newNode.type !== oldNode.type) {
    const newElement = createElement(newNode);
    const oldElement = parentElement.childNodes[index];
    parentElement.replaceChild(newElement, oldElement);
    return;
  }
  
  // 5. 같은 타입이면 속성과 자식만 업데이트
  const currentElement = parentElement.childNodes[index];
  updateAttributes(currentElement, newNode.props, oldNode.props);
  
  // 6. 자식 노드들 업데이트
  const newChildren = newNode.children || [];
  const oldChildren = oldNode.children || [];
  const maxLength = Math.max(newChildren.length, oldChildren.length);
  
  // 7. 먼저 기존 자식들을 새로운 자식들과 비교/업데이트
  for (let i = 0; i &lt; Math.min(newChildren.length, oldChildren.length); i++) {
    updateElement(currentElement, newChildren[i], oldChildren[i], i);
  }
  
  // 8. 새로운 자식이 더 많으면 추가
  for (let i = oldChildren.length; i &lt; newChildren.length; i++) {
    const newElement = createElement(newChildren[i]);
    currentElement.appendChild(newElement);
  }
  
  // 9. 기존 자식이 더 많으면 제거
  // 인덱스 관리를 위해 역순으로 처리
  for (let i = oldChildren.length - 1; i &gt;= newChildren.length; i--) {
    const childToRemove = currentElement.childNodes[i];
    if (childToRemove) {
      currentElement.removeChild(childToRemove);
    }
  }
}
"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
</details>
<p>이전 주차보다 AI 사용이 훨씬 원활하긴 했지만 작은 문제가 하나 생겼었습니다. 채팅을 이어가던 중 채팅 길이가 너무 길어져 새 채팅을 열어야 하는 상황. 문제는 이전 채팅의 정보를 가져갈 수가 없었습니다.</p>
<p>다행히 문서를 남기며 작업 중이었기에 너무 어렵지 않게 다음 채팅을 이어나갈 수는 있었지만 그럼에도 테스트 코드나 지금까지 작성한 코드를 다시 붙여 넣는 과정이 필요했습니다.</p>
<p>그래서 두 번째 채팅부터는 채팅 길이를 지속적으로 감지하여 일정 길이가 되면 지금까지의 과정, 진행사항, 다음 진행 단계, 그리고 다음 채팅에서 어떤 문장과 함께 시작하면 되는지를 정리한 문서를 달라고 했습니다.</p>
<details>
<summary>진행사항 정리 문서 예시</summary>
# 가상 DOM 프로젝트 진행 상황 및 컨텍스트
<h2 id="-프로젝트-개요"><a aria-hidden="true" tabindex="-1" href="#-프로젝트-개요"><span class="icon icon-link"></span></a>📋 프로젝트 개요</h2>
<p>가상 DOM을 직접 구현하며 테스트를 통과하는 과제를 수행 중</p>
<h3 id="주요-구현-함수들"><a aria-hidden="true" tabindex="-1" href="#주요-구현-함수들"><span class="icon icon-link"></span></a>주요 구현 함수들</h3>
<ul>
<li><code>createVNode</code> - 가상 노드 생성</li>
<li><code>normalizeVNode</code> - 가상 노드 정규화 (컴포넌트 → HTML 요소 변환)</li>
<li><code>createElement</code> - 가상 노드 → 실제 DOM 요소 변환</li>
<li><code>addEvent</code>, <code>removeEvent</code>, <code>setupEventListeners</code> - 이벤트 위임 시스템</li>
<li><code>renderElement</code> - 최종 렌더링 (정규화 + DOM 생성 + 이벤트 설정)</li>
</ul>
<h2 id="-현재-진행-상황"><a aria-hidden="true" tabindex="-1" href="#-현재-진행-상황"><span class="icon icon-link"></span></a>🎯 현재 진행 상황</h2>
<h3 id="-완료된-단계"><a aria-hidden="true" tabindex="-1" href="#-완료된-단계"><span class="icon icon-link"></span></a>✅ 완료된 단계</h3>
<ul>
<li><strong>Basic 테스트 통과</strong> ✅ - 기본적인 가상 DOM 생성 및 렌더링 구현</li>
<li><strong>Advanced 테스트 통과</strong> ✅ - Diff 알고리즘 및 최적화된 업데이트 로직 구현</li>
<li><strong>E2E 테스트 통과</strong> ✅ - UI 테스트 완료</li>
<li><strong>필수 과제 완료</strong> 🎉</li>
</ul>
<h3 id="-현재-단계"><a aria-hidden="true" tabindex="-1" href="#-현재-단계"><span class="icon icon-link"></span></a>🔄 현재 단계</h3>
<ul>
<li><strong>추가 기능 구현 계획 중</strong> - React와 비교하여 업그레이드 방향 검토</li>
</ul>
<h3 id="-향후-계획"><a aria-hidden="true" tabindex="-1" href="#-향후-계획"><span class="icon icon-link"></span></a>📅 향후 계획</h3>
<ol>
<li><strong>React와 비교 분석</strong> - 현재 구현과의 차이점 파악</li>
<li><strong>상태 관리 시스템 구현</strong> - useState, useEffect 등</li>
<li><strong>성능 최적화</strong> - 더 정교한 reconciliation 알고리즘</li>
<li><strong>컴포넌트 라이프사이클</strong> - mount, update, unmount 처리</li>
</ol>
<h2 id="-advanced-테스트-요구사항"><a aria-hidden="true" tabindex="-1" href="#-advanced-테스트-요구사항"><span class="icon icon-link"></span></a>🧪 Advanced 테스트 요구사항</h2>
<h3 id="핵심-기능들"><a aria-hidden="true" tabindex="-1" href="#핵심-기능들"><span class="icon icon-link"></span></a>핵심 기능들</h3>
<ol>
<li><strong>Diff 알고리즘</strong>
<ul>
<li>변경된 부분만 업데이트</li>
<li>DOM 요소 재사용 (같은 타입의 요소는 새로 생성하지 않음)</li>
<li>효율적인 자식 노드 관리</li>
</ul>
</li>
<li><strong>특수 속성 처리</strong>
<ul>
<li><code>className</code> → <code>class</code> 속성 매핑</li>
<li>Boolean 속성들: <code>checked</code>, <code>disabled</code>, <code>selected</code>, <code>readOnly</code></li>
<li>속성 제거 시 DOM에서도 완전 제거</li>
</ul>
</li>
<li><strong>컴포넌트 업데이트</strong>
<ul>
<li>함수형 컴포넌트의 효율적인 리렌더링</li>
<li>중첩된 컴포넌트에서 깊은 레벨 변경사항만 업데이트</li>
</ul>
</li>
<li><strong>엣지케이스 처리</strong>
<ul>
<li>자식 배열 크기 변경 (많은 자식 → 적은 자식)</li>
<li>빈 배열로 모든 자식 제거</li>
<li>복잡한 중첩 구조에서의 업데이트</li>
</ul>
</li>
</ol>
<h3 id="주요-테스트-케이스"><a aria-hidden="true" tabindex="-1" href="#주요-테스트-케이스"><span class="icon icon-link"></span></a>주요 테스트 케이스</h3>
<ul>
<li><code>diff 알고리즘을 통해 변경된 부분만 업데이트해야 한다</code></li>
<li><code>새로운 요소를 추가하고 불필요한 요소를 제거해야 한다</code></li>
<li><code>요소의 속성만 변경되었을 때 요소를 재사용해야 한다</code></li>
<li><code>요소의 타입이 변경되었을 때 새로운 요소를 생성해야 한다</code></li>
<li><code>className이 props에서 제거될 때 class 속성이 올바르게 제거되어야 한다</code></li>
<li><code>boolean type props가 property로 직접 업데이트되어야 한다</code></li>
</ul>
<h2 id="️-완성된-핵심-구현"><a aria-hidden="true" tabindex="-1" href="#️-완성된-핵심-구현"><span class="icon icon-link"></span></a>🛠️ 완성된 핵심 구현</h2>
<h3 id="1-createvnode---가상-노드-생성"><a aria-hidden="true" tabindex="-1" href="#1-createvnode---가상-노드-생성"><span class="icon icon-link"></span></a>1. createVNode - 가상 노드 생성</h3>
<p>javascript</p>
<pre class="language-javascript"><code class="language-javascript code-highlight"><span class="code-line"><span class="token keyword">function</span> <span class="token function">createVNode</span><span class="token punctuation">(</span><span class="token parameter">type<span class="token punctuation">,</span> props<span class="token punctuation">,</span> <span class="token spread operator">...</span>children</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token keyword control-flow">return</span> <span class="token punctuation">{</span>
</span><span class="code-line">    type<span class="token punctuation">,</span>
</span><span class="code-line">    props<span class="token punctuation">,</span>
</span><span class="code-line">    <span class="token literal-property property">children</span><span class="token operator">:</span> <span class="token function">flattenArray</span><span class="token punctuation">(</span>children<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// 중첩 배열 평탄화 + falsy 값 필터링</span>
</span><span class="code-line">  <span class="token punctuation">}</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code><div class="copied" data-code="function createVNode(type, props, ...children) {
  return {
    type,
    props,
    children: flattenArray(children), // 중첩 배열 평탄화 + falsy 값 필터링
  };
}
"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
<h3 id="2-normalizevnode---함수형-컴포넌트-정규화"><a aria-hidden="true" tabindex="-1" href="#2-normalizevnode---함수형-컴포넌트-정규화"><span class="icon icon-link"></span></a>2. normalizeVNode - 함수형 컴포넌트 정규화</h3>
<p>javascript</p>
<pre class="language-javascript"><code class="language-javascript code-highlight"><span class="code-line"><span class="token keyword">function</span> <span class="token function">normalizeVNode</span><span class="token punctuation">(</span><span class="token parameter">vNode</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token comment">// 함수형 컴포넌트 → HTML 요소로 변환</span>
</span><span class="code-line">  <span class="token comment">// children을 props로 전달하여 컴포넌트 호출</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code><div class="copied" data-code="function normalizeVNode(vNode) {
  // 함수형 컴포넌트 → HTML 요소로 변환
  // children을 props로 전달하여 컴포넌트 호출
}
"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
<h3 id="3-createelement---virtual-dom--real-dom"><a aria-hidden="true" tabindex="-1" href="#3-createelement---virtual-dom--real-dom"><span class="icon icon-link"></span></a>3. createElement - Virtual DOM → Real DOM</h3>
<p>javascript</p>
<pre class="language-javascript"><code class="language-javascript code-highlight"><span class="code-line"><span class="token keyword">function</span> <span class="token function">createElement</span><span class="token punctuation">(</span><span class="token parameter">vNode</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token comment">// 배열 → DocumentFragment</span>
</span><span class="code-line">  <span class="token comment">// 함수 컴포넌트 처리 (에러 발생)</span>
</span><span class="code-line">  <span class="token comment">// 일반 vNode → DOM 요소 + 속성 + 자식</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code><div class="copied" data-code="function createElement(vNode) {
  // 배열 → DocumentFragment
  // 함수 컴포넌트 처리 (에러 발생)
  // 일반 vNode → DOM 요소 + 속성 + 자식
}
"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
<h3 id="4-updateelement---diff-알고리즘-핵심"><a aria-hidden="true" tabindex="-1" href="#4-updateelement---diff-알고리즘-핵심"><span class="icon icon-link"></span></a>4. updateElement - Diff 알고리즘 핵심</h3>
<p>javascript</p>
<pre class="language-javascript"><code class="language-javascript code-highlight"><span class="code-line"><span class="token keyword">function</span> <span class="token function">updateElement</span><span class="token punctuation">(</span><span class="token parameter">parentElement<span class="token punctuation">,</span> newNode<span class="token punctuation">,</span> oldNode<span class="token punctuation">,</span> index <span class="token operator">=</span> <span class="token number">0</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token comment">// 1. 노드 추가/제거 처리</span>
</span><span class="code-line">  <span class="token comment">// 2. 타입 변경 시 교체</span>
</span><span class="code-line">  <span class="token comment">// 3. 같은 타입 시 속성/자식 업데이트</span>
</span><span class="code-line">  <span class="token comment">// 4. 자식 노드 재귀적 처리 (역순 제거)</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code><div class="copied" data-code="function updateElement(parentElement, newNode, oldNode, index = 0) {
  // 1. 노드 추가/제거 처리
  // 2. 타입 변경 시 교체
  // 3. 같은 타입 시 속성/자식 업데이트
  // 4. 자식 노드 재귀적 처리 (역순 제거)
}
"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
<h3 id="5-updateattributes---효율적-속성-업데이트"><a aria-hidden="true" tabindex="-1" href="#5-updateattributes---효율적-속성-업데이트"><span class="icon icon-link"></span></a>5. updateAttributes - 효율적 속성 업데이트</h3>
<p>javascript</p>
<pre class="language-javascript"><code class="language-javascript code-highlight"><span class="code-line"><span class="token keyword">function</span> <span class="token function">updateAttributes</span><span class="token punctuation">(</span><span class="token parameter">target<span class="token punctuation">,</span> newProps<span class="token punctuation">,</span> oldProps</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token comment">// className 특별 처리</span>
</span><span class="code-line">  <span class="token comment">// checked, selected → property만 설정</span>
</span><span class="code-line">  <span class="token comment">// disabled, readOnly → property + attribute 설정</span>
</span><span class="code-line">  <span class="token comment">// 이벤트 핸들러 교체</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code><div class="copied" data-code="function updateAttributes(target, newProps, oldProps) {
  // className 특별 처리
  // checked, selected → property만 설정
  // disabled, readOnly → property + attribute 설정
  // 이벤트 핸들러 교체
}
"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
<h3 id="6-이벤트-위임-시스템"><a aria-hidden="true" tabindex="-1" href="#6-이벤트-위임-시스템"><span class="icon icon-link"></span></a>6. 이벤트 위임 시스템</h3>
<p>javascript</p>
<pre class="language-javascript"><code class="language-javascript code-highlight"><span class="code-line"><span class="token comment">// WeakMap + WeakSet으로 메모리 효율적 관리</span>
</span><span class="code-line"><span class="token comment">// 부모에서 위임 처리로 성능 최적화</span>
</span></code><div class="copied" data-code="// WeakMap + WeakSet으로 메모리 효율적 관리
// 부모에서 위임 처리로 성능 최적화
"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
<h2 id="-발생한-에러와-해결-과정"><a aria-hidden="true" tabindex="-1" href="#-발생한-에러와-해결-과정"><span class="icon icon-link"></span></a>🐛 발생한 에러와 해결 과정</h2>
<h3 id="1-boolean-속성-처리-에러"><a aria-hidden="true" tabindex="-1" href="#1-boolean-속성-처리-에러"><span class="icon icon-link"></span></a>1. Boolean 속성 처리 에러</h3>
<h4 id="-문제-checked-속성-테스트-실패"><a aria-hidden="true" tabindex="-1" href="#-문제-checked-속성-테스트-실패"><span class="icon icon-link"></span></a>🚨 문제: <code>checked</code> 속성 테스트 실패</h4>
<pre><code class="code-highlight"><span class="code-line">expect(checkbox.getAttribute(&quot;checked&quot;)).toBe(null);
</span><span class="code-line">실제: [빈값] != null
</span></code><div class="copied" data-code="expect(checkbox.getAttribute(&quot;checked&quot;)).toBe(null);
실제: [빈값] != null
"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
<h4 id="-문제가-있던-코드"><a aria-hidden="true" tabindex="-1" href="#-문제가-있던-코드"><span class="icon icon-link"></span></a>❌ 문제가 있던 코드</h4>
<p>javascript</p>
<pre class="language-javascript"><code class="language-javascript code-highlight"><span class="code-line"><span class="token comment">// 모든 boolean 속성을 동일하게 처리</span>
</span><span class="code-line"><span class="token keyword">const</span> booleanProps <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&#x27;checked&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;disabled&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;selected&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;readOnly&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>booleanProps<span class="token punctuation">.</span><span class="token method function property-access">includes</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">  target<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token operator">!</span><span class="token operator">!</span>newValue<span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>newValue<span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">    target<span class="token punctuation">.</span><span class="token method function property-access">setAttribute</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> <span class="token string">&#x27;&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// ← checked에서는 문제!</span>
</span><span class="code-line">  <span class="token punctuation">}</span> <span class="token keyword control-flow">else</span> <span class="token punctuation">{</span>
</span><span class="code-line">    target<span class="token punctuation">.</span><span class="token method function property-access">removeAttribute</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token punctuation">}</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code><div class="copied" data-code="// 모든 boolean 속성을 동일하게 처리
const booleanProps = [&#x27;checked&#x27;, &#x27;disabled&#x27;, &#x27;selected&#x27;, &#x27;readOnly&#x27;];
if (booleanProps.includes(key)) {
  target[key] = !!newValue;
  if (newValue) {
    target.setAttribute(key, &#x27;&#x27;);  // ← checked에서는 문제!
  } else {
    target.removeAttribute(key);
  }
}
"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
<h4 id="-해결된-코드"><a aria-hidden="true" tabindex="-1" href="#-해결된-코드"><span class="icon icon-link"></span></a>✅ 해결된 코드</h4>
<p>javascript</p>
<pre class="language-javascript"><code class="language-javascript code-highlight"><span class="code-line"><span class="token comment">// checked와 selected는 property만 설정</span>
</span><span class="code-line"><span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>key <span class="token operator">===</span> <span class="token string">&#x27;checked&#x27;</span> <span class="token operator">||</span> key <span class="token operator">===</span> <span class="token string">&#x27;selected&#x27;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">  target<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token operator">!</span><span class="token operator">!</span>newValue<span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token comment">// attribute는 건드리지 않음!</span>
</span><span class="code-line">  <span class="token keyword control-flow">return</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment">// 다른 Boolean 속성들은 property + attribute 설정</span>
</span><span class="code-line"><span class="token keyword">const</span> otherBooleanProps <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&#x27;disabled&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;readOnly&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>otherBooleanProps<span class="token punctuation">.</span><span class="token method function property-access">includes</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">  target<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token operator">!</span><span class="token operator">!</span>newValue<span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>newValue<span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">    target<span class="token punctuation">.</span><span class="token method function property-access">setAttribute</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> <span class="token string">&#x27;&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token punctuation">}</span> <span class="token keyword control-flow">else</span> <span class="token punctuation">{</span>
</span><span class="code-line">    target<span class="token punctuation">.</span><span class="token method function property-access">removeAttribute</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token punctuation">}</span>
</span><span class="code-line">  <span class="token keyword control-flow">return</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code><div class="copied" data-code="// checked와 selected는 property만 설정
if (key === &#x27;checked&#x27; || key === &#x27;selected&#x27;) {
  target[key] = !!newValue;
  // attribute는 건드리지 않음!
  return;
}

// 다른 Boolean 속성들은 property + attribute 설정
const otherBooleanProps = [&#x27;disabled&#x27;, &#x27;readOnly&#x27;];
if (otherBooleanProps.includes(key)) {
  target[key] = !!newValue;
  if (newValue) {
    target.setAttribute(key, &#x27;&#x27;);
  } else {
    target.removeAttribute(key);
  }
  return;
}
"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
<p><strong>해결 핵심</strong>: <code>checked</code>와 <code>selected</code>는 React에서 property로만 제어하며 attribute는 건드리지 않음</p>
<hr/>
<h3 id="2-자식-노드-제거-에러"><a aria-hidden="true" tabindex="-1" href="#2-자식-노드-제거-에러"><span class="icon icon-link"></span></a>2. 자식 노드 제거 에러</h3>
<h4 id="-문제-초과-자식-제거-시-개수-불일치"><a aria-hidden="true" tabindex="-1" href="#-문제-초과-자식-제거-시-개수-불일치"><span class="icon icon-link"></span></a>🚨 문제: 초과 자식 제거 시 개수 불일치</h4>
<pre><code class="code-highlight"><span class="code-line">expect(container.firstChild.children.length).toBe(2);
</span><span class="code-line">실제: 3 != 2
</span></code><div class="copied" data-code="expect(container.firstChild.children.length).toBe(2);
실제: 3 != 2
"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
<h4 id="-문제가-있던-코드-1"><a aria-hidden="true" tabindex="-1" href="#-문제가-있던-코드-1"><span class="icon icon-link"></span></a>❌ 문제가 있던 코드</h4>
<p>javascript</p>
<pre class="language-javascript"><code class="language-javascript code-highlight"><span class="code-line"><span class="token comment">// 순서대로 제거하면 인덱스가 변경됨</span>
</span><span class="code-line"><span class="token keyword">const</span> maxLength <span class="token operator">=</span> <span class="token known-class-name class-name">Math</span><span class="token punctuation">.</span><span class="token method function property-access">max</span><span class="token punctuation">(</span>newChildren<span class="token punctuation">.</span><span class="token property-access">length</span><span class="token punctuation">,</span> oldChildren<span class="token punctuation">.</span><span class="token property-access">length</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token keyword control-flow">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> maxLength<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token function">updateElement</span><span class="token punctuation">(</span>currentElement<span class="token punctuation">,</span> newChildren<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> oldChildren<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code><div class="copied" data-code="// 순서대로 제거하면 인덱스가 변경됨
const maxLength = Math.max(newChildren.length, oldChildren.length);
for (let i = 0; i &lt; maxLength; i++) {
  updateElement(currentElement, newChildren[i], oldChildren[i], i);
}
"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
<h4 id="-해결된-코드-1"><a aria-hidden="true" tabindex="-1" href="#-해결된-코드-1"><span class="icon icon-link"></span></a>✅ 해결된 코드</h4>
<p>javascript</p>
<pre class="language-javascript"><code class="language-javascript code-highlight"><span class="code-line"><span class="token comment">// 1. 공통 부분 업데이트</span>
</span><span class="code-line"><span class="token keyword control-flow">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token known-class-name class-name">Math</span><span class="token punctuation">.</span><span class="token method function property-access">min</span><span class="token punctuation">(</span>newChildren<span class="token punctuation">.</span><span class="token property-access">length</span><span class="token punctuation">,</span> oldChildren<span class="token punctuation">.</span><span class="token property-access">length</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token function">updateElement</span><span class="token punctuation">(</span>currentElement<span class="token punctuation">,</span> newChildren<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> oldChildren<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment">// 2. 새로운 자식 추가</span>
</span><span class="code-line"><span class="token keyword control-flow">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> oldChildren<span class="token punctuation">.</span><span class="token property-access">length</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> newChildren<span class="token punctuation">.</span><span class="token property-access">length</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token keyword">const</span> newElement <span class="token operator">=</span> <span class="token function">createElement</span><span class="token punctuation">(</span>newChildren<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">  currentElement<span class="token punctuation">.</span><span class="token method function property-access">appendChild</span><span class="token punctuation">(</span>newElement<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment">// 3. 초과하는 기존 자식 제거 (역순으로!)</span>
</span><span class="code-line"><span class="token keyword control-flow">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> oldChildren<span class="token punctuation">.</span><span class="token property-access">length</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&gt;=</span> newChildren<span class="token punctuation">.</span><span class="token property-access">length</span><span class="token punctuation">;</span> i<span class="token operator">--</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token keyword">const</span> childToRemove <span class="token operator">=</span> currentElement<span class="token punctuation">.</span><span class="token property-access">childNodes</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>childToRemove<span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">    currentElement<span class="token punctuation">.</span><span class="token method function property-access">removeChild</span><span class="token punctuation">(</span>childToRemove<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token punctuation">}</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code><div class="copied" data-code="// 1. 공통 부분 업데이트
for (let i = 0; i &lt; Math.min(newChildren.length, oldChildren.length); i++) {
  updateElement(currentElement, newChildren[i], oldChildren[i], i);
}

// 2. 새로운 자식 추가
for (let i = oldChildren.length; i &lt; newChildren.length; i++) {
  const newElement = createElement(newChildren[i]);
  currentElement.appendChild(newElement);
}

// 3. 초과하는 기존 자식 제거 (역순으로!)
for (let i = oldChildren.length - 1; i &gt;= newChildren.length; i--) {
  const childToRemove = currentElement.childNodes[i];
  if (childToRemove) {
    currentElement.removeChild(childToRemove);
  }
}
"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
<p><strong>해결 핵심</strong>: 자식 제거는 반드시 역순으로 처리하여 인덱스 안정성 유지</p>
<hr/>
<h3 id="3-이벤트-핸들러-미동작-에러"><a aria-hidden="true" tabindex="-1" href="#3-이벤트-핸들러-미동작-에러"><span class="icon icon-link"></span></a>3. 이벤트 핸들러 미동작 에러</h3>
<h4 id="-문제-전체-테스트-실행-시-이벤트-핸들러-0번-호출"><a aria-hidden="true" tabindex="-1" href="#-문제-전체-테스트-실행-시-이벤트-핸들러-0번-호출"><span class="icon icon-link"></span></a>🚨 문제: 전체 테스트 실행 시 이벤트 핸들러 0번 호출</h4>
<pre><code class="code-highlight"><span class="code-line">expect(clickHandler).toHaveBeenCalledTimes(1);
</span><span class="code-line">실제: 0번 호출됨
</span></code><div class="copied" data-code="expect(clickHandler).toHaveBeenCalledTimes(1);
실제: 0번 호출됨
"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
<h4 id="-문제가-있던-코드-2"><a aria-hidden="true" tabindex="-1" href="#-문제가-있던-코드-2"><span class="icon icon-link"></span></a>❌ 문제가 있던 코드</h4>
<p>javascript</p>
<pre class="language-javascript"><code class="language-javascript code-highlight"><span class="code-line"><span class="token comment">// 문자열 변환으로 인한 중복 키 문제</span>
</span><span class="code-line"><span class="token keyword">const</span> registeredEvents <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword module">export</span> <span class="token keyword">function</span> <span class="token function">setupEventListeners</span><span class="token punctuation">(</span><span class="token parameter">root</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">  eventTypes<span class="token punctuation">.</span><span class="token method function property-access">forEach</span><span class="token punctuation">(</span><span class="token parameter">eventType</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token keyword">const</span> eventKey <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>root<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">_</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>eventType<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>  <span class="token comment">// &quot;[object HTMLDivElement]_click&quot;</span>
</span><span class="code-line">    <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>registeredEvents<span class="token punctuation">.</span><span class="token method function property-access">has</span><span class="token punctuation">(</span>eventKey<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword control-flow">return</span><span class="token punctuation">;</span>  <span class="token comment">// 모든 div가 같은 키!</span>
</span><span class="code-line">    registeredEvents<span class="token punctuation">.</span><span class="token method function property-access">add</span><span class="token punctuation">(</span>eventKey<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">    <span class="token comment">// ... 이벤트 등록</span>
</span><span class="code-line">  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code><div class="copied" data-code="// 문자열 변환으로 인한 중복 키 문제
const registeredEvents = new Set();

export function setupEventListeners(root) {
  eventTypes.forEach(eventType =&gt; {
    const eventKey = `${root}_${eventType}`;  // &quot;[object HTMLDivElement]_click&quot;
    if (registeredEvents.has(eventKey)) return;  // 모든 div가 같은 키!
    registeredEvents.add(eventKey);
    // ... 이벤트 등록
  });
}
"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
<h4 id="-해결된-코드-2"><a aria-hidden="true" tabindex="-1" href="#-해결된-코드-2"><span class="icon icon-link"></span></a>✅ 해결된 코드</h4>
<p>javascript</p>
<pre class="language-javascript"><code class="language-javascript code-highlight"><span class="code-line"><span class="token comment">// WeakSet으로 객체 참조 직접 비교</span>
</span><span class="code-line"><span class="token keyword">const</span> registeredRoots <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">WeakSet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword module">export</span> <span class="token keyword">function</span> <span class="token function">setupEventListeners</span><span class="token punctuation">(</span><span class="token parameter">root</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>registeredRoots<span class="token punctuation">.</span><span class="token method function property-access">has</span><span class="token punctuation">(</span>root<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword control-flow">return</span><span class="token punctuation">;</span>  <span class="token comment">// 객체 참조로 정확히 비교</span>
</span><span class="code-line">  registeredRoots<span class="token punctuation">.</span><span class="token method function property-access">add</span><span class="token punctuation">(</span>root<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">  
</span><span class="code-line">  eventTypes<span class="token punctuation">.</span><span class="token method function property-access">forEach</span><span class="token punctuation">(</span><span class="token parameter">eventType</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">    root<span class="token punctuation">.</span><span class="token method function property-access">addEventListener</span><span class="token punctuation">(</span>eventType<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">      <span class="token comment">// ... 이벤트 위임 로직</span>
</span><span class="code-line">    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code><div class="copied" data-code="// WeakSet으로 객체 참조 직접 비교
const registeredRoots = new WeakSet();

export function setupEventListeners(root) {
  if (registeredRoots.has(root)) return;  // 객체 참조로 정확히 비교
  registeredRoots.add(root);
  
  eventTypes.forEach(eventType =&gt; {
    root.addEventListener(eventType, (e) =&gt; {
      // ... 이벤트 위임 로직
    });
  });
}
"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
<p><strong>해결 핵심</strong>: WeakSet으로 DOM 요소 객체 자체를 추적하여 각 컨테이너를 정확히 구분</p>
<hr/>
<h3 id="4-referenceerror-에러"><a aria-hidden="true" tabindex="-1" href="#4-referenceerror-에러"><span class="icon icon-link"></span></a>4. ReferenceError 에러</h3>
<h4 id="-문제-변수-선언-누락"><a aria-hidden="true" tabindex="-1" href="#-문제-변수-선언-누락"><span class="icon icon-link"></span></a>🚨 문제: 변수 선언 누락</h4>
<pre><code class="code-highlight"><span class="code-line">ReferenceError: registeredRoots is not defined
</span></code><div class="copied" data-code="ReferenceError: registeredRoots is not defined
"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
<h4 id="-문제가-있던-코드-3"><a aria-hidden="true" tabindex="-1" href="#-문제가-있던-코드-3"><span class="icon icon-link"></span></a>❌ 문제가 있던 코드</h4>
<p>javascript</p>
<pre class="language-javascript"><code class="language-javascript code-highlight"><span class="code-line"><span class="token comment">// 변수 선언 없이 사용</span>
</span><span class="code-line"><span class="token keyword module">export</span> <span class="token keyword">function</span> <span class="token function">setupEventListeners</span><span class="token punctuation">(</span><span class="token parameter">root</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>registeredRoots<span class="token punctuation">.</span><span class="token method function property-access">has</span><span class="token punctuation">(</span>root<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword control-flow">return</span><span class="token punctuation">;</span>  <span class="token comment">// ← registeredRoots 선언 안됨!</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code><div class="copied" data-code="// 변수 선언 없이 사용
export function setupEventListeners(root) {
  if (registeredRoots.has(root)) return;  // ← registeredRoots 선언 안됨!
}
"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
<h4 id="-해결된-코드-3"><a aria-hidden="true" tabindex="-1" href="#-해결된-코드-3"><span class="icon icon-link"></span></a>✅ 해결된 코드</h4>
<p>javascript</p>
<pre class="language-javascript"><code class="language-javascript code-highlight"><span class="code-line"><span class="token comment">// 파일 상단에 변수 선언 추가</span>
</span><span class="code-line"><span class="token keyword">const</span> eventStore <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">WeakMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token keyword">const</span> registeredRoots <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">WeakSet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// ← 이 줄 추가!</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword module">export</span> <span class="token keyword">function</span> <span class="token function">setupEventListeners</span><span class="token punctuation">(</span><span class="token parameter">root</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>registeredRoots<span class="token punctuation">.</span><span class="token method function property-access">has</span><span class="token punctuation">(</span>root<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword control-flow">return</span><span class="token punctuation">;</span>
</span><span class="code-line">  registeredRoots<span class="token punctuation">.</span><span class="token method function property-access">add</span><span class="token punctuation">(</span>root<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token comment">// ...</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code><div class="copied" data-code="// 파일 상단에 변수 선언 추가
const eventStore = new WeakMap();
const registeredRoots = new WeakSet();  // ← 이 줄 추가!

export function setupEventListeners(root) {
  if (registeredRoots.has(root)) return;
  registeredRoots.add(root);
  // ...
}
"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
<p><strong>해결 핵심</strong>: 전역 변수는 사용 전에 반드시 선언</p>
<h2 id="-해결한-주요-기술적-도전과제"><a aria-hidden="true" tabindex="-1" href="#-해결한-주요-기술적-도전과제"><span class="icon icon-link"></span></a>🔧 해결한 주요 기술적 도전과제</h2>
<h3 id="1-diff-알고리즘-구현"><a aria-hidden="true" tabindex="-1" href="#1-diff-알고리즘-구현"><span class="icon icon-link"></span></a>1. Diff 알고리즘 구현</h3>
<ul>
<li><strong>DOM 요소 재사용</strong>: 같은 타입 요소는 새로 생성하지 않고 업데이트</li>
<li><strong>효율적 자식 관리</strong>: 역순 제거로 인덱스 안정성 유지</li>
<li><strong>메모리 최적화</strong>: 불필요한 DOM 조작 최소화</li>
</ul>
<h3 id="2-특수-속성-처리"><a aria-hidden="true" tabindex="-1" href="#2-특수-속성-처리"><span class="icon icon-link"></span></a>2. 특수 속성 처리</h3>
<ul>
<li><strong>Boolean 속성 분류</strong>: <code>checked</code>/<code>selected</code> vs <code>disabled</code>/<code>readOnly</code></li>
<li><strong>className 매핑</strong>: <code>props.className</code> → <code>element.className</code></li>
<li><strong>이벤트 핸들러</strong>: 동적 추가/제거</li>
</ul>
<h3 id="3-이벤트-관리-시스템"><a aria-hidden="true" tabindex="-1" href="#3-이벤트-관리-시스템"><span class="icon icon-link"></span></a>3. 이벤트 관리 시스템</h3>
<ul>
<li><strong>위임 패턴</strong>: 성능 최적화</li>
<li><strong>메모리 누수 방지</strong>: WeakMap/WeakSet 활용</li>
<li><strong>테스트 격리</strong>: 각 컨테이너별 독립적 관리</li>
</ul>
<h3 id="4-컴포넌트-시스템"><a aria-hidden="true" tabindex="-1" href="#4-컴포넌트-시스템"><span class="icon icon-link"></span></a>4. 컴포넌트 시스템</h3>
<ul>
<li><strong>함수형 컴포넌트</strong>: props + children 전달</li>
<li><strong>정규화 과정</strong>: 컴포넌트 → HTML 요소 변환</li>
<li><strong>중첩 처리</strong>: 깊은 컴포넌트 트리 지원</li>
</ul>
<h2 id="-다음-단계-react-수준으로-업그레이드"><a aria-hidden="true" tabindex="-1" href="#-다음-단계-react-수준으로-업그레이드"><span class="icon icon-link"></span></a>🚀 다음 단계: React 수준으로 업그레이드</h2>
<h3 id="1-상태-관리-시스템"><a aria-hidden="true" tabindex="-1" href="#1-상태-관리-시스템"><span class="icon icon-link"></span></a>1. 상태 관리 시스템</h3>
<p>javascript</p>
<pre class="language-javascript"><code class="language-javascript code-highlight"><span class="code-line"><span class="token comment">// useState 훅 구현</span>
</span><span class="code-line"><span class="token keyword">function</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token parameter">initialValue</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token comment">// 상태 저장소</span>
</span><span class="code-line">  <span class="token comment">// setter 함수</span>
</span><span class="code-line">  <span class="token comment">// 리렌더링 트리거</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment">// useEffect 훅 구현  </span>
</span><span class="code-line"><span class="token keyword">function</span> <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token parameter">effect<span class="token punctuation">,</span> dependencies</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token comment">// 의존성 배열 비교</span>
</span><span class="code-line">  <span class="token comment">// 마운트/언마운트/업데이트 처리</span>
</span><span class="code-line">  <span class="token comment">// 클린업 함수 관리</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code><div class="copied" data-code="// useState 훅 구현
function useState(initialValue) {
  // 상태 저장소
  // setter 함수
  // 리렌더링 트리거
}

// useEffect 훅 구현  
function useEffect(effect, dependencies) {
  // 의존성 배열 비교
  // 마운트/언마운트/업데이트 처리
  // 클린업 함수 관리
}
"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
<h3 id="2-컴포넌트-라이프사이클"><a aria-hidden="true" tabindex="-1" href="#2-컴포넌트-라이프사이클"><span class="icon icon-link"></span></a>2. 컴포넌트 라이프사이클</h3>
<p>javascript</p>
<pre class="language-javascript"><code class="language-javascript code-highlight"><span class="code-line"><span class="token comment">// 마운트/언마운트 감지</span>
</span><span class="code-line"><span class="token comment">// 의존성 변화 추적</span>
</span><span class="code-line"><span class="token comment">// 효과(effect) 실행 시점 관리</span>
</span></code><div class="copied" data-code="// 마운트/언마운트 감지
// 의존성 변화 추적
// 효과(effect) 실행 시점 관리
"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
<h3 id="3-성능-최적화"><a aria-hidden="true" tabindex="-1" href="#3-성능-최적화"><span class="icon icon-link"></span></a>3. 성능 최적화</h3>
<p>javascript</p>
<pre class="language-javascript"><code class="language-javascript code-highlight"><span class="code-line"><span class="token comment">// React.memo 같은 메모이제이션</span>
</span><span class="code-line"><span class="token comment">// useMemo, useCallback 구현</span>
</span><span class="code-line"><span class="token comment">// 더 정교한 reconciliation</span>
</span></code><div class="copied" data-code="// React.memo 같은 메모이제이션
// useMemo, useCallback 구현
// 더 정교한 reconciliation
"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
<h3 id="4-추가-기능들"><a aria-hidden="true" tabindex="-1" href="#4-추가-기능들"><span class="icon icon-link"></span></a>4. 추가 기능들</h3>
<ul>
<li><strong>Context API</strong>: 프롭 드릴링 해결</li>
<li><strong>Ref 시스템</strong>: DOM 직접 접근</li>
<li><strong>조건부 렌더링</strong>: Suspense, ErrorBoundary</li>
<li><strong>Key 기반 리스트</strong>: 더 효율적인 배열 렌더링</li>
</ul>
<h2 id="-분석할-react와의-차이점"><a aria-hidden="true" tabindex="-1" href="#-분석할-react와의-차이점"><span class="icon icon-link"></span></a>💡 분석할 React와의 차이점</h2>
<h3 id="현재-구현의-한계"><a aria-hidden="true" tabindex="-1" href="#현재-구현의-한계"><span class="icon icon-link"></span></a>현재 구현의 한계</h3>
<ol>
<li><strong>상태 없음</strong>: 함수형 컴포넌트에 상태 저장 불가</li>
<li><strong>라이프사이클 없음</strong>: 마운트/언마운트 감지 불가</li>
<li><strong>단순한 Diff</strong>: key 기반 최적화 없음</li>
<li><strong>효과 시스템 없음</strong>: 사이드 이펙트 관리 불가</li>
</ol>
<h3 id="react의-고급-기능들"><a aria-hidden="true" tabindex="-1" href="#react의-고급-기능들"><span class="icon icon-link"></span></a>React의 고급 기능들</h3>
<ol>
<li><strong>Fiber 아키텍처</strong>: 작업 분할 및 우선순위</li>
<li><strong>Concurrent Rendering</strong>: 논블로킹 렌더링</li>
<li><strong>Time Slicing</strong>: 큰 작업을 작은 단위로 분할</li>
<li><strong>Suspense</strong>: 비동기 컴포넌트 로딩</li>
</ol>
<h2 id="-참고사항"><a aria-hidden="true" tabindex="-1" href="#-참고사항"><span class="icon icon-link"></span></a>💡 참고사항</h2>
<h3 id="중요한-구현-포인트"><a aria-hidden="true" tabindex="-1" href="#중요한-구현-포인트"><span class="icon icon-link"></span></a>중요한 구현 포인트</h3>
<ul>
<li>DOM 요소 참조 유지 (같은 요소는 재사용)</li>
<li>이벤트 리스너 유지/업데이트</li>
<li>메모리 누수 방지 (제거된 요소의 이벤트 정리)</li>
<li>성능 최적화 (불필요한 DOM 조작 최소화)</li>
</ul>
<h3 id="react와의-차이점-분석-예정"><a aria-hidden="true" tabindex="-1" href="#react와의-차이점-분석-예정"><span class="icon icon-link"></span></a>React와의 차이점 분석 예정</h3>
<ul>
<li>상태 관리 (useState, useEffect 등)</li>
<li>컴포넌트 라이프사이클</li>
<li>더 정교한 reconciliation 알고리즘</li>
<li>가상 DOM 트리 비교 최적화</li>
</ul>
<hr/>
<p><strong>다음 대화 시작 시</strong>: 이 문서를 첨부하고 &quot;필수 과제를 완료했으니 React 수준의 고급 기능 구현을 시작하겠습니다&quot; 라고 말하면 됩니다.</p>
<p><strong>우선순위 추천 순서</strong>:</p>
<ol>
<li>useState 훅 구현 (상태 관리의 기초)</li>
<li>useEffect 훅 구현 (라이프사이클 관리)</li>
<li>컴포넌트 재렌더링 최적화</li>
<li>Context API 또는 추가 훅들</li>
</ol>
<p><strong>현재 성취</strong>: 기본적인 Virtual DOM과 Diff 알고리즘을 성공적으로 구현하여 모든 테스트를 통과했습니다! 🎉</p>
</details>
<hr/>
<h2 id="기술적-성장"><a class="anchor" aria-hidden="true" tabindex="-1" href="#기술적-성장"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>기술적 성장</h2>
<p>과제 특성상 코드 품질이 많이 다르진 않겠지만 다른 것보다 주석을 잘 단 것 같습니다. 또한 normalizeVNode에서 아래와 같이 과정을 조금이라도 줄여보려 한 부분이 좋지 않았나 생각합니다. (children이 하나만 있다면 배열로 넘기지 않기 등등...)</p>
<pre class="language-js"><code class="language-js code-highlight"><span class="code-line"><span class="token comment">// 3. 함수형 컴포넌트 처리</span>
</span><span class="code-line"><span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>vNode <span class="token operator">&amp;&amp;</span> <span class="token keyword">typeof</span> vNode <span class="token operator">===</span> <span class="token string">&#x27;object&#x27;</span> <span class="token operator">&amp;&amp;</span> <span class="token keyword">typeof</span> vNode<span class="token punctuation">.</span><span class="token property-access">type</span> <span class="token operator">===</span> <span class="token string">&#x27;function&#x27;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token keyword">const</span> props <span class="token operator">=</span> vNode<span class="token punctuation">.</span><span class="token property-access">props</span> <span class="token operator">||</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
</span><span class="code-line">  
</span><span class="code-line">  <span class="token comment">// children을 props로 전달</span>
</span><span class="code-line">  <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>vNode<span class="token punctuation">.</span><span class="token property-access">children</span> <span class="token operator">&amp;&amp;</span> vNode<span class="token punctuation">.</span><span class="token property-access">children</span><span class="token punctuation">.</span><span class="token property-access">length</span> <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token comment">// children이 있으면 props.children으로 전달</span>
</span><span class="code-line">    props<span class="token punctuation">.</span><span class="token property-access">children</span> <span class="token operator">=</span> vNode<span class="token punctuation">.</span><span class="token property-access">children</span><span class="token punctuation">.</span><span class="token property-access">length</span> <span class="token operator">===</span> <span class="token number">1</span> <span class="token operator">?</span> vNode<span class="token punctuation">.</span><span class="token property-access">children</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">:</span> vNode<span class="token punctuation">.</span><span class="token property-access">children</span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token punctuation">}</span>
</span><span class="code-line">  
</span><span class="code-line">  <span class="token keyword">const</span> result <span class="token operator">=</span> vNode<span class="token punctuation">.</span><span class="token method function property-access">type</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token keyword control-flow">return</span> <span class="token function">normalizeVNode</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code><div class="copied" data-code="// 3. 함수형 컴포넌트 처리
if (vNode &amp;&amp; typeof vNode === &#x27;object&#x27; &amp;&amp; typeof vNode.type === &#x27;function&#x27;) {
  const props = vNode.props || {};
  
  // children을 props로 전달
  if (vNode.children &amp;&amp; vNode.children.length &gt; 0) {
    // children이 있으면 props.children으로 전달
    props.children = vNode.children.length === 1 ? vNode.children[0] : vNode.children;
  }
  
  const result = vNode.type(props);
  return normalizeVNode(result);
}
"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
<p>가장 만족스러운 부분은 코드 구현은 아니지만 AI 사용입니다. 지난 주차에서 배운 AI 사용 경험을 토대로 문서 정리부터 개념 학습까지 아주 AI를 알차게 쏙쏙 빼먹지 않았나 생각합니다. (AI에게 화낸 적이 한 번도 없다니)</p>
<p>특히 현재 채팅의 사용량을 감지하고 새 채팅을 이어나갈 수 있도록 문서로 정리하는 것이 직접 깨우친 쏠쏠한 꿀팁이지 않나 생각합니다.</p>
<h2 id="학습-효과-분석"><a class="anchor" aria-hidden="true" tabindex="-1" href="#학습-효과-분석"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>학습 효과 분석</h2>
<p>말로만 듣던 가상 돔에 대한 이해도가 가장 큰 수확이었습니다. 가상 돔이 어떻게 구현되어 있는지, 어떤 식으로 흘러가는지 알 수 있었습니다.</p>
<p>추가로 과제에 상태 관리 코드를 적용한다면 어떻게 적용할 수 있을지, 다른 프레임워크들은 어떤 식으로 구성되어 있는지 학습을 해볼까 합니다.</p>
<h2 id="과제-피드백"><a class="anchor" aria-hidden="true" tabindex="-1" href="#과제-피드백"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>과제 피드백</h2>
<p>1주차에 이어서 이번 과제도 PT하듯 밀린 공부를 하게 된 느낌이라 큰 도움이 되었습니다. 바닐라 JS로 SPA, 라우터, 가상 돔 등을 직접 만들어 보는 것이 이해도를 높이는 가장 효율적인 방법이라고 피부로 느꼈습니다.</p>
<p>(과제 특성상 테스트코드가 지난 주차보다 깔끔해서 좋았습니다... ㅎ)</p>
<h2 id="리뷰-받고-싶은-내용"><a class="anchor" aria-hidden="true" tabindex="-1" href="#리뷰-받고-싶은-내용"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>리뷰 받고 싶은 내용</h2>
<ol>
<li>
<p>eventManager.js의 addEvent, removeEvent를 지금처럼 createElement나 updateElement에서 사용하는 것이 아니라 직접 사용할 일이 있을까요? 저는 어떤 데이터를 비동기로 조회 후 이 데이터로 state를 업데이트 하여 리렌더링이 발생하는 것이 아닌, 비동기로 조회한 데이터 결과에 따라 바로 어떤 이벤트를 적용하거나 지워야 하는 경우 직접 addEvent, removeEvent 함수를 호출할 수도 있겠다 생각했습니다.</p>
</li>
<li>
<p>기술적인 내용이 아니라 적절치 못한 질문일 수도 있을 것 같습니다. 1, 2주차를 거치며 AI 사용이 점점 익숙해지고 있습니다. 특히 이번 주차는 질문의 단위도 작게 나누어 코드 이해도를 높였고, 개념 정리도 틈틈히 진행했습니다. 하지만 결국 구현능력은 조금 떨어지는 느낌이 듭니다. 내가 이미 알고 있는 것이지만 귀찮은 작업이기에 맡기는 그림이 맞는지, AI의 도움을 적극적으로 받아 큰 맥락, 주요 개념 위주로 익히며 진행해도 되는지 궁금합니다. (+ &quot;AI 없이 코딩하기 수련&quot;이 필요할까요?)</p>
</li>
</ol></div></div><div class="overflow-auto mt-9"><div data-color-mode="dark" class="wmde-markdown wmde-markdown-color p-6 max-w-full" style="word-wrap:break-word;overflow-wrap:break-word"><h2 id="과제-피드백"><a class="anchor" aria-hidden="true" tabindex="-1" href="#과제-피드백"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>과제 피드백</h2>
<p>홍준님 고생하셨습니다.
회고를 읽어보니 아주 많은 것을 스스로 학습하신 것 같아서 좋네요!
명확하게 각 함수들에 대해 정리해보고, 목적을 작성해보신것도 너무 좋았습니다. 큰 것은 아니기도 하고 갠취이긴 하지만 이런 주석을 남기는게 AI에게 명확한 구현 지침이 될 수 있어서 좋다고 생각하는데요! 다만 전통적인 관점에서 이런 주석들이 코드 자체로 명확하게 드러날 수 있다고 생각해 구현이 마무리되면 명확한 부분들만 남겨보는건 어떨까 싶기도하네요!</p>
<p>리뷰 받고 싶어하셨던 내용으로 넘어가보면요!</p>
<blockquote>
<p>eventManager.js의 addEvent, removeEvent를 지금처럼 createElement나 updateElement에서 사용하는 것이 아니라 직접 사용할 일이 있을까요?</p>
</blockquote>
<p>지금 딱 떠오르는 시나리오는 없는 것 같은데요.
이미 시스템을 만들었다는 점에서 캡슐화 관점에서 결국에는 이 엘리먼트 내에서 추상화를 해서 제어를 하는 편이 이상적이고, 관리가 명확해지면서 편하다고 생각이 드는 것 같아요!</p>
<blockquote>
<p>기술적인 내용이 아니라 적절치 못한 질문일 수도 있을 것 같습니다. 1, 2주차를 거치며 AI 사용이 점점 익숙해지고 있습니다. 특히 이번 주차는 질문의 단위도 작게 나누어 코드 이해도를 높였고, 개념 정리도 틈틈히 진행했습니다. 하지만 결국 구현능력은 조금 떨어지는 느낌이 듭니다. 내가 이미 알고 있는 것이지만 귀찮은 작업이기에 맡기는 그림이 맞는지, AI의 도움을 적극적으로 받아 큰 맥락, 주요 개념 위주로 익히며 진행해도 되는지 궁금합니다. (+ &quot;AI 없이 코딩하기 수련&quot;이 필요할까요?)</p>
</blockquote>
<p>음...! 저도 이 부분에 대해 고민이 굉장히 많은데요.
이전에 저희가 공부를 하는데 있어서는 각 API를 빠르고 적절하게 사용하는 것이 매우 중요했었기 때문에 코드를 작성하는 연습을 하는게 굉장히 중요했었던 것 같아요.
지금의 시점에서는 그때만큼 그런 역량이 중요해지지 않은 것은 사실이지만 그럼에도 AI를 활용해 모든 코드를 완벽하게 작성할 수 없고, 복잡하고 비즈니스에 가까운 복잡한 함수들을 작성하게 되면 결국 제가 다시 작성하게 되더라구요. 그런 부분에서 과거만큼은 아니지만 여전히 중요하지 않을까라고 생각하는 것 같습니다.
미래에는 어떻게 될지 모르죠! 저희가 코드를 작성하지 않게 될 수 있겠지만, 지금의 시점에서 저희는 관점을 갖고 연습하고 준비해야 하기 때문에 이 부분도 같이 공부해보면 어떨까 싶네요!</p>
<p>고생하셨고 다음주도 화이팅입니다~~</p></div></div><div class="mt-9"></div></div></main></div></div></div></div>
</body>
</html>
