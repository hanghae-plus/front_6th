<!doctype html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="icon" href="/front_6th/favicon.ico"/>
  
    <title>[9팀 권지호] Chapter 2-1. 클린코드와 리팩토링 - 권지호 | 항해플러스 프론트엔드 6기</title>
    <meta name="description" content=" [항해플러스 프론트엔드 6기] 권지호님이 제출한 [9팀 권지호] Chapter 2-1. 클린코드와 리팩토링 과제를 확인하세요. 코드 구현, 문제 해결 과정, 피드백 내용을 상세히 살펴볼 수 있습니다." />
    <meta name="keywords" content="항해플러스, 프론트엔드, 개발자교육, React, TypeScript, JavaScript, 기술면접, 웹개발, 권지호, [9팀 권지호] Chapter 2-1. 클린코드와 리팩토링, 과제상세, 코드리뷰, 피드백, Pull Request" />
    <meta property="og:title" content="[9팀 권지호] Chapter 2-1. 클린코드와 리팩토링 - 권지호 | 항해플러스 프론트엔드 6기" />
    <meta property="og:description" content=" [항해플러스 프론트엔드 6기] 권지호님이 제출한 [9팀 권지호] Chapter 2-1. 클린코드와 리팩토링 과제를 확인하세요. 코드 구현, 문제 해결 과정, 피드백 내용을 상세히 살펴볼 수 있습니다." />
    <meta property="og:image" content="/defaultThumbnail.jpg" />
    <meta property="og:type" content="website" />
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="[9팀 권지호] Chapter 2-1. 클린코드와 리팩토링 - 권지호 | 항해플러스 프론트엔드 6기" />
    <meta name="twitter:description" content=" [항해플러스 프론트엔드 6기] 권지호님이 제출한 [9팀 권지호] Chapter 2-1. 클린코드와 리팩토링 과제를 확인하세요. 코드 구현, 문제 해결 과정, 피드백 내용을 상세히 살펴볼 수 있습니다." />
    <meta name="twitter:image" content="/defaultThumbnail.jpg" />
  
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-6J8QP7YK1E"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-6J8QP7YK1E');
  </script>
  <script type="module" crossorigin src="/front_6th/assets/index-DtEqFcg_.js"></script>
  <link rel="stylesheet" crossorigin href="/front_6th/assets/index-BXO68frB.css">
</head>
<body>
<div id="root"><link rel="preload" as="image" href="https://github.com/user-attachments/assets/a8bb81cc-eac0-4fc4-b419-bd41de8dcd8f"/><link rel="preload" as="image" href="https://github.com/user-attachments/assets/4e10b3ae-3561-468a-a2c9-2b8a3471a182"/><link rel="preload" as="image" href="https://github.com/user-attachments/assets/2a19b8b8-190d-455e-af9e-5e0d44673751"/><div data-slot="sidebar-wrapper" style="--sidebar-width:16rem;--sidebar-width-icon:3rem" class="group/sidebar-wrapper has-data-[variant=inset]:bg-sidebar flex min-h-svh w-full"><div class="min-h-screen flex w-full"><div class="group peer text-sidebar-foreground hidden md:block" data-state="expanded" data-collapsible="" data-variant="sidebar" data-side="left" data-slot="sidebar"><div data-slot="sidebar-gap" class="relative w-(--sidebar-width) bg-transparent transition-[width] duration-200 ease-linear group-data-[collapsible=offcanvas]:w-0 group-data-[side=right]:rotate-180 group-data-[collapsible=icon]:w-(--sidebar-width-icon)"></div><div data-slot="sidebar-container" class="fixed inset-y-0 z-10 hidden h-svh transition-[left,right,width] duration-200 ease-linear md:flex left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)] group-data-[collapsible=icon]:w-(--sidebar-width-icon) group-data-[side=left]:border-r group-data-[side=right]:border-l w-64"><div data-sidebar="sidebar" data-slot="sidebar-inner" class="bg-sidebar group-data-[variant=floating]:border-sidebar-border flex h-full w-full flex-col group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:shadow-sm"><div data-slot="sidebar-content" data-sidebar="content" class="flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden bg-card border-r border-border"><a class="p-4" href="/front_6th/" data-discover="true"><div class="flex items-center space-x-2 mb-6"><div class="w-8 h-8 bg-gradient-primary rounded-lg flex items-center justify-center"><span class="text-white font-bold text-sm">6기</span></div><h4 class="text-lg font-bold text-primary">항해플러스 프론트엔드</h4></div></a><div data-slot="sidebar-group" data-sidebar="group" class="relative flex w-full min-w-0 flex-col p-2"><div data-slot="sidebar-group-label" data-sidebar="group-label" class="ring-sidebar-ring flex h-8 shrink-0 items-center rounded-md text-xs font-medium outline-hidden transition-[margin,opacity] duration-200 ease-linear focus-visible:ring-2 [&amp;&gt;svg]:size-4 [&amp;&gt;svg]:shrink-0 group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0 text-muted-foreground px-4">학습 관리</div><div data-slot="sidebar-group-content" data-sidebar="group-content" class="w-full text-sm"><ul data-slot="sidebar-menu" data-sidebar="menu" class="flex w-full min-w-0 flex-col gap-1 px-2"><li data-slot="sidebar-menu-item" data-sidebar="menu-item" class="group/menu-item relative"><a data-slot="sidebar-menu-button" data-sidebar="menu-button" data-size="default" data-active="false" class="peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left outline-hidden ring-sidebar-ring transition-[width,height,padding] focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-data-[sidebar=menu-action]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:size-8! group-data-[collapsible=icon]:p-2! [&amp;&gt;span:last-child]:truncate [&amp;&gt;svg]:size-4 [&amp;&gt;svg]:shrink-0 hover:bg-sidebar-accent hover:text-sidebar-accent-foreground text-sm h-12 text-foreground hover:bg-secondary hover:text-secondary-foreground rounded-lg transition-all duration-300" href="/front_6th/" data-discover="true"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-users h-5 w-5" aria-hidden="true"><path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"></path><path d="M16 3.128a4 4 0 0 1 0 7.744"></path><path d="M22 21v-2a4 4 0 0 0-3-3.87"></path><circle cx="9" cy="7" r="4"></circle></svg><span class="ml-3">수강생 목록</span></a></li><li data-slot="sidebar-menu-item" data-sidebar="menu-item" class="group/menu-item relative"><a data-slot="sidebar-menu-button" data-sidebar="menu-button" data-size="default" data-active="false" class="peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left outline-hidden ring-sidebar-ring transition-[width,height,padding] focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-data-[sidebar=menu-action]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:size-8! group-data-[collapsible=icon]:p-2! [&amp;&gt;span:last-child]:truncate [&amp;&gt;svg]:size-4 [&amp;&gt;svg]:shrink-0 hover:bg-sidebar-accent hover:text-sidebar-accent-foreground text-sm h-12 text-foreground hover:bg-secondary hover:text-secondary-foreground rounded-lg transition-all duration-300" href="/front_6th/assignments/" data-discover="true"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-book-open h-5 w-5" aria-hidden="true"><path d="M12 7v14"></path><path d="M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z"></path></svg><span class="ml-3">과제 목록</span></a></li></ul></div></div></div></div></div></div><div class="flex-1 min-w-0"><header class="h-12 flex items-center border-b border-border bg-card px-4"><button data-slot="sidebar-trigger" class="inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 size-7 mr-4 text-white" data-sidebar="trigger"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-panel-left" aria-hidden="true"><rect width="18" height="18" x="3" y="3" rx="2"></rect><path d="M9 3v18"></path></svg><span class="sr-only">Toggle Sidebar</span></button><h4 class="text-lg font-semibold "><a href="/front_6th/@tomatopickles404/" data-discover="true">tomatopickles404<!-- --> 님의 상세페이지</a> ＞ <!-- -->[9팀 권지호] Chapter 2-1. 클린코드와 리팩토링</h4></header><main class="p-6"><div><div class="card-wrap"><div data-slot="card" class="card text-card-foreground flex flex-col gap-6 shadow-sm mb-6 p-6 border border-gray-700 bg-gray-800 rounded-lg"><a href="https://github.com/hanghae-plus/front_6th_chapter2-1/pull/7" target="_blank"><div class="flex items-start gap-4"><div class="flex-shrink-0"><svg xmlns="http://www.w3.org/2000/svg" height="32" aria-hidden="true" viewBox="0 0 24 24" width="32" fill="white" class="w-8 h-8"><path d="M12 1C5.923 1 1 5.923 1 12c0 4.867 3.149 8.979 7.521 10.436.55.096.756-.233.756-.522 0-.262-.013-1.128-.013-2.049-2.764.509-3.479-.674-3.699-1.292-.124-.317-.66-1.293-1.127-1.554-.385-.207-.936-.715-.014-.729.866-.014 1.485.797 1.691 1.128.99 1.663 2.571 1.196 3.204.907.096-.715.385-1.196.701-1.471-2.448-.275-5.005-1.224-5.005-5.432 0-1.196.426-2.186 1.128-2.956-.111-.275-.496-1.402.11-2.915 0 0 .921-.288 3.024 1.128a10.193 10.193 0 0 1 2.75-.371c.936 0 1.871.123 2.75.371 2.104-1.43 3.025-1.128 3.025-1.128.605 1.513.221 2.64.111 2.915.701.77 1.127 1.747 1.127 2.956 0 4.222-2.571 5.157-5.019 5.432.399.344.743 1.004.743 2.035 0 1.471-.014 2.654-.014 3.025 0 .289.206.632.756.522C19.851 20.979 23 16.854 23 12c0-6.077-4.922-11-11-11Z"></path></svg></div><div class="flex-1 min-w-0"><div class="flex items-center gap-2 mb-2"><h3 class="text-lg font-semibold text-white truncate">[9팀 권지호] Chapter 2-1. 클린코드와 리팩토링</h3></div><div class="flex items-center gap-4 text-xs text-gray-500"><span>by <!-- -->tomatopickles404</span><span>2025. 7. 27.</span></div></div></div></a></div></div><div class="overflow-auto"><div data-color-mode="dark" class="wmde-markdown wmde-markdown-color p-6 max-w-full" style="word-wrap:break-word;overflow-wrap:break-word"><h2 id="과제-체크포인트"><a class="anchor" aria-hidden="true" tabindex="-1" href="#과제-체크포인트"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>과제 체크포인트</h2>
<h3 id="기본과제"><a class="anchor" aria-hidden="true" tabindex="-1" href="#기본과제"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>기본과제</h3>
<ul class="contains-task-list">
<li class="task-list-item"><input type="checkbox" disabled="" checked=""/> 코드가 Prettier를 통해 일관된 포맷팅이 적용되어 있는가?</li>
<li class="task-list-item"><input type="checkbox" disabled="" checked=""/> 적절한 줄바꿈과 주석을 사용하여 코드의 논리적 단위를 명확히 구분했는가?</li>
<li class="task-list-item"><input type="checkbox" disabled="" checked=""/> 변수명과 함수명이 그 역할을 명확히 나타내며, 일관된 네이밍 규칙을 따르는가?</li>
<li class="task-list-item"><input type="checkbox" disabled="" checked=""/> 매직 넘버와 문자열을 의미 있는 상수로 추출했는가?</li>
<li class="task-list-item"><input type="checkbox" disabled="" checked=""/> 중복 코드를 제거하고 재사용 가능한 형태로 리팩토링했는가?</li>
<li class="task-list-item"><input type="checkbox" disabled="" checked=""/> 함수가 단일 책임 원칙을 따르며, 한 가지 작업만 수행하는가?</li>
<li class="task-list-item"><input type="checkbox" disabled="" checked=""/> 조건문과 반복문이 간결하고 명확한가? 복잡한 조건을 함수로 추출했는가?</li>
<li class="task-list-item"><input type="checkbox" disabled="" checked=""/> 코드의 배치가 의존성과 실행 흐름에 따라 논리적으로 구성되어 있는가?</li>
<li class="task-list-item"><input type="checkbox" disabled="" checked=""/> 연관된 코드를 의미 있는 함수나 모듈로 그룹화했는가?</li>
<li class="task-list-item"><input type="checkbox" disabled="" checked=""/> ES6+ 문법을 활용하여 코드를 더 간결하고 명확하게 작성했는가?</li>
<li class="task-list-item"><input type="checkbox" disabled="" checked=""/> 전역 상태와 부수 효과(side effects)를 최소화했는가?</li>
<li class="task-list-item"><input type="checkbox" disabled="" checked=""/> 에러 처리와 예외 상황을 명확히 고려하고 처리했는가?</li>
<li class="task-list-item"><input type="checkbox" disabled="" checked=""/> 코드 자체가 자기 문서화되어 있어, 주석 없이도 의도를 파악할 수 있는가?</li>
<li class="task-list-item"><input type="checkbox" disabled="" checked=""/> 비즈니스 로직과 UI 로직이 적절히 분리되어 있는가?</li>
<li class="task-list-item"><input type="checkbox" disabled="" checked=""/> 코드의 각 부분이 테스트 가능하도록 구조화되어 있는가?</li>
<li class="task-list-item"><input type="checkbox" disabled="" checked=""/> 성능 개선을 위해 불필요한 연산이나 렌더링을 제거했는가?</li>
<li class="task-list-item"><input type="checkbox" disabled="" checked=""/> 새로운 기능 추가나 변경이 기존 코드에 미치는 영향을 최소화했는가?</li>
<li class="task-list-item"><input type="checkbox" disabled="" checked=""/> 코드 리뷰를 통해 다른 개발자들의 피드백을 반영하고 개선했는가?</li>
<li class="task-list-item"><input type="checkbox" disabled="" checked=""/> (핵심!) 리팩토링 시 기존 기능을 그대로 유지하면서 점진적으로 개선했는가?</li>
</ul>
<h3 id="심화과제"><a class="anchor" aria-hidden="true" tabindex="-1" href="#심화과제"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>심화과제</h3>
<ul class="contains-task-list">
<li class="task-list-item"><input type="checkbox" disabled="" checked=""/> 변경한 구조와 코드가 기존의 코드보다 가독성이 높고 이해하기 쉬운가?</li>
<li class="task-list-item"><input type="checkbox" disabled="" checked=""/> 변경한 구조와 코드가 기존의 코드보다 기능을 수정하거나 확장하기에 용이한가?</li>
<li class="task-list-item"><input type="checkbox" disabled="" checked=""/> 변경한 구조와 코드가 기존의 코드보다 테스트를 하기에 더 용이한가?</li>
<li class="task-list-item"><input type="checkbox" disabled="" checked=""/> 변경한 구조와 코드가 기존의 모든 기능은 그대로 유지했는가?</li>
<li class="task-list-item"><input type="checkbox" disabled="" checked=""/> (핵심!) 변경한 구조와 코드를 새로운 한번에 새로만들지 않고 점진적으로 개선했는가?</li>
</ul>
<h4 id="배포주소"><a class="anchor" aria-hidden="true" tabindex="-1" href="#배포주소"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>배포주소</h4>
<p><a href="https://tomatopickles404.github.io/front_6th_chapter2-1/">https://tomatopickles404.github.io/front_6th_chapter2-1/</a></p>
<h2 id="과제-셀프회고"><a class="anchor" aria-hidden="true" tabindex="-1" href="#과제-셀프회고"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>과제 셀프회고</h2>
<h3 id="1-설계전-계획수립과-실제-수행한-과정에서의-회고"><a class="anchor" aria-hidden="true" tabindex="-1" href="#1-설계전-계획수립과-실제-수행한-과정에서의-회고"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>1. 설계전 계획수립과 실제 수행한 과정에서의 회고</h3>
<p>docs 문서들을 순차적으로 읽으면서 &quot;아, 이 과제는 초기 계획이 중요하겠다&quot; 라고 직감적으로 생각했습니다.
그래서 코드를 작성하기 전에 전략을 세우고자 cursor ai에 docs를 읽으라고 시키면서 우선순위와 방향성을 물었습니다.
그리고 이 사전 전략 수립에 대한 문서를 남겨두고, 실제로 제가 진행한 방향을 기록해서 비교해보면 의미가 있을 것 같다고 생각해 다른 주차보다 문서화를 자주 하려고 했습니다.</p>
<h4 id="초반-시도"><a class="anchor" aria-hidden="true" tabindex="-1" href="#초반-시도"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>[초반 시도]</h4>
<h4 id="1--ai로-상태를-모듈화-하려고-시도-했습니다"><a class="anchor" aria-hidden="true" tabindex="-1" href="#1--ai로-상태를-모듈화-하려고-시도-했습니다"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>1.  ai로 상태를 모듈화 하려고 시도 했습니다.</h4>
<pre class="language-jsx"><code class="language-jsx code-highlight"><span class="code-line"><span class="token keyword module">export</span> <span class="token keyword">const</span> <span class="token function-variable function"><span class="token maybe-class-name">ShoppingCart</span></span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token comment">// ===== Private State =====</span>
</span><span class="code-line">  <span class="token keyword">const</span> state <span class="token operator">=</span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token literal-property property">products</span><span class="token operator">:</span> <span class="token constant">PRODUCTS</span><span class="token punctuation">,</span> <span class="token comment">// prodList</span>
</span><span class="code-line">    <span class="token literal-property property">cart</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
</span><span class="code-line">
</span><span class="code-line">    <span class="token literal-property property">totalAmount</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token comment">//totalAmt</span>
</span><span class="code-line">    <span class="token literal-property property">itemCount</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token comment">//itemCnt</span>
</span><span class="code-line">    <span class="token literal-property property">bonusPoints</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token comment">//bonusPts</span>
</span><span class="code-line">
</span><span class="code-line">    <span class="token comment">// UI 상태</span>
</span><span class="code-line">    <span class="token literal-property property">lastSelected</span><span class="token operator">:</span> <span class="token keyword null nil">null</span><span class="token punctuation">,</span> <span class="token comment">//lastSel</span>
</span><span class="code-line">
</span><span class="code-line">    <span class="token comment">// DOM 요소 참조 (sel, addBtn, cartDisp, sum, stockInfo)</span>
</span><span class="code-line">    <span class="token literal-property property">ui</span><span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="code-line">      <span class="token literal-property property">productSelector</span><span class="token operator">:</span> <span class="token keyword null nil">null</span><span class="token punctuation">,</span>
</span><span class="code-line">      <span class="token literal-property property">addButton</span><span class="token operator">:</span> <span class="token keyword null nil">null</span><span class="token punctuation">,</span>
</span><span class="code-line">      <span class="token literal-property property">cartDisplay</span><span class="token operator">:</span> <span class="token keyword null nil">null</span><span class="token punctuation">,</span>
</span><span class="code-line">      <span class="token literal-property property">summaryElement</span><span class="token operator">:</span> <span class="token keyword null nil">null</span><span class="token punctuation">,</span>
</span><span class="code-line">      <span class="token literal-property property">stockInformation</span><span class="token operator">:</span> <span class="token keyword null nil">null</span><span class="token punctuation">,</span>
</span><span class="code-line">      <span class="token literal-property property">totalElement</span><span class="token operator">:</span> <span class="token keyword null nil">null</span><span class="token punctuation">,</span>
</span><span class="code-line">    <span class="token punctuation">}</span><span class="token punctuation">,</span>
</span><span class="code-line">  <span class="token punctuation">}</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="token comment">// ===== Public Functions =====</span>
</span><span class="code-line">  <span class="token keyword">const</span> <span class="token function-variable function">addToCart</span> <span class="token operator">=</span> <span class="token parameter">productId</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token spread operator">...</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="token keyword">const</span> <span class="token function-variable function">removeFromCart</span> <span class="token operator">=</span> <span class="token parameter">productId</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token spread operator">...</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="token keyword">const</span> <span class="token function-variable function">updateQuantity</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">productId<span class="token punctuation">,</span> quantity</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token spread operator">...</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="token comment">// 할인이 적용된 최종 총 금액 계산</span>
</span><span class="code-line">  <span class="token keyword">const</span> <span class="token function-variable function">getTotalAmount</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token comment">// state.totalAmount = state.cart.reduce((acc, p) =&gt; acc + p.price * p.quantity, 0);</span>
</span><span class="code-line">  <span class="token punctuation">}</span><span class="token punctuation">;</span>
</span><span class="code-line">  
</span><span class="code-line">  <span class="token spread operator">...</span> 
</span><span class="code-line">  
</span><span class="code-line">	<span class="token keyword control-flow">return</span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token comment">/**
</span></span><span class="code-line"><span class="token comment">     * 모듈 초기화
</span></span><span class="code-line"><span class="token comment">     */</span>
</span><span class="code-line">    <span class="token literal-property property">init</span><span class="token operator">:</span> initializeUI<span class="token punctuation">,</span>
</span><span class="code-line">    <span class="token comment">/**
</span></span><span class="code-line"><span class="token comment">     * 장바구니 관련 함수
</span></span><span class="code-line"><span class="token comment">     */</span>
</span><span class="code-line">    addToCart<span class="token punctuation">,</span>
</span><span class="code-line">    removeFromCart<span class="token punctuation">,</span>
</span><span class="code-line">
</span><span class="code-line">    getStockTotal<span class="token punctuation">,</span>
</span><span class="code-line">    getTotalAmount<span class="token punctuation">,</span>
</span><span class="code-line">
</span><span class="code-line">    updateSelectOptions<span class="token punctuation">,</span>
</span><span class="code-line">    updateQuantity<span class="token punctuation">,</span>
</span><span class="code-line">    updateStockInfo<span class="token punctuation">,</span>
</span><span class="code-line">    updatePricesInCart<span class="token punctuation">,</span>
</span><span class="code-line">
</span><span class="code-line">    <span class="token comment">//TODO: 분리</span>
</span><span class="code-line">    renderBonusPoints<span class="token punctuation">,</span>
</span><span class="code-line">  <span class="token punctuation">}</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token punctuation">}</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span></code><div class="copied" data-code="export const ShoppingCart = () =&gt; {
  // ===== Private State =====
  const state = {
    products: PRODUCTS, // prodList
    cart: [],

    totalAmount: 0, //totalAmt
    itemCount: 0, //itemCnt
    bonusPoints: 0, //bonusPts

    // UI 상태
    lastSelected: null, //lastSel

    // DOM 요소 참조 (sel, addBtn, cartDisp, sum, stockInfo)
    ui: {
      productSelector: null,
      addButton: null,
      cartDisplay: null,
      summaryElement: null,
      stockInformation: null,
      totalElement: null,
    },
  };

  // ===== Public Functions =====
  const addToCart = productId =&gt; { ... };

  const removeFromCart = productId =&gt; { ... };

  const updateQuantity = (productId, quantity) =&gt; { ... };

  // 할인이 적용된 최종 총 금액 계산
  const getTotalAmount = () =&gt; {
    // state.totalAmount = state.cart.reduce((acc, p) =&gt; acc + p.price * p.quantity, 0);
  };
  
  ... 
  
	return {
    /**
     * 모듈 초기화
     */
    init: initializeUI,
    /**
     * 장바구니 관련 함수
     */
    addToCart,
    removeFromCart,

    getStockTotal,
    getTotalAmount,

    updateSelectOptions,
    updateQuantity,
    updateStockInfo,
    updatePricesInCart,

    //TODO: 분리
    renderBonusPoints,
  };
};

"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
<ul>
<li>적용하고자 하니 너무 넓은 범위의 코드를 수정하는 상황이 되었고, ai의 결과물도 만족스럽지 않았습니다.</li>
</ul>
<br/>
<h4 id="2-ai로-ui-부터-나누고자-했습니다"><a class="anchor" aria-hidden="true" tabindex="-1" href="#2-ai로-ui-부터-나누고자-했습니다"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>2. AI로 UI 부터 나누고자 했습니다.</h4>
<pre class="language-jsx"><code class="language-jsx code-highlight"><span class="code-line"><span class="token comment">/**
</span></span><span class="code-line"><span class="token comment"> * 헤더 요소 생성
</span></span><span class="code-line"><span class="token comment"> */</span>
</span><span class="code-line"><span class="token keyword module">export</span> <span class="token keyword">function</span> <span class="token function">createHeader</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token keyword">const</span> header <span class="token operator">=</span> <span class="token dom variable">document</span><span class="token punctuation">.</span><span class="token method function property-access">createElement</span><span class="token punctuation">(</span><span class="token string">&#x27;div&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">  header<span class="token punctuation">.</span><span class="token property-access">className</span> <span class="token operator">=</span> <span class="token string">&#x27;mb-8&#x27;</span><span class="token punctuation">;</span>
</span><span class="code-line">  header<span class="token punctuation">.</span><span class="token property-access">innerHTML</span> <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token html language-html">
</span></span></span><span class="code-line"><span class="token template-string"><span class="token html language-html">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text-xs font-medium tracking-extra-wide uppercase mb-2<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">🛒 Hanghae Online Store</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>
</span></span></span><span class="code-line"><span class="token template-string"><span class="token html language-html">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text-5xl tracking-tight leading-none<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Shopping Cart</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</span></span></span><span class="code-line"><span class="token template-string"><span class="token html language-html">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item-count<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text-sm text-gray-500 font-normal mt-3<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">🛍️ 0 items in cart</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
</span></span></span><span class="code-line"><span class="token template-string"><span class="token html language-html">  </span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token keyword control-flow">return</span> header<span class="token punctuation">;</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment">/**
</span></span><span class="code-line"><span class="token comment"> * 상품 선택기 생성
</span></span><span class="code-line"><span class="token comment"> */</span>
</span><span class="code-line"><span class="token keyword module">export</span> <span class="token keyword">function</span> <span class="token function">createProductSelector</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token keyword">const</span> selectorContainer <span class="token operator">=</span> <span class="token dom variable">document</span><span class="token punctuation">.</span><span class="token method function property-access">createElement</span><span class="token punctuation">(</span><span class="token string">&#x27;div&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">  selectorContainer<span class="token punctuation">.</span><span class="token property-access">className</span> <span class="token operator">=</span> <span class="token string">&#x27;mb-6 pb-6 border-b border-gray-200&#x27;</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="token keyword">const</span> sel <span class="token operator">=</span> <span class="token dom variable">document</span><span class="token punctuation">.</span><span class="token method function property-access">createElement</span><span class="token punctuation">(</span><span class="token string">&#x27;select&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">  sel<span class="token punctuation">.</span><span class="token property-access">id</span> <span class="token operator">=</span> <span class="token string">&#x27;product-select&#x27;</span><span class="token punctuation">;</span>
</span><span class="code-line">  sel<span class="token punctuation">.</span><span class="token property-access">className</span> <span class="token operator">=</span> <span class="token string">&#x27;w-full p-3 border border-gray-300 rounded-lg text-base mb-3&#x27;</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="token keyword">const</span> addBtn <span class="token operator">=</span> <span class="token dom variable">document</span><span class="token punctuation">.</span><span class="token method function property-access">createElement</span><span class="token punctuation">(</span><span class="token string">&#x27;button&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">  addBtn<span class="token punctuation">.</span><span class="token property-access">id</span> <span class="token operator">=</span> <span class="token string">&#x27;add-to-cart&#x27;</span><span class="token punctuation">;</span>
</span><span class="code-line">  addBtn<span class="token punctuation">.</span><span class="token property-access">innerHTML</span> <span class="token operator">=</span> <span class="token string">&#x27;Add to Cart&#x27;</span><span class="token punctuation">;</span>
</span><span class="code-line">  addBtn<span class="token punctuation">.</span><span class="token property-access">className</span> <span class="token operator">=</span>
</span><span class="code-line">    <span class="token string">&#x27;w-full py-3 bg-black text-white text-sm font-medium uppercase tracking-wider hover:bg-gray-800 transition-all&#x27;</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="token keyword">const</span> stockInfo <span class="token operator">=</span> <span class="token dom variable">document</span><span class="token punctuation">.</span><span class="token method function property-access">createElement</span><span class="token punctuation">(</span><span class="token string">&#x27;div&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">  stockInfo<span class="token punctuation">.</span><span class="token property-access">id</span> <span class="token operator">=</span> <span class="token string">&#x27;stock-status&#x27;</span><span class="token punctuation">;</span>
</span><span class="code-line">  stockInfo<span class="token punctuation">.</span><span class="token property-access">className</span> <span class="token operator">=</span> <span class="token string">&#x27;text-xs text-red-500 mt-3 whitespace-pre-line&#x27;</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line">  selectorContainer<span class="token punctuation">.</span><span class="token method function property-access">appendChild</span><span class="token punctuation">(</span>sel<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">  selectorContainer<span class="token punctuation">.</span><span class="token method function property-access">appendChild</span><span class="token punctuation">(</span>addBtn<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">  selectorContainer<span class="token punctuation">.</span><span class="token method function property-access">appendChild</span><span class="token punctuation">(</span>stockInfo<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="token keyword control-flow">return</span> <span class="token punctuation">{</span> selectorContainer<span class="token punctuation">,</span> sel<span class="token punctuation">,</span> addBtn<span class="token punctuation">,</span> stockInfo <span class="token punctuation">}</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment">/**
</span></span><span class="code-line"><span class="token comment"> * 장바구니 표시 영역 생성
</span></span><span class="code-line"><span class="token comment"> */</span>
</span><span class="code-line"><span class="token keyword module">export</span> <span class="token keyword">function</span> <span class="token function">createCartDisplay</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token keyword">const</span> cartDisp <span class="token operator">=</span> <span class="token dom variable">document</span><span class="token punctuation">.</span><span class="token method function property-access">createElement</span><span class="token punctuation">(</span><span class="token string">&#x27;div&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">  cartDisp<span class="token punctuation">.</span><span class="token property-access">id</span> <span class="token operator">=</span> <span class="token string">&#x27;cart-items&#x27;</span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token keyword control-flow">return</span> cartDisp<span class="token punctuation">;</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token spread operator">...</span>
</span></code><div class="copied" data-code="/**
 * 헤더 요소 생성
 */
export function createHeader() {
  const header = document.createElement(&#x27;div&#x27;);
  header.className = &#x27;mb-8&#x27;;
  header.innerHTML = `
    &lt;h1 class=&quot;text-xs font-medium tracking-extra-wide uppercase mb-2&quot;&gt;🛒 Hanghae Online Store&lt;/h1&gt;
    &lt;div class=&quot;text-5xl tracking-tight leading-none&quot;&gt;Shopping Cart&lt;/div&gt;
    &lt;p id=&quot;item-count&quot; class=&quot;text-sm text-gray-500 font-normal mt-3&quot;&gt;🛍️ 0 items in cart&lt;/p&gt;
  `;
  return header;
}

/**
 * 상품 선택기 생성
 */
export function createProductSelector() {
  const selectorContainer = document.createElement(&#x27;div&#x27;);
  selectorContainer.className = &#x27;mb-6 pb-6 border-b border-gray-200&#x27;;

  const sel = document.createElement(&#x27;select&#x27;);
  sel.id = &#x27;product-select&#x27;;
  sel.className = &#x27;w-full p-3 border border-gray-300 rounded-lg text-base mb-3&#x27;;

  const addBtn = document.createElement(&#x27;button&#x27;);
  addBtn.id = &#x27;add-to-cart&#x27;;
  addBtn.innerHTML = &#x27;Add to Cart&#x27;;
  addBtn.className =
    &#x27;w-full py-3 bg-black text-white text-sm font-medium uppercase tracking-wider hover:bg-gray-800 transition-all&#x27;;

  const stockInfo = document.createElement(&#x27;div&#x27;);
  stockInfo.id = &#x27;stock-status&#x27;;
  stockInfo.className = &#x27;text-xs text-red-500 mt-3 whitespace-pre-line&#x27;;

  selectorContainer.appendChild(sel);
  selectorContainer.appendChild(addBtn);
  selectorContainer.appendChild(stockInfo);

  return { selectorContainer, sel, addBtn, stockInfo };
}

/**
 * 장바구니 표시 영역 생성
 */
export function createCartDisplay() {
  const cartDisp = document.createElement(&#x27;div&#x27;);
  cartDisp.id = &#x27;cart-items&#x27;;
  return cartDisp;
}

...
"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
<ul>
<li>이 시도 역시 한번에 넓은 범위를 수정하게 되어 변경에 대한 파악이 어려웠습니다.</li>
<li>이벤트 핸들러와 상태 변경이 혼합되어 있어 ui 요소만 분리하는 것이 어려웠습니다.</li>
</ul>
<br/>
<h4 id="3-직접-분리해보자"><a class="anchor" aria-hidden="true" tabindex="-1" href="#3-직접-분리해보자"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>3. 직접 분리해보자!</h4>
<ul>
<li>초반부터 ai가 세워준 전략으로 ai를 시켜서 설계를 시도하려고 하니 전반적인 코드베이스를 이해하기에는 한계가 있었습니다.
그래서 방향을 변경하여 main.basic.js의 구조부터 스스로 파악해야겠다고 생각했습니다.</li>
<li>가장 먼저 함수들 사이에 spacing을 두어 어떤 함수가 있는지 파악하고, 그 함수들을 개별파일로 분리했습니다.</li>
<li>분리를 하는 과정에서 각각의 함수가 어떤 일을 수행하는 함수인지 파악하고자 했습니다. 함수의 인자를 통해 의존성을 명시적으로 파악하고자 했습니다.</li>
<li>인자로 받는 변수들이 파악 되면서 이 변수들을 상태로 관리해야겠다는 판단이 생겼습니다.</li>
<li>함수 분리 후에는 다음에 할 일이 명확해 질 거라고 예상했습니다.</li>
</ul>
<p>main.basic에 작성되어 있는 코드를 나누면서 생각해보니 이 과제는 스스로 생각하는게 많으면 많으수록
리팩토링에 대한 저만의 기준과 방향에 대해 많이 얻을 수 있겠다는 생각을 했습니다.
그래서 ai는 귀찮은 작업 위주로 사용하고 리팩토링에 대한 방향은 스스로 진행하고자 했습니다.</p>
<p>작은 단위부터 점진적으로 코드를 분리하려고 했고, 진도가 느리더라도 최대한 더티코드에 대한 감각을 직접적으로 체감해보려 했습니다.
그러다보니 리팩토링의 시작은 <strong>나쁜냄새 맡기</strong>라는 것을 깨닫게 되었습니다.
작은 단위부터 고쳐서 완성도 있게 고도화 시키는 과정을 최대한 스스로 해보는 경험이 훨씬 저에게 많이 남을 것 같다는 생각을 했습니다.
그렇게 진행하면서 제 예상보다 과제의 진행도가 느렸고, 또 한번 생산성에 대한 고민을 하게 되었습니다.</p>
<p>결론적으로 advanced의 React + TypeScript 구축과 코드 마이그레이션을  ai를 활용하여 빠르게 진행을 한 뒤, 고도화를 스스로 해보는 방향으로 변경했습니다.</p>
<br/>
<h4 id="나는-어떤-원칙을-토대로-구조화하였는가"><a class="anchor" aria-hidden="true" tabindex="-1" href="#나는-어떤-원칙을-토대로-구조화하였는가"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>나는 어떤 원칙을 토대로 구조화하였는가?</h4>
<p>공유받은 아래의 문서가 테스트 주도 리팩토링에 도움이 많이 되었습니다.</p>
<pre><code class="code-highlight"><span class="code-line">절대 반드시 지켜야만 하는 절대적 원칙 (안지키면 다시해야함)
</span><span class="code-line">
</span><span class="code-line">- 코드의 동작이나 구현이 바뀌면 안되고 반드시 구조 변경(리팩토링)만 해야해야만해
</span><span class="code-line">- 공통으로 쓰이는 파일만 공통 폴더에 넣어두고, 비즈니스 로직이 담긴 경우, 관심사끼리 묶어 폴더로 관리해야해
</span><span class="code-line">- src/basic/tests/basic.test.js, src/advanced/tests/advanced.test.js 테스트 코드가 모두 하나도 빠짐없이 통과해야해 (테스트는 npx vitest run 으로 watch 가 발생하지 않도록 해)
</span><span class="code-line">- 테스트 코드 검증 여부는 main.basic.js 를 기준으로 검사해야만해. origin 파일은 의미없어.
</span><span class="code-line">- &gt; 결과파일은 main.basic.js 에 적용해줘
</span><span class="code-line">-&gt; 작업 후 마지막으로 절대 원칙이 지켜졌는지 한번 더 컴토 후 올바르게 고치고 알려줘
</span></code><div class="copied" data-code="절대 반드시 지켜야만 하는 절대적 원칙 (안지키면 다시해야함)

- 코드의 동작이나 구현이 바뀌면 안되고 반드시 구조 변경(리팩토링)만 해야해야만해
- 공통으로 쓰이는 파일만 공통 폴더에 넣어두고, 비즈니스 로직이 담긴 경우, 관심사끼리 묶어 폴더로 관리해야해
- src/basic/tests/basic.test.js, src/advanced/tests/advanced.test.js 테스트 코드가 모두 하나도 빠짐없이 통과해야해 (테스트는 npx vitest run 으로 watch 가 발생하지 않도록 해)
- 테스트 코드 검증 여부는 main.basic.js 를 기준으로 검사해야만해. origin 파일은 의미없어.
- &gt; 결과파일은 main.basic.js 에 적용해줘
-&gt; 작업 후 마지막으로 절대 원칙이 지켜졌는지 한번 더 컴토 후 올바르게 고치고 알려줘
"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
<p>그 밖에도</p>
<ol>
<li>우선순위 기반 분류</li>
<li>토스 가이드라인 기반 원칙</li>
</ol>
<ul>
<li>Readability: 명확한 변수명, 단순한 로직</li>
<li>Predictability: 일관된 데이터 흐름, 명시적 타입 변환</li>
<li>Cohesion: 단일 책임 원칙, 관련 로직 그룹화</li>
<li>Coupling: Props Drilling 최소화, 컴포넌트 분리</li>
</ul>
<p>을 적용하고자 했습니다.</p>
<br/>
<h3 id="2-페르소나-사용경험"><a class="anchor" aria-hidden="true" tabindex="-1" href="#2-페르소나-사용경험"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>2. 페르소나 사용경험</h3>
<p>저는 cursor rules를 <a href="https://gist.github.com/toy-crane/dde6258997519d954063a536fc72d055#file-toss-frontend-rules-mdc">toss-frontend-rules.mdc</a> 와 창준님이 공유해주셨던 <a href="https://gist.github.com/ckdwns9121/577097fa0aef83a4f62bb943e3e6a7fd#file-rules">커서를 클로드코드처럼 동작하게 하는 Rules</a> 를 복사해서 붙여넣는 정도로만 경험했었습니다. 이번 과제에 toss-frontend-rules 가 도움이 될 것 같아 페어팀에 공유를 했었는데 준형님께서 다음과 같은 운을 띄우게 됩니다.</p>
<img width="794" height="240" alt="image" src="https://github.com/user-attachments/assets/a8bb81cc-eac0-4fc4-b419-bd41de8dcd8f"/>
<br/>
<p>이 직전에 준형님께서 코드리뷰 에이전트를 만들어서 공유하셨는데, 그 에이전트와 토스 룰을 이용한 페르소나를 만들어서 페어팀에서 같이 사용하면 좋을 것 같다는 의견을 주셨습니다.</p>
<br/>
<img width="608" height="451" alt="image" src="https://github.com/user-attachments/assets/4e10b3ae-3561-468a-a2c9-2b8a3471a182"/>
<p>저는 덥석 미끼를 물어버렸습니다!
그래서 AI로 간단하게 합쳐보았고, 아직 본격적으로 관련 작업을 시작하지 않았지만 이번 과제에 제가 마루타가 되어 이 룰을 사용해 봤습니다.  (<a href="https://github.com/tomatopickles404/team389-ai-agents">Repo 보러가기</a>)</p>
<h4 id="토스-가이드라인을-따르는-클린-코드-리팩토링을-시켜보았습니다"><a class="anchor" aria-hidden="true" tabindex="-1" href="#토스-가이드라인을-따르는-클린-코드-리팩토링을-시켜보았습니다"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>토스 가이드라인을 따르는 클린 코드 리팩토링을 시켜보았습니다.</h4>
<img width="433" height="1061" alt="스크린샷 2025-07-31 오후 5 46 42" src="https://github.com/user-attachments/assets/2a19b8b8-190d-455e-af9e-5e0d44673751"/>
<ul>
<li>단계적으로 문제점 분석과 함께 점진적인 개선을 진행했습니다.</li>
<li>개선 후 테스트를 실행하며, 통과 된다면 문서화를 진행했습니다.</li>
</ul>
<br/>
<h3 id="3-테스트-주도-리팩토링-주기적인-문서화에-대한-생각"><a class="anchor" aria-hidden="true" tabindex="-1" href="#3-테스트-주도-리팩토링-주기적인-문서화에-대한-생각"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>3. 테스트 주도 리팩토링, 주기적인 문서화에 대한 생각</h3>
<h4 id="테스트-주도-리팩토링-"><a class="anchor" aria-hidden="true" tabindex="-1" href="#테스트-주도-리팩토링-"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>테스트 주도 리팩토링 (?)</h4>
<blockquote>
<p>리팩토링은 코드를 개선하는 것이 아니라, 코드를 이해하는 것이다  - 마틴 파울러</p>
</blockquote>
<ul>
<li>Red-Green-Refactor 사이클을 통한 안전한 리팩토링 경험</li>
<li>테스트가 있으면 &quot;이 코드가 여전히 작동하는가?&quot;라는 의심을 하지 않아도 된다.</li>
<li>장바구니와 같은 복잡한 계산이 많이 요구되는 도메인에서 특히 중요함을 깨달았습니다.</li>
</ul>
<h4 id="주기적인-문서화의-중요성"><a class="anchor" aria-hidden="true" tabindex="-1" href="#주기적인-문서화의-중요성"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>주기적인 문서화의 중요성</h4>
<p>문서화는 설계의 검증입니다. 문서를 쓰면서 아키텍처의 일관성을 확인하며, 설계의 결함을 조기에 발견할 수 있습니다.
리팩토링 과정에서 계획 단계의 문서화와 실행 과정의 문서화를 비교하면서 이를 체감했습니다.</p>
<p><strong>[계획 단계의 문서화]</strong></p>
<ul>
<li>이론적 접근, 이상적인 시나리오</li>
<li>체계적인 구조 설계</li>
<li>추상적이고 일반적인 원칙 적용</li>
</ul>
<p><strong>[실행 과정의 문서화]</strong></p>
<ul>
<li>실제 문제 해결 과정, 구체적인 트러블 슈팅이 드러난다.</li>
<li>예상치 못한 상황의 해결책을 찾는 과정에서의 사고 과정이 디테일하게 기록된다.</li>
</ul>
<h4 id="구체적인-비교"><a class="anchor" aria-hidden="true" tabindex="-1" href="#구체적인-비교"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>구체적인 비교</h4>
<p>[모듈 패턴 설계]</p>
<p><strong>계획 단계</strong></p>
<pre class="language-js"><code class="language-js code-highlight"><span class="code-line"><span class="token keyword">const</span> <span class="token maybe-class-name">ShoppingCart</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token comment">// ===== Private State =====</span>
</span><span class="code-line">  <span class="token keyword">let</span> state <span class="token operator">=</span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token literal-property property">products</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
</span><span class="code-line">    <span class="token literal-property property">cart</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
</span><span class="code-line">    <span class="token literal-property property">totalAmount</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
</span><span class="code-line">    <span class="token literal-property property">itemCount</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
</span><span class="code-line">    <span class="token literal-property property">lastSelected</span><span class="token operator">:</span> <span class="token keyword null nil">null</span><span class="token punctuation">,</span>
</span><span class="code-line">    <span class="token literal-property property">bonusPoints</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
</span><span class="code-line">    <span class="token literal-property property">ui</span><span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="code-line">      <span class="token literal-property property">productSelector</span><span class="token operator">:</span> <span class="token keyword null nil">null</span><span class="token punctuation">,</span>
</span><span class="code-line">      <span class="token literal-property property">addButton</span><span class="token operator">:</span> <span class="token keyword null nil">null</span><span class="token punctuation">,</span>
</span><span class="code-line">      <span class="token literal-property property">cartDisplay</span><span class="token operator">:</span> <span class="token keyword null nil">null</span><span class="token punctuation">,</span>
</span><span class="code-line">      <span class="token literal-property property">summaryElement</span><span class="token operator">:</span> <span class="token keyword null nil">null</span><span class="token punctuation">,</span>
</span><span class="code-line">      <span class="token literal-property property">stockInformation</span><span class="token operator">:</span> <span class="token keyword null nil">null</span><span class="token punctuation">,</span>
</span><span class="code-line">    <span class="token punctuation">}</span><span class="token punctuation">,</span>
</span><span class="code-line">  <span class="token punctuation">}</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="token comment">// ===== Public API =====</span>
</span><span class="code-line">  <span class="token keyword control-flow">return</span> <span class="token punctuation">{</span>
</span><span class="code-line">    init<span class="token punctuation">,</span>
</span><span class="code-line">    addToCart<span class="token punctuation">,</span>
</span><span class="code-line">    removeFromCart<span class="token punctuation">,</span>
</span><span class="code-line">    updateQuantity<span class="token punctuation">,</span>
</span><span class="code-line">    calculateTotal<span class="token punctuation">,</span>
</span><span class="code-line">    getState<span class="token punctuation">,</span>
</span><span class="code-line">    destroy<span class="token punctuation">,</span>
</span><span class="code-line">  <span class="token punctuation">}</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></code><div class="copied" data-code="const ShoppingCart = (() =&gt; {
  // ===== Private State =====
  let state = {
    products: [],
    cart: [],
    totalAmount: 0,
    itemCount: 0,
    lastSelected: null,
    bonusPoints: 0,
    ui: {
      productSelector: null,
      addButton: null,
      cartDisplay: null,
      summaryElement: null,
      stockInformation: null,
    },
  };

  // ===== Public API =====
  return {
    init,
    addToCart,
    removeFromCart,
    updateQuantity,
    calculateTotal,
    getState,
    destroy,
  };
})();
"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
<ul>
<li>모듈 패턴을 사용한 완전한 캡슐화 설계(계획 구상)</li>
<li>Private State와 Public API의 명확한 분리(설계 원칙)</li>
<li>즉시 실행 함수(IIFE)로 상태 은닉(구현 방식)</li>
</ul>
<p><strong>실제 구현 단계</strong>
실제로는 점진적인 접근이 필요했습니다.</p>
<p>1단계: 기존 함수들을 modules로 분리</p>
<ul>
<li>handleCalculateCartStuff → updateCartDisplay</li>
<li>onUpdateSelectOptions → updateProductOptions</li>
<li>doUpdatePricesInCart → updatePricesInCart</li>
</ul>
<p>2단계: 매개변수 통일 과정에서 트러블 슈팅</p>
<ul>
<li>함수 시그니처 불일치(모든 호출 지점 수정과정에서의 누락이슈)</li>
</ul>
<pre class="language-js"><code class="language-js code-highlight"><span class="code-line"><span class="token comment">// 기존 호출 방식</span>
</span><span class="code-line"><span class="token function">handleCalculateCartStuff</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 매개변수 없음</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment">// 새로운 함수 시그니처</span>
</span><span class="code-line"><span class="token keyword module">export</span> <span class="token keyword">function</span> <span class="token function">updateCartDisplay</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> cartDisp<span class="token punctuation">,</span> prodList <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token comment">// 객체 destructuring을 기대하지만 매개변수가 없어서 에러!</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code><div class="copied" data-code="// 기존 호출 방식
handleCalculateCartStuff();  // 매개변수 없음

// 새로운 함수 시그니처
export function updateCartDisplay({ cartDisp, prodList }) {
  // 객체 destructuring을 기대하지만 매개변수가 없어서 에러!
}
"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
<ul>
<li>전역변수 의존성 문제</li>
</ul>
<pre class="language-js"><code class="language-js code-highlight"><span class="code-line"><span class="token comment">// 기존: 전역변수에 의존</span>
</span><span class="code-line"><span class="token keyword">function</span> <span class="token function">handleCalculateCartStuff</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">  cartItems <span class="token operator">=</span> cartDisp<span class="token punctuation">.</span><span class="token property-access">children</span><span class="token punctuation">;</span>  <span class="token comment">// cartDisp는 전역변수</span>
</span><span class="code-line">  <span class="token comment">// prodList도 전역변수</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment">// 매개변수로 데이터 받음</span>
</span><span class="code-line"><span class="token keyword module">export</span> <span class="token keyword">function</span> <span class="token function">updateCartDisplay</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> cartDisp<span class="token punctuation">,</span> prodList <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token keyword">const</span> cartItems <span class="token operator">=</span> <span class="token known-class-name class-name">Array</span><span class="token punctuation">.</span><span class="token keyword module">from</span><span class="token punctuation">(</span>cartDisp<span class="token punctuation">.</span><span class="token property-access">children</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 매개변수 사용</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code><div class="copied" data-code="// 기존: 전역변수에 의존
function handleCalculateCartStuff() {
  cartItems = cartDisp.children;  // cartDisp는 전역변수
  // prodList도 전역변수
}

// 매개변수로 데이터 받음
export function updateCartDisplay({ cartDisp, prodList }) {
  const cartItems = Array.from(cartDisp.children);  // 매개변수 사용
}
"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
<p>3단계: 트러블슈팅 과정에서 발견한 문제들</p>
<pre><code class="code-highlight"><span class="code-line">// - 데이터 구조 불일치: &#x27;price&#x27; vs &#x27;val&#x27;
</span><span class="code-line">// - 상수 참조 불일치: PRODUCT_ONE vs p2 vs product_3
</span><span class="code-line">// - 함수 매개변수 destructuring 오류
</span></code><div class="copied" data-code="// - 데이터 구조 불일치: &#x27;price&#x27; vs &#x27;val&#x27;
// - 상수 참조 불일치: PRODUCT_ONE vs p2 vs product_3
// - 함수 매개변수 destructuring 오류
"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
<br/>
<p><strong>그 밖에도</strong>
프로젝트의 설계적인 관점 뿐만 아니라 AI 토큰의 경제적 사용 관점에서도 주기적인 문서화는 중요했습니다.
매 컨텍스트가 끝날 때마다 문서화 해둔 것을 기반으로 새로운 대화에 주입시켜 토큰을 절약할 수 있었습니다.</p>
<br/>
<h3 id="과제를-하면서-내가-제일-신경-쓴-부분은-무엇인가요"><a class="anchor" aria-hidden="true" tabindex="-1" href="#과제를-하면서-내가-제일-신경-쓴-부분은-무엇인가요"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>과제를 하면서 내가 제일 신경 쓴 부분은 무엇인가요?</h3>
<h4 id="1-추상화-레벨의-일관성"><a class="anchor" aria-hidden="true" tabindex="-1" href="#1-추상화-레벨의-일관성"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>1. 추상화 레벨의 일관성</h4>
<p>advanced 과제에서 가장 신경을 많이쓰고자 했던 부분입니다.</p>
<p><strong>[구체적 경험]</strong>
Basic → Advanced 버전으로 발전시키면서 각 레이어(컴포넌트, 훅, 유틸리티)의 추상화 레벨을 일관성 있게 유지하려고 노력했습니다.</p>
<p><strong>[어려웠던 점]</strong>
useNewCart 훅이 너무 많은 책임을 가지게 되어 추상화 레벨이 불일치하는 문제를 겪었습니다.</p>
<p><strong>[해결 방법]</strong>
useNewCart, useCartActions, useCartItems로 책임을 분리하여 각각의 추상화 레벨을 명확히 했습니다.</p>
<p>관련 소스</p>
<ul>
<li><a href="https://github.com/hanghae-plus/front_6th_chapter2-1/pull/7/files#diff-02872817a01caebf792e5d8bfd69549da6f6b2c811f0ae566bf1591f8254b690">useNewCart</a></li>
<li><a href="https://github.com/hanghae-plus/front_6th_chapter2-1/pull/7/files#diff-0564dc9b088d4841f9b0c06a777ea55e64735cbe36869b1c5a99f6d221963131">useCartActions</a></li>
<li><a href="https://github.com/hanghae-plus/front_6th_chapter2-1/pull/7/files#diff-59b7cafef1afa0a16d22e66887a29f190397e9cc0c0c874ebbe247f4e145324e">useCartItems</a>
<br/>
</li>
</ul>
<h4 id="컴포넌트-레이어에서의-추상화-ui-layer"><a class="anchor" aria-hidden="true" tabindex="-1" href="#컴포넌트-레이어에서의-추상화-ui-layer"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>컴포넌트 레이어에서의 추상화 (UI Layer)</h4>
<pre class="language-typescript"><code class="language-typescript code-highlight"><span class="code-line"><span class="token comment">// App.tsx - 최상위 컴포넌트 (높은 추상화)</span>
</span><span class="code-line"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">App</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token keyword">return</span> <span class="token operator">&lt;</span>AppContent <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword">function</span> <span class="token function">AppContent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token function">useSaleEffects</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 사이드 이펙트만 처리</span>
</span><span class="code-line">  <span class="token keyword">return</span> <span class="token punctuation">(</span>
</span><span class="code-line">    <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">&quot;max-w-screen-xl h-screen max-h-800 mx-auto p-8 flex flex-col&quot;</span><span class="token operator">&gt;</span>
</span><span class="code-line">      <span class="token operator">&lt;</span>Header <span class="token operator">/</span><span class="token operator">&gt;</span>
</span><span class="code-line">      <span class="token operator">&lt;</span>MainContent <span class="token operator">/</span><span class="token operator">&gt;</span>
</span><span class="code-line">    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
</span><span class="code-line">  <span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment">// MainContent - 레이아웃 컴포넌트 (중간 추상화)</span>
</span><span class="code-line"><span class="token keyword">function</span> <span class="token function">MainContent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token keyword">return</span> <span class="token punctuation">(</span>
</span><span class="code-line">    <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">&quot;grid grid-cols-1 lg:grid-cols-[1fr_360px] gap-6 flex-1 overflow-hidden&quot;</span><span class="token operator">&gt;</span>
</span><span class="code-line">      <span class="token operator">&lt;</span>SelectSection <span class="token operator">/</span><span class="token operator">&gt;</span>
</span><span class="code-line">      <span class="token operator">&lt;</span>OrderSummary <span class="token operator">/</span><span class="token operator">&gt;</span>
</span><span class="code-line">      <span class="token operator">&lt;</span>HelpButton <span class="token operator">/</span><span class="token operator">&gt;</span>
</span><span class="code-line">    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
</span><span class="code-line">  <span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment">// SelectSection - 구체적인 기능 컴포넌트 (낮은 추상화)</span>
</span><span class="code-line"><span class="token keyword">function</span> <span class="token function">SelectSection</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token keyword">return</span> <span class="token punctuation">(</span>
</span><span class="code-line">    <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">&quot;bg-white border border-gray-200 p-8 overflow-y-auto&quot;</span><span class="token operator">&gt;</span>
</span><span class="code-line">      <span class="token operator">&lt;</span>ProductSelector <span class="token operator">/</span><span class="token operator">&gt;</span>
</span><span class="code-line">      <span class="token operator">&lt;</span>CartDisplay <span class="token operator">/</span><span class="token operator">&gt;</span>
</span><span class="code-line">    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
</span><span class="code-line">  <span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code><div class="copied" data-code="// App.tsx - 최상위 컴포넌트 (높은 추상화)
export default function App() {
  return &lt;AppContent /&gt;;
}

function AppContent() {
  useSaleEffects(); // 사이드 이펙트만 처리
  return (
    &lt;div className=&quot;max-w-screen-xl h-screen max-h-800 mx-auto p-8 flex flex-col&quot;&gt;
      &lt;Header /&gt;
      &lt;MainContent /&gt;
    &lt;/div&gt;
  );
}

// MainContent - 레이아웃 컴포넌트 (중간 추상화)
function MainContent() {
  return (
    &lt;div className=&quot;grid grid-cols-1 lg:grid-cols-[1fr_360px] gap-6 flex-1 overflow-hidden&quot;&gt;
      &lt;SelectSection /&gt;
      &lt;OrderSummary /&gt;
      &lt;HelpButton /&gt;
    &lt;/div&gt;
  );
}

// SelectSection - 구체적인 기능 컴포넌트 (낮은 추상화)
function SelectSection() {
  return (
    &lt;div className=&quot;bg-white border border-gray-200 p-8 overflow-y-auto&quot;&gt;
      &lt;ProductSelector /&gt;
      &lt;CartDisplay /&gt;
    &lt;/div&gt;
  );
}
"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
<br/>
<h4 id="2-토스-가이드라인-준수"><a class="anchor" aria-hidden="true" tabindex="-1" href="#2-토스-가이드라인-준수"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>2. 토스 가이드라인 준수</h4>
<ul>
<li>README에 작성되어 있는 클린코드 준수 사항과 함께 토스 가이드라인을 고려했습니다.</li>
<li>토스의 <a href="https://frontend-fundamentals.com/code-quality/">Frontend Fundamentals</a> 문서는 클린코드에 대해 이해하기 쉽고 직관적으로 설명하고 있기에 이번 과제에 적용하는 연습을 함께 해보면 좋을 것 같다고 생각했습니다.</li>
</ul>
<p>Frontend Fundamentals에서는 좋은 코드를 4가지 기준으로 나누어 설명합니다.</p>
<h4 id="readability-가독성"><a class="anchor" aria-hidden="true" tabindex="-1" href="#readability-가독성"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Readability (가독성)</h4>
<ol>
<li><strong>명명 규칙</strong>: <code>getCartTotals</code>, <code>updateProductQuantity</code> 등 명확한 함수명</li>
<li><strong>상수 분리</strong>: <code>DISCOUNT_THRESHOLDS</code> 등 매직 넘버 제거</li>
<li><strong>함수 분리</strong>: 복잡한 로직을 작은 함수들로 분해</li>
</ol>
<h4 id="predictability-예측-가능성"><a class="anchor" aria-hidden="true" tabindex="-1" href="#predictability-예측-가능성"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Predictability (예측 가능성)</h4>
<ol>
<li><strong>일관된 반환 타입</strong>: 같은 종류의 함수나 Hook이 서로 다른 반환 타입을 가지면 코드의 일관성이 떨어져 협업에서 예측 가능성이 낮아짐 -&gt; 같은 종류의 Hook이나 함수의 반환 타입을 동일한 기조로 유지</li>
<li><strong>순수 함수</strong>: 부수 효과 없는 예측 가능한 함수들</li>
<li><strong>에러 처리</strong>: 명확한 에러 상황 처리</li>
</ol>
<h4 id="cohesion-응집도"><a class="anchor" aria-hidden="true" tabindex="-1" href="#cohesion-응집도"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Cohesion (응집도)</h4>
<ol>
<li><strong>도메인별 분리</strong>: <code>cart/</code>, <code>product/</code>, <code>order/</code> 등 기능별 모듈화</li>
<li><strong>관련 로직 그룹화</strong>: 할인 계산, 포인트 계산 등 관련 기능 묶음</li>
</ol>
<h4 id="coupling-결합도"><a class="anchor" aria-hidden="true" tabindex="-1" href="#coupling-결합도"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Coupling (결합도)</h4>
<ol>
<li><strong>의존성 주입</strong>: 함수 파라미터로 의존성 전달</li>
<li><strong>인터페이스 분리</strong>: 명확한 인터페이스 정의</li>
</ol>
<br/>
<h4 id="3-점진적-리팩토링-접근"><a class="anchor" aria-hidden="true" tabindex="-1" href="#3-점진적-리팩토링-접근"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>3. 점진적 리팩토링 접근</h4>
<p>위에서 언급했던 절대원칙 4가지를 매 컨텍스트마다 주입하며 점진적으로 리팩토링을 진행하고자 했습니다.</p>
<ul>
<li>절대 원칙(4가지)
<ul>
<li>코드 동작 변경 금지: 구조 변경만 허용</li>
<li>관심사별 분리: 공통 파일은 공통 폴더, 비즈니스 로직은 관심사별 폴더</li>
<li>100% 테스트 통과: npx vitest run으로 모든 테스트 통과 필수</li>
<li>main.basic.js 기준: 테스트 검증은 main.basic.js 기준</li>
</ul>
</li>
<li>가장 작은 단위부터 점진적으로 개선하기
<ul>
<li>코드 spacing 나누기 -&gt; 함수 분리하기 -&gt; 함수명 개선하기 -&gt; 작은 단위로 나누기</li>
</ul>
</li>
</ul>
<br/>
<h3 id="과제를-다시-해보면-더-잘-할-수-있었겠다-아쉬운-점이-있다면-무엇인가요"><a class="anchor" aria-hidden="true" tabindex="-1" href="#과제를-다시-해보면-더-잘-할-수-있었겠다-아쉬운-점이-있다면-무엇인가요"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>과제를 다시 해보면 더 잘 할 수 있었겠다 아쉬운 점이 있다면 무엇인가요?</h3>
<h4 id="1-몇몇-코드의-아쉬운-단일책임-분리"><a class="anchor" aria-hidden="true" tabindex="-1" href="#1-몇몇-코드의-아쉬운-단일책임-분리"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>1. 몇몇 코드의 아쉬운 단일책임 분리</h4>
<p><strong>[문제점]</strong></p>
<ul>
<li><code>calculateLoyaltyPoints.js</code>의 단일책임 위반</li>
<li>한 함수가 너무 많은 일을 수행하고 있습니다.</li>
</ul>
<pre class="language-js"><code class="language-js code-highlight"><span class="code-line"><span class="token keyword">const</span> <span class="token function-variable function">calculateLoyaltyPoints</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>
</span></span><span class="code-line"><span class="token parameter">  totalAmount<span class="token punctuation">,</span>
</span></span><span class="code-line"><span class="token parameter">  itemCount<span class="token punctuation">,</span>
</span></span><span class="code-line"><span class="token parameter">  cartItems<span class="token punctuation">,</span>
</span></span><span class="code-line"><span class="token parameter">  prodList<span class="token punctuation">,</span>
</span></span><span class="code-line"><span class="token parameter"><span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token keyword">const</span> basePoints <span class="token operator">=</span> <span class="token known-class-name class-name">Math</span><span class="token punctuation">.</span><span class="token method function property-access">floor</span><span class="token punctuation">(</span>totalAmount <span class="token operator">/</span> <span class="token constant">POINTS</span><span class="token punctuation">.</span><span class="token property-access">baseRate</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token keyword">let</span> finalPoints <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token keyword">const</span> pointsDetail <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>basePoints <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">    finalPoints <span class="token operator">=</span> basePoints<span class="token punctuation">;</span>
</span><span class="code-line">    pointsDetail<span class="token punctuation">.</span><span class="token method function property-access">push</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">기본: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>basePoints<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">p</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token punctuation">}</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="token comment">// 화요일 보너스</span>
</span><span class="code-line">  <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">getDay</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token constant">DISCOUNT</span><span class="token punctuation">.</span><span class="token property-access">tuesdayDay</span> <span class="token operator">&amp;&amp;</span> basePoints <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">    finalPoints <span class="token operator">=</span> basePoints <span class="token operator">*</span> <span class="token constant">POINTS</span><span class="token punctuation">.</span><span class="token property-access">tuesdayMultiplier</span><span class="token punctuation">;</span>
</span><span class="code-line">    pointsDetail<span class="token punctuation">.</span><span class="token method function property-access">push</span><span class="token punctuation">(</span><span class="token string">&#x27;화요일 2배&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token punctuation">}</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="token comment">// 상품별 보너스 포인트</span>
</span><span class="code-line">  <span class="token keyword">const</span> productBonus <span class="token operator">=</span> <span class="token function">calculateProductBonus</span><span class="token punctuation">(</span>cartItems<span class="token punctuation">,</span> prodList<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">  finalPoints <span class="token operator">+=</span> productBonus<span class="token punctuation">.</span><span class="token property-access">points</span><span class="token punctuation">;</span>
</span><span class="code-line">  pointsDetail<span class="token punctuation">.</span><span class="token method function property-access">push</span><span class="token punctuation">(</span><span class="token spread operator">...</span>productBonus<span class="token punctuation">.</span><span class="token property-access">details</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="token comment">// 수량별 보너스</span>
</span><span class="code-line">  <span class="token keyword">const</span> quantityBonus <span class="token operator">=</span> <span class="token function">calculateQuantityBonus</span><span class="token punctuation">(</span>itemCount<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">  finalPoints <span class="token operator">+=</span> quantityBonus<span class="token punctuation">.</span><span class="token property-access">points</span><span class="token punctuation">;</span>
</span><span class="code-line">  pointsDetail<span class="token punctuation">.</span><span class="token method function property-access">push</span><span class="token punctuation">(</span><span class="token spread operator">...</span>quantityBonus<span class="token punctuation">.</span><span class="token property-access">details</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="token keyword control-flow">return</span> <span class="token punctuation">{</span> finalPoints<span class="token punctuation">,</span> pointsDetail <span class="token punctuation">}</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token punctuation">}</span><span class="token punctuation">;</span>
</span></code><div class="copied" data-code="const calculateLoyaltyPoints = ({
  totalAmount,
  itemCount,
  cartItems,
  prodList,
}) =&gt; {
  const basePoints = Math.floor(totalAmount / POINTS.baseRate);
  let finalPoints = 0;
  const pointsDetail = [];

  if (basePoints &gt; 0) {
    finalPoints = basePoints;
    pointsDetail.push(`기본: ${basePoints}p`);
  }

  // 화요일 보너스
  if (new Date().getDay() === DISCOUNT.tuesdayDay &amp;&amp; basePoints &gt; 0) {
    finalPoints = basePoints * POINTS.tuesdayMultiplier;
    pointsDetail.push(&#x27;화요일 2배&#x27;);
  }

  // 상품별 보너스 포인트
  const productBonus = calculateProductBonus(cartItems, prodList);
  finalPoints += productBonus.points;
  pointsDetail.push(...productBonus.details);

  // 수량별 보너스
  const quantityBonus = calculateQuantityBonus(itemCount);
  finalPoints += quantityBonus.points;
  pointsDetail.push(...quantityBonus.details);

  return { finalPoints, pointsDetail };
};
"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
<p><strong>[개선 방안]</strong></p>
<pre class="language-js"><code class="language-js code-highlight"><span class="code-line"><span class="token keyword module">export</span> <span class="token keyword">const</span> <span class="token function-variable function">getLoyaltyPoints</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">cartData</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token keyword">const</span> basePoints <span class="token operator">=</span> <span class="token function">getBasePoints</span><span class="token punctuation">(</span>cartData<span class="token punctuation">.</span><span class="token property-access">totalAmount</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token keyword">const</span> tuesdayBonus <span class="token operator">=</span> <span class="token function">getTuesdayBonus</span><span class="token punctuation">(</span>basePoints<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token keyword">const</span> productBonus <span class="token operator">=</span> <span class="token function">getProductBonus</span><span class="token punctuation">(</span>cartData<span class="token punctuation">.</span><span class="token property-access">cartItems</span><span class="token punctuation">,</span> cartData<span class="token punctuation">.</span><span class="token property-access">prodList</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token keyword">const</span> quantityBonus <span class="token operator">=</span> <span class="token function">getQuantityBonus</span><span class="token punctuation">(</span>cartData<span class="token punctuation">.</span><span class="token property-access">itemCount</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">  
</span><span class="code-line">  <span class="token keyword control-flow">return</span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token literal-property property">totalPoints</span><span class="token operator">:</span> basePoints <span class="token operator">+</span> tuesdayBonus <span class="token operator">+</span> productBonus <span class="token operator">+</span> quantityBonus<span class="token punctuation">,</span>
</span><span class="code-line">    <span class="token literal-property property">details</span><span class="token operator">:</span> <span class="token function">getPointDetails</span><span class="token punctuation">(</span>basePoints<span class="token punctuation">,</span> tuesdayBonus<span class="token punctuation">,</span> productBonus<span class="token punctuation">,</span> quantityBonus<span class="token punctuation">)</span><span class="token punctuation">,</span>
</span><span class="code-line">  <span class="token punctuation">}</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token punctuation">}</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span></code><div class="copied" data-code="export const getLoyaltyPoints = (cartData) =&gt; {
  const basePoints = getBasePoints(cartData.totalAmount);
  const tuesdayBonus = getTuesdayBonus(basePoints);
  const productBonus = getProductBonus(cartData.cartItems, cartData.prodList);
  const quantityBonus = getQuantityBonus(cartData.itemCount);
  
  return {
    totalPoints: basePoints + tuesdayBonus + productBonus + quantityBonus,
    details: getPointDetails(basePoints, tuesdayBonus, productBonus, quantityBonus),
  };
};

"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
<ul>
<li>각 로직을 하나의 책임을 갖는 함수로 분리합니다.</li>
</ul>
<br/>
<h4 id="2-에러-처리-패턴-미흡"><a class="anchor" aria-hidden="true" tabindex="-1" href="#2-에러-처리-패턴-미흡"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>2. 에러 처리 패턴 미흡</h4>
<p><strong>[문제점]</strong></p>
<ul>
<li>하드코딩된 alert() 메시지</li>
</ul>
<pre class="language-ts"><code class="language-ts code-highlight"><span class="code-line"><span class="token keyword">const</span> <span class="token function-variable function">addToCart</span> <span class="token operator">=</span> <span class="token punctuation">(</span>productId<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token keyword">const</span> product <span class="token operator">=</span> <span class="token function">getProduct</span><span class="token punctuation">(</span>productId<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">  
</span><span class="code-line">  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>product<span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">&#x27;상품을 찾을 수 없습니다.&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
</span><span class="code-line">    <span class="token keyword">return</span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token punctuation">}</span>
</span><span class="code-line">  
</span><span class="code-line">  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">canAddToCart</span><span class="token punctuation">(</span>product<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">&#x27;재고가 부족합니다.&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
</span><span class="code-line">    <span class="token keyword">return</span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token punctuation">}</span>
</span><span class="code-line">  <span class="token comment">// ...</span>
</span><span class="code-line"><span class="token punctuation">}</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword">const</span> <span class="token function-variable function">startLightningSale</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token comment">// ...</span>
</span><span class="code-line">  <span class="token function">alert</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">⚡ 번개세일! </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>luckyItem<span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">이(가) 20% 할인됩니다!</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ❌ UI 로직이 훅에 포함</span>
</span><span class="code-line"><span class="token punctuation">}</span><span class="token punctuation">;</span>
</span></code><div class="copied" data-code="const addToCart = (productId: string) =&gt; {
  const product = getProduct(productId);
  
  if (!product) {
    alert(&#x27;상품을 찾을 수 없습니다.&#x27;); 
    return;
  }
  
  if (!canAddToCart(product)) {
    alert(&#x27;재고가 부족합니다.&#x27;); 
    return;
  }
  // ...
};

const startLightningSale = () =&gt; {
  // ...
  alert(`⚡ 번개세일! ${luckyItem.name}이(가) 20% 할인됩니다!`); // ❌ UI 로직이 훅에 포함
};
"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
<ul>
<li>UI 로직인 <code>alert()</code> 가 비즈니스 로직에 섞여있습니다. (관심사 분리 위반)</li>
<li>일관되지 않은 에러처리를 하고 있습니다. (어떤 곳은 alert, 어떤 곳은 return)</li>
</ul>
<p><strong>[개선 방안]</strong></p>
<pre class="language-ts"><code class="language-ts code-highlight"><span class="code-line"><span class="token keyword">type</span> <span class="token class-name">Result<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token constant">E</span> <span class="token operator">=</span> <span class="token builtin">string</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> 
</span><span class="code-line">  <span class="token operator">|</span> <span class="token punctuation">{</span> success<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">;</span> data<span class="token operator">:</span> <span class="token constant">T</span> <span class="token punctuation">}</span>
</span><span class="code-line">  <span class="token operator">|</span> <span class="token punctuation">{</span> success<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">;</span> error<span class="token operator">:</span> <span class="token constant">E</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword">const</span> addToCart <span class="token operator">=</span> <span class="token punctuation">(</span>productId<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token operator">:</span> Result<span class="token operator">&lt;</span><span class="token keyword">void</span><span class="token operator">&gt;</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token keyword">try</span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token keyword">const</span> product <span class="token operator">=</span> <span class="token function">getProduct</span><span class="token punctuation">(</span>productId<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>product<span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">      <span class="token keyword">return</span> <span class="token punctuation">{</span> success<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> error<span class="token operator">:</span> <span class="token string">&#x27;PRODUCT_NOT_FOUND&#x27;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
</span><span class="code-line">    <span class="token punctuation">}</span>
</span><span class="code-line">    
</span><span class="code-line">    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">canAddToCart</span><span class="token punctuation">(</span>product<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">      <span class="token keyword">return</span> <span class="token punctuation">{</span> success<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> error<span class="token operator">:</span> <span class="token string">&#x27;INSUFFICIENT_STOCK&#x27;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
</span><span class="code-line">    <span class="token punctuation">}</span>
</span><span class="code-line">    
</span><span class="code-line">    <span class="token function">updateStock</span><span class="token punctuation">(</span>productId<span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">    <span class="token function">addItem</span><span class="token punctuation">(</span>productId<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">    <span class="token keyword">return</span> <span class="token punctuation">{</span> success<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> data<span class="token operator">:</span> <span class="token keyword">undefined</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token keyword">return</span> <span class="token punctuation">{</span> success<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> error<span class="token operator">:</span> error<span class="token punctuation">.</span>message <span class="token punctuation">}</span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token punctuation">}</span>
</span><span class="code-line"><span class="token punctuation">}</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword">const</span> <span class="token function-variable function">handleAddToCart</span> <span class="token operator">=</span> <span class="token punctuation">(</span>productId<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token function">addToCart</span><span class="token punctuation">(</span>productId<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>result<span class="token punctuation">.</span>success<span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token function">showNotification</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// UI 로직은 컴포넌트에서</span>
</span><span class="code-line">  <span class="token punctuation">}</span>
</span><span class="code-line"><span class="token punctuation">}</span><span class="token punctuation">;</span>
</span></code><div class="copied" data-code="type Result&lt;T, E = string&gt; = 
  | { success: true; data: T }
  | { success: false; error: E };

const addToCart = (productId: string): Result&lt;void&gt; =&gt; {
  try {
    const product = getProduct(productId);
    if (!product) {
      return { success: false, error: &#x27;PRODUCT_NOT_FOUND&#x27; };
    }
    
    if (!canAddToCart(product)) {
      return { success: false, error: &#x27;INSUFFICIENT_STOCK&#x27; };
    }
    
    updateStock(productId, -1);
    addItem(productId, 1);
    return { success: true, data: undefined };
  } catch (error) {
    return { success: false, error: error.message };
  }
};

const handleAddToCart = (productId: string) =&gt; {
  const result = addToCart(productId);
  if (!result.success) {
    showNotification(result.error); // UI 로직은 컴포넌트에서
  }
};
"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
<ul>
<li>Result 타입 패턴 적용</li>
<li>UI 컴포넌트에서 에러처리를 관리합니다.</li>
</ul>
<br/>
<h4 id="3-훅-내부의-ui-요소-alert"><a class="anchor" aria-hidden="true" tabindex="-1" href="#3-훅-내부의-ui-요소-alert"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>3. 훅 내부의 Ui 요소 (alert)</h4>
<p><strong>[문제점]</strong></p>
<pre class="language-ts"><code class="language-ts code-highlight"><span class="code-line"><span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">useSaleManager</span><span class="token punctuation">(</span><span class="token punctuation">{</span> products<span class="token punctuation">,</span> updateSaleStatus <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token keyword">const</span> <span class="token function-variable function">startLightningSale</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token comment">// ...</span>
</span><span class="code-line">    <span class="token function">alert</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">⚡ 번개세일! </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>luckyItem<span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">이(가) 20% 할인됩니다!</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ❌ UI 로직</span>
</span><span class="code-line">    <span class="token function">updateSaleStatus</span><span class="token punctuation">(</span>luckyItem<span class="token punctuation">.</span>id<span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token comment">/* ... */</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token punctuation">}</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code><div class="copied" data-code="export function useSaleManager({ products, updateSaleStatus }) {
  const startLightningSale = () =&gt; {
    // ...
    alert(`⚡ 번개세일! ${luckyItem.name}이(가) 20% 할인됩니다!`); // ❌ UI 로직
    updateSaleStatus(luckyItem.id, { /* ... */ });
  };
}
"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
<ul>
<li>관심사 분리 실패 (비즈니스 로직과 UI로직이 한 함수에 혼재)</li>
<li>의존성 방향이 잘못 되었다.</li>
</ul>
<pre class="language-ts"><code class="language-ts code-highlight"><span class="code-line">useSaleManager → <span class="token function">alert</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 훅이 UI에 의존</span>
</span></code><div class="copied" data-code="useSaleManager → alert() // 훅이 UI에 의존
"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
<blockquote>
<p>올바른 방향</p>
</blockquote>
<pre class="language-ts"><code class="language-ts code-highlight"><span class="code-line">Component → useSaleManager → 비즈니스 로직
</span><span class="code-line">Component → <span class="token constant">UI</span> 렌더링
</span></code><div class="copied" data-code="Component → useSaleManager → 비즈니스 로직
Component → UI 렌더링
"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
<p><strong>[개선 방향]</strong></p>
<pre class="language-ts"><code class="language-ts code-highlight"><span class="code-line"><span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">useSaleManager</span><span class="token punctuation">(</span><span class="token punctuation">{</span> products<span class="token punctuation">,</span> updateSaleStatus <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token keyword">const</span> <span class="token function-variable function">startLightningSale</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token keyword">const</span> luckyItem <span class="token operator">=</span> <span class="token function">selectRandomProduct</span><span class="token punctuation">(</span>products<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">    
</span><span class="code-line">    <span class="token comment">// 비즈니스 로직만 처리</span>
</span><span class="code-line">    <span class="token function">updateSaleStatus</span><span class="token punctuation">(</span>luckyItem<span class="token punctuation">.</span>id<span class="token punctuation">,</span> <span class="token punctuation">{</span> onSale<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> discountRate<span class="token operator">:</span> <span class="token number">0.2</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">    
</span><span class="code-line">    <span class="token comment">// 이벤트 발생 (UI 로직은 컴포넌트에서 처리)</span>
</span><span class="code-line">    <span class="token keyword">return</span> <span class="token punctuation">{</span>
</span><span class="code-line">      type<span class="token operator">:</span> <span class="token string">&#x27;LIGHTNING_SALE_STARTED&#x27;</span><span class="token punctuation">,</span>
</span><span class="code-line">      payload<span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="code-line">        product<span class="token operator">:</span> luckyItem<span class="token punctuation">,</span>
</span><span class="code-line">        discountRate<span class="token operator">:</span> <span class="token number">0.2</span><span class="token punctuation">,</span>
</span><span class="code-line">        message<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">⚡ 번개세일! </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>luckyItem<span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">이(가) 20% 할인됩니다!</span><span class="token template-punctuation string">`</span></span>
</span><span class="code-line">      <span class="token punctuation">}</span>
</span><span class="code-line">    <span class="token punctuation">}</span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token punctuation">}</span><span class="token punctuation">;</span>
</span><span class="code-line">  
</span><span class="code-line">  <span class="token keyword">return</span> <span class="token punctuation">{</span> startLightningSale <span class="token punctuation">}</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment">// 컴포넌트에서 UI 로직 처리</span>
</span><span class="code-line"><span class="token keyword">function</span> <span class="token function">SaleButton</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token keyword">const</span> <span class="token punctuation">{</span> startLightningSale <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useSaleManager</span><span class="token punctuation">(</span><span class="token punctuation">{</span> products<span class="token punctuation">,</span> updateSaleStatus <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token keyword">const</span> <span class="token punctuation">{</span> showToast <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useNotification</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">  
</span><span class="code-line">  <span class="token keyword">const</span> <span class="token function-variable function">handleSaleStart</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token function">startLightningSale</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">    
</span><span class="code-line">    <span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token punctuation">.</span>type <span class="token operator">===</span> <span class="token string">&#x27;LIGHTNING_SALE_STARTED&#x27;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">      <span class="token function">showToast</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>payload<span class="token punctuation">.</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">    <span class="token punctuation">}</span>
</span><span class="code-line">  <span class="token punctuation">}</span><span class="token punctuation">;</span>
</span><span class="code-line">  
</span><span class="code-line">  <span class="token keyword">return</span> <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span>handleSaleStart<span class="token punctuation">}</span><span class="token operator">&gt;</span>번개세일 시작<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code><div class="copied" data-code="export function useSaleManager({ products, updateSaleStatus }) {
  const startLightningSale = () =&gt; {
    const luckyItem = selectRandomProduct(products);
    
    // 비즈니스 로직만 처리
    updateSaleStatus(luckyItem.id, { onSale: true, discountRate: 0.2 });
    
    // 이벤트 발생 (UI 로직은 컴포넌트에서 처리)
    return {
      type: &#x27;LIGHTNING_SALE_STARTED&#x27;,
      payload: {
        product: luckyItem,
        discountRate: 0.2,
        message: `⚡ 번개세일! ${luckyItem.name}이(가) 20% 할인됩니다!`
      }
    };
  };
  
  return { startLightningSale };
}

// 컴포넌트에서 UI 로직 처리
function SaleButton() {
  const { startLightningSale } = useSaleManager({ products, updateSaleStatus });
  const { showToast } = useNotification();
  
  const handleSaleStart = () =&gt; {
    const result = startLightningSale();
    
    if (result.type === &#x27;LIGHTNING_SALE_STARTED&#x27;) {
      showToast(result.payload.message);
    }
  };
  
  return &lt;button onClick={handleSaleStart}&gt;번개세일 시작&lt;/button&gt;;
}
"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
<ul>
<li>훅은 순수한 비즈니스 로직만 담당</li>
<li>다양한 알림 방식(토스트, 모달 등) 적용 가능</li>
</ul>
<br/>
<h4 id="4-하나의-context에-과도한-상태주입"><a class="anchor" aria-hidden="true" tabindex="-1" href="#4-하나의-context에-과도한-상태주입"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>4. 하나의 context에 과도한 상태주입</h4>
<p><strong>[문제점]</strong></p>
<p>CartProvider의 과도한 책임</p>
<pre class="language-ts"><code class="language-ts code-highlight"><span class="code-line"><span class="token keyword">interface</span> <span class="token class-name">CartContextType</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token comment">// 상품 관련 (4개)</span>
</span><span class="code-line">  products<span class="token operator">:</span> Product<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token function-variable function">getProduct</span><span class="token operator">:</span> <span class="token punctuation">(</span>productId<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> Product <span class="token operator">|</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
</span><span class="code-line">  
</span><span class="code-line">  <span class="token comment">// 장바구니 아이템 관련 (2개)</span>
</span><span class="code-line">  cartItems<span class="token operator">:</span> <span class="token builtin">Array</span><span class="token operator">&lt;</span><span class="token punctuation">{</span> product<span class="token operator">:</span> Product<span class="token punctuation">;</span> quantity<span class="token operator">:</span> <span class="token builtin">number</span> <span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token function-variable function">getItemQuantity</span><span class="token operator">:</span> <span class="token punctuation">(</span>productId<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
</span><span class="code-line">  
</span><span class="code-line">  <span class="token comment">// 계산 관련 (3개)</span>
</span><span class="code-line">  cartTotal<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
</span><span class="code-line">  loyaltyPoints<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
</span><span class="code-line">  discountInfo<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
</span><span class="code-line">  
</span><span class="code-line">  <span class="token comment">// 재고 관련 (1개)</span>
</span><span class="code-line">  stockStatus<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
</span><span class="code-line">  
</span><span class="code-line">  <span class="token comment">// 액션 관련 (5개)</span>
</span><span class="code-line">  <span class="token function-variable function">addToCart</span><span class="token operator">:</span> <span class="token punctuation">(</span>productId<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token function-variable function">handleRemove</span><span class="token operator">:</span> <span class="token punctuation">(</span>productId<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token function-variable function">handleQuantityChange</span><span class="token operator">:</span> <span class="token punctuation">(</span>productId<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> change<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token function-variable function">updateSaleStatus</span><span class="token operator">:</span> <span class="token punctuation">(</span>productId<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> saleInfo<span class="token operator">:</span> SaleInfo<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token function-variable function">clearCart</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code><div class="copied" data-code="interface CartContextType {
  // 상품 관련 (4개)
  products: Product[];
  getProduct: (productId: string) =&gt; Product | null;
  
  // 장바구니 아이템 관련 (2개)
  cartItems: Array&lt;{ product: Product; quantity: number }&gt;;
  getItemQuantity: (productId: string) =&gt; number;
  
  // 계산 관련 (3개)
  cartTotal: number;
  loyaltyPoints: number;
  discountInfo: string;
  
  // 재고 관련 (1개)
  stockStatus: string;
  
  // 액션 관련 (5개)
  addToCart: (productId: string) =&gt; void;
  handleRemove: (productId: string) =&gt; void;
  handleQuantityChange: (productId: string, change: number) =&gt; void;
  updateSaleStatus: (productId: string, saleInfo: SaleInfo) =&gt; void;
  clearCart: () =&gt; void;
}
"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
<ul>
<li>단일 책임 원칙 위반: 하나의 Context가 너무 많은 책임</li>
<li>불필요한 리렌더링: 관련 없는 상태 변경이 전체 리렌더링 유발</li>
<li>테스트 어려움: 너무 많은 의존성으로 테스트 복잡</li>
</ul>
<p><strong>[개선 방안]</strong></p>
<pre class="language-ts"><code class="language-ts code-highlight"><span class="code-line"><span class="token comment">// ProductContext - 상품 관련</span>
</span><span class="code-line"><span class="token keyword">interface</span> <span class="token class-name">ProductContextType</span> <span class="token punctuation">{</span>
</span><span class="code-line">  products<span class="token operator">:</span> Product<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token function-variable function">getProduct</span><span class="token operator">:</span> <span class="token punctuation">(</span>productId<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> Product <span class="token operator">|</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
</span><span class="code-line">  stockStatus<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token function-variable function">updateSaleStatus</span><span class="token operator">:</span> <span class="token punctuation">(</span>productId<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> saleInfo<span class="token operator">:</span> SaleInfo<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment">// CartContext - 장바구니 관련</span>
</span><span class="code-line"><span class="token keyword">interface</span> <span class="token class-name">CartContextType</span> <span class="token punctuation">{</span>
</span><span class="code-line">  cartItems<span class="token operator">:</span> <span class="token builtin">Array</span><span class="token operator">&lt;</span><span class="token punctuation">{</span> product<span class="token operator">:</span> Product<span class="token punctuation">;</span> quantity<span class="token operator">:</span> <span class="token builtin">number</span> <span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token function-variable function">getItemQuantity</span><span class="token operator">:</span> <span class="token punctuation">(</span>productId<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token function-variable function">addToCart</span><span class="token operator">:</span> <span class="token punctuation">(</span>productId<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token function-variable function">handleRemove</span><span class="token operator">:</span> <span class="token punctuation">(</span>productId<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token function-variable function">handleQuantityChange</span><span class="token operator">:</span> <span class="token punctuation">(</span>productId<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> change<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token function-variable function">clearCart</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment">// CalculationContext - 계산 관련</span>
</span><span class="code-line"><span class="token keyword">interface</span> <span class="token class-name">CalculationContextType</span> <span class="token punctuation">{</span>
</span><span class="code-line">  cartTotal<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
</span><span class="code-line">  loyaltyPoints<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
</span><span class="code-line">  discountInfo<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code><div class="copied" data-code="// ProductContext - 상품 관련
interface ProductContextType {
  products: Product[];
  getProduct: (productId: string) =&gt; Product | null;
  stockStatus: string;
  updateSaleStatus: (productId: string, saleInfo: SaleInfo) =&gt; void;
}

// CartContext - 장바구니 관련
interface CartContextType {
  cartItems: Array&lt;{ product: Product; quantity: number }&gt;;
  getItemQuantity: (productId: string) =&gt; number;
  addToCart: (productId: string) =&gt; void;
  handleRemove: (productId: string) =&gt; void;
  handleQuantityChange: (productId: string, change: number) =&gt; void;
  clearCart: () =&gt; void;
}

// CalculationContext - 계산 관련
interface CalculationContextType {
  cartTotal: number;
  loyaltyPoints: number;
  discountInfo: string;
}
"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
<ul>
<li>Context를 조금 더 세분화해 레이어를 나누어 책임을 분산시킵니다.</li>
</ul>
<br/>
<h3 id="리뷰-받고-싶은-내용이나-궁금한-것에-대한-질문-편하게-남겨주세요-"><a class="anchor" aria-hidden="true" tabindex="-1" href="#리뷰-받고-싶은-내용이나-궁금한-것에-대한-질문-편하게-남겨주세요-"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>리뷰 받고 싶은 내용이나 궁금한 것에 대한 질문 편하게 남겨주세요 :)</h3>
<h4 id="1-디렉토리-구조에-대한-고민"><a class="anchor" aria-hidden="true" tabindex="-1" href="#1-디렉토리-구조에-대한-고민"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>1. 디렉토리 구조에 대한 고민</h4>
<pre><code class="code-highlight"><span class="code-line">src/
</span><span class="code-line">├── cart/                    # 장바구니 도메인
</span><span class="code-line">│   ├── components/         # 장바구니 관련 컴포넌트
</span><span class="code-line">│   ├── context/           # 장바구니 상태 관리
</span><span class="code-line">│   ├── hooks/             # 장바구니 관련 커스텀 훅
</span><span class="code-line">│   └── utils/             # 장바구니 유틸리티
</span><span class="code-line">├── order/                  # 주문 도메인
</span><span class="code-line">│   ├── components/         # 주문 관련 컴포넌트
</span><span class="code-line">│   └── hooks/             # 주문 관련 커스텀 훅
</span><span class="code-line">├── product/                # 상품 도메인
</span><span class="code-line">│   ├── components/         # 상품 관련 컴포넌트
</span><span class="code-line">│   ├── hooks/             # 상품 관련 커스텀 훅
</span><span class="code-line">│   └── utils/             # 상품 유틸리티
</span><span class="code-line">├── shared/                 # 공통 모듈
</span><span class="code-line">│   ├── components/         # 공통 컴포넌트
</span><span class="code-line">│   ├── hooks/             # 공통 커스텀 훅
</span><span class="code-line">│   └── utils/             # 공통 유틸리티
</span><span class="code-line">├── types/                  # TypeScript 타입 정의
</span><span class="code-line">├── App.tsx                 # 메인 앱 컴포넌트
</span><span class="code-line">├── main.tsx               # 앱 진입점
</span><span class="code-line">└── index.css              # 전역 스타일
</span></code><div class="copied" data-code="src/
├── cart/                    # 장바구니 도메인
│   ├── components/         # 장바구니 관련 컴포넌트
│   ├── context/           # 장바구니 상태 관리
│   ├── hooks/             # 장바구니 관련 커스텀 훅
│   └── utils/             # 장바구니 유틸리티
├── order/                  # 주문 도메인
│   ├── components/         # 주문 관련 컴포넌트
│   └── hooks/             # 주문 관련 커스텀 훅
├── product/                # 상품 도메인
│   ├── components/         # 상품 관련 컴포넌트
│   ├── hooks/             # 상품 관련 커스텀 훅
│   └── utils/             # 상품 유틸리티
├── shared/                 # 공통 모듈
│   ├── components/         # 공통 컴포넌트
│   ├── hooks/             # 공통 커스텀 훅
│   └── utils/             # 공통 유틸리티
├── types/                  # TypeScript 타입 정의
├── App.tsx                 # 메인 앱 컴포넌트
├── main.tsx               # 앱 진입점
└── index.css              # 전역 스타일
"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
<ul>
<li>실제로 제가 최근까지 진행하고 있는 개인 프로젝트와 비슷한 도메인 기반의 디렉토리 구조로 설계했습니다.</li>
<li>완전한 FSD 구조는 아니지만 어느정도 도메인 기반 Feature Sliced 한 구조라고 생각되어 이 구조를 선호하는데, 이 디렉토리 구조에 대해 코치님의 의견이 궁금합니다. 아쉬운점이 있다면 어떤 점을 추가적으로 고려하면 좋을지, 꼭 FSD가 아니어도 어떻게 하면 코드를 독립적이고 재사용 가능하게 관리할 수 있을지 궁금합니다.</li>
</ul>
<br/>
<h4 id="2-설계의-관점"><a class="anchor" aria-hidden="true" tabindex="-1" href="#2-설계의-관점"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>2. 설계의 관점</h4>
<p>Cart에 대한 상태나 로직을 작은 단위로 리팩토링 하는 것이 어려웠는데, 이렇게 복잡한 계산이 요구되는 경우에는 초기 설계가 중요할 것 같습니다. 초반에 어떤 것을 고려하며 코드를 작성하는 것이 좋을까요?
복잡한 상태를 훅으로 분리할 때, 어쩔 수 없이 훅 간의 의존성이 생기기도 합니다.</p>
<p>예를 들어,  useNewCart, useCartActions, useCartItems와 같이 여러 커스텀 훅으로 분리하는 전략을 시도했습니다.</p>
<pre class="language-ts"><code class="language-ts code-highlight"><span class="code-line"><span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">useNewCart</span><span class="token punctuation">(</span><span class="token punctuation">{</span> initialProducts <span class="token punctuation">}</span><span class="token operator">:</span> UseNewCartProps<span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token comment">// 1단계: 상품 인벤토리 훅</span>
</span><span class="code-line">  <span class="token keyword">const</span> <span class="token punctuation">{</span> products<span class="token punctuation">,</span> updateStock<span class="token punctuation">,</span> updateSaleStatus<span class="token punctuation">,</span> getProduct <span class="token punctuation">}</span> <span class="token operator">=</span>
</span><span class="code-line">    <span class="token function">useProductInventory</span><span class="token punctuation">(</span>initialProducts<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">  
</span><span class="code-line">  <span class="token comment">// 2단계: 장바구니 아이템 훅 (products에 의존)</span>
</span><span class="code-line">  <span class="token keyword">const</span> <span class="token punctuation">{</span>
</span><span class="code-line">    cartItems<span class="token punctuation">,</span>
</span><span class="code-line">    addItem<span class="token punctuation">,</span>
</span><span class="code-line">    removeItem<span class="token punctuation">,</span>
</span><span class="code-line">    updateItemQuantity<span class="token punctuation">,</span>
</span><span class="code-line">    getItemQuantity<span class="token punctuation">,</span>
</span><span class="code-line">    clearCart<span class="token punctuation">,</span>
</span><span class="code-line">  <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useCartItems</span><span class="token punctuation">(</span>products<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="token comment">// 3단계: 계산 훅 (cartItems에 의존)</span>
</span><span class="code-line">  <span class="token keyword">const</span> totals <span class="token operator">=</span> <span class="token function">getCartTotals</span><span class="token punctuation">(</span>cartItems<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token keyword">const</span> stockStatus <span class="token operator">=</span> <span class="token function">getStockStatus</span><span class="token punctuation">(</span>products<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="token comment">// 4단계: 액션 훅 (여러 의존성 주입)</span>
</span><span class="code-line">  <span class="token keyword">const</span> <span class="token punctuation">{</span> addToCart<span class="token punctuation">,</span> handleRemove<span class="token punctuation">,</span> handleQuantityChange <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useCartActions</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
</span><span class="code-line">    products<span class="token punctuation">,</span>        <span class="token comment">// useProductInventory에서</span>
</span><span class="code-line">    getProduct<span class="token punctuation">,</span>      <span class="token comment">// useProductInventory에서</span>
</span><span class="code-line">    updateStock<span class="token punctuation">,</span>     <span class="token comment">// useProductInventory에서</span>
</span><span class="code-line">    addItem<span class="token punctuation">,</span>         <span class="token comment">// useCartItems에서</span>
</span><span class="code-line">    removeItem<span class="token punctuation">,</span>      <span class="token comment">// useCartItems에서</span>
</span><span class="code-line">    updateItemQuantity<span class="token punctuation">,</span> <span class="token comment">// useCartItems에서</span>
</span><span class="code-line">    getItemQuantity<span class="token punctuation">,</span> <span class="token comment">// useCartItems에서</span>
</span><span class="code-line">  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="token keyword">return</span> <span class="token punctuation">{</span>
</span><span class="code-line">    products<span class="token punctuation">,</span>
</span><span class="code-line">    getProduct<span class="token punctuation">,</span>
</span><span class="code-line">    cartItems<span class="token punctuation">,</span>
</span><span class="code-line">    getItemQuantity<span class="token punctuation">,</span>
</span><span class="code-line">    cartTotal<span class="token operator">:</span> totals<span class="token punctuation">.</span>cartTotal<span class="token punctuation">,</span>
</span><span class="code-line">    loyaltyPoints<span class="token operator">:</span> totals<span class="token punctuation">.</span>loyaltyPoints<span class="token punctuation">,</span>
</span><span class="code-line">    discountInfo<span class="token operator">:</span> totals<span class="token punctuation">.</span>discountInfo<span class="token punctuation">,</span>
</span><span class="code-line">    stockStatus<span class="token punctuation">,</span>
</span><span class="code-line">    addToCart<span class="token punctuation">,</span>
</span><span class="code-line">    handleRemove<span class="token punctuation">,</span>
</span><span class="code-line">    handleQuantityChange<span class="token punctuation">,</span>
</span><span class="code-line">    updateSaleStatus<span class="token punctuation">,</span>
</span><span class="code-line">    clearCart<span class="token punctuation">,</span>
</span><span class="code-line">  <span class="token punctuation">}</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code><div class="copied" data-code="export function useNewCart({ initialProducts }: UseNewCartProps) {
  // 1단계: 상품 인벤토리 훅
  const { products, updateStock, updateSaleStatus, getProduct } =
    useProductInventory(initialProducts);
  
  // 2단계: 장바구니 아이템 훅 (products에 의존)
  const {
    cartItems,
    addItem,
    removeItem,
    updateItemQuantity,
    getItemQuantity,
    clearCart,
  } = useCartItems(products);

  // 3단계: 계산 훅 (cartItems에 의존)
  const totals = getCartTotals(cartItems);
  const stockStatus = getStockStatus(products);

  // 4단계: 액션 훅 (여러 의존성 주입)
  const { addToCart, handleRemove, handleQuantityChange } = useCartActions({
    products,        // useProductInventory에서
    getProduct,      // useProductInventory에서
    updateStock,     // useProductInventory에서
    addItem,         // useCartItems에서
    removeItem,      // useCartItems에서
    updateItemQuantity, // useCartItems에서
    getItemQuantity, // useCartItems에서
  });

  return {
    products,
    getProduct,
    cartItems,
    getItemQuantity,
    cartTotal: totals.cartTotal,
    loyaltyPoints: totals.loyaltyPoints,
    discountInfo: totals.discountInfo,
    stockStatus,
    addToCart,
    handleRemove,
    handleQuantityChange,
    updateSaleStatus,
    clearCart,
  };
}
"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
<p>이렇게 하나의 도메인을 위해 분리된 훅들이 서로를 의존해야 할 때, 이 관계를 어떻게 설계하는 것이 가장 이상적일까요?</p>
<h4 id="3-추상화-분리에-관하여"><a class="anchor" aria-hidden="true" tabindex="-1" href="#3-추상화-분리에-관하여"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>3. 추상화 분리에 관하여</h4>
<p>추상화 레벨의 일관성을 맞추기 위해 이런식으로 다른 훅을 조합하는 역할만 하는 훅이 만들어지는 경우가 생기는 것 같습니다.
이러한 분리도 의미가 있을까요?</p></div></div><div class="overflow-auto mt-9"><div data-color-mode="dark" class="wmde-markdown wmde-markdown-color p-6 max-w-full" style="word-wrap:break-word;overflow-wrap:break-word"><h2 id="과제-피드백"><a class="anchor" aria-hidden="true" tabindex="-1" href="#과제-피드백"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>과제 피드백</h2>
<p>우선 지호님.. 회고문서 정말 대박이네요..
이렇게 회고 열심히 작성해주신 분은 처음입니다.
열정이 보입니다!!</p>
<p>Q. FSD기반 슬라이스 구조..</p>
<p>A. 코드를 어떻게 하면 독립적이고 재사용가능성 있게 만들 수 있는지는 저도 아직까지 화두이고 항상 생각이 바뀌는 것 같아요. 어차피 정답은 없는 것일 것 같아요.
&quot;이 프로젝트에서는 현재의 구조가 최선으로 보인다&quot; 정도의 믿음으로 필요한 부분들을 개선하려는 노력이 더 중요한 것 같습니다 끝판왕은 없으니까요.</p>
<p>저도 FSD의 슬라이스와 세그먼트구조는 괜찮다고 생각해요 컴포넌트 기반으로 개발하는 것이 일상화 된 상황에서는 어찌보면 자연스럽게 만들어지는 형태가 아닐까 생각합니다.
다만 레이어부분은 FSD가 정해놓은 것 보다는 프로덕트에 맞게 팀에서 적절히 다시 구성하는 편이 좋다는 생각정도만 하고 있습니다.
이렇게 프로젝트에 맞게 레이어를 구성해 위계를 만들고, 각 컴포넌트는 추상화된 개념으로 일관성있게 세그먼트 형태로 나눠서 개발하는 형태, 거기에 더해 수평적으로 공통적으로 사용할 수 있는 레이어정도만 추가되면 저는 일단 기본은 커버하는 구조라고 생각합니다.
물론 이것도 프로젝트마다 다를 것 같아요. 지금 지호님 이 잡으신 구조는 저는 오히려 FSD를 억지로 구현하려는 것보다, 장점만 취한 심플하고 좋은 구조라고 생각합니다.
어떻게 보면 제가 말씀드린 요건들을 다 갖춘것 같아요 다만 컴포넌트의 레이어 구분이 없긴하지만 사실 지금 과제를 기준으로 볼때는 레이어 구분은 오히려 오버엔지니어링일지도 모르겠네요.</p>
<p>Q. 훅들의 의존</p>
<p>A. 훅이 하나의 역할로만 잘 나눠지면 나줘질수록 오히려 의존성은 더 높아지는 것 같아요 어떻게보면 중복을 제거하는 과정이니 당연한 것 아닌 가 싶습니다.
의존은 피할 수 없을 것 같고 다만 훅도 모두 같은 훅으로 보지말고 훅도 적절한 개념의 레이어로 추상화해서 서로 위계를 만들고 의존의 방향을 설정해주 형태로 유지를 하는 편이 저는 옳은 것 같아요. 이것은 코드의 위치로도 구분할 수 있고 단순히 개념적으로 약속하고 네이밍으로 프리픽스나 서픽스를 다는형태로 구분할 수도 있을 것 같아요. 일단 레이어를 구분하기로 했다면 어떤형태로는 구분할 필요는 있어보입니다.</p>
<p>Q. 추상화 레벨의 일관성을 맞추기 위해 이런식으로 다른 훅을 조합하는 역할만 하는 훅이 만들어지는 경우가 생기는 것 같습니다.
이러한 분리도 의미가 있을까요?</p>
<p>A. 어떻게 보면 2번째 질문의 답변에서 같이 답변된 것 같은데요. 넵 이러한 분리도 당연히 의미가 있는 것 같아요. 기본 재료에 해당하는 훅이 있고 그런 레이어를 베이스훅 뭐 이런 이름으로 부르기로 &quot;약속&quot;할 수 있을 것 같아요. 그리고 그 재료들을 활용해서 더 추상화된 개념의 작업을 수행하는 훅도 있겠쭁. 다만 이때 의존의 방향을 한방향으로 흐르는 것으로 약속을 해야할 것 같아요. 레이어 안에서 의존을 허용할지 말지도 규칙을 정해야할 것이고요. 재사용성을 위해 어쩔수 없는 부분이라고 생각합니다.</p></div></div><div class="mt-9"></div></div></main></div></div></div></div>
</body>
</html>
