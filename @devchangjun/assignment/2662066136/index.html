<!doctype html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>항해플러스 프론트엔드 6기 기술블로그</title>
  <link rel="icon" href="/front_6th/favicon.ico"/>
  
  <script type="module" crossorigin src="/front_6th/assets/index-Drf7uASk.js"></script>
  <link rel="stylesheet" crossorigin href="/front_6th/assets/index-Dvjhel9t.css">
</head>
<body>
<div id="root"><link rel="preload" as="image" href="https://github.com/user-attachments/assets/ec27f63b-7a89-491e-892c-5257841ff204"/><link rel="preload" as="image" href="https://github.com/user-attachments/assets/0c15f9b7-e6d8-4955-a427-22f3db9a102c"/><link rel="preload" as="image" href="https://github.com/user-attachments/assets/e5bbe663-f561-495e-b81e-3ec47d1dace0"/><link rel="preload" as="image" href="https://github.com/user-attachments/assets/80ad7095-ce51-4171-8468-3e6508cee3b5"/><div data-slot="sidebar-wrapper" style="--sidebar-width:16rem;--sidebar-width-icon:3rem" class="group/sidebar-wrapper has-data-[variant=inset]:bg-sidebar flex min-h-svh w-full"><div class="min-h-screen flex w-full"><div class="group peer text-sidebar-foreground hidden md:block" data-state="expanded" data-collapsible="" data-variant="sidebar" data-side="left" data-slot="sidebar"><div data-slot="sidebar-gap" class="relative w-(--sidebar-width) bg-transparent transition-[width] duration-200 ease-linear group-data-[collapsible=offcanvas]:w-0 group-data-[side=right]:rotate-180 group-data-[collapsible=icon]:w-(--sidebar-width-icon)"></div><div data-slot="sidebar-container" class="fixed inset-y-0 z-10 hidden h-svh transition-[left,right,width] duration-200 ease-linear md:flex left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)] group-data-[collapsible=icon]:w-(--sidebar-width-icon) group-data-[side=left]:border-r group-data-[side=right]:border-l w-64"><div data-sidebar="sidebar" data-slot="sidebar-inner" class="bg-sidebar group-data-[variant=floating]:border-sidebar-border flex h-full w-full flex-col group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:shadow-sm"><div data-slot="sidebar-content" data-sidebar="content" class="flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden bg-card border-r border-border"><a class="p-4" href="/front_6th/" data-discover="true"><div class="flex items-center space-x-2 mb-6"><div class="w-8 h-8 bg-gradient-primary rounded-lg flex items-center justify-center"><span class="text-white font-bold text-sm">6기</span></div><h4 class="text-lg font-bold text-primary">항해플러스 프론트엔드</h4></div></a><div data-slot="sidebar-group" data-sidebar="group" class="relative flex w-full min-w-0 flex-col p-2"><div data-slot="sidebar-group-label" data-sidebar="group-label" class="ring-sidebar-ring flex h-8 shrink-0 items-center rounded-md text-xs font-medium outline-hidden transition-[margin,opacity] duration-200 ease-linear focus-visible:ring-2 [&amp;&gt;svg]:size-4 [&amp;&gt;svg]:shrink-0 group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0 text-muted-foreground px-4">학습 관리</div><div data-slot="sidebar-group-content" data-sidebar="group-content" class="w-full text-sm"><ul data-slot="sidebar-menu" data-sidebar="menu" class="flex w-full min-w-0 flex-col gap-1 px-2"><li data-slot="sidebar-menu-item" data-sidebar="menu-item" class="group/menu-item relative"><a data-slot="sidebar-menu-button" data-sidebar="menu-button" data-size="default" data-active="false" class="peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left outline-hidden ring-sidebar-ring transition-[width,height,padding] focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-data-[sidebar=menu-action]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:size-8! group-data-[collapsible=icon]:p-2! [&amp;&gt;span:last-child]:truncate [&amp;&gt;svg]:size-4 [&amp;&gt;svg]:shrink-0 hover:bg-sidebar-accent hover:text-sidebar-accent-foreground text-sm h-12 text-foreground hover:bg-secondary hover:text-secondary-foreground rounded-lg transition-all duration-300" href="/front_6th/" data-discover="true"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-users h-5 w-5" aria-hidden="true"><path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"></path><path d="M16 3.128a4 4 0 0 1 0 7.744"></path><path d="M22 21v-2a4 4 0 0 0-3-3.87"></path><circle cx="9" cy="7" r="4"></circle></svg><span class="ml-3">수강생 목록</span></a></li><li data-slot="sidebar-menu-item" data-sidebar="menu-item" class="group/menu-item relative"><a data-slot="sidebar-menu-button" data-sidebar="menu-button" data-size="default" data-active="false" class="peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left outline-hidden ring-sidebar-ring transition-[width,height,padding] focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-data-[sidebar=menu-action]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:size-8! group-data-[collapsible=icon]:p-2! [&amp;&gt;span:last-child]:truncate [&amp;&gt;svg]:size-4 [&amp;&gt;svg]:shrink-0 hover:bg-sidebar-accent hover:text-sidebar-accent-foreground text-sm h-12 text-foreground hover:bg-secondary hover:text-secondary-foreground rounded-lg transition-all duration-300" href="/front_6th/assignments" data-discover="true"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-book-open h-5 w-5" aria-hidden="true"><path d="M12 7v14"></path><path d="M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z"></path></svg><span class="ml-3">과제 목록</span></a></li></ul></div></div></div></div></div></div><div class="flex-1 min-w-0"><header class="h-12 flex items-center border-b border-border bg-card px-4"><button data-slot="sidebar-trigger" class="inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 size-7 mr-4 text-white" data-sidebar="trigger"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-panel-left" aria-hidden="true"><rect width="18" height="18" x="3" y="3" rx="2"></rect><path d="M9 3v18"></path></svg><span class="sr-only">Toggle Sidebar</span></button><h4 class="text-lg font-semibold "><a href="/front_6th/@devchangjun/" data-discover="true">devchangjun<!-- --> 님의 상세페이지</a> ＞ <!-- -->[8팀 박창준] Chapter 1-2. 프레임워크 없이 SPA 만들기</h4></header><main class="p-6"><div><div class="card-wrap"><div data-slot="card" class="card text-card-foreground flex flex-col gap-6 shadow-sm mb-6 p-6 border border-gray-700 bg-gray-800 rounded-lg"><a href="https://github.com/hanghae-plus/front_6th_chapter1-2/pull/20" target="_blank"><div class="flex items-start gap-4"><div class="flex-shrink-0"><svg xmlns="http://www.w3.org/2000/svg" height="32" aria-hidden="true" viewBox="0 0 24 24" width="32" fill="white" class="w-8 h-8"><path d="M12 1C5.923 1 1 5.923 1 12c0 4.867 3.149 8.979 7.521 10.436.55.096.756-.233.756-.522 0-.262-.013-1.128-.013-2.049-2.764.509-3.479-.674-3.699-1.292-.124-.317-.66-1.293-1.127-1.554-.385-.207-.936-.715-.014-.729.866-.014 1.485.797 1.691 1.128.99 1.663 2.571 1.196 3.204.907.096-.715.385-1.196.701-1.471-2.448-.275-5.005-1.224-5.005-5.432 0-1.196.426-2.186 1.128-2.956-.111-.275-.496-1.402.11-2.915 0 0 .921-.288 3.024 1.128a10.193 10.193 0 0 1 2.75-.371c.936 0 1.871.123 2.75.371 2.104-1.43 3.025-1.128 3.025-1.128.605 1.513.221 2.64.111 2.915.701.77 1.127 1.747 1.127 2.956 0 4.222-2.571 5.157-5.019 5.432.399.344.743 1.004.743 2.035 0 1.471-.014 2.654-.014 3.025 0 .289.206.632.756.522C19.851 20.979 23 16.854 23 12c0-6.077-4.922-11-11-11Z"></path></svg></div><div class="flex-1 min-w-0"><div class="flex items-center gap-2 mb-2"><h3 class="text-lg font-semibold text-white truncate">[8팀 박창준] Chapter 1-2. 프레임워크 없이 SPA 만들기</h3></div><div class="flex items-center gap-4 text-xs text-gray-500"><span>by <!-- -->devchangjun</span><span>2025. 7. 13.</span></div></div></div></a></div></div><div class="overflow-auto"><div data-color-mode="dark" class="wmde-markdown wmde-markdown-color p-6 max-w-full" style="word-wrap:break-word;overflow-wrap:break-word"><h2 id="과제-체크포인트"><a class="anchor" aria-hidden="true" tabindex="-1" href="#과제-체크포인트"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>과제 체크포인트</h2>
<h3 id="배포-링크"><a class="anchor" aria-hidden="true" tabindex="-1" href="#배포-링크"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>배포 링크</h3>
<p><a href="https://devchangjun.github.io/front_6th_chapter1-2/">https://devchangjun.github.io/front_6th_chapter1-2/</a></p>
<!-- -->
<h3 id="기본과제"><a class="anchor" aria-hidden="true" tabindex="-1" href="#기본과제"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>기본과제</h3>
<h4 id="가상돔을-기반으로-렌더링하기"><a class="anchor" aria-hidden="true" tabindex="-1" href="#가상돔을-기반으로-렌더링하기"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>가상돔을 기반으로 렌더링하기</h4>
<ul class="contains-task-list">
<li class="task-list-item"><input type="checkbox" disabled="" checked=""/> createVNode 함수를 이용하여 vNode를 만든다.</li>
<li class="task-list-item"><input type="checkbox" disabled="" checked=""/> normalizeVNode 함수를 이용하여 vNode를 정규화한다.</li>
<li class="task-list-item"><input type="checkbox" disabled="" checked=""/> createElement 함수를 이용하여 vNode를 실제 DOM으로 만든다.</li>
<li class="task-list-item"><input type="checkbox" disabled="" checked=""/> 결과적으로, JSX를 실제 DOM으로 변환할 수 있도록 만들었다.</li>
</ul>
<h4 id="이벤트-위임"><a class="anchor" aria-hidden="true" tabindex="-1" href="#이벤트-위임"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>이벤트 위임</h4>
<ul class="contains-task-list">
<li class="task-list-item"><input type="checkbox" disabled="" checked=""/> 노드를 생성할 때 이벤트를 직접 등록하는게 아니라 이벤트 위임 방식으로 등록해야 한다</li>
<li class="task-list-item"><input type="checkbox" disabled="" checked=""/> 동적으로 추가된 요소에도 이벤트가 정상적으로 작동해야 한다</li>
<li class="task-list-item"><input type="checkbox" disabled="" checked=""/> 이벤트 핸들러가 제거되면 더 이상 호출되지 않아야 한다</li>
</ul>
<h3 id="심화-과제"><a class="anchor" aria-hidden="true" tabindex="-1" href="#심화-과제"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>심화 과제</h3>
<h4 id="diff-알고리즘-구현"><a class="anchor" aria-hidden="true" tabindex="-1" href="#diff-알고리즘-구현"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Diff 알고리즘 구현</h4>
<ul class="contains-task-list">
<li class="task-list-item"><input type="checkbox" disabled="" checked=""/> 초기 렌더링이 올바르게 수행되어야 한다</li>
<li class="task-list-item"><input type="checkbox" disabled="" checked=""/> diff 알고리즘을 통해 변경된 부분만 업데이트해야 한다</li>
<li class="task-list-item"><input type="checkbox" disabled="" checked=""/> 새로운 요소를 추가하고 불필요한 요소를 제거해야 한다</li>
<li class="task-list-item"><input type="checkbox" disabled="" checked=""/> 요소의 속성만 변경되었을 때 요소를 재사용해야 한다</li>
<li class="task-list-item"><input type="checkbox" disabled="" checked=""/> 요소의 타입이 변경되었을 때 새로운 요소를 생성해야 한다</li>
</ul>
<h2 id="과제-셀프회고"><a class="anchor" aria-hidden="true" tabindex="-1" href="#과제-셀프회고"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>과제 셀프회고</h2>
<h3 id="기술적-성장"><a class="anchor" aria-hidden="true" tabindex="-1" href="#기술적-성장"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>기술적 성장</h3>
<p>React의 핵심 개념인 Virtual DOM이 어떻게 동작하는지 간단히는 알고 있었지만 막상 직접 구현해보려 하니 막막했기도 했고 한편으로는 너무 재밌을것 같았습니다. 재밌을것 같았던 이유는 1주차 과제에서 했던 고민이였어요.😂</p>
<blockquote>
<p>“innerHTML로 DOM을 전부 다시 그리는 방식이 정말 SPA라고 할 수 있을까?”</p>
</blockquote>
<p>라는 의문이 생겼었는데 제가 너무 성급하게 고민을 했엇네요 ㅎㅎ..  2주차에 Virtual DOM을 직접 구현하는 과제가 나오면서 코치님들이 과제를 어떻게 단계적으로 설계했고 수강생들에게 어떤 학습 포인트를 던지려 했는지 이해할 수 있었습니다.</p>
<h3 id="고민했던-부분"><a class="anchor" aria-hidden="true" tabindex="-1" href="#고민했던-부분"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>고민했던 부분</h3>
<p>과제를 진행하면서</p>
<ul>
<li><strong>어떻게 바뀐 부분만 찾아서 렌더링할까?</strong></li>
<li><strong>어떤 기준으로 이전 상태와 현재 상태를 비교해 업데이트해야 할까?</strong></li>
</ul>
<p>이 질문들에 답하기 위해 가상돔의 동작 원리와 diffing 알고리즘의 기본 개념부터 고민할 필요가 있었습니다.</p>
<p>특히 아래 부분은 초반에 잘 이해되지 않았습니다.</p>
<ul>
<li>flat을 이용해 children을 평탄화하는 이유 → 이걸 평탄화해버리면 계층 구조가 깨지는 거 아닐까?</li>
<li>이벤트 핸들러 관리에서 WeakMap이 왜 필요한지 → 그냥 Map이나 Set으로 처리해도 되는 거 아니야?</li>
<li>normalizeVNode가 왜 존재하는지, 무엇을 해결하는지 → 이미 VNode를 만들었는데 왜 또 정규화가 필요한 거지? 그냥 렌더링하면 되는 거 아니야?</li>
</ul>
<p>처음에는 “평탄화를 하면 중첩된 계층 구조가 깨져버리는 게 아닐까?” 같은 오해도 있었고, WeakMap과 Map의 차이가 단순한 자료구조 차이인지 아니면 더 본질적인 이유가 있는지도 이해하지 못했습니다.</p>
<h3 id="이해했던-과정"><a class="anchor" aria-hidden="true" tabindex="-1" href="#이해했던-과정"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>이해했던 과정</h3>
<h3 id="1-평탄화가-해결해하려는-문제"><a class="anchor" aria-hidden="true" tabindex="-1" href="#1-평탄화가-해결해하려는-문제"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>1. 평탄화가 해결해하려는 문제</h3>
<p><strong>평탄화를 하면 계층구조가 다 깨져버리는거 아니야?</strong> 라는 질문은 여러 케이스를 디버깅 해보면서 제가 잘못 이해했다는 것을 알았습나다.</p>
<p>제가 이해한 평탄화를 하는 이유는 다음과 같습니다.</p>
<ul>
<li>children 배열을 1차원으로 만들어 배열, 문자열, VNode 등 혼합합적인 상태를 정리하고</li>
<li>렌더링할 때 각 항목을 재귀로 순회하며 element를 생성할 수 있게 도와주는 과정임을 이해했습니다.</li>
</ul>
<p>예를들어 아래와 같은 구조가 있으면</p>
<pre class="language-jsx"><code class="language-jsx code-highlight"><span class="code-line"><span class="token function">createVNode</span><span class="token punctuation">(</span><span class="token string">&quot;div&quot;</span><span class="token punctuation">,</span> <span class="token keyword null nil">null</span><span class="token punctuation">,</span>
</span><span class="code-line">  <span class="token string">&quot;Hello&quot;</span><span class="token punctuation">,</span>
</span><span class="code-line">  <span class="token punctuation">[</span>
</span><span class="code-line">    <span class="token string">&quot;World&quot;</span><span class="token punctuation">,</span>
</span><span class="code-line">    <span class="token punctuation">[</span><span class="token string">&quot;!&quot;</span><span class="token punctuation">,</span> <span class="token function">createVNode</span><span class="token punctuation">(</span><span class="token string">&quot;span&quot;</span><span class="token punctuation">,</span> <span class="token keyword null nil">null</span><span class="token punctuation">,</span> <span class="token string">&quot;항해&quot;</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
</span><span class="code-line">    <span class="token boolean">false</span><span class="token punctuation">,</span>
</span><span class="code-line">    <span class="token keyword null nil">null</span>
</span><span class="code-line">  <span class="token punctuation">]</span><span class="token punctuation">,</span>
</span><span class="code-line">  <span class="token function">createVNode</span><span class="token punctuation">(</span><span class="token string">&quot;section&quot;</span><span class="token punctuation">,</span> <span class="token keyword null nil">null</span><span class="token punctuation">,</span>
</span><span class="code-line">    <span class="token function">createVNode</span><span class="token punctuation">(</span><span class="token string">&quot;h1&quot;</span><span class="token punctuation">,</span> <span class="token keyword null nil">null</span><span class="token punctuation">,</span> <span class="token string">&quot;플러스&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
</span><span class="code-line">    <span class="token punctuation">[</span><span class="token string">&quot;6기&quot;</span><span class="token punctuation">,</span> <span class="token function">createVNode</span><span class="token punctuation">(</span><span class="token string">&quot;p&quot;</span><span class="token punctuation">,</span> <span class="token keyword null nil">null</span><span class="token punctuation">,</span> <span class="token string">&quot;화이팅&quot;</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
</span><span class="code-line">  <span class="token punctuation">)</span>
</span><span class="code-line"><span class="token punctuation">)</span>
</span></code><div class="copied" data-code="createVNode(&quot;div&quot;, null,
  &quot;Hello&quot;,
  [
    &quot;World&quot;,
    [&quot;!&quot;, createVNode(&quot;span&quot;, null, &quot;항해&quot;)],
    false,
    null
  ],
  createVNode(&quot;section&quot;, null,
    createVNode(&quot;h1&quot;, null, &quot;플러스&quot;),
    [&quot;6기&quot;, createVNode(&quot;p&quot;, null, &quot;화이팅&quot;)]
  )
)
"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
<p>평탄화 전</p>
<pre class="language-jsx"><code class="language-jsx code-highlight"><span class="code-line"><span class="token punctuation">[</span>
</span><span class="code-line">  <span class="token string">&quot;Hello&quot;</span><span class="token punctuation">,</span>
</span><span class="code-line">  <span class="token punctuation">[</span>
</span><span class="code-line">    <span class="token string">&quot;World&quot;</span><span class="token punctuation">,</span>
</span><span class="code-line">    <span class="token punctuation">[</span>
</span><span class="code-line">      <span class="token string">&quot;!&quot;</span><span class="token punctuation">,</span>
</span><span class="code-line">      <span class="token punctuation">{</span> <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&quot;span&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">props</span><span class="token operator">:</span> <span class="token keyword null nil">null</span><span class="token punctuation">,</span> <span class="token literal-property property">children</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;항해&quot;</span><span class="token punctuation">]</span> <span class="token punctuation">}</span>
</span><span class="code-line">    <span class="token punctuation">]</span><span class="token punctuation">,</span>
</span><span class="code-line">    <span class="token boolean">false</span><span class="token punctuation">,</span>
</span><span class="code-line">    <span class="token keyword null nil">null</span>
</span><span class="code-line">  <span class="token punctuation">]</span><span class="token punctuation">,</span>
</span><span class="code-line">  <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&quot;section&quot;</span><span class="token punctuation">,</span>
</span><span class="code-line">    <span class="token literal-property property">props</span><span class="token operator">:</span> <span class="token keyword null nil">null</span><span class="token punctuation">,</span>
</span><span class="code-line">    <span class="token literal-property property">children</span><span class="token operator">:</span> <span class="token punctuation">[</span>
</span><span class="code-line">      <span class="token punctuation">{</span> <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&quot;h1&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">props</span><span class="token operator">:</span> <span class="token keyword null nil">null</span><span class="token punctuation">,</span> <span class="token literal-property property">children</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;플러스&quot;</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
</span><span class="code-line">      <span class="token punctuation">[</span>
</span><span class="code-line">        <span class="token string">&quot;6기&quot;</span><span class="token punctuation">,</span>
</span><span class="code-line">        <span class="token punctuation">{</span> <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&quot;p&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">props</span><span class="token operator">:</span> <span class="token keyword null nil">null</span><span class="token punctuation">,</span> <span class="token literal-property property">children</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;화이팅&quot;</span><span class="token punctuation">]</span> <span class="token punctuation">}</span>
</span><span class="code-line">      <span class="token punctuation">]</span>
</span><span class="code-line">    <span class="token punctuation">]</span>
</span><span class="code-line">  <span class="token punctuation">}</span>
</span><span class="code-line"><span class="token punctuation">]</span>
</span><span class="code-line">
</span></code><div class="copied" data-code="[
  &quot;Hello&quot;,
  [
    &quot;World&quot;,
    [
      &quot;!&quot;,
      { type: &quot;span&quot;, props: null, children: [&quot;항해&quot;] }
    ],
    false,
    null
  ],
  {
    type: &quot;section&quot;,
    props: null,
    children: [
      { type: &quot;h1&quot;, props: null, children: [&quot;플러스&quot;] },
      [
        &quot;6기&quot;,
        { type: &quot;p&quot;, props: null, children: [&quot;화이팅&quot;] }
      ]
    ]
  }
]

"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
<p>평탄화 후</p>
<pre class="language-jsx"><code class="language-jsx code-highlight"><span class="code-line"><span class="token punctuation">[</span>
</span><span class="code-line">  <span class="token string">&quot;Hello&quot;</span><span class="token punctuation">,</span>
</span><span class="code-line">  <span class="token string">&quot;World&quot;</span><span class="token punctuation">,</span>
</span><span class="code-line">  <span class="token string">&quot;!&quot;</span><span class="token punctuation">,</span>
</span><span class="code-line">  <span class="token punctuation">{</span> <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&quot;span&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">props</span><span class="token operator">:</span> <span class="token keyword null nil">null</span><span class="token punctuation">,</span> <span class="token literal-property property">children</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;항해&quot;</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
</span><span class="code-line">  <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&quot;section&quot;</span><span class="token punctuation">,</span>
</span><span class="code-line">    <span class="token literal-property property">props</span><span class="token operator">:</span> <span class="token keyword null nil">null</span><span class="token punctuation">,</span>
</span><span class="code-line">    <span class="token literal-property property">children</span><span class="token operator">:</span> <span class="token punctuation">[</span>
</span><span class="code-line">      <span class="token punctuation">{</span> <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&quot;h1&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">props</span><span class="token operator">:</span> <span class="token keyword null nil">null</span><span class="token punctuation">,</span> <span class="token literal-property property">children</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;플러스&quot;</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
</span><span class="code-line">      <span class="token string">&quot;6기&quot;</span><span class="token punctuation">,</span>
</span><span class="code-line">      <span class="token punctuation">{</span> <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&quot;p&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">props</span><span class="token operator">:</span> <span class="token keyword null nil">null</span><span class="token punctuation">,</span> <span class="token literal-property property">children</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;화이팅&quot;</span><span class="token punctuation">]</span> <span class="token punctuation">}</span>
</span><span class="code-line">    <span class="token punctuation">]</span>
</span><span class="code-line">  <span class="token punctuation">}</span>
</span><span class="code-line"><span class="token punctuation">]</span>
</span><span class="code-line">
</span></code><div class="copied" data-code="[
  &quot;Hello&quot;,
  &quot;World&quot;,
  &quot;!&quot;,
  { type: &quot;span&quot;, props: null, children: [&quot;항해&quot;] },
  {
    type: &quot;section&quot;,
    props: null,
    children: [
      { type: &quot;h1&quot;, props: null, children: [&quot;플러스&quot;] },
      &quot;6기&quot;,
      { type: &quot;p&quot;, props: null, children: [&quot;화이팅&quot;] }
    ]
  }
]

"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
<p>즉 이걸 평탄화를 하지 않으면</p>
<ul>
<li>children 안에서 중첩 배열이 섞여있게 되고 렌더링 로직에서 매번 배열,문자열,VNode등 이걸 구분해서 분기로 처리를 해야 하는데 상당히 로직히 복잡해질것 같다고 생각했습니다.</li>
</ul>
<p><strong>createVnode 함수는 다음과 같이 구현했습니다.</strong></p>
<p><strong>1. <a href="https://github.com/devchangjun/front_6th_chapter1-2/blob/main/src/lib/createVNode.js">createVnode</a></strong></p>
<pre class="language-js"><code class="language-js code-highlight"><span class="code-line"><span class="token keyword module">export</span> <span class="token keyword">function</span> <span class="token function">createVNode</span><span class="token punctuation">(</span><span class="token parameter">type<span class="token punctuation">,</span> props<span class="token punctuation">,</span> <span class="token spread operator">...</span>children</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token keyword">const</span> flatChildren <span class="token operator">=</span> children
</span><span class="code-line">    <span class="token punctuation">.</span><span class="token method function property-access">flat</span><span class="token punctuation">(</span><span class="token number">Infinity</span><span class="token punctuation">)</span>
</span><span class="code-line">    <span class="token punctuation">.</span><span class="token method function property-access">filter</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">child</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> child <span class="token operator">!==</span> <span class="token keyword null nil">null</span> <span class="token operator">&amp;&amp;</span> child <span class="token operator">!==</span> <span class="token keyword nil">undefined</span> <span class="token operator">&amp;&amp;</span> child <span class="token operator">!==</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token keyword control-flow">return</span> <span class="token punctuation">{</span>
</span><span class="code-line">    type<span class="token punctuation">,</span>
</span><span class="code-line">    props<span class="token punctuation">,</span>
</span><span class="code-line">    <span class="token literal-property property">children</span><span class="token operator">:</span> flatChildren<span class="token punctuation">,</span>
</span><span class="code-line">  <span class="token punctuation">}</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span><span class="code-line">
</span></code><div class="copied" data-code="export function createVNode(type, props, ...children) {
  const flatChildren = children
    .flat(Infinity)
    .filter((child) =&gt; child !== null &amp;&amp; child !== undefined &amp;&amp; child !== false);
  return {
    type,
    props,
    children: flatChildren,
  };
}

"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
<ul>
<li>Infinty를 활용하여 모든 depth 레벨의 배열을 평탄화하였습니다.</li>
</ul>
<h3 id="2-weakmap의-필요성"><a class="anchor" aria-hidden="true" tabindex="-1" href="#2-weakmap의-필요성"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>2. WeakMap의 필요성</h3>
<p>WeakMap은 DOM 엘리먼트가 제거될 때 GC에 의해 자동으로 참조가 해제되어 메모리 누수를 막기 위함이라는 점을 이해하게 되었습니다. 특히 디버깅 과정에서 DOM이 사라져도 WeakMap에서 별도 cleanup 없이 참조가 사라진다는 점 (키에 대한 강력한 참조를 생성하지 않기 때문)에 대해서 공부하였습니다.</p>
<p>또한 준일 코치님 멘토링 시간에 WeakMap은 Map, Set과 달리  <code>.keys()</code>, <code>.values()</code> 와 같은 함수를 제공해주지 않았고 이터러블 하지 않다라는것을 알게 되었습니다.</p>
<p>왜 WeakMap은 이터러블하지 않을까?에 대한 궁금증이 생겼고 아래와 같은 답을 얻게 되었습니다.</p>
<ul>
<li>WeakMap은 GC대상인 키가 언제 회수될지 <strong>예측 불가능합니다.</strong> 만약 WeakMap을 순회하는 도중 가비지 컬렉터가 키를 회수해버리면 예상치 못한 오류나 동작이 발생할 수 있습니다.</li>
<li>GC도중 내부 구조가 변하게 된다면 순회하고 있는 이터레이터의 내부상태가 꼬일 수 있게 됩니다.</li>
<li>GC 도중에는 순회를 멈추면 되는거 아닌가? , 이터레이터가 GC의 상태를 참조할 순 없나? 와 같은 단순한 생각도 하였지만 사실 이는 자바스크립트 엔진에 있어서 상당한 성능 비용을 발생한다고 합니다. (목적에 비해 과도한 비용 발생 → 즉 오버엔지니어링)</li>
</ul>
<p>따라서 위와 같은 이유로 WeakMap은 이터러블하지 않게(non-iterable) 설계되었다고 합니다.</p>
<p><strong>Weakmap은 아래와 같은 상황에 활용하였습니다.</strong></p>
<p><strong>1. Virtual DOM 이전 상태 저장 <a href="https://github.com/devchangjun/front_6th_chapter1-2/blob/main/src/lib/renderElement.js">renderElement</a></strong></p>
<pre class="language-jsx"><code class="language-jsx code-highlight"><span class="code-line"><span class="token comment">// 컨테이너별 이전 Virtual DOM을 저장하는 WeakMap</span>
</span><span class="code-line"><span class="token keyword">const</span> previousVNodes <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">WeakMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword module">export</span> <span class="token keyword">function</span> <span class="token function">renderElement</span><span class="token punctuation">(</span><span class="token parameter">vNode<span class="token punctuation">,</span> container</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token comment">// 이전 Virtual DOM 가져오기</span>
</span><span class="code-line">  <span class="token keyword">const</span> previousVNode <span class="token operator">=</span> previousVNodes<span class="token punctuation">.</span><span class="token method function property-access">get</span><span class="token punctuation">(</span>container<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">  
</span><span class="code-line">  <span class="token comment">// 현재 Virtual DOM 저장</span>
</span><span class="code-line">  previousVNodes<span class="token punctuation">.</span><span class="token method function property-access">set</span><span class="token punctuation">(</span>container<span class="token punctuation">,</span> normalizedVNode<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code><div class="copied" data-code="// 컨테이너별 이전 Virtual DOM을 저장하는 WeakMap
const previousVNodes = new WeakMap(); 

export function renderElement(vNode, container) {
  // 이전 Virtual DOM 가져오기
  const previousVNode = previousVNodes.get(container);
  
  // 현재 Virtual DOM 저장
  previousVNodes.set(container, normalizedVNode);
}
"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
<ul>
<li><strong>DOM 컨테이너 엘리먼트</strong>를 키로 사용하여 이전 Virtual DOM 상태를 저장하는 용도로 사용했습니다.</li>
<li>상태가 바뀌면서 컨테이너가 DOM에서 제거되면 WeakMap에서도 자동으로 참조가 해제되는 역할을 WeakMap을 통해 구현했습니다.</li>
<li>diffing 알고리즘에서 이전 상태와 현재 상태를 비교할 때 사용하였습니다.</li>
</ul>
<p><strong>2. 이벤트 핸들러 관리 <a href="https://github.com/devchangjun/front_6th_chapter1-2/blob/main/src/lib/eventManager.js">eventManager</a></strong></p>
<pre class="language-jsx"><code class="language-jsx code-highlight"><span class="code-line"><span class="token comment">// 엘리먼트별 이벤트 핸들러들을 저장할 WeakMap</span>
</span><span class="code-line"><span class="token keyword">const</span> eventHandlers <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">WeakMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword module">export</span> <span class="token keyword">function</span> <span class="token function">addEvent</span><span class="token punctuation">(</span><span class="token parameter">element<span class="token punctuation">,</span> eventType<span class="token punctuation">,</span> handler</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>eventHandlers<span class="token punctuation">.</span><span class="token method function property-access">has</span><span class="token punctuation">(</span>element<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">    eventHandlers<span class="token punctuation">.</span><span class="token method function property-access">set</span><span class="token punctuation">(</span>element<span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token punctuation">}</span>
</span><span class="code-line">  <span class="token comment">// ... 핸들러 등록 로직</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code><div class="copied" data-code="// 엘리먼트별 이벤트 핸들러들을 저장할 WeakMap
const eventHandlers = new WeakMap(); 

export function addEvent(element, eventType, handler) {
  if (!eventHandlers.has(element)) {
    eventHandlers.set(element, {});
  }
  // ... 핸들러 등록 로직
}
"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
<ul>
<li><strong>엘리먼트 자체</strong>를 키로 사용하여 각 엘리먼트에 등록된 이벤트 핸들러들을 관리하였습니다.</li>
<li>엘리먼트가 DOM에서 제거되면 WeakMap에서도 자동으로 참조가 해제되어 메모리 누수를 방지하게 만들었습니다.</li>
<li>이벤트를 위임하는 과정에서 특정 엘리먼트의 핸들러를 찾을 때 사용하였습니다.</li>
</ul>
<h3 id="3jsx-트랜스파일링과-커스텀-jsx-factory"><a class="anchor" aria-hidden="true" tabindex="-1" href="#3jsx-트랜스파일링과-커스텀-jsx-factory"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>3.JSX 트랜스파일링과 커스텀 JSX Factory</h3>
<p>이번 과제에 흥미로운 부분 중 하나는 JSX가 실제로 트랜스파일 된다는 점이었습니다.</p>
<pre class="language-jsx"><code class="language-jsx code-highlight"><span class="code-line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">MyComponent</span></span> <span class="token attr-name">prop</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>value<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Hello</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">MyComponent</span></span><span class="token punctuation">&gt;</span></span>
</span></code><div class="copied" data-code="&lt;MyComponent prop=&quot;value&quot;&gt;Hello&lt;/MyComponent&gt;
"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
<p>보통 이렇게 컴포넌트를 작성하는데 Babel과 같은 트랜스파일러가 이걸 변환하면</p>
<pre class="language-jsx"><code class="language-jsx code-highlight"><span class="code-line"><span class="token maybe-class-name">React</span><span class="token punctuation">.</span><span class="token method function property-access">createElement</span><span class="token punctuation">(</span><span class="token maybe-class-name">MyComponent</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">prop</span><span class="token operator">:</span> <span class="token string">&quot;value&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&quot;Hello&quot;</span><span class="token punctuation">)</span>
</span></code><div class="copied" data-code="React.createElement(MyComponent, { prop: &quot;value&quot; }, &quot;Hello&quot;)
"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
<p>위 코드 처럼 JavaScript 함수 호출 코드로 바뀝니다. 이번 과제는 React를 사용하는게 아니라서 <code>createVNode</code> 함수를 JSX의 변환 대상(factory)로 지정이 되어있었습니다.</p>
<pre><code class="code-highlight"><span class="code-line">/** @jsx createVNode */
</span></code><div class="copied" data-code="/** @jsx createVNode */
"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
<p>이런식으로 말이죠. 이 주석은 프라그마 주석이라고 부르는데 Babel, esbuild 같은 도구에 “JSX를 만나면 React.createElement 대신 createVNode로 변환해줘” 라고 알려주는 역할을 합니다.</p>
<pre class="language-js"><code class="language-js code-highlight"><span class="code-line"><span class="token literal-property property">esbuild</span><span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token literal-property property">jsx</span><span class="token operator">:</span> <span class="token string">&quot;transform&quot;</span><span class="token punctuation">,</span>
</span><span class="code-line">  <span class="token literal-property property">jsxFactory</span><span class="token operator">:</span> <span class="token string">&quot;createVNode&quot;</span><span class="token punctuation">,</span>
</span><span class="code-line"><span class="token punctuation">}</span><span class="token punctuation">,</span>
</span></code><div class="copied" data-code="esbuild: {
  jsx: &quot;transform&quot;,
  jsxFactory: &quot;createVNode&quot;,
},
"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
<p>vite 설정에서도 위처럼 jsxFactory를 지정해서 모든 JSX 문법을 createVNode로 변환하도록 설정이 되어있었는데 이 덕분에</p>
<pre class="language-jsx"><code class="language-jsx code-highlight"><span class="code-line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Toast</span></span> <span class="token attr-name">isVisible</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token boolean">true</span><span class="token punctuation">}</span></span> <span class="token attr-name">message</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>안녕하세요<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
</span></code><div class="copied" data-code="&lt;Toast isVisible={true} message=&quot;안녕하세요&quot; /&gt;
"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
<p>는 최종적으로</p>
<pre class="language-js"><code class="language-js code-highlight"><span class="code-line"><span class="token function">createVNode</span><span class="token punctuation">(</span><span class="token maybe-class-name">Toast</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">isVisible</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token literal-property property">message</span><span class="token operator">:</span> <span class="token string">&quot;안녕하세요&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
</span></code><div class="copied" data-code="createVNode(Toast, { isVisible: true, message: &quot;안녕하세요&quot; })
"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
<p>로 변환되고 normalized로 함수형 컴포넌트를 처리할 수 있게 됩니다. 추가적으로 영서님께서 잘 정리해주신 <a href="https://github.com/YeongseoYoon-hanghae/front_6th_chapter1-2/issues/1">createVnode</a> 문서를 보고 React 17부터 적용된 <strong>automatic runtime</strong> 개념에 대해서 이해할 수 있었습니다.</p>
<p>예전에는 그냥</p>
<blockquote>
<p>“React 버전 업데이트돼서 이제 import React 안 해도 된대!”</p>
</blockquote>
<p>라고 단순히만 짚고만 넘어갔다면 지금은</p>
<blockquote>
<p>“아, React 17+에서는 Babel이 JSX를 React.createElement로 변환하는 게 아니라, react/jsx-runtime에서 jsx, jsxs 같은 헬퍼 함수를 import해서 동작하는구나. 그래서 React를 import 하지 않아도 되구나...”</p>
</blockquote>
<p>라는 좀 더 구체적인 원리를 이해하려고하는 개발자로 조금이나마 성장할 수 있었습니다.</p>
<h3 id="4-normalizedvnode"><a class="anchor" aria-hidden="true" tabindex="-1" href="#4-normalizedvnode"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>4. normalizedVNode</h3>
<p>처음에는 normalizeVNode가 왜 필요한지 직관적으로 이해되지 않았습니다.</p>
<blockquote>
<p>“이미 createVNode에서 VNode를 만들었는데 왜 또 정규화(normalize)를 해야 하지?” “그냥 렌더링 하면 되지 않나?”</p>
</blockquote>
<p>라는 의문이 있었는데 아래와 같은 역할을 한다고 이해했습니다.</p>
<ol>
<li>
<p>함수형 컴포넌트 실행 처리
JSX에서 <mycomponent> 같은 것은 내부적으로 createVNode(MyComponent, props, children)로 생성되는데, 이때 MyComponent는 실제 DOM 태그가 아니라 함수입니다. 따라서 이걸 그대로 DOM으로 만들 수 없고, 먼저 MyComponent(props)를 실행해 VNode 트리로 변환해야 합니다. 이 과정을 <code>normalizeVNode</code>에서 처리합니다.</mycomponent></p>
</li>
<li>
<p>children 정리 (불필요한 값 제거)
JSX에서는 조건부 렌더링에서 false, null, undefined 같은 값이 children 배열에 섞일 수 있습니다.</p>
</li>
</ol>
<p>예를 들어</p>
<pre class="language-jsx"><code class="language-jsx code-highlight"><span class="code-line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span>isTrue <span class="token operator">&amp;&amp;</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Hello</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</span></code><div class="copied" data-code="&lt;div&gt;{isTrue &amp;&amp; &lt;span&gt;Hello&lt;/span&gt;}&lt;/div&gt;
"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
<p>여기서 isTrue가 false면 children에 false 값이 남는데, 이걸 그대로 렌더링하면 DOM에 이상한 동작이 발생할 수 있습니다.
normalizeVNode는 이런 값들을 걸러내고 깨끗한 children 배열을 만드는 역할을 담당합니다.</p>

















<table><thead><tr><th>정규화 전</th><th>정규화 후</th></tr></thead><tbody><tr><td><img width="1048" height="562" alt="image" src="https://github.com/user-attachments/assets/ec27f63b-7a89-491e-892c-5257841ff204"/></td><td><img width="1058" height="588" alt="image" src="https://github.com/user-attachments/assets/0c15f9b7-e6d8-4955-a427-22f3db9a102c"/></td></tr><tr><td><sub><i>빈문자열 존재 (<code>false</code>, <code>null</code> 값 포함)</i></sub></td><td><sub><i>빈문자열 제거, children 정리 완료</i></sub></td></tr></tbody></table>
<h3 id="코드-품질"><a class="anchor" aria-hidden="true" tabindex="-1" href="#코드-품질"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>코드 품질</h3>
<p>WeakMap을 사용하여 이전 container를 키로 사용하게 구현했습니다. 이 구조로 인해 수동으로 <code>previousVnode.delete(container)</code>와 같은 코드를 구현하지 않아도 자동으로 이전 DOM에 대한 참조를 CG가 제거할 수 있도록 구현했습니다.</p>
<pre class="language-js"><code class="language-js code-highlight"><span class="code-line"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> setupEventListeners <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">&quot;./eventManager&quot;</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> createElement <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">&quot;./createElement&quot;</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> updateElement <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">&quot;./updateElement&quot;</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> normalizeVNode <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">&quot;./normalizeVNode&quot;</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token doc-comment comment">/**
</span></span><span class="code-line"><span class="token doc-comment comment"> * 컨테이너별 이전 Virtual DOM을 저장하는 WeakMap
</span></span><span class="code-line"><span class="token doc-comment comment"> * 메모리 누수 방지를 위해 WeakMap 사용
</span></span><span class="code-line"><span class="token doc-comment comment"> * <span class="token keyword">@type</span> <span class="token class-name"><span class="token punctuation">{</span>WeakMap<span class="token punctuation">&lt;</span>HTMLElement<span class="token punctuation">,</span> any<span class="token punctuation">&gt;</span><span class="token punctuation">}</span></span>
</span></span><span class="code-line"><span class="token doc-comment comment"> */</span>
</span><span class="code-line"><span class="token keyword">const</span> previousVNodes <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">WeakMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token doc-comment comment">/**
</span></span><span class="code-line"><span class="token doc-comment comment"> * Virtual DOM을 실제 DOM으로 렌더링하는 함수
</span></span><span class="code-line"><span class="token doc-comment comment"> * 이전 Virtual DOM과 비교하여 효율적으로 DOM을 업데이트
</span></span><span class="code-line"><span class="token doc-comment comment"> * <span class="token keyword">@param</span> <span class="token class-name"><span class="token punctuation">{</span>any<span class="token punctuation">}</span></span> <span class="token parameter">vNode</span> - 렌더링할 Virtual DOM 노드
</span></span><span class="code-line"><span class="token doc-comment comment"> * <span class="token keyword">@param</span> <span class="token class-name"><span class="token punctuation">{</span>HTMLElement<span class="token punctuation">}</span></span> <span class="token parameter">container</span> - 렌더링할 컨테이너 엘리먼트
</span></span><span class="code-line"><span class="token doc-comment comment"> */</span>
</span><span class="code-line"><span class="token keyword module">export</span> <span class="token keyword">function</span> <span class="token function">renderElement</span><span class="token punctuation">(</span><span class="token parameter">vNode<span class="token punctuation">,</span> container</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token comment">// 함수형 컴포넌트 정규화</span>
</span><span class="code-line">  <span class="token keyword">const</span> normalizedVNode <span class="token operator">=</span> <span class="token function">normalizeVNode</span><span class="token punctuation">(</span>vNode<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="token comment">// 이전 Virtual DOM 가져오기</span>
</span><span class="code-line">  <span class="token keyword">const</span> previousVNode <span class="token operator">=</span> previousVNodes<span class="token punctuation">.</span><span class="token method function property-access">get</span><span class="token punctuation">(</span>container<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="token comment">// 이미 컨테이너 안에 DOM이 있다면 업데이트</span>
</span><span class="code-line">  <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>container<span class="token punctuation">.</span><span class="token property-access">firstChild</span> <span class="token operator">&amp;&amp;</span> previousVNode<span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token function">updateElement</span><span class="token punctuation">(</span>container<span class="token punctuation">,</span> normalizedVNode<span class="token punctuation">,</span> previousVNode<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token punctuation">}</span>
</span><span class="code-line">  <span class="token comment">// 없으면 DOM 생성하고 container에 붙임</span>
</span><span class="code-line">  <span class="token keyword control-flow">else</span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token keyword">const</span> $el <span class="token operator">=</span> <span class="token function">createElement</span><span class="token punctuation">(</span>normalizedVNode<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">    container<span class="token punctuation">.</span><span class="token method function property-access">appendChild</span><span class="token punctuation">(</span>$el<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token punctuation">}</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="token comment">// 현재 Virtual DOM 저장</span>
</span><span class="code-line">  previousVNodes<span class="token punctuation">.</span><span class="token method function property-access">set</span><span class="token punctuation">(</span>container<span class="token punctuation">,</span> normalizedVNode<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="token comment">// container에 이벤트 리스너 등록</span>
</span><span class="code-line">  <span class="token function">setupEventListeners</span><span class="token punctuation">(</span>container<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code><div class="copied" data-code="import { setupEventListeners } from &quot;./eventManager&quot;;
import { createElement } from &quot;./createElement&quot;;
import { updateElement } from &quot;./updateElement&quot;;
import { normalizeVNode } from &quot;./normalizeVNode&quot;;

/**
 * 컨테이너별 이전 Virtual DOM을 저장하는 WeakMap
 * 메모리 누수 방지를 위해 WeakMap 사용
 * @type {WeakMap&lt;HTMLElement, any&gt;}
 */
const previousVNodes = new WeakMap();

/**
 * Virtual DOM을 실제 DOM으로 렌더링하는 함수
 * 이전 Virtual DOM과 비교하여 효율적으로 DOM을 업데이트
 * @param {any} vNode - 렌더링할 Virtual DOM 노드
 * @param {HTMLElement} container - 렌더링할 컨테이너 엘리먼트
 */
export function renderElement(vNode, container) {
  // 함수형 컴포넌트 정규화
  const normalizedVNode = normalizeVNode(vNode);

  // 이전 Virtual DOM 가져오기
  const previousVNode = previousVNodes.get(container);

  // 이미 컨테이너 안에 DOM이 있다면 업데이트
  if (container.firstChild &amp;&amp; previousVNode) {
    updateElement(container, normalizedVNode, previousVNode, 0);
  }
  // 없으면 DOM 생성하고 container에 붙임
  else {
    const $el = createElement(normalizedVNode);
    container.appendChild($el);
  }

  // 현재 Virtual DOM 저장
  previousVNodes.set(container, normalizedVNode);

  // container에 이벤트 리스너 등록
  setupEventListeners(container);
}
"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
<h3 id="학습-효과-분석"><a class="anchor" aria-hidden="true" tabindex="-1" href="#학습-효과-분석"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>학습 효과 분석</h3>
<p><strong>1. React가 Virtual DOM을 아키텍쳐를 도입한 이유</strong></p>
<p>이번 과제를 통해 React 팀이 왜 Virtual DOM이라는 아키텍처를 선택했는지에 대해 더 깊게 이해할 수 있었습니다. 브라우저의 DOM은 기본적으로 매우 느린 구조입니다. 직접 DOM 조작을 하게되면</p>
<ul>
<li>불필요한 repaint, reflow가 발생하고,</li>
<li>특정 상태 변경이 어디까지 영향을 주는지 계산하기 어렵고,</li>
<li>다수의 DOM 연산이 꼬여버릴 경우 성능 저하와 버그가 쉽게 생깁니다.</li>
</ul>
<p>React 팀은 이 문제를 해결하기 위해 Virtual DOM 이라는 <code>브라우저 DOM의 메모리 상 추상화 계층</code>을 만들었다고 생각합니다.</p>
<p><strong>2. 내가 구현한 Virtual DOM 방식</strong></p>
<p>Virture DOM의 핵심 아이디어를 간접적으로 이번과제에서 체험해볼 수 있었는데요. 저는 아래와 같은 구현을 하였습니다.</p>
<ul>
<li>Virtual DOM 생성: createVNode()로 JSX를 가벼운 객체로 변환</li>
<li>정규화: normalizeVNode()로 함수형 컴포넌트 실행 및 일관된 형태로 변환</li>
<li>렌더링: renderElement()에서 이전 Virtual DOM과 비교</li>
<li>Diffing: updateElement()에서 실제 변경사항만 DOM에 반영</li>
</ul>
<p>이 구현을 토대로 Virture DOM의 내부 구현 원리를 간접적으로 체험할 수 있는 과제였습니다.</p>
<p>이 방식 덕분에 컴포넌트 단위로 선언적으로 UI를 작성할 수 있고, 복잡한 UI 변경을 일일이 계산하지 않아도 되고, React가 알아서 <code>최적화된 최소 DOM 패치</code>를 만들어낼 수 있다고 이해했습니다.</p>
<p><strong>3. Synthetic Event(합성 이벤트)에 대한 이해</strong>
React는 이벤트 처리를 위해 Synthetic Event(합성 이벤트)라는 추상화 객체를 사용합니다. 이 개념은 준일 코치님의 발제에서 처음 접했는데요 React가 각 DOM 요소에 이벤트 리스너를 개별로 등록하지 않고, root에 단 하나의 이벤트 리스너만 등록해 모든 이벤트를 중앙에서 관리한다는 점이 매우 인상적이었습니다. 특히 이 설계 방식을 이해하면서, 1주차 과제에서 가졌던</p>
<blockquote>
<p>&quot;SPA에서는 전역 이벤트 관리를 어떻게 할까요?&quot;</p>
</blockquote>
<p>라는 궁금증에 대한 해답을 찾을 수 있었습니다. Synthetic Event 시스템 전체를 직접 구현한 것은 아니지만 root 이벤트 위임 방식과 메모리 관리 로직을 직접 다뤄보면서 React가 왜 이런 설계를 택했는지를 코드 수준에서 역시 간접적으로 체험할 수 있었습니다.</p>
<p align="center">
  <img width="937" height="235" alt="image" src="https://github.com/user-attachments/assets/e5bbe663-f561-495e-b81e-3ec47d1dace0"/>
</p>
<p align="center">
  <em>1주차 과제 리뷰받고 싶었던 내용.</em>
</p>
<p><strong>4. Synthetic Event가 해결하려고자 했던 문제</strong></p>
<p>이벤트 리스너는 root(container)에 한 번만 등록되고 -&gt; 실제로 발생한 이벤트는 root로 버블링되어 올라온 뒤 -&gt; React 내부에서 Virtual DOM 트리를 순회하며 “어떤 컴포넌트의 핸들러가 호출되어야 하는지”를 계산해 실행됩니다.</p>
<p>이 방식은 다음과 같은 이유로 강력한 장점을 가집니다.</p>
<p><strong>1 .메모리 사용량</strong>
단순한 예를 들어 Vanilla JS에서는 버튼 100개에 이벤트 리스너도 100개가 필요하지만 React는 root에 단 하나의 리스너만 있으면 되기 때문에 리스너 수와 메모리 사용량을 획기적으로 줄일 수 있습니다.</p>
<p><strong>2. cross-browser 이벤트 표준화</strong>
React는 native 이벤트를 Synthetic Event로 감싸 브라우저마다 미묘하게 다른 이벤트 동작(예: event.target, event.srcElement, stopPropagation 등)을 통일된 API로 표준화합니다. 덕분에 개발자는 브라우저 호환성 문제를 신경 쓰지 않아도 되는 장점이 있다고 생각합니다.</p>
<p><strong>3. 렌더링 최적화와의 결합</strong>
Vanilla JS에서는 DOM 요소를 replaceChild나 innerHTML로 교체하면 기존에 걸려 있던 이벤트 리스너가 다 사라지지만 React는 Virtual DOM에서 node를 교체해도 root에서 이벤트를 받고 Virtual DOM 기준으로 매핑하기 때문에 이벤트 연결이 깨지지 않습니다. 이 덕분에 렌더링 최적화와 이벤트 관리가 깔끔하게 결합될 수 있습니다.</p>
<p>이번 과제를 하면서 Vanilla JS로도 비슷한 root 이벤트 위임 방식을 직접 구현해보고 왜 React가 이런 아키텍쳐로 설계되었는지를 코드 레벨에서 이해할 수 있었던 점이 매우 큰 수확이라 생각합니다.</p>
<p>추가적으로 제가 이해한 리렌더링 동작 흐름을 다이어그램화 해보았습니다.</p>
<h3 id="리렌더-흐름"><a class="anchor" aria-hidden="true" tabindex="-1" href="#리렌더-흐름"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>리렌더 흐름</h3>
<pre class="language-mermaid"><code class="language-mermaid code-highlight"><span class="code-line"><span class="token keyword">graph</span> TD
</span><span class="code-line">    A<span class="token text string">[상태 변경]</span> <span class="token arrow operator">--&gt;</span> B<span class="token text string">[컴포넌트 재실행]</span>
</span><span class="code-line">    B <span class="token arrow operator">--&gt;</span> C<span class="token text string">[새로운 vNode를 생성]</span>
</span><span class="code-line">    C <span class="token arrow operator">--&gt;</span> D<span class="token text string">[renderElement 호출]</span>
</span><span class="code-line">    D <span class="token arrow operator">--&gt;</span> E<span class="token text string">[이전 vNode 가져오기]</span>
</span><span class="code-line">    E <span class="token arrow operator">--&gt;</span> F<span class="token text string">[updateElement 호출]</span>
</span><span class="code-line">    F <span class="token arrow operator">--&gt;</span> G<span class="token text string">[노드 타입 비교]</span>
</span><span class="code-line">    G <span class="token arrow operator">--&gt;</span> H<span class="token text string">{타입이 같은가?}</span>
</span><span class="code-line">    H <span class="token arrow operator">--&gt;</span><span class="token label property">|Yes|</span> I<span class="token text string">[속성 업데이트]</span>
</span><span class="code-line">    H <span class="token arrow operator">--&gt;</span><span class="token label property">|No|</span> J<span class="token text string">[노드 교체]</span>
</span><span class="code-line">    I <span class="token arrow operator">--&gt;</span> K<span class="token text string">[자식 노드 재귀 업데이트]</span>
</span><span class="code-line">    J <span class="token arrow operator">--&gt;</span> L<span class="token text string">[새 DOM 생성 및 교체]</span>
</span><span class="code-line">    K <span class="token arrow operator">--&gt;</span> M<span class="token text string">[이벤트 리스너 재설정]</span>
</span><span class="code-line">    L <span class="token arrow operator">--&gt;</span> M
</span><span class="code-line">
</span></code><div class="copied" data-code="graph TD
    A[상태 변경] --&gt; B[컴포넌트 재실행]
    B --&gt; C[새로운 vNode를 생성]
    C --&gt; D[renderElement 호출]
    D --&gt; E[이전 vNode 가져오기]
    E --&gt; F[updateElement 호출]
    F --&gt; G[노드 타입 비교]
    G --&gt; H{타입이 같은가?}
    H --&gt;|Yes| I[속성 업데이트]
    H --&gt;|No| J[노드 교체]
    I --&gt; K[자식 노드 재귀 업데이트]
    J --&gt; L[새 DOM 생성 및 교체]
    K --&gt; M[이벤트 리스너 재설정]
    L --&gt; M

"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
<h3 id="추가-학습한-개념"><a class="anchor" aria-hidden="true" tabindex="-1" href="#추가-학습한-개념"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>추가 학습한 개념</h3>
<p><strong>그럼 Context API는 왜 Virtual DOM의 diffing처럼 부분 업데이트 최적화를 하지 않을까?</strong></p>
<p>ContextAPI는 Provider에서 value가 변경되면 그 Context를 구독하는 모든 컴포넌트가 다시 렌더링됩니다. 여기서 React의 Virtual DOM diffing이 속성 단위로 바뀐 부분만 찾아내는 것처럼, Context도 “value 객체의 특정 필드만 바뀐 경우”에는 부분 업데이트로 최적화할 수 있지 않을까? 하는 궁금증이 생겼습니다.</p>
<p>이걸 찾아보고 정리한 내용은 아래와 같습니다.</p>
<p><strong>1. Context API가 selector 기반 최적화를 지원하지 않는 이유</strong></p>
<ul>
<li>ContextAPI의 사용 목적 자체가 전역적으로 자주 변하지 않는 값 (ex. 테마, 다국어 로케일, 로그인 정보)을 손쉽게 접근하기 위함입니다.</li>
<li>따라서 복잡한 diffing, selector기반 부분적인 리렌더링 지원을 하지 않는다고 합니다. (ContextAPI의 범위 밖).</li>
<li>최적화가 필요할 시 Context를 분리하거나, useMemo, useCallback, React.memo와 같은 메모이제이션을 도입, 혹은 Redux, Zustand 같은 외부 상태 관리 라이브러리 활용을 고려해야 합니다.</li>
<li>즉 -&gt; 자주 변하지 않는 값을 위해 설계했으니 너네가 최적화를 알아서해라. 그게 싫으면 다른 라이브러리를 써라..🥲</li>
</ul>
<p><strong>2. React의 ContextAPI 설계 철학</strong></p>
<ul>
<li>복잡한 상태 관리 최적화까지 책임지지 않고 단순한 전역 데이터 전달용으로만 쓰게 만들자.</li>
<li>이는 내부적으로 **Object.is(동일성 비교)**로만 provider value 변화 여부를 판단하기 때문에 shallow compare만 하고 값이 다르면 모든 구독 컴포넌트를 리렌더링하도록 설계함.</li>
</ul>
<p>사실 이부분은 React팀이 ContextAPI를 설계했을 당시의 의도한 방향이라고 결론을 내렸습니다.</p>
<h3 id="과제-피드백"><a class="anchor" aria-hidden="true" tabindex="-1" href="#과제-피드백"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>과제 피드백</h3>
<ul>
<li>끊임없이 궁금증을 가지고 새로운걸 공부할 수 있는 시간이였습니다!👍</li>
<li>WeakMap을 활용해서 이전 container를 저장하는 아이디어를 냈는데 꽤 괜찮은 거 같습니다.</li>
<li>현재 index 기반 비교를 하고 있는데 실제 React처럼 key 기반의 비교를 하려면 어떻게 구현해야할지 고민이 들었습니다.</li>
<li>준형님이 올려주신 비동기 컴포넌트에 대한 추가적인 고민.. 저도 이런걸 고민할 수 있는 개발자로 성장하고싶단 생각을 했습니다.</li>
</ul>
<img width="756" height="261" alt="image" src="https://github.com/user-attachments/assets/80ad7095-ce51-4171-8468-3e6508cee3b5"/>
<h2 id="리뷰-받고-싶은-내용"><a class="anchor" aria-hidden="true" tabindex="-1" href="#리뷰-받고-싶은-내용"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>리뷰 받고 싶은 내용</h2>
<h3 id="q1-이번-과제를-수행하면서-좀더-react에-대한-deep-dive를-해보고-싶어졌습니다-추가적으로-학습하면-좋은-내용이-있으면-추천해주실-수-있을까요"><a class="anchor" aria-hidden="true" tabindex="-1" href="#q1-이번-과제를-수행하면서-좀더-react에-대한-deep-dive를-해보고-싶어졌습니다-추가적으로-학습하면-좋은-내용이-있으면-추천해주실-수-있을까요"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Q1. 이번 과제를 수행하면서 좀더 React에 대한 Deep Dive를 해보고 싶어졌습니다. 추가적으로 학습하면 좋은 내용이 있으면 추천해주실 수 있을까요?</h3>
<h3 id="q2-현재-구현된-diffing은-index기반-비교-알고리즘입니다-이를-key-기반으로-확장하려면-어떤식으로-리팩토링을-진행하면-좋을까요"><a class="anchor" aria-hidden="true" tabindex="-1" href="#q2-현재-구현된-diffing은-index기반-비교-알고리즘입니다-이를-key-기반으로-확장하려면-어떤식으로-리팩토링을-진행하면-좋을까요"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Q2. 현재 구현된 diffing은 index기반 비교 알고리즘입니다. 이를 key 기반으로 확장하려면 어떤식으로 리팩토링을 진행하면 좋을까요?</h3>
<h3 id="q3-updateattributes-함수에서-놓치고-잇는-edge-case가-있을까요"><a class="anchor" aria-hidden="true" tabindex="-1" href="#q3-updateattributes-함수에서-놓치고-잇는-edge-case가-있을까요"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Q3. updateAttributes 함수에서 놓치고 잇는 edge case가 있을까요?</h3>
<p>현재 <a href="https://github.com/devchangjun/front_6th_chapter1-2/blob/main/src/lib/updateElement.js#L11">updateAttributes</a> 함수에서는</p>
<ul>
<li>on으로 시작하는 이벤트 → 이벤트 핸들러 등록</li>
<li>className → class 속성으로 변환</li>
<li>boolean 속성 → property로 직접 할당</li>
<li><code>그 외 나머지 → setAttribute로 처리 </code></li>
</ul>
<p>이 기준으로 분기하고 있는데 이 처리방식에서 누락되거나 예외 처리할 edge case가 있을지 리뷰를 받고싶습니다.</p></div></div><div class="overflow-auto mt-9"><div data-color-mode="dark" class="wmde-markdown wmde-markdown-color p-6 max-w-full" style="word-wrap:break-word;overflow-wrap:break-word"><h2 id="과제-피드백"><a class="anchor" aria-hidden="true" tabindex="-1" href="#과제-피드백"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>과제 피드백</h2>
<p>안녕하세요 창준님! 2주차 과제 잘 진행해주셨네요 ㅎㅎ 고생하셨습니다!</p>
<blockquote>
<p>“innerHTML로 DOM을 전부 다시 그리는 방식이 정말 SPA라고 할 수 있을까?” 라는 의문이 생겼었는데 제가 너무 성급하게 고민을 했엇네요 ㅎㅎ.. 2주차에 Virtual DOM을 직접 구현하는 과제가 나오면서 코치님들이 과제를 어떻게 단계적으로 설계했고 수강생들에게 어떤 학습 포인트를 던지려 했는지 이해할 수 있었습니다.</p>
</blockquote>
<p>맞아요 ㅎㅎ 일부로 &quot;불편함&quot;을 경험해보고, 이걸 해결하는 방식으로 과제를 설계했답니다! 알아주셔서 감사드려요!!</p>
<blockquote>
<p>Q1. 이번 과제를 수행하면서 좀더 React에 대한 Deep Dive를 해보고 싶어졌습니다. 추가적으로 학습하면 좋은 내용이 있으면 추천해주실 수 있을까요?</p>
</blockquote>
<p>react 자체에 대해 파고들어 가는 방법도 있고, preact 같은 경량화된 버전의 react 구현체의 코드를 살펴보면서 내가 작성한 코드와 무엇이 다른지 비교해보는 방법도 있답니다 ㅎㅎ</p>
<p>개인적으로 훅을 처음부터 아예 구현하는 방식으로 시도해보면 좋다고 생각하는데.... 이게 생각보다 난이도가 높아서... 중간과정이 필요한데 그게 preact 살펴보기일 것 같아요!</p>
<blockquote>
<p>Q2. 현재 구현된 diffing은 index기반 비교 알고리즘입니다. 이를 key 기반으로 확장하려면 어떤식으로 리팩토링을 진행하면 좋을까요?</p>
</blockquote>
<p>props에 key를 받아온 다음에, index 이전에 key에 대해 먼저 검사해서 위치를 변경해주거나 그대로 두거나 하는 방법이 있을 것 같네요 ㅎㅎ</p>
<blockquote>
<p>Q3. updateAttributes 함수에서 놓치고 잇는 edge case가 있을까요?</p>
</blockquote>
<p>제가 솔루션 만들 때 미처 신경쓰지 못한 부분인데요, data attribute 에 boolean을 넣으면 사라지는 현상이 있었어요 ㅎㅎ</p>
<p>그래서 사실 제일 좋은 방법은 어플리케이션을 만들어가면서 엣지케이스를 채워가는거라고 생각합니다.. 허허</p>
<p>그리고 또 defaultValue 같은것도 리액트에서 지원하는데 현재에는 이런 개념이 없어요.</p>
<p>select / option 을 react로 변환해보시면 알 수 있답니다!</p></div></div><div class="mt-9"></div></div></main></div></div></div></div>
</body>
</html>
