<!doctype html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>항해플러스 프론트엔드 6기 기술블로그</title>
  <link rel="icon" href="/front_6th/favicon.ico"/>
  
    <title>박창준 - [8팀 박창준] Chapter 2-1. 클린코드와 리팩토링 </title>
    <meta name="description" content="박창준님의 [8팀 박창준] Chapter 2-1. 클린코드와 리팩토링  과제 상세보기" />
    <meta name="keywords" content="항해플러스, 프론트엔드, 기술블로그, React, JavaScript, 박창준, [8팀 박창준] Chapter 2-1. 클린코드와 리팩토링 " />
    <meta property="og:title" content="박창준 - [8팀 박창준] Chapter 2-1. 클린코드와 리팩토링 " />
    <meta property="og:description" content="박창준님의 [8팀 박창준] Chapter 2-1. 클린코드와 리팩토링  과제 상세보기" />
    <meta property="og:image" content="/assignment-og.png" />
    <meta property="og:type" content="website" />
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="박창준 - [8팀 박창준] Chapter 2-1. 클린코드와 리팩토링 " />
    <meta name="twitter:description" content="박창준님의 [8팀 박창준] Chapter 2-1. 클린코드와 리팩토링  과제 상세보기" />
    <meta name="twitter:image" content="/assignment-og.png" />
  
  <script type="module" crossorigin src="/front_6th/assets/index-S6z1r9QJ.js"></script>
  <link rel="stylesheet" crossorigin href="/front_6th/assets/index-BXO68frB.css">
</head>
<body>
<div id="root"><div data-slot="sidebar-wrapper" style="--sidebar-width:16rem;--sidebar-width-icon:3rem" class="group/sidebar-wrapper has-data-[variant=inset]:bg-sidebar flex min-h-svh w-full"><div class="min-h-screen flex w-full"><div class="group peer text-sidebar-foreground hidden md:block" data-state="expanded" data-collapsible="" data-variant="sidebar" data-side="left" data-slot="sidebar"><div data-slot="sidebar-gap" class="relative w-(--sidebar-width) bg-transparent transition-[width] duration-200 ease-linear group-data-[collapsible=offcanvas]:w-0 group-data-[side=right]:rotate-180 group-data-[collapsible=icon]:w-(--sidebar-width-icon)"></div><div data-slot="sidebar-container" class="fixed inset-y-0 z-10 hidden h-svh transition-[left,right,width] duration-200 ease-linear md:flex left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)] group-data-[collapsible=icon]:w-(--sidebar-width-icon) group-data-[side=left]:border-r group-data-[side=right]:border-l w-64"><div data-sidebar="sidebar" data-slot="sidebar-inner" class="bg-sidebar group-data-[variant=floating]:border-sidebar-border flex h-full w-full flex-col group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:shadow-sm"><div data-slot="sidebar-content" data-sidebar="content" class="flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden bg-card border-r border-border"><a class="p-4" href="/front_6th/" data-discover="true"><div class="flex items-center space-x-2 mb-6"><div class="w-8 h-8 bg-gradient-primary rounded-lg flex items-center justify-center"><span class="text-white font-bold text-sm">6기</span></div><h4 class="text-lg font-bold text-primary">항해플러스 프론트엔드</h4></div></a><div data-slot="sidebar-group" data-sidebar="group" class="relative flex w-full min-w-0 flex-col p-2"><div data-slot="sidebar-group-label" data-sidebar="group-label" class="ring-sidebar-ring flex h-8 shrink-0 items-center rounded-md text-xs font-medium outline-hidden transition-[margin,opacity] duration-200 ease-linear focus-visible:ring-2 [&amp;&gt;svg]:size-4 [&amp;&gt;svg]:shrink-0 group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0 text-muted-foreground px-4">학습 관리</div><div data-slot="sidebar-group-content" data-sidebar="group-content" class="w-full text-sm"><ul data-slot="sidebar-menu" data-sidebar="menu" class="flex w-full min-w-0 flex-col gap-1 px-2"><li data-slot="sidebar-menu-item" data-sidebar="menu-item" class="group/menu-item relative"><a data-slot="sidebar-menu-button" data-sidebar="menu-button" data-size="default" data-active="false" class="peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left outline-hidden ring-sidebar-ring transition-[width,height,padding] focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-data-[sidebar=menu-action]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:size-8! group-data-[collapsible=icon]:p-2! [&amp;&gt;span:last-child]:truncate [&amp;&gt;svg]:size-4 [&amp;&gt;svg]:shrink-0 hover:bg-sidebar-accent hover:text-sidebar-accent-foreground text-sm h-12 text-foreground hover:bg-secondary hover:text-secondary-foreground rounded-lg transition-all duration-300" href="/front_6th/" data-discover="true"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-users h-5 w-5" aria-hidden="true"><path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"></path><path d="M16 3.128a4 4 0 0 1 0 7.744"></path><path d="M22 21v-2a4 4 0 0 0-3-3.87"></path><circle cx="9" cy="7" r="4"></circle></svg><span class="ml-3">수강생 목록</span></a></li><li data-slot="sidebar-menu-item" data-sidebar="menu-item" class="group/menu-item relative"><a data-slot="sidebar-menu-button" data-sidebar="menu-button" data-size="default" data-active="false" class="peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left outline-hidden ring-sidebar-ring transition-[width,height,padding] focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-data-[sidebar=menu-action]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:size-8! group-data-[collapsible=icon]:p-2! [&amp;&gt;span:last-child]:truncate [&amp;&gt;svg]:size-4 [&amp;&gt;svg]:shrink-0 hover:bg-sidebar-accent hover:text-sidebar-accent-foreground text-sm h-12 text-foreground hover:bg-secondary hover:text-secondary-foreground rounded-lg transition-all duration-300" href="/front_6th/assignments/" data-discover="true"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-book-open h-5 w-5" aria-hidden="true"><path d="M12 7v14"></path><path d="M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z"></path></svg><span class="ml-3">과제 목록</span></a></li></ul></div></div></div></div></div></div><div class="flex-1 min-w-0"><header class="h-12 flex items-center border-b border-border bg-card px-4"><button data-slot="sidebar-trigger" class="inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 size-7 mr-4 text-white" data-sidebar="trigger"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-panel-left" aria-hidden="true"><rect width="18" height="18" x="3" y="3" rx="2"></rect><path d="M9 3v18"></path></svg><span class="sr-only">Toggle Sidebar</span></button><h4 class="text-lg font-semibold "><a href="/front_6th/@ckdwns9121/" data-discover="true">ckdwns9121<!-- --> 님의 상세페이지</a> ＞ <!-- -->[8팀 박창준] Chapter 2-1. 클린코드와 리팩토링 </h4></header><main class="p-6"><div><div class="card-wrap"><div data-slot="card" class="card text-card-foreground flex flex-col gap-6 shadow-sm mb-6 p-6 border border-gray-700 bg-gray-800 rounded-lg"><a href="https://github.com/hanghae-plus/front_6th_chapter2-1/pull/17" target="_blank"><div class="flex items-start gap-4"><div class="flex-shrink-0"><svg xmlns="http://www.w3.org/2000/svg" height="32" aria-hidden="true" viewBox="0 0 24 24" width="32" fill="white" class="w-8 h-8"><path d="M12 1C5.923 1 1 5.923 1 12c0 4.867 3.149 8.979 7.521 10.436.55.096.756-.233.756-.522 0-.262-.013-1.128-.013-2.049-2.764.509-3.479-.674-3.699-1.292-.124-.317-.66-1.293-1.127-1.554-.385-.207-.936-.715-.014-.729.866-.014 1.485.797 1.691 1.128.99 1.663 2.571 1.196 3.204.907.096-.715.385-1.196.701-1.471-2.448-.275-5.005-1.224-5.005-5.432 0-1.196.426-2.186 1.128-2.956-.111-.275-.496-1.402.11-2.915 0 0 .921-.288 3.024 1.128a10.193 10.193 0 0 1 2.75-.371c.936 0 1.871.123 2.75.371 2.104-1.43 3.025-1.128 3.025-1.128.605 1.513.221 2.64.111 2.915.701.77 1.127 1.747 1.127 2.956 0 4.222-2.571 5.157-5.019 5.432.399.344.743 1.004.743 2.035 0 1.471-.014 2.654-.014 3.025 0 .289.206.632.756.522C19.851 20.979 23 16.854 23 12c0-6.077-4.922-11-11-11Z"></path></svg></div><div class="flex-1 min-w-0"><div class="flex items-center gap-2 mb-2"><h3 class="text-lg font-semibold text-white truncate">[8팀 박창준] Chapter 2-1. 클린코드와 리팩토링 </h3></div><div class="flex items-center gap-4 text-xs text-gray-500"><span>by <!-- -->ckdwns9121</span><span>2025. 7. 27.</span></div></div></div></a></div></div><div class="overflow-auto"><div data-color-mode="dark" class="wmde-markdown wmde-markdown-color p-6 max-w-full" style="word-wrap:break-word;overflow-wrap:break-word"><h2 id="과제-체크포인트"><a class="anchor" aria-hidden="true" tabindex="-1" href="#과제-체크포인트"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>과제 체크포인트</h2>
<h3 id="배포링크"><a class="anchor" aria-hidden="true" tabindex="-1" href="#배포링크"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>배포링크</h3>
<p><a href="https://ckdwns9121.github.io/front_6th_chapter2-1/">배포링크</a></p>
<h3 id="기본과제"><a class="anchor" aria-hidden="true" tabindex="-1" href="#기본과제"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>기본과제</h3>
<ul class="contains-task-list">
<li class="task-list-item"><input type="checkbox" disabled="" checked=""/> 코드가 Prettier를 통해 일관된 포맷팅이 적용되어 있는가?</li>
<li class="task-list-item"><input type="checkbox" disabled="" checked=""/> 적절한 줄바꿈과 주석을 사용하여 코드의 논리적 단위를 명확히 구분했는가?</li>
<li class="task-list-item"><input type="checkbox" disabled="" checked=""/> 변수명과 함수명이 그 역할을 명확히 나타내며, 일관된 네이밍 규칙을 따르는가?</li>
<li class="task-list-item"><input type="checkbox" disabled="" checked=""/> 매직 넘버와 문자열을 의미 있는 상수로 추출했는가?</li>
<li class="task-list-item"><input type="checkbox" disabled="" checked=""/> 중복 코드를 제거하고 재사용 가능한 형태로 리팩토링했는가?</li>
<li class="task-list-item"><input type="checkbox" disabled="" checked=""/> 함수가 단일 책임 원칙을 따르며, 한 가지 작업만 수행하는가?</li>
<li class="task-list-item"><input type="checkbox" disabled="" checked=""/> 조건문과 반복문이 간결하고 명확한가? 복잡한 조건을 함수로 추출했는가?</li>
<li class="task-list-item"><input type="checkbox" disabled="" checked=""/> 코드의 배치가 의존성과 실행 흐름에 따라 논리적으로 구성되어 있는가?</li>
<li class="task-list-item"><input type="checkbox" disabled="" checked=""/> 연관된 코드를 의미 있는 함수나 모듈로 그룹화했는가?</li>
<li class="task-list-item"><input type="checkbox" disabled="" checked=""/> ES6+ 문법을 활용하여 코드를 더 간결하고 명확하게 작성했는가?</li>
<li class="task-list-item"><input type="checkbox" disabled="" checked=""/> 전역 상태와 부수 효과(side effects)를 최소화했는가?</li>
<li class="task-list-item"><input type="checkbox" disabled="" checked=""/> 에러 처리와 예외 상황을 명확히 고려하고 처리했는가?</li>
<li class="task-list-item"><input type="checkbox" disabled="" checked=""/> 코드 자체가 자기 문서화되어 있어, 주석 없이도 의도를 파악할 수 있는가?</li>
<li class="task-list-item"><input type="checkbox" disabled="" checked=""/> 비즈니스 로직과 UI 로직이 적절히 분리되어 있는가?</li>
<li class="task-list-item"><input type="checkbox" disabled="" checked=""/> 코드의 각 부분이 테스트 가능하도록 구조화되어 있는가?</li>
<li class="task-list-item"><input type="checkbox" disabled="" checked=""/> 성능 개선을 위해 불필요한 연산이나 렌더링을 제거했는가?</li>
<li class="task-list-item"><input type="checkbox" disabled="" checked=""/> 새로운 기능 추가나 변경이 기존 코드에 미치는 영향을 최소화했는가?</li>
<li class="task-list-item"><input type="checkbox" disabled="" checked=""/> 코드 리뷰를 통해 다른 개발자들의 피드백을 반영하고 개선했는가?</li>
<li class="task-list-item"><input type="checkbox" disabled="" checked=""/> (핵심!) 리팩토링 시 기존 기능을 그대로 유지하면서 점진적으로 개선했는가?</li>
</ul>
<h3 id="심화과제"><a class="anchor" aria-hidden="true" tabindex="-1" href="#심화과제"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>심화과제</h3>
<ul class="contains-task-list">
<li class="task-list-item"><input type="checkbox" disabled="" checked=""/> 변경한 구조와 코드가 기존의 코드보다 가독성이 높고 이해하기 쉬운가?</li>
<li class="task-list-item"><input type="checkbox" disabled="" checked=""/> 변경한 구조와 코드가 기존의 코드보다 기능을 수정하거나 확장하기에 용이한가?</li>
<li class="task-list-item"><input type="checkbox" disabled="" checked=""/> 변경한 구조와 코드가 기존의 코드보다 테스트를 하기에 더 용이한가?</li>
<li class="task-list-item"><input type="checkbox" disabled="" checked=""/> 변경한 구조와 코드가 기존의 모든 기능은 그대로 유지했는가?</li>
<li class="task-list-item"><input type="checkbox" disabled="" checked=""/> (핵심!) 변경한 구조와 코드를 새로운 한번에 새로만들지 않고 점진적으로 개선했는가?</li>
</ul>
<h2 id="과제-셀프회고"><a class="anchor" aria-hidden="true" tabindex="-1" href="#과제-셀프회고"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>과제 셀프회고</h2>
<p>우선 과제 양이 생각보다 많아서 놀랐습니다. 다시 1주차 과제로 돌아간 느낌이 들기도 했네요...
하지만 제가 평소에 레거시 코드를 리팩토링하고 클린한 구조로 개선하는 것에 관심이 많다 보니, 이번 과제는 꽤 즐겁게 몰입해서 할 수 있었습니다.</p>
<p>다만 코드를 확인해보니 <strong>아 이거 쉽지 않겠구나..</strong> 싶었습니다.  AI 시대에 있어서 AI가 코드 생산은 잘 해주지만, 이런 <strong>복잡하고 엉켜버린 레거시 코드를 깔끔한 아키텍쳐로 재정비 하는 일은 AI가 할 수 있을까? 이건 사람의 영역 아닌가?</strong> 하는 궁금증도 들었고 거의 재건축 수준의 작업이 될 것 같았습니다.</p>
<p>도대체 어디서부터 손을 대야하지? 하는 막막함이 가장 컸는데 AI에게 어떤 순서대로 리팩토링을 하면 좋을지 조언을 받았고, 그걸 기반으로 제 나름의 리팩토링 플로우를 정립해봤습니다.</p>
<p>변수 선언 개선 (var 제거, let to const) → 중복 변수 제거 → 매직넘버 상수화 → 관심사 분리  → 함수 분리 및 단일 책임 적용 → 모듈 화 및 구조 개선 → 고급 리팩토링(디자인패턴 적용이라던지, 새로운 아키텍쳐 적용)</p>
<p>이런 흐름으로 작업을 진행했습니다.</p>
<p>그리고 도은님이 추천해주신 Cursor Rules를 기반으로 클린코드 룰도 적용하여서 많은 도움을 받았습니다. 감사합니다.</p>
<h3 id="과제를-하면서-내가-제일-신경-쓴-부분은-무엇인가요"><a class="anchor" aria-hidden="true" tabindex="-1" href="#과제를-하면서-내가-제일-신경-쓴-부분은-무엇인가요"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>과제를 하면서 내가 제일 신경 쓴 부분은 무엇인가요?</h3>
<h3 id="1-단일-책임-원칙을-지키기-위한-구조-설계"><a class="anchor" aria-hidden="true" tabindex="-1" href="#1-단일-책임-원칙을-지키기-위한-구조-설계"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><strong>1. 단일 책임 원칙을 지키기 위한 구조 설계</strong></h3>
<ul>
<li>비즈니스 로직, UI 렌더링, 상태 저장, 데이터 변환 등 각각의 역할이 섞이지 않도록 최대한 명확한 경계로 나누는 것을 최우선으로 했습니다.</li>
<li>이를 위해 <strong>UI에서 비즈니스 상태를 수정하지 않고</strong>, <strong>비즈니스 로직에서 DOM에 직접 접근하지 않는</strong> 원칙을 지키면서 코드를 수정했습니다.</li>
<li>비즈니스 로직은 Service단, 상태관리는 Store단, 이벤트 관리는 Lisnter단에서 관리하였습니다.</li>
</ul>
<pre class="language-jsx"><code class="language-jsx code-highlight"><span class="code-line"><span class="token comment">// Service단에서는 비즈니스 로직을 처리하게 함.</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword module">export</span> <span class="token keyword">class</span> <span class="token class-name">CartService</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token function">addProductToCart</span><span class="token punctuation">(</span><span class="token parameter">product<span class="token punctuation">,</span> quantity <span class="token operator">=</span> <span class="token number">1</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token method function property-access">validateStock</span><span class="token punctuation">(</span>product<span class="token punctuation">,</span> quantity<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">      <span class="token keyword control-flow">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
</span><span class="code-line">    <span class="token punctuation">}</span>
</span><span class="code-line">
</span><span class="code-line">    <span class="token keyword">const</span> <span class="token punctuation">{</span> cartItems <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">cartStore</span><span class="token punctuation">.</span><span class="token method function property-access">getState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">    <span class="token keyword">const</span> existingItem <span class="token operator">=</span> cartItems<span class="token punctuation">.</span><span class="token method function property-access">find</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token arrow operator">=&gt;</span> item<span class="token punctuation">.</span><span class="token property-access">id</span> <span class="token operator">===</span> product<span class="token punctuation">.</span><span class="token property-access">id</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line">    <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>existingItem<span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">      existingItem<span class="token punctuation">.</span><span class="token property-access">quantity</span> <span class="token operator">+=</span> quantity<span class="token punctuation">;</span>
</span><span class="code-line">    <span class="token punctuation">}</span> <span class="token keyword control-flow">else</span> <span class="token punctuation">{</span>
</span><span class="code-line">      <span class="token keyword">const</span> newItem <span class="token operator">=</span> <span class="token punctuation">{</span>
</span><span class="code-line">        <span class="token literal-property property">id</span><span class="token operator">:</span> product<span class="token punctuation">.</span><span class="token property-access">id</span><span class="token punctuation">,</span>
</span><span class="code-line">        <span class="token literal-property property">name</span><span class="token operator">:</span> product<span class="token punctuation">.</span><span class="token property-access">name</span><span class="token punctuation">,</span>
</span><span class="code-line">        <span class="token literal-property property">price</span><span class="token operator">:</span> product<span class="token punctuation">.</span><span class="token property-access">price</span><span class="token punctuation">,</span>
</span><span class="code-line">        quantity<span class="token punctuation">,</span>
</span><span class="code-line">      <span class="token punctuation">}</span><span class="token punctuation">;</span>
</span><span class="code-line">      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">cartStore</span><span class="token punctuation">.</span><span class="token method function property-access">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
</span><span class="code-line">        <span class="token literal-property property">cartItems</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token spread operator">...</span>cartItems<span class="token punctuation">,</span> newItem<span class="token punctuation">]</span><span class="token punctuation">,</span>
</span><span class="code-line">      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">    <span class="token punctuation">}</span>
</span><span class="code-line">
</span><span class="code-line">    product<span class="token punctuation">.</span><span class="token property-access">quantity</span> <span class="token operator">-=</span> quantity<span class="token punctuation">;</span>
</span><span class="code-line">    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token method function property-access">updateCartTotals</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">    <span class="token keyword control-flow">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token punctuation">}</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment">// Store는 상태와, getter setter만 구현해서 단일 책임을 지게함.</span>
</span><span class="code-line"><span class="token keyword module">export</span> <span class="token keyword">class</span> <span class="token class-name">CartStore</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">state</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
</span><span class="code-line">      <span class="token literal-property property">cartItems</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
</span><span class="code-line">      <span class="token literal-property property">totalAmount</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
</span><span class="code-line">      <span class="token literal-property property">itemCount</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
</span><span class="code-line">      <span class="token literal-property property">discountRate</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
</span><span class="code-line">      <span class="token literal-property property">savedAmount</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
</span><span class="code-line">      <span class="token literal-property property">lastSelectedProduct</span><span class="token operator">:</span> <span class="token keyword null nil">null</span><span class="token punctuation">,</span>
</span><span class="code-line">    <span class="token punctuation">}</span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token punctuation">}</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="token comment">// 불변성을 유지하는 상태 업데이트</span>
</span><span class="code-line">  <span class="token function">setState</span><span class="token punctuation">(</span><span class="token parameter">newState</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">state</span> <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token spread operator">...</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">state</span><span class="token punctuation">,</span> <span class="token spread operator">...</span>newState <span class="token punctuation">}</span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token punctuation">}</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="token comment">// 상태 조회</span>
</span><span class="code-line">  <span class="token function">getState</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token keyword control-flow">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">state</span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token punctuation">}</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token maybe-class-name">CartStore</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span></code><div class="copied" data-code="// Service단에서는 비즈니스 로직을 처리하게 함.

export class CartService {
  addProductToCart(product, quantity = 1) {
    if (!this.validateStock(product, quantity)) {
      return false;
    }

    const { cartItems } = this.cartStore.getState();
    const existingItem = cartItems.find(item =&gt; item.id === product.id);

    if (existingItem) {
      existingItem.quantity += quantity;
    } else {
      const newItem = {
        id: product.id,
        name: product.name,
        price: product.price,
        quantity,
      };
      this.cartStore.setState({
        cartItems: [...cartItems, newItem],
      });
    }

    product.quantity -= quantity;
    this.updateCartTotals();
    return true;
  }
}

// Store는 상태와, getter setter만 구현해서 단일 책임을 지게함.
export class CartStore {
  constructor() {
    this.state = {
      cartItems: [],
      totalAmount: 0,
      itemCount: 0,
      discountRate: 0,
      savedAmount: 0,
      lastSelectedProduct: null,
    };
  }

  // 불변성을 유지하는 상태 업데이트
  setState(newState) {
    this.state = { ...this.state, ...newState };
  }

  // 상태 조회
  getState() {
    return this.state;
  }
}

export default CartStore;

"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
<h3 id="2-순수-함수와-상태-캡슐화"><a class="anchor" aria-hidden="true" tabindex="-1" href="#2-순수-함수와-상태-캡슐화"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><strong>2. 순수 함수와 상태 캡슐화</strong></h3>
<ul>
<li>가능한 많은 함수들을 순수 함수로 만들려 했습니다.</li>
<li>외부 상태를 참조하거나 변경하지 않고, 동일한 입력에 대해 동일한 출력을 보장하도록 설계하려고 신경을 썼습니다.</li>
<li>또한 상태는 <code>store</code>로 캡슐화를 진행하였습니다.</li>
</ul>
<pre class="language-jsx"><code class="language-jsx code-highlight"><span class="code-line"><span class="token comment">// ❌ 부작용이 있는 함수</span>
</span><span class="code-line"><span class="token keyword">function</span> <span class="token function">calculateDiscount</span><span class="token punctuation">(</span><span class="token parameter">cartItems</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token comment">// 외부 상태 참조</span>
</span><span class="code-line">  <span class="token keyword">const</span> tuesdayDiscount <span class="token operator">=</span> <span class="token function">isTuesday</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 외부 함수 호출</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="token comment">// 외부 상태 변경</span>
</span><span class="code-line">  <span class="token dom variable">document</span><span class="token punctuation">.</span><span class="token method function property-access">querySelector</span><span class="token punctuation">(</span><span class="token string">&quot;#discount&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token property-access">textContent</span> <span class="token operator">=</span> discount<span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="token keyword control-flow">return</span> discount<span class="token punctuation">;</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment">// ✅ 순수 함수</span>
</span><span class="code-line"><span class="token keyword module">export</span> <span class="token keyword">function</span> <span class="token function">calculateCartSummary</span><span class="token punctuation">(</span><span class="token parameter">cartItems<span class="token punctuation">,</span> discountService<span class="token punctuation">,</span> cartService</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token comment">// 모든 의존성을 매개변수로 받음</span>
</span><span class="code-line">  <span class="token keyword">const</span> discountResult <span class="token operator">=</span> discountService<span class="token punctuation">.</span><span class="token method function property-access">applyAllDiscounts</span><span class="token punctuation">(</span>cartItems<span class="token punctuation">,</span> productList<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token keyword">const</span> itemCount <span class="token operator">=</span> cartService<span class="token punctuation">.</span><span class="token method function property-access">getItemCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="token comment">// 외부 상태 변경 없음</span>
</span><span class="code-line">  <span class="token keyword control-flow">return</span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token literal-property property">success</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
</span><span class="code-line">    cartItems<span class="token punctuation">,</span>
</span><span class="code-line">    discountResult<span class="token punctuation">,</span>
</span><span class="code-line">    itemCount<span class="token punctuation">,</span>
</span><span class="code-line">  <span class="token punctuation">}</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment">// ✅ 상태 캡슐화</span>
</span><span class="code-line"><span class="token keyword module">export</span> <span class="token keyword">class</span> <span class="token class-name">CartService</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">cartStore</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CartStore</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 상태 관리 캡슐화</span>
</span><span class="code-line">  <span class="token punctuation">}</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="token function">getState</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token keyword control-flow">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">cartStore</span><span class="token punctuation">.</span><span class="token method function property-access">getState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 상태 접근 제어</span>
</span><span class="code-line">  <span class="token punctuation">}</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="token function">setState</span><span class="token punctuation">(</span><span class="token parameter">newState</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">cartStore</span><span class="token punctuation">.</span><span class="token method function property-access">setState</span><span class="token punctuation">(</span>newState<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 상태 변경 제어</span>
</span><span class="code-line">  <span class="token punctuation">}</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span><span class="code-line">
</span></code><div class="copied" data-code="// ❌ 부작용이 있는 함수
function calculateDiscount(cartItems) {
  // 외부 상태 참조
  const tuesdayDiscount = isTuesday(); // 외부 함수 호출

  // 외부 상태 변경
  document.querySelector(&quot;#discount&quot;).textContent = discount;

  return discount;
}

// ✅ 순수 함수
export function calculateCartSummary(cartItems, discountService, cartService) {
  // 모든 의존성을 매개변수로 받음
  const discountResult = discountService.applyAllDiscounts(cartItems, productList);
  const itemCount = cartService.getItemCount();

  // 외부 상태 변경 없음
  return {
    success: true,
    cartItems,
    discountResult,
    itemCount,
  };
}

// ✅ 상태 캡슐화
export class CartService {
  constructor() {
    this.cartStore = new CartStore(); // 상태 관리 캡슐화
  }

  getState() {
    return this.cartStore.getState(); // 상태 접근 제어
  }

  setState(newState) {
    this.cartStore.setState(newState); // 상태 변경 제어
  }
}

"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
<h3 id="3-서비스-간-의존성-최소화"><a class="anchor" aria-hidden="true" tabindex="-1" href="#3-서비스-간-의존성-최소화"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><strong>3. 서비스 간 의존성 최소화</strong></h3>
<ul>
<li>순환 의존성을 방지하려고 <strong>의존성 주입 패턴</strong>을 적용하였습니다.</li>
<li>예를들어서 <code>CartService</code>는 <code>DiscountService</code>와 <code>ProductService</code>를 외부에서 주입받도록 설계하여 서비스의 의존성을 최소화 하였습니다.</li>
</ul>
<pre class="language-jsx"><code class="language-jsx code-highlight"><span class="code-line"><span class="token comment">// ❌ 강한 의존성</span>
</span><span class="code-line"><span class="token keyword">class</span> <span class="token class-name">CartService</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">discountService</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DiscountService</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 직접 생성</span>
</span><span class="code-line">    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">productService</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ProductService</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token punctuation">}</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment">// ✅ 의존성 주입</span>
</span><span class="code-line"><span class="token keyword module">export</span> <span class="token keyword">class</span> <span class="token class-name">CartEventListeners</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">uiEventBus<span class="token punctuation">,</span> cartService<span class="token punctuation">,</span> discountService<span class="token punctuation">,</span> productService</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">uiEventBus</span> <span class="token operator">=</span> uiEventBus<span class="token punctuation">;</span>
</span><span class="code-line">    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">cartService</span> <span class="token operator">=</span> cartService<span class="token punctuation">;</span>
</span><span class="code-line">    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">discountService</span> <span class="token operator">=</span> discountService<span class="token punctuation">;</span>
</span><span class="code-line">    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">productService</span> <span class="token operator">=</span> productService<span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token punctuation">}</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment">// 메인에서 의존성 주입</span>
</span><span class="code-line"><span class="token keyword">const</span> cartService <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CartService</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token keyword">const</span> discountService <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DiscountService</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token keyword">const</span> productService <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ProductService</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword">const</span> cartListeners <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CartEventListeners</span><span class="token punctuation">(</span>uiEventBus<span class="token punctuation">,</span> cartService<span class="token punctuation">,</span> discountService<span class="token punctuation">,</span> productService<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span></code><div class="copied" data-code="// ❌ 강한 의존성
class CartService {
  constructor() {
    this.discountService = new DiscountService(); // 직접 생성
    this.productService = new ProductService();
  }
}

// ✅ 의존성 주입
export class CartEventListeners {
  constructor(uiEventBus, cartService, discountService, productService) {
    this.uiEventBus = uiEventBus;
    this.cartService = cartService;
    this.discountService = discountService;
    this.productService = productService;
  }
}

// 메인에서 의존성 주입
const cartService = new CartService();
const discountService = new DiscountService();
const productService = new ProductService();

const cartListeners = new CartEventListeners(uiEventBus, cartService, discountService, productService);

"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
<h3 id="4-event-bus-아키텍처-도입"><a class="anchor" aria-hidden="true" tabindex="-1" href="#4-event-bus-아키텍처-도입"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a><strong>4. Event Bus 아키텍처 도입</strong></h3>
<p>이번 과제에서 가장 큰 고민을 했던 부분은 <strong>비즈니스 로직</strong>과 <strong>UI 로직의 분리</strong>였습니다. 이 고민을 해결하려고 이벤트 버스(EventBus) 아키텍처를 도입해 모듈 간 결합도를 낮추는 방식으로 접근했는데요, 구조 자체는 느슨한 연결을 만들어 유지보수에 도움이 되었습니다.</p>
<pre class="language-jsx"><code class="language-jsx code-highlight"><span class="code-line">
</span><span class="code-line">    <span class="token comment">// 장바구니 요약 계산 완료 이벤트 처리</span>
</span><span class="code-line">    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">uiEventBus</span><span class="token punctuation">.</span><span class="token method function property-access">on</span><span class="token punctuation">(</span><span class="token constant">CART_SUMMARY_CALCULATED</span><span class="token punctuation">,</span> <span class="token parameter">data</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">      <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>data<span class="token punctuation">.</span><span class="token property-access">success</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token method function property-access">renderCartUI</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span><span class="token property-access">cartItems</span><span class="token punctuation">,</span> data<span class="token punctuation">.</span><span class="token property-access">discountResult</span><span class="token punctuation">,</span> data<span class="token punctuation">.</span><span class="token property-access">itemCount</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">      <span class="token punctuation">}</span>
</span><span class="code-line">    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line">    <span class="token comment">// 장바구니 아이템 스타일 업데이트 이벤트</span>
</span><span class="code-line">    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">uiEventBus</span><span class="token punctuation">.</span><span class="token method function property-access">on</span><span class="token punctuation">(</span><span class="token constant">CART_ITEM_STYLES_UPDATED</span><span class="token punctuation">,</span> <span class="token parameter">data</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">      <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>data<span class="token punctuation">.</span><span class="token property-access">success</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token method function property-access">updateCartItemStyles</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span><span class="token property-access">cartItems</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">      <span class="token punctuation">}</span>
</span><span class="code-line">    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line">    <span class="token comment">// 장바구니 가격 업데이트 요청 이벤트 처리</span>
</span><span class="code-line">    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">uiEventBus</span><span class="token punctuation">.</span><span class="token method function property-access">on</span><span class="token punctuation">(</span><span class="token constant">CART_PRICES_UPDATE_REQUESTED</span><span class="token punctuation">,</span> <span class="token parameter">data</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">      <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>data<span class="token punctuation">.</span><span class="token property-access">success</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token method function property-access">handleCartPricesUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">      <span class="token punctuation">}</span>
</span><span class="code-line">    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line">    <span class="token comment">// 헤더 아이템 카운트 업데이트 이벤트</span>
</span><span class="code-line">    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">uiEventBus</span><span class="token punctuation">.</span><span class="token method function property-access">on</span><span class="token punctuation">(</span><span class="token constant">HEADER_ITEM_COUNT_UPDATED</span><span class="token punctuation">,</span> <span class="token parameter">data</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">      <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>data<span class="token punctuation">.</span><span class="token property-access">success</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token method function property-access">renderHeaderItemCount</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span><span class="token property-access">itemCount</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">      <span class="token punctuation">}</span>
</span><span class="code-line">    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></code><div class="copied" data-code="
    // 장바구니 요약 계산 완료 이벤트 처리
    this.uiEventBus.on(CART_SUMMARY_CALCULATED, data =&gt; {
      if (data.success) {
        this.renderCartUI(data.cartItems, data.discountResult, data.itemCount);
      }
    });

    // 장바구니 아이템 스타일 업데이트 이벤트
    this.uiEventBus.on(CART_ITEM_STYLES_UPDATED, data =&gt; {
      if (data.success) {
        this.updateCartItemStyles(data.cartItems);
      }
    });

    // 장바구니 가격 업데이트 요청 이벤트 처리
    this.uiEventBus.on(CART_PRICES_UPDATE_REQUESTED, data =&gt; {
      if (data.success) {
        this.handleCartPricesUpdate();
      }
    });

    // 헤더 아이템 카운트 업데이트 이벤트
    this.uiEventBus.on(HEADER_ITEM_COUNT_UPDATED, data =&gt; {
      if (data.success) {
        this.renderHeaderItemCount(data.itemCount);
      }
    });
"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
<p>하지만 구조적인 한계도 분명히 경험하게 되었습니다.  실제로는 아래와 같은 <strong>구조적 한계와 설계 고민</strong>이 함께 따랐습니다.</p>
<ul>
<li>어떤 레이어에 이벤트버스를 위치시킬지?</li>
<li>이벤트 버스를 싱글톤으로 둘지, 모듈마다 주입을 시킬지</li>
<li>특히나 어려웠던 이벤트 키 네이밍…</li>
</ul>
<p>그렇지만 분명 구조적인 장점이 있었고 저는 두 가지를 뽑아봤습니다.</p>
<p><strong>느슨한 결합</strong></p>
<p>이벤트 버스를 중심으로 모듈 간 직접 호출 없이 메시지를 주고받는 구조로 변경하면서, 모듈 간 <strong>의존성을 낮추고 변경에 유연한 구조</strong>를 만들 수 있었습니다. 예를 들어 <code>ProductSelector</code>는 <code>CartService</code>를 직접 알지 못하지만, <code>CART_ADD_REQUESTED</code> 이벤트만 발행하면 나머지 처리는 이벤트 흐름 안에서 자연스럽게 이어집니다.</p>
<p><strong>단일 책임</strong></p>
<p>기존에는 비즈니스 로직, 상태 관리, 렌더링 로직이 한 파일에 뒤섞여 있었지만, 이를 <code>CartService</code>, <code>CartStore</code>, <code>CartList</code>, <code>CartEventListeners</code> 등으로 나누어 각 모듈이 <strong>하나의 책임만 갖도록 구조화</strong>했습니다. 유지보수는 물론, 의도를 파악하기에도 훨씬 쉬워졌습니다.</p>
<p>아래는 위 구조를 시각화 해보았습니다.</p>
<pre class="language-mermaid"><code class="language-mermaid code-highlight"><span class="code-line"><span class="token keyword">graph</span> TB
</span><span class="code-line">    <span class="token keyword">subgraph</span> <span class="token string">&quot;Loose Coupling (느슨한 결합)&quot;</span>
</span><span class="code-line">        A<span class="token text string">[ProductSelector]</span> <span class="token arrow operator">--&gt;</span><span class="token label property">|CART_ADD_REQUESTED|</span> B<span class="token text string">[EventBus]</span>
</span><span class="code-line">        B <span class="token arrow operator">--&gt;</span><span class="token label property">|handleAddToCart|</span> C<span class="token text string">[CartEventListeners]</span>
</span><span class="code-line">        C <span class="token arrow operator">--&gt;</span><span class="token label property">|addProductToCart|</span> D<span class="token text string">[CartService]</span>
</span><span class="code-line">        D <span class="token arrow operator">--&gt;</span><span class="token label property">|setState|</span> E<span class="token text string">[CartStore]</span>
</span><span class="code-line">        C <span class="token arrow operator">--&gt;</span><span class="token label property">|CART_ITEM_ADDED|</span> B
</span><span class="code-line">        B <span class="token arrow operator">--&gt;</span><span class="token label property">|createCartItem|</span> F<span class="token text string">[CartList]</span>
</span><span class="code-line">    <span class="token keyword">end</span>
</span><span class="code-line">    
</span><span class="code-line">    <span class="token keyword">subgraph</span> <span class="token string">&quot;Single Responsibility (단일 책임)&quot;</span>
</span><span class="code-line">        G<span class="token text string">[CartService&lt;br/&gt;비즈니스 로직만]</span>
</span><span class="code-line">        H<span class="token text string">[CartEventListeners&lt;br/&gt;이벤트 처리만]</span>
</span><span class="code-line">        I<span class="token text string">[CartStore&lt;br/&gt;상태 관리만]</span>
</span><span class="code-line">        J<span class="token text string">[CartList&lt;br/&gt;UI 렌더링만]</span>
</span><span class="code-line">    <span class="token keyword">end</span>
</span><span class="code-line">    
</span><span class="code-line">    <span class="token keyword">subgraph</span> <span class="token string">&quot;Testability (테스트 가능성)&quot;</span>
</span><span class="code-line">        K<span class="token text string">[Unit Test&lt;br/&gt;CartService]</span>
</span><span class="code-line">        L<span class="token text string">[Unit Test&lt;br/&gt;CartStore]</span>
</span><span class="code-line">        M<span class="token text string">[Integration Test&lt;br/&gt;EventBus]</span>
</span><span class="code-line">    <span class="token keyword">end</span>
</span><span class="code-line">
</span></code><div class="copied" data-code="graph TB
    subgraph &quot;Loose Coupling (느슨한 결합)&quot;
        A[ProductSelector] --&gt;|CART_ADD_REQUESTED| B[EventBus]
        B --&gt;|handleAddToCart| C[CartEventListeners]
        C --&gt;|addProductToCart| D[CartService]
        D --&gt;|setState| E[CartStore]
        C --&gt;|CART_ITEM_ADDED| B
        B --&gt;|createCartItem| F[CartList]
    end
    
    subgraph &quot;Single Responsibility (단일 책임)&quot;
        G[CartService&lt;br/&gt;비즈니스 로직만]
        H[CartEventListeners&lt;br/&gt;이벤트 처리만]
        I[CartStore&lt;br/&gt;상태 관리만]
        J[CartList&lt;br/&gt;UI 렌더링만]
    end
    
    subgraph &quot;Testability (테스트 가능성)&quot;
        K[Unit Test&lt;br/&gt;CartService]
        L[Unit Test&lt;br/&gt;CartStore]
        M[Integration Test&lt;br/&gt;EventBus]
    end

"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
<h3 id="과제를-다시-해보면-더-잘-할-수-있었겠다-아쉬운-점이-있다면-무엇인가요"><a class="anchor" aria-hidden="true" tabindex="-1" href="#과제를-다시-해보면-더-잘-할-수-있었겠다-아쉬운-점이-있다면-무엇인가요"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>과제를 다시 해보면 더 잘 할 수 있었겠다 아쉬운 점이 있다면 무엇인가요?</h3>
<p>너무 욕심을 많이 내다 보니 아쉬움이 많습니다. 처음부터 컨벤션을 제대로 정하고 폴더구조나 데이터 흐름, UI로직 등을 좀더 고민했더라면 더 좋은 구조가 나왔지 않았을까 생각합니다. 무작정 리팩토링 부터 진행하면서 계획대로 되지 않았고, 그러다보니 구조를 여러번 바꾸고 분리해보면서 <strong>중복되는 로직</strong>이나 <strong>순환 의존성</strong> 같은 문제들이 나타났습니다.</p>
<p>그중에서도 가장 아쉬웠던 선택은 <strong>이벤트 버스패턴 도입</strong>이었습니다. 처음에는 모듈 간 결합도를 낮추고 깔끔한 아키텍처를 만들 수 있을 것이라 기대했지만.. 이벤트 흐름을 추적하기 어렵고, 이벤트 체인이 길어질수록 디버깅 난이도가 급격히 올라가며,특히 네이밍과 이벤트 설계 원칙이 모호해지면서 유지보수성이 떨어지는 문제 등을 경험했습니다. 결국, <strong>옵저버 패턴 + 상태 관리</strong> 정도로만 설계해도 이번 과제의 요구사항에는 충분했을 것 같다는 아쉬움이 남습니다.</p>
<p>하지만 반대로, 이번 기회에 이렇게 이벤트 버스 패턴을 직접 적용해보면서 덕분에 <strong>이벤트 버스 아키텍처가 어떤 상황에서 효과적이고 어떤 상황에서는 과할 수 있는지</strong>를 실제로 겪고 배울 수 있었습니다.</p>
<p>앞으로는 <strong>복잡한 구조가 ‘잘 만든 구조’는 아니라는 것</strong>, 그리고 <strong>경량화된 아키텍처가 오히려 더 유지보수성과 코드의 가독성을 높여준다는 점</strong> 을 더 고려해서 설계할 수 있을 것 같습니다 ㅎㅎ</p>
<p>두번째로 아쉬운점은.. 비즈니스 로직과, 유틸, 헬퍼 함수를 깔끔하게 분리한뒤 리액트에서 재사용하게 하고싶었습니다. 하지만 생각보다 잘 안되었네요.. 아마 클래스를 사용해서 비즈니스 로직을 관리하다 보니 리액트에서 재사용하기가 어려웠던 것 같습니다</p>
<h3 id="리뷰-받고-싶은-내용이나-궁금한-것에-대한-질문-편하게-남겨주세요-"><a class="anchor" aria-hidden="true" tabindex="-1" href="#리뷰-받고-싶은-내용이나-궁금한-것에-대한-질문-편하게-남겨주세요-"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>리뷰 받고 싶은 내용이나 궁금한 것에 대한 질문 편하게 남겨주세요 :)</h3>
<h3 id="q1-특정-서비스에서-아주-일부-기능12개-함수만-사용하기-위해-전체-서비스를-주입하는-건-과도한-의존일까요"><a class="anchor" aria-hidden="true" tabindex="-1" href="#q1-특정-서비스에서-아주-일부-기능12개-함수만-사용하기-위해-전체-서비스를-주입하는-건-과도한-의존일까요"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Q1. 특정 서비스에서 아주 일부 기능(1~2개 함수)만 사용하기 위해 전체 서비스를 주입하는 건 과도한 의존일까요?</h3>
<p>예를 들어, 저는 <code>OrderService</code>에서 <code>DiscountService</code>의 <strong><code>calculateProductDiscountRate()</code> 함수 하나만 사용하기 위해</strong> 전체 <code>DiscountService</code>를 주입했습니다:</p>
<pre class="language-jsx"><code class="language-jsx code-highlight"><span class="code-line"><span class="token keyword module">export</span> <span class="token keyword">class</span> <span class="token class-name">OrderService</span> <span class="token punctuation">{</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">discountService</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">orderStore</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">OrderStore</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">discountService</span> <span class="token operator">=</span> discountService<span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token punctuation">}</span>
</span><span class="code-line">   
</span><span class="code-line">  <span class="token function">calculateOrderData</span><span class="token punctuation">(</span><span class="token parameter">cartItems<span class="token punctuation">,</span>productList</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
</span><span class="code-line">        <span class="token comment">// 주입받은 discountService를 사용하여 할인 계산</span>
</span><span class="code-line">    <span class="token keyword">const</span> discountResult <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">discountService</span><span class="token punctuation">.</span><span class="token method function property-access">applyAllDiscounts</span><span class="token punctuation">(</span>cartItems<span class="token punctuation">,</span> productList<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">   <span class="token spread operator">...</span> 
</span><span class="code-line">  <span class="token punctuation">}</span>
</span><span class="code-line">  
</span></code><div class="copied" data-code="export class OrderService {

  constructor(discountService) {
    this.orderStore = new OrderStore();
    this.discountService = discountService;
  }
   
  calculateOrderData(cartItems,productList){
        // 주입받은 discountService를 사용하여 할인 계산
    const discountResult = this.discountService.applyAllDiscounts(cartItems, productList);
   ... 
  }
  
"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
<p>그리고 실제 사용하는건</p>
<pre class="language-jsx"><code class="language-jsx code-highlight"><span class="code-line"><span class="token keyword">const</span> discountResult <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">discountService</span><span class="token punctuation">.</span><span class="token method function property-access">applyAllDiscounts</span><span class="token punctuation">(</span>cartItems<span class="token punctuation">,</span> productList<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></code><div class="copied" data-code="const discountResult = this.discountService.applyAllDiscounts(cartItems, productList);
"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
<p>이 한줄입니다.</p>
<p>이처럼 특정 서비스의 일부 기능만 필요할 때, 전체 서비스 객체를 통째로 주입하는 게 맞는지? <strong>단일 책임</strong>이나 <strong>의존성 최소화</strong> 관점에서 보면, 오히려 이 주입이 너무 큰 단위로 이루어졌다고도 느껴졌습니다.</p>
<p>그래서 해당 함수만 따로 유틸로 분리해서 사용하면 어떨까 라는 고민도 했는데 결국 DiscountService(할인 관련된 로직)의 응집도가 깨져버리고 할인 정책에 대한 책임이 이곳저곳 흩어지는 결과를 낳게되는게 아닐까? 라는 고민도 들었습니다..</p>
<p>실무에서는 이런 비슷한 상황이 있으면 어떤 기준으로 설계 결정을 하시는지 궁금합니다.</p></div></div><div class="overflow-auto mt-9"><div data-color-mode="dark" class="wmde-markdown wmde-markdown-color p-6 max-w-full" style="word-wrap:break-word;overflow-wrap:break-word"><h2 id="과제-피드백"><a class="anchor" aria-hidden="true" tabindex="-1" href="#과제-피드백"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>과제 피드백</h2>
<p>고생하셨습니다 창준님.
이런 코드를 개선하는데에서 즐거움을 느끼셨다니 대단하신데요 ㅎㅎ
나름의 흐름을 정의하고 접근 하는 방향은 매우 좋았습니다.
클린 코드의 관점에서도 많은 부분을 고민하셨던 게 문서에 나와있어서 잘 하셨습니다.
과제에 있어서는 좀 더 개선이 필요한 부분이 있지만 충분히 시간적 여유가 있다면 지금의 관점으로 접근하면 개선이 가능할 것 같아요. 잘 하셨습니다!</p>
<p>질문 주신 부분 답변 드려보고 마무리해볼게요.</p>
<blockquote>
<p>특정 서비스에서 아주 일부 기능(1~2개 함수)만 사용하기 위해 전체 서비스를 주입하는 건 과도한 의존일까요?</p>
</blockquote>
<p>우선 지금의 설계가 나쁘다고는 전혀 생각이 들지는 않는 것 같아요. 회고에서 작성해주신것처럼 서비스간의 의존성을 낮추는 관점, 테스트의 용이성 관점에서 코드 파악이 쉬워지고 응집도도 높아지는 것 같아요. 변경에 유연하기도 하구요. 전혀 과도해보이지는 않아요!</p>
<p>고생하셨고 다음주 과제도 이번 주처럼 잘 진행해보시면 좋겠습니다. 화이팅입니다!</p></div></div><div class="mt-9"></div></div></main></div></div></div></div>
</body>
</html>
