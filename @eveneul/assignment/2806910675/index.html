<!doctype html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="icon" href="/front_6th/favicon.ico"/>
  
    <title>[4팀 오하늘] Chapter 4-2 코드 관점의 성능 최적화 - 오하늘 | 항해플러스 프론트엔드 6기</title>
    <meta name="description" content=" [항해플러스 프론트엔드 6기] 오하늘님이 제출한 [4팀 오하늘] Chapter 4-2 코드 관점의 성능 최적화 과제를 확인하세요. 코드 구현, 문제 해결 과정, 피드백 내용을 상세히 살펴볼 수 있습니다." />
    <meta name="keywords" content="항해플러스, 프론트엔드, 개발자교육, React, TypeScript, JavaScript, 기술면접, 웹개발, 오하늘, [4팀 오하늘] Chapter 4-2 코드 관점의 성능 최적화, 과제상세, 코드리뷰, 피드백, Pull Request" />
    <meta property="og:title" content="[4팀 오하늘] Chapter 4-2 코드 관점의 성능 최적화 - 오하늘 | 항해플러스 프론트엔드 6기" />
    <meta property="og:description" content=" [항해플러스 프론트엔드 6기] 오하늘님이 제출한 [4팀 오하늘] Chapter 4-2 코드 관점의 성능 최적화 과제를 확인하세요. 코드 구현, 문제 해결 과정, 피드백 내용을 상세히 살펴볼 수 있습니다." />
    <meta property="og:image" content="/defaultThumbnail.jpg" />
    <meta property="og:type" content="website" />
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="[4팀 오하늘] Chapter 4-2 코드 관점의 성능 최적화 - 오하늘 | 항해플러스 프론트엔드 6기" />
    <meta name="twitter:description" content=" [항해플러스 프론트엔드 6기] 오하늘님이 제출한 [4팀 오하늘] Chapter 4-2 코드 관점의 성능 최적화 과제를 확인하세요. 코드 구현, 문제 해결 과정, 피드백 내용을 상세히 살펴볼 수 있습니다." />
    <meta name="twitter:image" content="/defaultThumbnail.jpg" />
  
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-6J8QP7YK1E"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-6J8QP7YK1E');
  </script>
  <script type="module" crossorigin src="/front_6th/assets/index-B12XiTr6.js"></script>
  <link rel="stylesheet" crossorigin href="/front_6th/assets/index-BXO68frB.css">
</head>
<body>
<div id="root"><link rel="preload" as="image" href="https://github.com/user-attachments/assets/5edd414a-6692-4654-824c-209f64e20ec5"/><link rel="preload" as="image" href="https://github.com/user-attachments/assets/1be8b486-476d-486c-9303-baedfd28d4d4"/><div data-slot="sidebar-wrapper" style="--sidebar-width:16rem;--sidebar-width-icon:3rem" class="group/sidebar-wrapper has-data-[variant=inset]:bg-sidebar flex min-h-svh w-full"><div class="min-h-screen flex w-full"><div class="group peer text-sidebar-foreground hidden md:block" data-state="expanded" data-collapsible="" data-variant="sidebar" data-side="left" data-slot="sidebar"><div data-slot="sidebar-gap" class="relative w-(--sidebar-width) bg-transparent transition-[width] duration-200 ease-linear group-data-[collapsible=offcanvas]:w-0 group-data-[side=right]:rotate-180 group-data-[collapsible=icon]:w-(--sidebar-width-icon)"></div><div data-slot="sidebar-container" class="fixed inset-y-0 z-10 hidden h-svh transition-[left,right,width] duration-200 ease-linear md:flex left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)] group-data-[collapsible=icon]:w-(--sidebar-width-icon) group-data-[side=left]:border-r group-data-[side=right]:border-l w-64"><div data-sidebar="sidebar" data-slot="sidebar-inner" class="bg-sidebar group-data-[variant=floating]:border-sidebar-border flex h-full w-full flex-col group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:shadow-sm"><div data-slot="sidebar-content" data-sidebar="content" class="flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden bg-card border-r border-border"><a class="p-4" href="/front_6th/" data-discover="true"><div class="flex items-center space-x-2 mb-6"><div class="w-8 h-8 bg-gradient-primary rounded-lg flex items-center justify-center"><span class="text-white font-bold text-sm">6기</span></div><h4 class="text-lg font-bold text-primary">항해플러스 프론트엔드</h4></div></a><div data-slot="sidebar-group" data-sidebar="group" class="relative flex w-full min-w-0 flex-col p-2"><div data-slot="sidebar-group-label" data-sidebar="group-label" class="ring-sidebar-ring flex h-8 shrink-0 items-center rounded-md text-xs font-medium outline-hidden transition-[margin,opacity] duration-200 ease-linear focus-visible:ring-2 [&amp;&gt;svg]:size-4 [&amp;&gt;svg]:shrink-0 group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0 text-muted-foreground px-4">학습 관리</div><div data-slot="sidebar-group-content" data-sidebar="group-content" class="w-full text-sm"><ul data-slot="sidebar-menu" data-sidebar="menu" class="flex w-full min-w-0 flex-col gap-1 px-2"><li data-slot="sidebar-menu-item" data-sidebar="menu-item" class="group/menu-item relative"><a data-slot="sidebar-menu-button" data-sidebar="menu-button" data-size="default" data-active="false" class="peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left outline-hidden ring-sidebar-ring transition-[width,height,padding] focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-data-[sidebar=menu-action]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:size-8! group-data-[collapsible=icon]:p-2! [&amp;&gt;span:last-child]:truncate [&amp;&gt;svg]:size-4 [&amp;&gt;svg]:shrink-0 hover:bg-sidebar-accent hover:text-sidebar-accent-foreground text-sm h-12 text-foreground hover:bg-secondary hover:text-secondary-foreground rounded-lg transition-all duration-300" href="/front_6th/" data-discover="true"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-users h-5 w-5" aria-hidden="true"><path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"></path><path d="M16 3.128a4 4 0 0 1 0 7.744"></path><path d="M22 21v-2a4 4 0 0 0-3-3.87"></path><circle cx="9" cy="7" r="4"></circle></svg><span class="ml-3">수강생 목록</span></a></li><li data-slot="sidebar-menu-item" data-sidebar="menu-item" class="group/menu-item relative"><a data-slot="sidebar-menu-button" data-sidebar="menu-button" data-size="default" data-active="false" class="peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left outline-hidden ring-sidebar-ring transition-[width,height,padding] focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-data-[sidebar=menu-action]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:size-8! group-data-[collapsible=icon]:p-2! [&amp;&gt;span:last-child]:truncate [&amp;&gt;svg]:size-4 [&amp;&gt;svg]:shrink-0 hover:bg-sidebar-accent hover:text-sidebar-accent-foreground text-sm h-12 text-foreground hover:bg-secondary hover:text-secondary-foreground rounded-lg transition-all duration-300" href="/front_6th/assignments/" data-discover="true"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-book-open h-5 w-5" aria-hidden="true"><path d="M12 7v14"></path><path d="M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z"></path></svg><span class="ml-3">과제 목록</span></a></li></ul></div></div></div></div></div></div><div class="flex-1 min-w-0"><header class="h-12 flex items-center border-b border-border bg-card px-4"><button data-slot="sidebar-trigger" class="inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 size-7 mr-4 text-white" data-sidebar="trigger"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-panel-left" aria-hidden="true"><rect width="18" height="18" x="3" y="3" rx="2"></rect><path d="M9 3v18"></path></svg><span class="sr-only">Toggle Sidebar</span></button><h4 class="text-lg font-semibold "><a href="/front_6th/@eveneul/" data-discover="true">eveneul<!-- --> 님의 상세페이지</a> ＞ <!-- -->[4팀 오하늘] Chapter 4-2 코드 관점의 성능 최적화</h4></header><main class="p-6"><div><div class="card-wrap"><div data-slot="card" class="card text-card-foreground flex flex-col gap-6 shadow-sm mb-6 p-6 border border-gray-700 bg-gray-800 rounded-lg"><a href="https://github.com/hanghae-plus/front_6th_chapter4-2/pull/9" target="_blank"><div class="flex items-start gap-4"><div class="flex-shrink-0"><svg xmlns="http://www.w3.org/2000/svg" height="32" aria-hidden="true" viewBox="0 0 24 24" width="32" fill="white" class="w-8 h-8"><path d="M12 1C5.923 1 1 5.923 1 12c0 4.867 3.149 8.979 7.521 10.436.55.096.756-.233.756-.522 0-.262-.013-1.128-.013-2.049-2.764.509-3.479-.674-3.699-1.292-.124-.317-.66-1.293-1.127-1.554-.385-.207-.936-.715-.014-.729.866-.014 1.485.797 1.691 1.128.99 1.663 2.571 1.196 3.204.907.096-.715.385-1.196.701-1.471-2.448-.275-5.005-1.224-5.005-5.432 0-1.196.426-2.186 1.128-2.956-.111-.275-.496-1.402.11-2.915 0 0 .921-.288 3.024 1.128a10.193 10.193 0 0 1 2.75-.371c.936 0 1.871.123 2.75.371 2.104-1.43 3.025-1.128 3.025-1.128.605 1.513.221 2.64.111 2.915.701.77 1.127 1.747 1.127 2.956 0 4.222-2.571 5.157-5.019 5.432.399.344.743 1.004.743 2.035 0 1.471-.014 2.654-.014 3.025 0 .289.206.632.756.522C19.851 20.979 23 16.854 23 12c0-6.077-4.922-11-11-11Z"></path></svg></div><div class="flex-1 min-w-0"><div class="flex items-center gap-2 mb-2"><h3 class="text-lg font-semibold text-white truncate">[4팀 오하늘] Chapter 4-2 코드 관점의 성능 최적화</h3></div><div class="flex items-center gap-4 text-xs text-gray-500"><span>by <!-- -->eveneul</span><span>2025. 9. 8.</span></div></div></div></a></div></div><div class="overflow-auto"><div data-color-mode="dark" class="wmde-markdown wmde-markdown-color p-6 max-w-full" style="word-wrap:break-word;overflow-wrap:break-word"><h1 id="과제-체크포인트"><a class="anchor" aria-hidden="true" tabindex="-1" href="#과제-체크포인트"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>과제 체크포인트</h1>
<p><a href="https://eveneul.github.io/front_6th_chapter4-2/">https://eveneul.github.io/front_6th_chapter4-2/</a></p>
<h2 id="과제-요구사항"><a class="anchor" aria-hidden="true" tabindex="-1" href="#과제-요구사항"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>과제 요구사항</h2>
<ul class="contains-task-list">
<li class="task-list-item">
<p><input type="checkbox" disabled="" checked=""/> 배포 후 url 제출</p>
</li>
<li class="task-list-item">
<p><input type="checkbox" disabled="" checked=""/> API 호출 최적화(<code>Promise.all</code> 이해)</p>
</li>
<li class="task-list-item">
<p><input type="checkbox" disabled="" checked=""/> SearchDialog 불필요한 연산 최적화</p>
</li>
<li class="task-list-item">
<p><input type="checkbox" disabled="" checked=""/> SearchDialog 불필요한 리렌더링 최적화</p>
</li>
<li class="task-list-item">
<p><input type="checkbox" disabled="" checked=""/> 시간표 블록 드래그시 렌더링 최적화</p>
</li>
<li class="task-list-item">
<p><input type="checkbox" disabled="" checked=""/> 시간표 블록 드롭시 렌더링 최적화</p>
</li>
</ul>
<h2 id="과제-셀프회고"><a class="anchor" aria-hidden="true" tabindex="-1" href="#과제-셀프회고"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>과제 셀프회고</h2>
<!-- -->
<h1 id="1-fetchalllectures-함수-개선"><a class="anchor" aria-hidden="true" tabindex="-1" href="#1-fetchalllectures-함수-개선"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>1. fetchAllLectures 함수 개선</h1>
<p>🚨 개선 전</p>
<img width="381" height="249" alt="image" src="https://github.com/user-attachments/assets/5edd414a-6692-4654-824c-209f64e20ec5"/>
<p>🌟 개선 후</p>
<img width="566" height="198" alt="image" src="https://github.com/user-attachments/assets/1be8b486-476d-486c-9303-baedfd28d4d4"/>
<p><del>좋은 컴퓨터는 더 빨라져요</del></p>
<h2 id="기존-코드"><a class="anchor" aria-hidden="true" tabindex="-1" href="#기존-코드"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>기존 코드</h2>
<pre class="language-jsx"><code class="language-jsx code-highlight"><span class="code-line"><span class="token keyword">const</span> <span class="token function-variable function">fetchAllLectures</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span>
</span><span class="code-line">	<span class="token keyword control-flow">await</span> <span class="token known-class-name class-name">Promise</span><span class="token punctuation">.</span><span class="token method function property-access">all</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
</span><span class="code-line">		<span class="token punctuation">(</span><span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token string">&#x27;API Call 1&#x27;</span><span class="token punctuation">,</span> <span class="token dom variable">performance</span><span class="token punctuation">.</span><span class="token method function property-access">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword control-flow">await</span> <span class="token function">fetchMajors</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
</span><span class="code-line">		<span class="token punctuation">(</span><span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token string">&#x27;API Call 2&#x27;</span><span class="token punctuation">,</span> <span class="token dom variable">performance</span><span class="token punctuation">.</span><span class="token method function property-access">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword control-flow">await</span> <span class="token function">fetchLiberalArts</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
</span><span class="code-line">		<span class="token punctuation">(</span><span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token string">&#x27;API Call 3&#x27;</span><span class="token punctuation">,</span> <span class="token dom variable">performance</span><span class="token punctuation">.</span><span class="token method function property-access">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword control-flow">await</span> <span class="token function">fetchMajors</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
</span><span class="code-line">		<span class="token punctuation">(</span><span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token string">&#x27;API Call 4&#x27;</span><span class="token punctuation">,</span> <span class="token dom variable">performance</span><span class="token punctuation">.</span><span class="token method function property-access">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword control-flow">await</span> <span class="token function">fetchLiberalArts</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
</span><span class="code-line">		<span class="token punctuation">(</span><span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token string">&#x27;API Call 5&#x27;</span><span class="token punctuation">,</span> <span class="token dom variable">performance</span><span class="token punctuation">.</span><span class="token method function property-access">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword control-flow">await</span> <span class="token function">fetchMajors</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
</span><span class="code-line">		<span class="token punctuation">(</span><span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token string">&#x27;API Call 6&#x27;</span><span class="token punctuation">,</span> <span class="token dom variable">performance</span><span class="token punctuation">.</span><span class="token method function property-access">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword control-flow">await</span> <span class="token function">fetchLiberalArts</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</span><span class="code-line">	<span class="token punctuation">]</span><span class="token punctuation">)</span>
</span></code><div class="copied" data-code="const fetchAllLectures = async () =&gt;
	await Promise.all([
		(console.log(&#x27;API Call 1&#x27;, performance.now()), await fetchMajors()),
		(console.log(&#x27;API Call 2&#x27;, performance.now()), await fetchLiberalArts()),
		(console.log(&#x27;API Call 3&#x27;, performance.now()), await fetchMajors()),
		(console.log(&#x27;API Call 4&#x27;, performance.now()), await fetchLiberalArts()),
		(console.log(&#x27;API Call 5&#x27;, performance.now()), await fetchMajors()),
		(console.log(&#x27;API Call 6&#x27;, performance.now()), await fetchLiberalArts())
	])
"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
<p><strong>🚨 문제점</strong></p>
<ul>
<li><code>await</code>을 사용해서 병렬이 아닌 <code>fetchMajors</code> → <code>fetchLiberalArts</code> 함수가 순차적으로 실행되어 <code>Promise.all</code>의 목적인 병렬 실행이 무의미해집니다.</li>
<li><code>fetchMajors()</code> 함수와 <code>fetchLiberalArts()</code> 함수가 중복으로 실행됩니다. (대체 왜?)</li>
<li>캐싱을 하지 않아 컴포넌트가 재마운트될 때마다 API를 호출해서 이미 로드한 데이터를 재사용하지 못합니다.</li>
</ul>
<h2 id="개선된-코드"><a class="anchor" aria-hidden="true" tabindex="-1" href="#개선된-코드"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>개선된 코드</h2>
<pre class="language-jsx"><code class="language-jsx code-highlight"><span class="code-line"><span class="token keyword">const</span> fetchAllLectures <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">	<span class="token keyword">let</span> <span class="token literal-property property">cache</span><span class="token operator">:</span> <span class="token known-class-name class-name">Promise</span><span class="token operator">&lt;</span><span class="token maybe-class-name">Lecture</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> <span class="token operator">|</span> <span class="token keyword null nil">null</span> <span class="token operator">=</span> <span class="token keyword null nil">null</span>
</span><span class="code-line">
</span><span class="code-line">	<span class="token keyword control-flow">return</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">		<span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>cache<span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">			<span class="token keyword control-flow">return</span> cache
</span><span class="code-line">		<span class="token punctuation">}</span>
</span><span class="code-line">		cache <span class="token operator">=</span> <span class="token known-class-name class-name">Promise</span><span class="token punctuation">.</span><span class="token method function property-access">all</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token function">fetchMajors</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">fetchLiberalArts</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">results</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">			<span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token string">&#x27;API 호출 완료&#x27;</span><span class="token punctuation">,</span> <span class="token dom variable">performance</span><span class="token punctuation">.</span><span class="token method function property-access">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</span><span class="code-line">			<span class="token keyword control-flow">return</span> results<span class="token punctuation">.</span><span class="token method function property-access">flatMap</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">result</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> result<span class="token punctuation">.</span><span class="token property-access">data</span><span class="token punctuation">)</span>
</span><span class="code-line">		<span class="token punctuation">}</span><span class="token punctuation">)</span>
</span><span class="code-line">
</span><span class="code-line">		<span class="token keyword control-flow">return</span> cache
</span><span class="code-line">	<span class="token punctuation">}</span>
</span><span class="code-line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</span></code><div class="copied" data-code="const fetchAllLectures = (() =&gt; {
	let cache: Promise&lt;Lecture[]&gt; | null = null

	return async () =&gt; {
		if (cache) {
			return cache
		}
		cache = Promise.all([fetchMajors(), fetchLiberalArts()]).then((results) =&gt; {
			console.log(&#x27;API 호출 완료&#x27;, performance.now())
			return results.flatMap((result) =&gt; result.data)
		})

		return cache
	}
})()
"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
<p><strong>🌟 개선점</strong></p>
<ul>
<li>API 호출에 걸린 시간을 131ms → 46ms으로 약 85ms 단축했습니다.</li>
<li>클로저를 이용한 캐시 변수로 이미 호출된 데이터가 있으면 재사용(리턴)하고, 없으면 새로 호출합니다.</li>
<li><code>fetchMajors</code>, <code>fetchLiberalArts</code> 함수가 처음 한 번만 2번 호출합니다.</li>
<li>Promise.all에서 await을 제거하여 병렬 처리로 변경했습니다.</li>
</ul>
<h1 id="2-searchdialog-컴포넌트-개선"><a class="anchor" aria-hidden="true" tabindex="-1" href="#2-searchdialog-컴포넌트-개선"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>2. SearchDialog 컴포넌트 개선</h1>
<p><strong>🚨 문제점</strong></p>
<ul>
<li><code>getFilteredLectures</code> 함수가 컴포넌트가 <strong>마운트될 때마다 불필요하게 재계산</strong>되었습니다.</li>
<li><code>filteredLectures</code>, <code>allMajors</code> 역시 마운트 시마다 매번 새로 할당되어 성능 낭비가 있었습니다.</li>
<li>인피니티 스크롤로 강의 데이터를 불러올 때, 실제로는 리렌더링이 필요 없는 <code>Popover</code> 컴포넌트까지 함께 리렌더링되는 문제가 있었습니다.</li>
</ul>
<p><strong>🌟 개선점</strong></p>
<ul>
<li><strong>함수 및 값 메모이제이션</strong>
<ul>
<li><code>useMemo</code>, <code>useCallback</code>을 적용하여 <code>getFilteredLectures</code>, <code>filteredLectures</code>, <code>allMajors</code>가 불필요하게 재생성되지 않도록 최적화했습니다.</li>
</ul>
</li>
<li><strong>비즈니스 로직 분리</strong>
<ul>
<li><code>useSearchDialog</code> 커스텀 훅을 만들어, 컴포넌트 내부에 길게 선언되던 로직과 함수들을 분리했습니다.</li>
<li>이로써 <code>SearchDialog</code>는 UI 중심으로만 유지되고, 상태/로직 관리가 명확해졌습니다.</li>
</ul>
</li>
<li><strong>테이블 구조 최적화</strong>
<ul>
<li><code>Table</code> 관련 코드를 별도 컴포넌트로 분리했습니다.</li>
<li>특히 <code>Tr</code>(행) 단위를 <code>React.memo</code>로 감싸, 개별 행이 변경되지 않는 이상 리렌더링이 발생하지 않도록 했습니다.</li>
</ul>
</li>
<li><strong>Popover 렌더링 최소화</strong>
<ul>
<li>인피니티 스크롤 시에도 <code>Popover</code> 컴포넌트가 리렌더링되지 않도록 의존성을 정리하고, 불필요한 상태 전파를 차단했습니다.</li>
</ul>
</li>
</ul>
<h1 id="3-scheduletable-개선"><a class="anchor" aria-hidden="true" tabindex="-1" href="#3-scheduletable-개선"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>3. ScheduleTable 개선</h1>
<p><strong>🚨 문제점</strong></p>
<ul>
<li>강의(버튼)를 <strong>dragging</strong>할 때 테이블의 각 셀(<code>GridItem</code> 포함)이 모두 리렌더링되었습니다.
<ul>
<li>이 과정에서 불필요하게 함수들이 재생성되고, 셀 단위 컴포넌트들이 매번 다시 계산되는 문제가 있었습니다.</li>
</ul>
</li>
<li><code>DraggableSchedule</code>을 드래그하는 동안, 강의 삭제 여부를 묻는 <code>PopoverContent</code>까지 리렌더링이 발생했습니다.</li>
</ul>
<p><strong>🌟 개선점</strong></p>
<ul>
<li><strong>함수 메모이제이션</strong>
<ul>
<li><code>useCallback</code>을 사용해 이벤트 핸들러 함수들의 불필요한 재생성을 방지했습니다.</li>
</ul>
</li>
<li><strong>컴포넌트 분리</strong>
<ul>
<li><code>ScheduleTable</code> 내부에 있던 작은 단위 컴포넌트들을 별도로 분리했습니다.
<ul>
<li>예: <code>TableCell</code>, <code>TimeCell</code>, <code>DayHeaderCell</code>, <code>TableOutline</code></li>
</ul>
</li>
<li>이로써 각 셀이 독립적으로 리렌더링 범위를 가지도록 최적화했습니다.</li>
</ul>
</li>
<li><strong>드래그 시 Popover 최적화</strong>
<ul>
<li>
<p>드래그 중에는 <code>PopoverContent</code>가 다시 렌더링되지 않도록</p>
<p><code>const shouldRenderPopover = !isDragging</code> 조건을 추가했습니다.</p>
</li>
<li>
<p><code>DraggableSchedule</code>을 <code>memo</code>로 감싸 불필요한 렌더링을 더 줄였습니다.</p>
</li>
</ul>
</li>
</ul>
<pre class="language-jsx"><code class="language-jsx code-highlight"><span class="code-line">  
</span><span class="code-line">  <span class="token comment">// 개선 전</span>
</span><span class="code-line">  <span class="token keyword">const</span> getColor <span class="token operator">=</span> <span class="token punctuation">(</span>lectureId<span class="token operator">:</span> string<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token parameter">string</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token keyword">const</span> lectures <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token spread operator">...</span><span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span>schedules<span class="token punctuation">.</span><span class="token method function property-access">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> lecture <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> lecture<span class="token punctuation">.</span><span class="token property-access">id</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
</span><span class="code-line">    <span class="token keyword">const</span> colors <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&quot;#fdd&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;#ffd&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;#dff&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;#ddf&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;#fdf&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;#dfd&quot;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
</span><span class="code-line">    <span class="token keyword control-flow">return</span> colors<span class="token punctuation">[</span>lectures<span class="token punctuation">.</span><span class="token method function property-access">indexOf</span><span class="token punctuation">(</span>lectureId<span class="token punctuation">)</span> <span class="token operator">%</span> colors<span class="token punctuation">.</span><span class="token property-access">length</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token punctuation">}</span><span class="token punctuation">;</span>
</span><span class="code-line">  
</span><span class="code-line">  <span class="token comment">// 개선 후 </span>
</span><span class="code-line">	<span class="token keyword">const</span> getColor <span class="token operator">=</span> <span class="token function">useCallback</span><span class="token punctuation">(</span>
</span><span class="code-line">		<span class="token punctuation">(</span>lectureId<span class="token operator">:</span> string<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token parameter">string</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">			<span class="token keyword">const</span> lectures <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token spread operator">...</span><span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span>schedules<span class="token punctuation">.</span><span class="token method function property-access">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>lecture<span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> lecture<span class="token punctuation">.</span><span class="token property-access">id</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
</span><span class="code-line">			<span class="token keyword">const</span> colors <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&#x27;#fdd&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;#ffd&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;#dff&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;#ddf&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;#fdf&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;#dfd&#x27;</span><span class="token punctuation">]</span>
</span><span class="code-line">			<span class="token keyword control-flow">return</span> colors<span class="token punctuation">[</span>lectures<span class="token punctuation">.</span><span class="token method function property-access">indexOf</span><span class="token punctuation">(</span>lectureId<span class="token punctuation">)</span> <span class="token operator">%</span> colors<span class="token punctuation">.</span><span class="token property-access">length</span><span class="token punctuation">]</span>
</span><span class="code-line">		<span class="token punctuation">}</span><span class="token punctuation">,</span>
</span><span class="code-line">		<span class="token punctuation">[</span>schedules<span class="token punctuation">]</span>
</span><span class="code-line">	<span class="token punctuation">)</span>
</span><span class="code-line">
</span></code><div class="copied" data-code="  
  // 개선 전
  const getColor = (lectureId: string): string =&gt; {
    const lectures = [...new Set(schedules.map(({ lecture }) =&gt; lecture.id))];
    const colors = [&quot;#fdd&quot;, &quot;#ffd&quot;, &quot;#dff&quot;, &quot;#ddf&quot;, &quot;#fdf&quot;, &quot;#dfd&quot;];
    return colors[lectures.indexOf(lectureId) % colors.length];
  };
  
  // 개선 후 
	const getColor = useCallback(
		(lectureId: string): string =&gt; {
			const lectures = [...new Set(schedules.map(({lecture}) =&gt; lecture.id))]
			const colors = [&#x27;#fdd&#x27;, &#x27;#ffd&#x27;, &#x27;#dff&#x27;, &#x27;#ddf&#x27;, &#x27;#fdf&#x27;, &#x27;#dfd&#x27;]
			return colors[lectures.indexOf(lectureId) % colors.length]
		},
		[schedules]
	)

"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
<pre class="language-jsx"><code class="language-jsx code-highlight"><span class="code-line"><span class="token comment">// 개선 전</span>
</span><span class="code-line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">GridItem</span></span>
</span></span><span class="code-line"><span class="token tag">    <span class="token attr-name">key</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>day<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">-</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>timeIndex <span class="token operator">+</span> <span class="token number">2</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">}</span></span>
</span></span><span class="code-line"><span class="token tag">    <span class="token attr-name">borderWidth</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>1px 0 0 1px<span class="token punctuation">&quot;</span></span>
</span></span><span class="code-line"><span class="token tag">    <span class="token attr-name">borderColor</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>gray.300<span class="token punctuation">&quot;</span></span>
</span></span><span class="code-line"><span class="token tag">    <span class="token attr-name">bg</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>timeIndex <span class="token operator">&gt;</span> <span class="token number">17</span> <span class="token operator">?</span> <span class="token string">&#x27;gray.100&#x27;</span> <span class="token operator">:</span> <span class="token string">&#x27;white&#x27;</span><span class="token punctuation">}</span></span>
</span></span><span class="code-line"><span class="token tag">    <span class="token attr-name">cursor</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>pointer<span class="token punctuation">&quot;</span></span>
</span></span><span class="code-line"><span class="token tag">    <span class="token attr-name">_hover</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> <span class="token literal-property property">bg</span><span class="token operator">:</span> <span class="token string">&#x27;yellow.100&#x27;</span> <span class="token punctuation">}</span><span class="token punctuation">}</span></span>
</span></span><span class="code-line"><span class="token tag">    <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> onScheduleTimeClick<span class="token operator">?.</span><span class="token punctuation">(</span><span class="token punctuation">{</span> day<span class="token punctuation">,</span> <span class="token literal-property property">time</span><span class="token operator">:</span> timeIndex <span class="token operator">+</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span> <span class="token comment">// 이벤트 콜백 함수</span>
</span></span><span class="code-line"><span class="token tag">  <span class="token punctuation">/&gt;</span></span>
</span><span class="code-line">  
</span><span class="code-line"><span class="token comment">// 개선 후</span>
</span><span class="code-line"><span class="token keyword">const</span> memoizedOnScheduleTimeClick <span class="token operator">=</span> <span class="token function">useCallback</span><span class="token punctuation">(</span>
</span><span class="code-line">	<span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">timeInfo</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token literal-property property">day</span><span class="token operator">:</span> string<span class="token punctuation">;</span> time<span class="token operator">:</span> number<span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">		onScheduleTimeClick<span class="token operator">?.</span><span class="token punctuation">(</span>timeInfo<span class="token punctuation">)</span>
</span><span class="code-line">	<span class="token punctuation">}</span><span class="token punctuation">,</span>
</span><span class="code-line">	<span class="token punctuation">[</span>onScheduleTimeClick<span class="token punctuation">]</span>
</span><span class="code-line"><span class="token punctuation">)</span>
</span></code><div class="copied" data-code="// 개선 전
  &lt;GridItem
    key={`${day}-${timeIndex + 2}`}
    borderWidth=&quot;1px 0 0 1px&quot;
    borderColor=&quot;gray.300&quot;
    bg={timeIndex &gt; 17 ? &#x27;gray.100&#x27; : &#x27;white&#x27;}
    cursor=&quot;pointer&quot;
    _hover={{ bg: &#x27;yellow.100&#x27; }}
    onClick={() =&gt; onScheduleTimeClick?.({ day, time: timeIndex + 1 })} // 이벤트 콜백 함수
  /&gt;
  
// 개선 후
const memoizedOnScheduleTimeClick = useCallback(
	(timeInfo: {day: string; time: number}) =&gt; {
		onScheduleTimeClick?.(timeInfo)
	},
	[onScheduleTimeClick]
)
"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
<pre class="language-jsx"><code class="language-jsx code-highlight"><span class="code-line"><span class="token comment">// 개선 전</span>
</span><span class="code-line">	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">PopoverContent</span></span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> event<span class="token punctuation">.</span><span class="token method function property-access">stopPropagation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
</span></span><span class="code-line"><span class="token plain-text">		</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">PopoverArrow</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
</span></span><span class="code-line"><span class="token plain-text">		</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">PopoverCloseButton</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
</span></span><span class="code-line"><span class="token plain-text">		</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">PopoverBody</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
</span></span><span class="code-line"><span class="token plain-text">			</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Text</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">강의를 삭제하시겠습니까?</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Text</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
</span></span><span class="code-line"><span class="token plain-text">			</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Button</span></span> <span class="token attr-name">colorScheme</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&#x27;</span>red<span class="token punctuation">&#x27;</span></span> <span class="token attr-name">size</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&#x27;</span>xs<span class="token punctuation">&#x27;</span></span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>onDeleteButtonClick<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
</span></span><span class="code-line"><span class="token plain-text">				삭제
</span></span><span class="code-line"><span class="token plain-text">			</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Button</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
</span></span><span class="code-line"><span class="token plain-text">		</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">PopoverBody</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
</span></span><span class="code-line"><span class="token plain-text">	</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">PopoverContent</span></span><span class="token punctuation">&gt;</span></span>
</span><span class="code-line">	
</span><span class="code-line">	
</span><span class="code-line"><span class="token comment">// 개선 후 </span>
</span><span class="code-line"><span class="token keyword">const</span> shouldRenderPopover <span class="token operator">=</span> <span class="token operator">!</span>isDragging
</span><span class="code-line">
</span><span class="code-line"><span class="token spread operator">...</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token punctuation">{</span>shouldRenderPopover <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>
</span><span class="code-line">	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">PopoverContent</span></span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> event<span class="token punctuation">.</span><span class="token method function property-access">stopPropagation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
</span></span><span class="code-line"><span class="token plain-text">		</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">PopoverArrow</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
</span></span><span class="code-line"><span class="token plain-text">		</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">PopoverCloseButton</span></span> <span class="token punctuation">/&gt;</span></span><span class="token plain-text">
</span></span><span class="code-line"><span class="token plain-text">		</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">PopoverBody</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
</span></span><span class="code-line"><span class="token plain-text">			</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Text</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">강의를 삭제하시겠습니까?</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Text</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
</span></span><span class="code-line"><span class="token plain-text">			</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Button</span></span> <span class="token attr-name">colorScheme</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&#x27;</span>red<span class="token punctuation">&#x27;</span></span> <span class="token attr-name">size</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&#x27;</span>xs<span class="token punctuation">&#x27;</span></span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>onDeleteButtonClick<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
</span></span><span class="code-line"><span class="token plain-text">				삭제
</span></span><span class="code-line"><span class="token plain-text">			</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Button</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
</span></span><span class="code-line"><span class="token plain-text">		</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">PopoverBody</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
</span></span><span class="code-line"><span class="token plain-text">	</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">PopoverContent</span></span><span class="token punctuation">&gt;</span></span>
</span><span class="code-line"><span class="token punctuation">)</span><span class="token punctuation">}</span>
</span></code><div class="copied" data-code="// 개선 전
	&lt;PopoverContent onClick={(event) =&gt; event.stopPropagation()}&gt;
		&lt;PopoverArrow /&gt;
		&lt;PopoverCloseButton /&gt;
		&lt;PopoverBody&gt;
			&lt;Text&gt;강의를 삭제하시겠습니까?&lt;/Text&gt;
			&lt;Button colorScheme=&#x27;red&#x27; size=&#x27;xs&#x27; onClick={onDeleteButtonClick}&gt;
				삭제
			&lt;/Button&gt;
		&lt;/PopoverBody&gt;
	&lt;/PopoverContent&gt;
	
	
// 개선 후 
const shouldRenderPopover = !isDragging

...

{shouldRenderPopover &amp;&amp; (
	&lt;PopoverContent onClick={(event) =&gt; event.stopPropagation()}&gt;
		&lt;PopoverArrow /&gt;
		&lt;PopoverCloseButton /&gt;
		&lt;PopoverBody&gt;
			&lt;Text&gt;강의를 삭제하시겠습니까?&lt;/Text&gt;
			&lt;Button colorScheme=&#x27;red&#x27; size=&#x27;xs&#x27; onClick={onDeleteButtonClick}&gt;
				삭제
			&lt;/Button&gt;
		&lt;/PopoverBody&gt;
	&lt;/PopoverContent&gt;
)}
"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
<h1 id="4-scheduletables-개선"><a class="anchor" aria-hidden="true" tabindex="-1" href="#4-scheduletables-개선"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>4. ScheduleTables 개선</h1>
<p><strong>🚨 문제점</strong></p>
<ul>
<li>강의를 드래그 &amp; 드롭하면 관련 없는 다른 Table도 불필요하게 리렌더링되는 문제가 있었습니다.</li>
<li>기존에는 Context로 <code>schedulesMap</code>, <code>setSchedulesMap</code>을 공유하고 있어서, 한 테이블의 변경이 모든 하위 컴포넌트에 전파되었습니다.</li>
</ul>
<p><strong>🤨 시도했던 방법들</strong></p>
<ul>
<li>Context를 Getter/Setter로 분리해보려 했으나, 여전히 Context 자체는 전역으로 공유되기 때문에 <strong>리렌더링 범위를 줄이기 어려웠습니다.</strong></li>
<li>하지만 Context는 Context일 뿐.. 하위 컴포넌트들이 다 영향을 받아서 이 방법은 오랜 고민 끝에 포기했습니다.</li>
</ul>
<p><strong>🌟 개선점</strong></p>
<ul>
<li><strong>Zustand 전역 상태 관리</strong>를 도입했습니다.</li>
<li><code>store/scheduleStore.ts</code>를 생성하여 <code>schedulesMap</code>과 <code>setSchedulesMap</code>뿐 아니라 <strong>update, add, remove, duplicate 등 CRUD 액션</strong>을 정의했습니다.</li>
<li>각 컴포넌트에서는 Context 대신 <strong>커스텀 훅</strong>(<code>useSchedulesByTableId</code>)을 사용하여 특정 <code>tableId</code>에 해당하는 데이터만 구독하도록 변경했습니다.</li>
<li><code>handleDragEnd</code>에서 <code>setSchedulesMap</code> 대신 <code>updateSchedule</code>을 호출하도록 수정하여, <strong>드래그 &amp; 드롭 시 해당 테이블만 업데이트</strong>되고 다른 테이블은 리렌더링 되지 않도록 개선했습니다.</li>
</ul>
<pre class="language-jsx"><code class="language-jsx code-highlight"><span class="code-line"><span class="token comment">// store/scheduleStore.ts</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword module">export</span> <span class="token keyword">const</span> useScheduleStore <span class="token operator">=</span> create<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">ScheduleStore</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">((set) =&gt; (</span><span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token comment">// 스케줄 데이터</span>
</span><span class="code-line">  <span class="token literal-property property">schedulesMap</span><span class="token operator">:</span> dummyScheduleMap<span class="token punctuation">,</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="token comment">// 스케줄 데이터 setter</span>
</span><span class="code-line">  <span class="token function-variable function">setSchedulesMap</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">schedulesMap</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token function">set</span><span class="token punctuation">(</span><span class="token punctuation">{</span> schedulesMap <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="token comment">// 스케줄 데이터 update</span>
</span><span class="code-line">  <span class="token function-variable function">updateSchedule</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">tableId<span class="token punctuation">,</span> index<span class="token punctuation">,</span> updatedSchedule</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token function">set</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">state</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
</span><span class="code-line">      <span class="token literal-property property">schedulesMap</span><span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="code-line">        <span class="token spread operator">...</span>state<span class="token punctuation">.</span><span class="token property-access">schedulesMap</span><span class="token punctuation">,</span>
</span><span class="code-line">        <span class="token punctuation">[</span>tableId<span class="token punctuation">]</span><span class="token operator">:</span> state<span class="token punctuation">.</span><span class="token property-access">schedulesMap</span><span class="token punctuation">[</span>tableId<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token method function property-access">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">schedule<span class="token punctuation">,</span> i</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span>
</span><span class="code-line">          i <span class="token operator">===</span> index <span class="token operator">?</span> updatedSchedule <span class="token operator">:</span> schedule
</span><span class="code-line">        <span class="token punctuation">)</span><span class="token punctuation">,</span>
</span><span class="code-line">      <span class="token punctuation">}</span><span class="token punctuation">,</span>
</span><span class="code-line">    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token punctuation">}</span><span class="token punctuation">,</span>
</span><span class="code-line">  
</span><span class="code-line">  <span class="token spread operator">...</span>
</span><span class="code-line">  
</span><span class="code-line"><span class="token keyword module">export</span> <span class="token keyword">const</span> <span class="token function-variable function">useSchedulesByTableId</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">tableId</span><span class="token operator">:</span> string</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token keyword control-flow">return</span> <span class="token function">useScheduleStore</span><span class="token punctuation">(</span>
</span><span class="code-line">    <span class="token function">useShallow</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">state</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> state<span class="token punctuation">.</span><span class="token property-access">schedulesMap</span><span class="token punctuation">[</span>tableId<span class="token punctuation">]</span> <span class="token operator">||</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
</span><span class="code-line">  <span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token punctuation">}</span><span class="token punctuation">;</span>
</span></code><div class="copied" data-code="// store/scheduleStore.ts

export const useScheduleStore = create&lt;ScheduleStore&gt;((set) =&gt; ({
  // 스케줄 데이터
  schedulesMap: dummyScheduleMap,

  // 스케줄 데이터 setter
  setSchedulesMap: (schedulesMap) =&gt; set({ schedulesMap }),

  // 스케줄 데이터 update
  updateSchedule: (tableId, index, updatedSchedule) =&gt; {
    set((state) =&gt; ({
      schedulesMap: {
        ...state.schedulesMap,
        [tableId]: state.schedulesMap[tableId].map((schedule, i) =&gt;
          i === index ? updatedSchedule : schedule
        ),
      },
    }));
  },
  
  ...
  
export const useSchedulesByTableId = (tableId: string) =&gt; {
  return useScheduleStore(
    useShallow((state) =&gt; state.schedulesMap[tableId] || [])
  );
};
"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
<pre class="language-jsx"><code class="language-jsx code-highlight"><span class="code-line"><span class="token comment">// ScheduleEndProvider.tsx</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword module">export</span> <span class="token keyword module">default</span> <span class="token keyword">function</span> <span class="token function"><span class="token maybe-class-name">ScheduleDndProvider</span></span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>
</span></span><span class="code-line"><span class="token parameter">  children<span class="token punctuation">,</span>
</span></span><span class="code-line"><span class="token parameter">  tableId<span class="token punctuation">,</span>
</span></span><span class="code-line"><span class="token parameter"><span class="token punctuation">}</span><span class="token operator">:</span> <span class="token maybe-class-name">PropsWithChildren</span> <span class="token operator">&amp;</span> <span class="token punctuation">{</span> <span class="token literal-property property">tableId</span><span class="token operator">:</span> string <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">	<span class="token comment">// Context에서 가지고 오는 대신 전역 상태 관리에서 선언한 훅으로 대신하여 가지고 옴</span>
</span><span class="code-line">  <span class="token keyword">const</span> schedules <span class="token operator">=</span> <span class="token function">useSchedulesByTableId</span><span class="token punctuation">(</span>tableId<span class="token punctuation">)</span><span class="token punctuation">;</span> 
</span><span class="code-line">  <span class="token keyword">const</span> updateSchedule <span class="token operator">=</span> <span class="token function">useScheduleStore</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">state</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> state<span class="token punctuation">.</span><span class="token property-access">updateSchedule</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token keyword">const</span> sensors <span class="token operator">=</span> <span class="token function">useSensors</span><span class="token punctuation">(</span>
</span><span class="code-line">    <span class="token function">useSensor</span><span class="token punctuation">(</span><span class="token maybe-class-name">PointerSensor</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
</span><span class="code-line">      <span class="token literal-property property">activationConstraint</span><span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="code-line">        <span class="token literal-property property">distance</span><span class="token operator">:</span> <span class="token number">8</span><span class="token punctuation">,</span>
</span><span class="code-line">      <span class="token punctuation">}</span><span class="token punctuation">,</span>
</span><span class="code-line">    <span class="token punctuation">}</span><span class="token punctuation">)</span>
</span><span class="code-line">  <span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="token comment">// eslint-disable-next-line @typescript-eslint/no-explicit-any</span>
</span><span class="code-line">  <span class="token keyword">const</span> <span class="token function-variable function">handleDragEnd</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">event</span><span class="token operator">:</span> any</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token keyword">const</span> <span class="token punctuation">{</span> active<span class="token punctuation">,</span> delta <span class="token punctuation">}</span> <span class="token operator">=</span> event<span class="token punctuation">;</span>
</span><span class="code-line">    <span class="token keyword">const</span> <span class="token punctuation">{</span> x<span class="token punctuation">,</span> y <span class="token punctuation">}</span> <span class="token operator">=</span> delta<span class="token punctuation">;</span>
</span><span class="code-line">    <span class="token keyword">const</span> <span class="token punctuation">[</span>tableId<span class="token punctuation">,</span> index<span class="token punctuation">]</span> <span class="token operator">=</span> active<span class="token punctuation">.</span><span class="token property-access">id</span><span class="token punctuation">.</span><span class="token method function property-access">split</span><span class="token punctuation">(</span><span class="token string">&quot;:&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">    <span class="token keyword">const</span> schedule <span class="token operator">=</span> schedules<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">;</span>
</span><span class="code-line">    <span class="token keyword">const</span> nowDayIndex <span class="token operator">=</span> <span class="token constant">DAY_LABELS</span><span class="token punctuation">.</span><span class="token method function property-access">indexOf</span><span class="token punctuation">(</span>
</span><span class="code-line">      schedule<span class="token punctuation">.</span><span class="token property-access">day</span> <span class="token keyword module">as</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> <span class="token constant">DAY_LABELS</span><span class="token punctuation">)</span><span class="token punctuation">[</span>number<span class="token punctuation">]</span>
</span><span class="code-line">    <span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">    <span class="token keyword">const</span> moveDayIndex <span class="token operator">=</span> <span class="token known-class-name class-name">Math</span><span class="token punctuation">.</span><span class="token method function property-access">floor</span><span class="token punctuation">(</span>x <span class="token operator">/</span> <span class="token number">80</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">    <span class="token keyword">const</span> moveTimeIndex <span class="token operator">=</span> <span class="token known-class-name class-name">Math</span><span class="token punctuation">.</span><span class="token method function property-access">floor</span><span class="token punctuation">(</span>y <span class="token operator">/</span> <span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line">		<span class="token comment">// setSchedulesMap으로 상태를 변경하는 것이 아닌 DND를 한 데이터의 테이블을 update로 진행</span>
</span><span class="code-line">    <span class="token keyword">const</span> updatedSchedule <span class="token operator">=</span> <span class="token punctuation">{</span>
</span><span class="code-line">      <span class="token spread operator">...</span>schedule<span class="token punctuation">,</span>
</span><span class="code-line">      <span class="token literal-property property">day</span><span class="token operator">:</span> <span class="token constant">DAY_LABELS</span><span class="token punctuation">[</span>nowDayIndex <span class="token operator">+</span> moveDayIndex<span class="token punctuation">]</span><span class="token punctuation">,</span>
</span><span class="code-line">      <span class="token literal-property property">range</span><span class="token operator">:</span> schedule<span class="token punctuation">.</span><span class="token property-access">range</span><span class="token punctuation">.</span><span class="token method function property-access">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">time</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> time <span class="token operator">+</span> moveTimeIndex<span class="token punctuation">)</span><span class="token punctuation">,</span>
</span><span class="code-line">    <span class="token punctuation">}</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line">    <span class="token function">updateSchedule</span><span class="token punctuation">(</span>tableId<span class="token punctuation">,</span> <span class="token known-class-name class-name">Number</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">,</span> updatedSchedule<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token punctuation">}</span><span class="token punctuation">;</span>
</span></code><div class="copied" data-code="// ScheduleEndProvider.tsx

export default function ScheduleDndProvider({
  children,
  tableId,
}: PropsWithChildren &amp; { tableId: string }) {
	// Context에서 가지고 오는 대신 전역 상태 관리에서 선언한 훅으로 대신하여 가지고 옴
  const schedules = useSchedulesByTableId(tableId); 
  const updateSchedule = useScheduleStore((state) =&gt; state.updateSchedule);
  const sensors = useSensors(
    useSensor(PointerSensor, {
      activationConstraint: {
        distance: 8,
      },
    })
  );

  // eslint-disable-next-line @typescript-eslint/no-explicit-any
  const handleDragEnd = (event: any) =&gt; {
    const { active, delta } = event;
    const { x, y } = delta;
    const [tableId, index] = active.id.split(&quot;:&quot;);
    const schedule = schedules[index];
    const nowDayIndex = DAY_LABELS.indexOf(
      schedule.day as (typeof DAY_LABELS)[number]
    );
    const moveDayIndex = Math.floor(x / 80);
    const moveTimeIndex = Math.floor(y / 30);

		// setSchedulesMap으로 상태를 변경하는 것이 아닌 DND를 한 데이터의 테이블을 update로 진행
    const updatedSchedule = {
      ...schedule,
      day: DAY_LABELS[nowDayIndex + moveDayIndex],
      range: schedule.range.map((time) =&gt; time + moveTimeIndex),
    };

    updateSchedule(tableId, Number(index), updatedSchedule);
  };
"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
<h2 id="리뷰-받고-싶은-내용"><a class="anchor" aria-hidden="true" tabindex="-1" href="#리뷰-받고-싶은-내용"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>리뷰 받고 싶은 내용</h2>
<!-- -->
<p>리뷰 받기보다는 질문이 있는데요, 원래 이렇게 모든 걸 다 메모이제이션 하는 걸까요?
성능 최적화를 많이 해 보지를 못해서, 이렇게 모든 컴포넌트와 함수 하나하나를 다 memo, callback을 써야 하는 게 맞는 건지 궁금합니다!</p></div></div><div class="overflow-auto mt-9"><div data-color-mode="dark" class="wmde-markdown wmde-markdown-color p-6 max-w-full" style="word-wrap:break-word;overflow-wrap:break-word"><h2 id="과제-피드백"><a class="anchor" aria-hidden="true" tabindex="-1" href="#과제-피드백"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>과제 피드백</h2>
<p>수고했어요 하늘!! 이번 과제는 React 애플리케이션에서 실제 성능 병목 지점을 찾고 최적화하는 것이 목표였습니다.</p>
<p>API 호출 최적화에서 문제점을 정확히 파악하고 개선한 부분이 잘했어요. await을 잘못 사용해서 병렬 처리가 무의미했던 점과 중복 호출 문제를 클로저 캐싱으로 잘 해결했네요! 이 사실은 기억하면서 TanstackQuery를 한번 더 떠올려보세요. TanstackQuery가 해주는 최적화 편의가 이러한 방식으로 만들어져 있답니다.</p>
<p>useMemo, useCallback으로 불필요한 재계산을 방지하고, 커스텀 훅으로 비즈니스 로직을 분리하고, React.memo로 행 단위 리렌더링을 최적화한 부분들이 좋았습니다. 내가 수정한 데이터는 분명 행의 일부 데이터인데 리렌더링이 호출되는 범위가 그보다 훨씬 더 커지게 되었다면 memo을 걸 수 있으면 좋겠지요.</p>
<p>ScheduleTable에서 드래그 시 전체 리렌더링 문제를 해결한 과정도 잘 봤습니다. 실시간 타이머를 이용한 에니메이션이나 실시간 수치나 UI등을 포함하고 있다거나 지금처럼 드래그와 같이 이벤트가 짧은 시간 내 엄청 많은 경우에도 리렌더링이 성능을 방해하는 경우가 있으니 지금의 방식처럼 기억해뒀다가 잘 해결해나가길 바래요!</p>
<p>Context에서 Zustand로 전환한 결정도 좋습니다. Context의 경우 최적화를 스스로 하지는 않기에 리렌더링이이 모든 영역에서 발생하는 문제가 발생하죠. 반면 Zustand의 경우 selector를 이용해 리렌더의 범위를 조정할 수 있으니 좋습니다.</p>
<p>현대에 와서는 이렇게 이미 최적화에 대한 방법들이 포함된 라이브러리들이 많아 최적화를 해야하는 작업이 자주 발생하지는 않지만 어째서 이런게 가능한지를 이해하면 나중에 꼭 필요한 경우 큰 두려움이나 헤매는 과정없이 잘 해낼거라 생각합니다.</p>
<p>A) 리뷰 받기보다는 질문이 있는데요, 원래 이렇게 모든 걸 다 메모이제이션 하는 걸까요?
성능 최적화를 많이 해 보지를 못해서, 이렇게 모든 컴포넌트와 함수 하나하나를 다 memo, callback을 써야 하는 게 맞는 건지 궁금합니다!</p>
<p>=&gt; 모든 걸 다 메모이제이션할 필요는 없어요. 메모이제이션은 동작을 skip하는 대신 메모리 사용량을 방식입니다. 게다가 코드도 복잡해지요. 다 트레이드 오프가 있으므로 언제나 메모이제이션은 <strong>실제 성능 문제가 있을 때만</strong> 적용하는 게 좋다라고 합니다. (그렇지만 메모제이션이 그정도 까지 문제는 아니기에 언제는 하고 언제는 안하고 이거 고민을 할바야 전부 다 습관적으로 거는게 낫다 하는 의견도 있지요. 어떤 게 맞을 것 같은지는 하늘이 한번 잘 생각해보세요)</p>
<p>=&gt; 언제 사용하는지 기준을 잡아보면 우선 리렌더링이 중요한 기준인데 값이 변화는 국소적이나 리렌더링이 되는 범위는 넒고 내부 계산 로직이 있고 그 계산이 배열의 합처럼 큰 데이터로 부터 오는 경우입니다. : 1) 복잡한 계산이 있는 함수, 2) 자주 리렌더링되는 컴포넌트, 3) props가 자주 변경되지 않는 컴포넌트, 4) 하위 컴포넌트가 많은 부모 컴포넌트 정도에만 적용하시면 돼요.</p>
<p>=&gt; 하나의 컴포넌트에서 리렌더링이 되어야 하는 이유가 여러개라면 useMemo보다는 컴포넌트를 분리하고 React.memo를 쓰는 방법도 좋습니다.</p>
<p>이번 과제에서 성능 측정도 하고 실제 개선 효과도 확인하면서 최적화의 전 과정을 체험해보셨으니, 앞으로 비슷한 상황에서 어디부터 접근할지 감이 생겼을 거예요. 수고하셨습니다. 제가 하늘이는 꼭 꼭 기억할게요. 지난 10주간 너무너무 수고 많았습니다. 이 경험들이 실력이 성장하고 스스로도 이제 나는 잘 하는 프론트엔드 개발자라는 자부심을 만드는 계기가 되었기를 바래요!</p></div></div><div class="mt-9"></div></div></main></div></div></div></div>
</body>
</html>
