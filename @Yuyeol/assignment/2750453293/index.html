<!doctype html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="icon" href="/front_6th/favicon.ico"/>
  
    <title>[8팀 정유열] Chapter 3-1. 프론트엔드 테스트 코드 - 정유열 | 항해플러스 프론트엔드 6기</title>
    <meta name="description" content=" [항해플러스 프론트엔드 6기] 정유열님이 제출한 [8팀 정유열] Chapter 3-1. 프론트엔드 테스트 코드 과제를 확인하세요. 코드 구현, 문제 해결 과정, 피드백 내용을 상세히 살펴볼 수 있습니다." />
    <meta name="keywords" content="항해플러스, 프론트엔드, 개발자교육, React, TypeScript, JavaScript, 기술면접, 웹개발, 정유열, [8팀 정유열] Chapter 3-1. 프론트엔드 테스트 코드, 과제상세, 코드리뷰, 피드백, Pull Request" />
    <meta property="og:title" content="[8팀 정유열] Chapter 3-1. 프론트엔드 테스트 코드 - 정유열 | 항해플러스 프론트엔드 6기" />
    <meta property="og:description" content=" [항해플러스 프론트엔드 6기] 정유열님이 제출한 [8팀 정유열] Chapter 3-1. 프론트엔드 테스트 코드 과제를 확인하세요. 코드 구현, 문제 해결 과정, 피드백 내용을 상세히 살펴볼 수 있습니다." />
    <meta property="og:image" content="/defaultThumbnail.jpg" />
    <meta property="og:type" content="website" />
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="[8팀 정유열] Chapter 3-1. 프론트엔드 테스트 코드 - 정유열 | 항해플러스 프론트엔드 6기" />
    <meta name="twitter:description" content=" [항해플러스 프론트엔드 6기] 정유열님이 제출한 [8팀 정유열] Chapter 3-1. 프론트엔드 테스트 코드 과제를 확인하세요. 코드 구현, 문제 해결 과정, 피드백 내용을 상세히 살펴볼 수 있습니다." />
    <meta name="twitter:image" content="/defaultThumbnail.jpg" />
  
  <script type="module" crossorigin src="/front_6th/assets/index-DtEqFcg_.js"></script>
  <link rel="stylesheet" crossorigin href="/front_6th/assets/index-BXO68frB.css">
</head>
<body>
<div id="root"><div data-slot="sidebar-wrapper" style="--sidebar-width:16rem;--sidebar-width-icon:3rem" class="group/sidebar-wrapper has-data-[variant=inset]:bg-sidebar flex min-h-svh w-full"><div class="min-h-screen flex w-full"><div class="group peer text-sidebar-foreground hidden md:block" data-state="expanded" data-collapsible="" data-variant="sidebar" data-side="left" data-slot="sidebar"><div data-slot="sidebar-gap" class="relative w-(--sidebar-width) bg-transparent transition-[width] duration-200 ease-linear group-data-[collapsible=offcanvas]:w-0 group-data-[side=right]:rotate-180 group-data-[collapsible=icon]:w-(--sidebar-width-icon)"></div><div data-slot="sidebar-container" class="fixed inset-y-0 z-10 hidden h-svh transition-[left,right,width] duration-200 ease-linear md:flex left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)] group-data-[collapsible=icon]:w-(--sidebar-width-icon) group-data-[side=left]:border-r group-data-[side=right]:border-l w-64"><div data-sidebar="sidebar" data-slot="sidebar-inner" class="bg-sidebar group-data-[variant=floating]:border-sidebar-border flex h-full w-full flex-col group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:shadow-sm"><div data-slot="sidebar-content" data-sidebar="content" class="flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden bg-card border-r border-border"><a class="p-4" href="/front_6th/" data-discover="true"><div class="flex items-center space-x-2 mb-6"><div class="w-8 h-8 bg-gradient-primary rounded-lg flex items-center justify-center"><span class="text-white font-bold text-sm">6기</span></div><h4 class="text-lg font-bold text-primary">항해플러스 프론트엔드</h4></div></a><div data-slot="sidebar-group" data-sidebar="group" class="relative flex w-full min-w-0 flex-col p-2"><div data-slot="sidebar-group-label" data-sidebar="group-label" class="ring-sidebar-ring flex h-8 shrink-0 items-center rounded-md text-xs font-medium outline-hidden transition-[margin,opacity] duration-200 ease-linear focus-visible:ring-2 [&amp;&gt;svg]:size-4 [&amp;&gt;svg]:shrink-0 group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0 text-muted-foreground px-4">학습 관리</div><div data-slot="sidebar-group-content" data-sidebar="group-content" class="w-full text-sm"><ul data-slot="sidebar-menu" data-sidebar="menu" class="flex w-full min-w-0 flex-col gap-1 px-2"><li data-slot="sidebar-menu-item" data-sidebar="menu-item" class="group/menu-item relative"><a data-slot="sidebar-menu-button" data-sidebar="menu-button" data-size="default" data-active="false" class="peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left outline-hidden ring-sidebar-ring transition-[width,height,padding] focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-data-[sidebar=menu-action]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:size-8! group-data-[collapsible=icon]:p-2! [&amp;&gt;span:last-child]:truncate [&amp;&gt;svg]:size-4 [&amp;&gt;svg]:shrink-0 hover:bg-sidebar-accent hover:text-sidebar-accent-foreground text-sm h-12 text-foreground hover:bg-secondary hover:text-secondary-foreground rounded-lg transition-all duration-300" href="/front_6th/" data-discover="true"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-users h-5 w-5" aria-hidden="true"><path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"></path><path d="M16 3.128a4 4 0 0 1 0 7.744"></path><path d="M22 21v-2a4 4 0 0 0-3-3.87"></path><circle cx="9" cy="7" r="4"></circle></svg><span class="ml-3">수강생 목록</span></a></li><li data-slot="sidebar-menu-item" data-sidebar="menu-item" class="group/menu-item relative"><a data-slot="sidebar-menu-button" data-sidebar="menu-button" data-size="default" data-active="false" class="peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left outline-hidden ring-sidebar-ring transition-[width,height,padding] focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-data-[sidebar=menu-action]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:size-8! group-data-[collapsible=icon]:p-2! [&amp;&gt;span:last-child]:truncate [&amp;&gt;svg]:size-4 [&amp;&gt;svg]:shrink-0 hover:bg-sidebar-accent hover:text-sidebar-accent-foreground text-sm h-12 text-foreground hover:bg-secondary hover:text-secondary-foreground rounded-lg transition-all duration-300" href="/front_6th/assignments/" data-discover="true"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-book-open h-5 w-5" aria-hidden="true"><path d="M12 7v14"></path><path d="M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z"></path></svg><span class="ml-3">과제 목록</span></a></li></ul></div></div></div></div></div></div><div class="flex-1 min-w-0"><header class="h-12 flex items-center border-b border-border bg-card px-4"><button data-slot="sidebar-trigger" class="inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 size-7 mr-4 text-white" data-sidebar="trigger"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-panel-left" aria-hidden="true"><rect width="18" height="18" x="3" y="3" rx="2"></rect><path d="M9 3v18"></path></svg><span class="sr-only">Toggle Sidebar</span></button><h4 class="text-lg font-semibold "><a href="/front_6th/@Yuyeol/" data-discover="true">Yuyeol<!-- --> 님의 상세페이지</a> ＞ <!-- -->[8팀 정유열] Chapter 3-1. 프론트엔드 테스트 코드</h4></header><main class="p-6"><div><div class="card-wrap"><div data-slot="card" class="card text-card-foreground flex flex-col gap-6 shadow-sm mb-6 p-6 border border-gray-700 bg-gray-800 rounded-lg"><a href="https://github.com/hanghae-plus/front_6th_chapter3-1/pull/12" target="_blank"><div class="flex items-start gap-4"><div class="flex-shrink-0"><svg xmlns="http://www.w3.org/2000/svg" height="32" aria-hidden="true" viewBox="0 0 24 24" width="32" fill="white" class="w-8 h-8"><path d="M12 1C5.923 1 1 5.923 1 12c0 4.867 3.149 8.979 7.521 10.436.55.096.756-.233.756-.522 0-.262-.013-1.128-.013-2.049-2.764.509-3.479-.674-3.699-1.292-.124-.317-.66-1.293-1.127-1.554-.385-.207-.936-.715-.014-.729.866-.014 1.485.797 1.691 1.128.99 1.663 2.571 1.196 3.204.907.096-.715.385-1.196.701-1.471-2.448-.275-5.005-1.224-5.005-5.432 0-1.196.426-2.186 1.128-2.956-.111-.275-.496-1.402.11-2.915 0 0 .921-.288 3.024 1.128a10.193 10.193 0 0 1 2.75-.371c.936 0 1.871.123 2.75.371 2.104-1.43 3.025-1.128 3.025-1.128.605 1.513.221 2.64.111 2.915.701.77 1.127 1.747 1.127 2.956 0 4.222-2.571 5.157-5.019 5.432.399.344.743 1.004.743 2.035 0 1.471-.014 2.654-.014 3.025 0 .289.206.632.756.522C19.851 20.979 23 16.854 23 12c0-6.077-4.922-11-11-11Z"></path></svg></div><div class="flex-1 min-w-0"><div class="flex items-center gap-2 mb-2"><h3 class="text-lg font-semibold text-white truncate">[8팀 정유열] Chapter 3-1. 프론트엔드 테스트 코드</h3></div><div class="flex items-center gap-4 text-xs text-gray-500"><span>by <!-- -->Yuyeol</span><span>2025. 8. 16.</span></div></div></div></a></div></div><div class="overflow-auto"><div data-color-mode="dark" class="wmde-markdown wmde-markdown-color p-6 max-w-full" style="word-wrap:break-word;overflow-wrap:break-word"><h1 id="hard"><a class="anchor" aria-hidden="true" tabindex="-1" href="#hard"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>HARD</h1>
<h2 id="7주차-과제-체크포인트"><a class="anchor" aria-hidden="true" tabindex="-1" href="#7주차-과제-체크포인트"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>7주차 과제 체크포인트</h2>
<h3 id="기본과제"><a class="anchor" aria-hidden="true" tabindex="-1" href="#기본과제"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>기본과제</h3>
<ul class="contains-task-list">
<li class="task-list-item"><input type="checkbox" disabled="" checked=""/> 총 11개의 파일, 115개의 단위 테스트를 무사히 작성하고 통과시킨다.</li>
</ul>
<h4 id="질문"><a class="anchor" aria-hidden="true" tabindex="-1" href="#질문"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>질문</h4>
<blockquote>
<p>Q1. handlersUtils: 이벤트는 생성, 수정 되면 fetch를 다시 해 상태를 업데이트 합니다. 이를 위한 제어가 필요할 것 같은데요. 어떻게 작성해야 테스트가 병렬로 돌아도 안정적이게 동작할까요?</p>
</blockquote>
<p>여러 테스트가 동시에 실행될 때, 한 테스트에서 이벤트 추가/수정 등 액션을 하면 다른 테스트에도 영향을 줘서 테스트가
깨질 수 있으니 개별 테스트가 독립적으로 동작해야하는 점을 말씀하시는 것 같습니다.</p>
<p>MSW는 메모리상에서 가짜 서버를 만들어 실제 네트워크 요청을 가로채는데, 이때 <code>mockEvents</code> 배열이 모든 테스트가 공유하는 전역 상태가 되어 버립니다.</p>
<p>예를들어:</p>
<ul>
<li>테스트 A: 이벤트 1개 추가 &gt; 총 2개 기대</li>
<li>테스트 B: 이벤트 1개 삭제 &gt; 총 0개 기대</li>
</ul>
<p>동시에 실행되면:</p>
<ul>
<li>테스트 A가 추가한 이벤트를 테스트 B가 보게 되어 예상과 다른 결과가 나옴</li>
</ul>
<p>해결하려면:</p>
<ol>
<li>테스트마다 데이터 초기화</li>
</ol>
<pre class="language-typescript"><code class="language-typescript code-highlight"><span class="code-line"><span class="token comment">// handlers.ts - events.json을 직접 사용</span>
</span><span class="code-line"><span class="token keyword">let</span> mockEvents <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span>events<span class="token punctuation">]</span> <span class="token keyword">as</span> Event<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// 원본 복사본</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">resetMockEvents</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">  mockEvents <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span>events<span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// 새로운 복사본 생성</span>
</span><span class="code-line"><span class="token punctuation">}</span><span class="token punctuation">;</span>
</span></code><div class="copied" data-code="// handlers.ts - events.json을 직접 사용
let mockEvents = [...events] as Event[]; // 원본 복사본

export const resetMockEvents = () =&gt; {
  mockEvents = [...events]; // 새로운 복사본 생성
};
"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
<pre class="language-typescript"><code class="language-typescript code-highlight"><span class="code-line"><span class="token function">beforeEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token comment">// events.json의 원본 상태로 eventData를 복구</span>
</span><span class="code-line">  <span class="token function">resetMockEvents</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></code><div class="copied" data-code="beforeEach(() =&gt; {
  // events.json의 원본 상태로 eventData를 복구
  resetMockEvents();
});
"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
<ol start="2">
<li>테스트 후 정리</li>
</ol>
<pre class="language-typescript"><code class="language-typescript code-highlight"><span class="code-line"><span class="token function">afterEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token comment">// handlersUtils에 구현된 setupMockHandlerCreation()와 같은 요청을 server.use로 사용했을 때, 그 흔적을 지움</span>
</span><span class="code-line">  server<span class="token punctuation">.</span><span class="token function">resetHandlers</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token comment">// mock 함수들의 호출 기록 제거</span>
</span><span class="code-line">  vi<span class="token punctuation">.</span><span class="token function">clearAllMocks</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></code><div class="copied" data-code="afterEach(() =&gt; {
  // handlersUtils에 구현된 setupMockHandlerCreation()와 같은 요청을 server.use로 사용했을 때, 그 흔적을 지움
  server.resetHandlers();
  // mock 함수들의 호출 기록 제거
  vi.clearAllMocks();
});
"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
<ol start="3">
<li>실제 적용 예시</li>
</ol>
<pre class="language-typescript"><code class="language-typescript code-highlight"><span class="code-line"><span class="token function">beforeEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token function">resetMockEvents</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token function">afterEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">  server<span class="token punctuation">.</span><span class="token function">resetHandlers</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">  vi<span class="token punctuation">.</span><span class="token function">clearAllMocks</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token function">it</span><span class="token punctuation">(</span><span class="token string">&#x27;실패 테스트&#x27;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token function">setupMockHandlerCreation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// server.use()로 임시 404 핸들러 설정</span>
</span><span class="code-line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></code><div class="copied" data-code="beforeEach(() =&gt; {
  resetMockEvents();
});

afterEach(() =&gt; {
  server.resetHandlers();
  vi.clearAllMocks();
});

it(&#x27;실패 테스트&#x27;, () =&gt; {
  setupMockHandlerCreation(); // server.use()로 임시 404 핸들러 설정
});
"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
<p>핵심 원리:</p>
<ul>
<li>MSW의 <code>server.use()</code>는 기존 핸들러를 임시적으로 덮어씀</li>
<li>테스트마다 <code>resetHandlers()</code>로 원래 핸들러(handlers.ts)의 동작으로 리셋</li>
<li><code>resetMockEvents()</code>로 매번 동일한 초기 데이터 사용</li>
</ul>
<p>결과: 테스트 실행 순서나 병렬 실행 여부에 관계없이 각 테스트가 격리된 환경에서 일관된 결과를 얻습니다.</p>
<blockquote>
<p>Q2. 테스트를 독립적으로 구동시키기 위해 작성했던 설정들을 소개해주세요.</p>
</blockquote>
<p>Q1에서 설명한 부분이 포함됩니다.</p>
<ul>
<li><code>resetMockEvents()</code>로 테스트마다 events.json 원본 상태 복원</li>
<li><code>server.use()</code> + <code>setupMockHandlerCreation()</code> 등으로 테스트별 임시 핸들러 설정</li>
<li><code>server.resetHandlers()</code>와 <code>vi.clearAllMocks()</code>로 핸들러 사용 후 정리</li>
</ul>
<p>그리고 MSW와 Express로 테스트환경을 실제 사용환경의 분리하여 테스트 독립성을 확보하였습니다.</p>
<p><strong>환경 분리에 대한 시행착오 과정:</strong></p>
<p>처음에는 MSW와 Express가 서로 다른 역할을 한다는 것을 전혀 몰랐습니다. 당연히 테스트에 MSW가 필요하니까 개발환경에서도 같이 쓰는거 아닌가? 라고 생각했던 것 같습니다.</p>
<p>그래서 main.tsx에서 개발환경에도 MSW를 활성화했습니다.</p>
<pre class="language-typescript"><code class="language-typescript code-highlight"><span class="code-line"><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">import</span><span class="token punctuation">.</span>meta<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">DEV</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">&#x27;./__mocks__/browser.ts&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">{</span> worker <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">    worker<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code><div class="copied" data-code="if (import.meta.env.DEV) {
  import(&#x27;./__mocks__/browser.ts&#x27;).then(({ worker }) =&gt; {
    worker.start();
  });
}
"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
<p>당시 생각은 이랬습니다:
개발할 때도 백엔드 API가 없을테니 MSW로 모킹해주는 게 맞다.</p>
<p>실제 애플리케이션에서 이벤트 삭제를 테스트하다가 이상한 현상을 발견했습니다.</p>
<p>브라우저 콘솔에서 이런 로그가 나타났습니다:</p>
<pre><code class="code-highlight"><span class="code-line">[MSW] Warning: intercepted a request without a matching request handler:
</span><span class="code-line">• GET /
</span><span class="code-line">
</span><span class="code-line">[MSW] 21:49:33 DELETE /api/events/2b7545a6-ebee-426c-b906-2329bc8d62bd (204 No Content)
</span><span class="code-line">[MSW] 21:49:33 GET /api/events (200 OK)
</span></code><div class="copied" data-code="[MSW] Warning: intercepted a request without a matching request handler:
• GET /

[MSW] 21:49:33 DELETE /api/events/2b7545a6-ebee-426c-b906-2329bc8d62bd (204 No Content)
[MSW] 21:49:33 GET /api/events (200 OK)
"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
<p>분명 Express 서버로 요청을 보냈는데 MSW가 모든 요청을 가로채고 있었고, realEvents.json의 여러 아이템이 한번에 삭제되어버려서 무슨 일인가 싶었습니다.</p>
<p>구조를 더 자세히 파악해보고 알게 된 것:</p>
<ul>
<li>Express 서버가 port 3000에서 실행</li>
<li>realEvents.json 파일에 실제 CRUD 작업이 반영</li>
<li>MSW는 로컬 개발환경과는 별개의 용도로 사용</li>
</ul>
<p><strong>MSW는 어디에 사용되어야 하나?</strong></p>
<ul>
<li>MSW가 네트워크 레벨에서 요청을 가로채서 모킹</li>
<li>Express 서버는 아예 실행되지 않음 (내가 처음에 예상한것과 달랐던 지점)</li>
<li>events.json의 고정 데이터로 격리된 테스트에 사용</li>
</ul>
<p>MSW는 네트워크 요청 자체를 가로채기 때문에, 테스트 환경에서는 실제 Express 서버가 사용되지 않았다는 점을 깨닫는게 중요했던것 같습니다.</p>
<p>정리하자면, 각 환경의 역할이 완전히 다름을 이해했습니다:</p>
<ul>
<li><strong>Express</strong>: 실제 파일 시스템과 상호작용하는 진짜 서버</li>
<li><strong>MSW</strong>: 네트워크 레벨에서 가짜 응답을 주입하는 모킹 도구</li>
</ul>
<p>이런 시행착오를 통해 테스트와 실제 환경을 명확히 분리한다는 개념과 그 방법에 대해 좀 더 자세히 이해하고 구현해 볼 수 있었습니다.</p>
<h3 id="심화-과제"><a class="anchor" aria-hidden="true" tabindex="-1" href="#심화-과제"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>심화 과제</h3>
<ul class="contains-task-list">
<li class="task-list-item"><input type="checkbox" disabled="" checked=""/> App 컴포넌트 적절한 단위의 컴포넌트, 훅, 유틸 함수로 분리했는가?</li>
<li class="task-list-item"><input type="checkbox" disabled="" checked=""/> 해당 모듈들에 대한 적절한 테스트를 5개 이상 작성했는가?</li>
</ul>
<h2 id="과제-셀프회고"><a class="anchor" aria-hidden="true" tabindex="-1" href="#과제-셀프회고"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>과제 셀프회고</h2>
<h3 id="테스트코드를-처음-접해본-뉴비의-이번-과제에-대한-느낀점"><a class="anchor" aria-hidden="true" tabindex="-1" href="#테스트코드를-처음-접해본-뉴비의-이번-과제에-대한-느낀점"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>테스트코드를 처음 접해본 뉴비의 이번 과제에 대한 느낀점</h3>
<p>테스트코드 작성을 직접해본 것이 처음이었기 때문에 거의 모든 것이 새로운 경험이었습니다.</p>
<p><strong>이 프로젝트를 통해 배운 것... 이라기보단 경험해본 것들</strong></p>
<ul>
<li>Vitest와 Testing Library를 활용한 React 컴포넌트 테스트 방법</li>
<li>MSW를 사용한 API 모킹과 네트워크 요청 가로채기</li>
<li>beforeEach, afterEach를 통한 테스트 환경 초기화와 정리로 병렬 환경에서 테스트 독립성 유지</li>
<li>describe, it 구조로 테스트 케이스를 체계적으로 구성하는 방법</li>
<li>render, fireEvent, waitFor 등 Testing Library의 핵심 API 사용법</li>
<li>훅 테스트를 위한 renderHook과 act 사용법</li>
<li>순수함수 테스트와 통합 테스트의 차이점 체감</li>
</ul>
<p>물론 테스트 describe와 it은 거의 미리 짜져있었지만, 실제 구현하면서 각 테스트가 왜 필요한지 이해할 수 있었습니다.</p>
<p><strong>테스트 작성의 일관성과 범위 설정이 어려운것 같다</strong></p>
<p>훅과 순수함수를 각각 테스트할 때 중복으로 테스트하게 되는 경우가 많았습니다.</p>
<p>예를 들어 <code>easy.timeValidation.spec.ts</code>에서 <code>validateTime</code> 함수에 대한 상세 테스트를 진행했는데, 다른 테스트 <code>useEventTimeManager.spec.ts</code>에서도 비슷한 시간 검증 로직을 또 테스트하게 되는 상황이었습니다:</p>
<pre class="language-typescript"><code class="language-typescript code-highlight"><span class="code-line"><span class="token comment">// easy.timeValidation.spec.ts에서 검증에 대한 상세 테스트를 진행중이므로 여기서는 생략했음.</span>
</span><span class="code-line">describe<span class="token punctuation">.</span><span class="token function">skip</span><span class="token punctuation">(</span><span class="token string">&#x27;validateTime&#x27;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token function">it</span><span class="token punctuation">(</span><span class="token string">&#x27;올바른 시간일 때 에러가 없다&#x27;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token function">it</span><span class="token punctuation">(</span><span class="token string">&#x27;시작 시간이 종료 시간보다 늦을 때 에러가 발생한다&#x27;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token function">it</span><span class="token punctuation">(</span><span class="token string">&#x27;빈 값일 때 에러가 없다&#x27;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></code><div class="copied" data-code="// easy.timeValidation.spec.ts에서 검증에 대한 상세 테스트를 진행중이므로 여기서는 생략했음.
describe.skip(&#x27;validateTime&#x27;, () =&gt; {
  it(&#x27;올바른 시간일 때 에러가 없다&#x27;, () =&gt; {});
  it(&#x27;시작 시간이 종료 시간보다 늦을 때 에러가 발생한다&#x27;, () =&gt; {});
  it(&#x27;빈 값일 때 에러가 없다&#x27;, () =&gt; {});
});
"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
<p>이런 경우 어떤 기준으로 테스트를 분리해야 할지, 어느 레벨에서 무엇을 테스트해야 하는지에 대한 명확한 기준이 필요하다는 생각이 들었습니다.</p>
<p><strong>테스트 품질에 대한 아쉬움은 어쩔수 없는듯</strong></p>
<p>유효하고 유지보수 가능한 테스트를 작성했다는 자신감이 전혀 없습니다.
그저 요구사항에 맞춰 &#x27;테스트를 작성할 수 있었다&#x27; 정도의 수준으로 과제를 마친 것 같아서 아쉽습니다. 하지만 이런 부분은 시간을 들여가며 경험을 쌓아야 할 영역이 아닐까 하는 생각도 들기 때문에 꾸준히 연습해 나가고 싶습니다.</p>
<p><strong>API 모킹의 복잡성 체감</strong></p>
<p>API 모킹을 병행한 테스트 코드는 실제와 유사한 환경의 모킹이 필요하다보니, 실제 프로젝트에서 구축한다면 상당히 까다로울 것 같다는 생각이 들었습니다.</p>
<p>이번 과제에서 Express 사용과 테스트용 handlers와 handlersUtils로 MSW를 통한 events.json 환경 분리를 통해 원리들을 이해해 보녀서도 실제 프로덕트에서는 얼마나 더 많은 것들을 고려해야할까? 라는 생각이 들었습니다.</p>
<p><strong>되도록이면 AI 사용하지 말라고 했지만</strong></p>
<p>AI 사용을 지양하라고 하셨지만, 그러지 못했습니다.
코파일럿이 궁금하지 않아도 자꾸 힌트를 주었고, 과제 분량이 많다보니 테스트 코드를 작성해본 경험이 없어 더더욱 시간이 촉박해지면서 AI에 의존하는 비중이 점점 커졌습니다.
심화 파트를 할 시점에는 이미 내가 AI를 조종하는 것이 아니라, AI가 나를 조종하고 있는 상황이 펼쳐진 것 같은 아이러니한 상황이 펼쳐졌습니다.
그래도 중요한것은 테스트의 흐름을 이해하고 AI를 통해 올바른 테스트를 작성하기 위해 집중했다는 점입니다.</p>
<h3 id="코드-품질"><a class="anchor" aria-hidden="true" tabindex="-1" href="#코드-품질"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>코드 품질</h3>
<p>이번 과제에 시간을 많이 할애하지 못하기도 했고, 테스트를 작성하는데에도 시간이 부족해서 코드 품질을 제대로 챙기지 못한 것 같습니다.</p>
<p>테스트 설명(it)을 읽으면서 실제 구현과 대조해보니 이해가 되지 않는 부분들이 많았습니다. 그래서 기능의 실제 동작에 맞춰 명확하게 수정하려고 노력했습니다.</p>
<p><strong>애매한 설명을 구체적으로 개선:</strong></p>
<pre class="language-typescript"><code class="language-typescript code-highlight"><span class="code-line"><span class="token comment">// 기존: 무엇을 &quot;적절히&quot; 처리하는지 모호</span>
</span><span class="code-line"><span class="token function">it</span><span class="token punctuation">(</span><span class="token string">&#x27;유효하지 않은 월에 대해 적절히 처리한다&#x27;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment">// 개선: 실제 반환값까지 명시 + 함수 로직 수정(ex. 월이 13이면 -1을 반환하도록)</span>
</span><span class="code-line"><span class="token function">it</span><span class="token punctuation">(</span><span class="token string">&#x27;유효하지 않은 월에 대해 -1을 반환한다&#x27;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token keyword">const</span> daysInMonth <span class="token operator">=</span> <span class="token function">getDaysInMonth</span><span class="token punctuation">(</span><span class="token number">2024</span><span class="token punctuation">,</span> <span class="token number">13</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token function">expect</span><span class="token punctuation">(</span>daysInMonth<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBe</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></code><div class="copied" data-code="// 기존: 무엇을 &quot;적절히&quot; 처리하는지 모호
it(&#x27;유효하지 않은 월에 대해 적절히 처리한다&#x27;, () =&gt; {});

// 개선: 실제 반환값까지 명시 + 함수 로직 수정(ex. 월이 13이면 -1을 반환하도록)
it(&#x27;유효하지 않은 월에 대해 -1을 반환한다&#x27;, () =&gt; {
  const daysInMonth = getDaysInMonth(2024, 13);
  expect(daysInMonth).toBe(-1);
});
"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
<pre class="language-typescript"><code class="language-typescript code-highlight"><span class="code-line"><span class="token comment">// 기존: &quot;주중&quot;이라는 표현이 애매</span>
</span><span class="code-line"><span class="token function">it</span><span class="token punctuation">(</span><span class="token string">&#x27;주중의 날짜(수요일)에 대해 올바른 주의 날짜들을 반환한다&#x27;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment">// 개선: 구체적인 입력과 기대 결과 명시</span>
</span><span class="code-line"><span class="token function">it</span><span class="token punctuation">(</span><span class="token string">&#x27;수요일에 해당하는 날짜를 입력했을때 그 주의 일~토까지의 날짜를 반환한다&#x27;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token keyword">const</span> wednesday <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token number">2024</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token keyword">const</span> weekDates <span class="token operator">=</span> <span class="token function">getWeekDates</span><span class="token punctuation">(</span>wednesday<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token function">expectValidWeekDates</span><span class="token punctuation">(</span>weekDates<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></code><div class="copied" data-code="// 기존: &quot;주중&quot;이라는 표현이 애매
it(&#x27;주중의 날짜(수요일)에 대해 올바른 주의 날짜들을 반환한다&#x27;, () =&gt; {});

// 개선: 구체적인 입력과 기대 결과 명시
it(&#x27;수요일에 해당하는 날짜를 입력했을때 그 주의 일~토까지의 날짜를 반환한다&#x27;, () =&gt; {
  const wednesday = new Date(2024, 0, 3);
  const weekDates = getWeekDates(wednesday);
  expectValidWeekDates(weekDates);
});
"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
<p><strong>통합테스트 중복 로직을 커스텀 액션으로 분리:</strong></p>
<p>통합테스트를 작성하다보니 이벤트 폼 입력, 목록에서 이벤트 검증, 콤보박스 선택 등 동일한 패턴이 계속 반복되었습니다.</p>
<p>그래서 이런 반복 로직들을 재사용 가능한 헬퍼 함수 파일<code>medium.integration.utils.ts</code>로 분리했습니다:</p>
<pre class="language-typescript"><code class="language-typescript code-highlight"><span class="code-line"><span class="token comment">// 이벤트 폼 입력을 한 번에 처리</span>
</span><span class="code-line"><span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">fillEventForm</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span>user<span class="token punctuation">,</span> eventData<span class="token punctuation">,</span> shouldClear <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token keyword">const</span> fieldMappings <span class="token operator">=</span> <span class="token punctuation">[</span>
</span><span class="code-line">    <span class="token punctuation">{</span> field<span class="token operator">:</span> <span class="token string">&#x27;제목&#x27;</span><span class="token punctuation">,</span> value<span class="token operator">:</span> eventData<span class="token punctuation">.</span>title <span class="token punctuation">}</span><span class="token punctuation">,</span>
</span><span class="code-line">    <span class="token punctuation">{</span> field<span class="token operator">:</span> <span class="token string">&#x27;날짜&#x27;</span><span class="token punctuation">,</span> value<span class="token operator">:</span> eventData<span class="token punctuation">.</span>date <span class="token punctuation">}</span><span class="token punctuation">,</span>
</span><span class="code-line">    <span class="token comment">// ...</span>
</span><span class="code-line">  <span class="token punctuation">]</span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token punctuation">{</span> field<span class="token punctuation">,</span> value <span class="token punctuation">}</span> <span class="token keyword">of</span> fieldMappings<span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token keyword">const</span> element <span class="token operator">=</span> screen<span class="token punctuation">.</span><span class="token function">getByLabelText</span><span class="token punctuation">(</span>field<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">    <span class="token keyword">if</span> <span class="token punctuation">(</span>shouldClear<span class="token punctuation">)</span> <span class="token keyword">await</span> user<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span>element<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">    <span class="token keyword">await</span> user<span class="token punctuation">.</span><span class="token function">type</span><span class="token punctuation">(</span>element<span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token punctuation">}</span>
</span><span class="code-line"><span class="token punctuation">}</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment">// 이벤트 목록에서 데이터 검증을 한 번에 처리</span>
</span><span class="code-line"><span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">verifyEventInList</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span>eventList<span class="token punctuation">,</span> eventData<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token keyword">await</span> <span class="token function">within</span><span class="token punctuation">(</span>eventList<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">findByText</span><span class="token punctuation">(</span>eventData<span class="token punctuation">.</span>title<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token function">expect</span><span class="token punctuation">(</span><span class="token function">within</span><span class="token punctuation">(</span>eventList<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getByText</span><span class="token punctuation">(</span>eventData<span class="token punctuation">.</span>date<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBeInTheDocument</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token comment">// ...</span>
</span><span class="code-line"><span class="token punctuation">}</span><span class="token punctuation">;</span>
</span></code><div class="copied" data-code="// 이벤트 폼 입력을 한 번에 처리
export const fillEventForm = async (user, eventData, shouldClear = false) =&gt; {
  const fieldMappings = [
    { field: &#x27;제목&#x27;, value: eventData.title },
    { field: &#x27;날짜&#x27;, value: eventData.date },
    // ...
  ];
  for (const { field, value } of fieldMappings) {
    const element = screen.getByLabelText(field);
    if (shouldClear) await user.clear(element);
    await user.type(element, value);
  }
};

// 이벤트 목록에서 데이터 검증을 한 번에 처리
export const verifyEventInList = async (eventList, eventData) =&gt; {
  await within(eventList).findByText(eventData.title);
  expect(within(eventList).getByText(eventData.date)).toBeInTheDocument();
  // ...
};
"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
<!-- -->
<h3 id="과제-피드백"><a class="anchor" aria-hidden="true" tabindex="-1" href="#과제-피드백"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>과제 피드백</h3>
<ul>
<li>이번 과제는 하드 기준으로는 분량 자체가 많게 느껴졌습니다. 통합테스트까지 완료하면서 충분히 배가 부르다 싶었지만, 리팩토링과, 거기서 뽑아낸 컴포넌트와 로직들도 테스트를 추가해줘야 해서 예상보다 완성한 과제를 다듬고 복기해볼 여유가 없었던 것 같습니다.</li>
</ul>
<!-- -->
<h2 id="리뷰-받고-싶은-내용"><a class="anchor" aria-hidden="true" tabindex="-1" href="#리뷰-받고-싶은-내용"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>리뷰 받고 싶은 내용</h2>
<p>MSW handlers와 handlersUtils의 역할을 잘 분리한건지 잘 모르겠습니다.</p>
<ul>
<li><code>handlers.ts</code>: 기본적으로는 성공하는 API 응답이 필요 (대부분의 테스트용)</li>
<li><code>handlersUtils.ts</code>: 특정 테스트에서만 API 실패 상황을 테스트해야 함 (에러 처리 검증용)</li>
</ul>
<p>아래처럼 각각을 작성했는데요:</p>
<pre class="language-typescript"><code class="language-typescript code-highlight"><span class="code-line"><span class="token comment">// handlers.ts - 성공 케이스만 처리</span>
</span><span class="code-line"><span class="token keyword">export</span> <span class="token keyword">const</span> handlers <span class="token operator">=</span> <span class="token punctuation">[</span>
</span><span class="code-line">  http<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">&#x27;/api/events&#x27;</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> request <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token keyword">const</span> newEvent <span class="token operator">=</span> <span class="token keyword">await</span> request<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">    <span class="token keyword">return</span> HttpResponse<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token string">&#x27;123&#x27;</span><span class="token punctuation">,</span> <span class="token operator">...</span>newEvent <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> status<span class="token operator">:</span> <span class="token number">201</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
</span><span class="code-line"><span class="token punctuation">]</span><span class="token punctuation">;</span>
</span></code><div class="copied" data-code="// handlers.ts - 성공 케이스만 처리
export const handlers = [
  http.post(&#x27;/api/events&#x27;, async ({ request }) =&gt; {
    const newEvent = await request.json();
    return HttpResponse.json({ id: &#x27;123&#x27;, ...newEvent }, { status: 201 });
  }),
];
"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
<pre class="language-typescript"><code class="language-typescript code-highlight"><span class="code-line"><span class="token comment">// handlersUtils.ts - 특정 테스트에서 에러 상황 테스트용</span>
</span><span class="code-line"><span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">setupMockHandlerCreation</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token comment">// 기존 성공 핸들러를 임시로 404 에러 핸들러로 교체</span>
</span><span class="code-line">  server<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>http<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">&#x27;/api/events&#x27;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">new</span> <span class="token class-name">HttpResponse</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> status<span class="token operator">:</span> <span class="token number">404</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token punctuation">}</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment">// 테스트에서 사용</span>
</span><span class="code-line"><span class="token function">it</span><span class="token punctuation">(</span><span class="token string">&#x27;API 실패시 에러 메시지를 표시한다&#x27;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token function">setupMockHandlerCreation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 이 테스트에서만 404 에러 발생</span>
</span><span class="code-line">  <span class="token comment">// ... 테스트 로직</span>
</span><span class="code-line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></code><div class="copied" data-code="// handlersUtils.ts - 특정 테스트에서 에러 상황 테스트용
export const setupMockHandlerCreation = () =&gt; {
  // 기존 성공 핸들러를 임시로 404 에러 핸들러로 교체
  server.use(http.post(&#x27;/api/events&#x27;, () =&gt; new HttpResponse(null, { status: 404 })));
};

// 테스트에서 사용
it(&#x27;API 실패시 에러 메시지를 표시한다&#x27;, () =&gt; {
  setupMockHandlerCreation(); // 이 테스트에서만 404 에러 발생
  // ... 테스트 로직
});
"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
<p>handlers에서 저처럼 성공케이스만 처리하는게 아니라 api의 에러케이스를 모두 다루는게 맞는건지,
그게 맞다면 handlersUtils의 에러케이스와 중복이 되는데 원래 그게 맞는것인지 궁금합니다.</p>
<p>테스트 코드를 작성해보면서 궁금한 것이 있어서 질문도 남겨봅니다.</p>
<p>질문1:
테스트를 작성하다보니 단위테스트에서 이미 검증한 로직을 통합테스트에서 다시 검증하게 되는 경우가 있었습니다.
테스트를 단위테스트와 통합테스트 모두에 작성하게 될 경우 기능 수정 시 여러 곳을 동시에 수정해야 하는 유지보수 부담을 만들지 않을까 라는 생각이 듭니다.</p>
<p>그냥 일차원적으로 생각해보면</p>
<ul>
<li>단위테스트: 비즈니스 로직의 상세한 검증</li>
<li>통합테스트: 전체 흐름과 컴포넌트 간 상호작용 검증 (비즈니스 로직은 더이상 검증하지 않음)</li>
</ul>
<p>이런 식으로 분리하면 되지않나? 라는 생각이 들지만 실무에서는 중복을 감수하면서도 안전한 테스트를 만드는 경우가 있는지 궁금합니다.</p>
<p>질문2:
케이스에따라 차이가 클 지 모르겠지만, 작은 규모의 서비스를 운영하는 스타트업의 경우 테스트가 전혀 없는 기존 프로젝트에 테스트를 도입할 때, 리소스가 제한된 상황에서 &#x27;최소한 이것만은 테스트하는 것을 권장한다&#x27;는 기준이 있을까요?
또는 도입을 추천하는지 아닌지도 궁금합니다.</p>
</div></div><div class="overflow-auto mt-9"><div data-color-mode="dark" class="wmde-markdown wmde-markdown-color p-6 max-w-full" style="word-wrap:break-word;overflow-wrap:break-word"><h2 id="과제-피드백"><a class="anchor" aria-hidden="true" tabindex="-1" href="#과제-피드백"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>과제 피드백</h2>
<p>안녕하세요 유열님! 7주차 과제 잘 진행해주셨네요 ㅎㅎ 고생하셨씁니다!
MSW에 대해 깊은 고찰(?)을 해보셨군요 ㅋㅋㅋ 이렇게 하나씩 알아가는거죠!</p>
<blockquote>
<p>AI 사용을 지양하라고 하셨지만, 그러지 못했습니다. 코파일럿이 궁금하지 않아도 자꾸 힌트를 주었고, 과제 분량이 많다보니 테스트 코드를 작성해본 경험이 없어 더더욱 시간이 촉박해지면서 AI에 의존하는 비중이 점점 커졌습니다. 심화 파트를 할 시점에는 이미 내가 AI를 조종하는 것이 아니라, AI가 나를 조종하고 있는 상황이 펼쳐진 것 같은 아이러니한 상황이 펼쳐졌습니다. 그래도 중요한것은 테스트의 흐름을 이해하고 AI를 통해 올바른 테스트를 작성하기 위해 집중했다는 점입니다.</p>
</blockquote>
<p>사실 AI의 등장 이후에 개발자들이 제일 큰 도움을 받는 영역이 테스트라고 생각해요. 떼어내고 싶으도 떼어내기가 힘든 구간이죠 ㅎㅎ 잘 써보는것도 좋은 시도라고 생각합니다!</p>
<blockquote>
<p>MSW handlers와 handlersUtils의 역할을 잘 분리한건지 잘 모르겠습니다. handlers에서 저처럼 성공케이스만 처리하는게 아니라 api의 에러케이스를 모두 다루는게 맞는건지, 그게 맞다면 handlersUtils의 에러케이스와 중복이 되는데 원래 그게 맞는것인지 궁금합니다.</p>
</blockquote>
<p>기본적으로 성공케이스를 반환하도록 하고, handlerUtils를 통해 특정 상황에서 오류 케이스에 대한 처리가 필요하다면 이를 만들어서 사용하는거죠 ㅎㅎ 잘 진행해주셨습니다!</p>
<p>아 그리고 테스트 데이터를 독립적으로 사용할 때에도 이용해볼 수 있을 것 같아요. 기본 설정으로 만들어놓은 테스트 데이터를 사용하는게 아닌 특적 테스트에서만 필요한 데이터를 만들어서 handlerUtils에 넘겨준 다음 이를 사용하도록 하는거죠.</p>
<blockquote>
<p>테스트를 작성하다보니 단위테스트에서 이미 검증한 로직을 통합테스트에서 다시 검증하게 되는 경우가 있었습니다. 테스트를 단위테스트와 통합테스트 모두에 작성하게 될 경우 기능 수정 시 여러 곳을 동시에 수정해야 하는 유지보수 부담을 만들지 않을까 라는 생각이 듭니다. 그냥 일차원적으로 생각해보면
단위테스트: 비즈니스 로직의 상세한 검증 / 통합테스트: 전체 흐름과 컴포넌트 간 상호작용 검증 (비즈니스 로직은 더이상 검증하지 않음) 이런 식으로 분리하면 되지않나? 라는 생각이 들지만 실무에서는 중복을 감수하면서도 안전한 테스트를 만드는 경우가 있는지 궁금합니다.</p>
</blockquote>
<p>말씀해주신 것 처럼 진행해주셔도 좋을 것 같아요! 그치만 중복을 없애려는 노력이 중복을 허용하고 유지보수하는 노력이 더 저렴할 때도 많답니다 ㅋㅋ
저는 테스트가 결국 &quot;문제를 빠르게 발견하기 위한 수단&quot;이라고 생각해요. 이에 대한 조건만 잘 충족할 수 있다면 어떤 방식이든 크게 중요하지 않다는 입장입니다.</p>
<blockquote>
<p>케이스에따라 차이가 클 지 모르겠지만, 작은 규모의 서비스를 운영하는 스타트업의 경우 테스트가 전혀 없는 기존 프로젝트에 테스트를 도입할 때, 리소스가 제한된 상황에서 &#x27;최소한 이것만은 테스트하는 것을 권장한다&#x27;는 기준이 있을까요? 또는 도입을 추천하는지 아닌지도 궁금합니다.</p>
</blockquote>
<p>적어도 여기저기서 많이 참조하고 많이 쓰이는 유틸함수에 대해서는 테스트를 작성하면 좋답니다 ㅎㅎ 라이브러리 성격을 가지고 있는 것들이요!
가령 우리는 리액트를 사용하고 있는데, 리액트라는 라이브러리를 의존하는 프로젝트가 많기 때문에 변화의 여파가 굉장히 커요. 이런 경우에는 테스트가 필수겠죠?</p>
<p>마찬가지로 디자인 시스템 내부에서 쓰이는 UI 인터랙션 로직에 대해서도 테스트가 필요할 수 있고... 그렇습니다.
그리고 자주 변경되는 로직에 대해서는 테스트를 작성하는게 부담이 될 수 있어요. 유지보수해야할게 많아지고 변경이 자주 발생하기 때문에 테스트를 작성해봤자 큰 의미가 없을 수 있달까..!?</p>
<p>그리고 사실 이제 AI가 있어서 테스트 작성 비용이 굉장히 저렴해졌어요. 백그라운드로 돌려도 되고, playwright mcp 같은게 있어서 문장으로 정의된 요구사항 혹은 스펙을 토대로 e2e 테스트를 만들 수 있답니다!
결론은... 이런 시대에 테스트를 작성하지 않는건 큰 손해라고 생각해요 ㅋㅋ
가성비 + 효과가 제일 좋은 도구가 되지 않았나!? 라는 입장입니다.</p></div></div><div class="mt-9"></div></div></main></div></div></div></div>
</body>
</html>
