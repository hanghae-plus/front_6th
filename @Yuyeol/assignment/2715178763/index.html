<!doctype html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>항해플러스 프론트엔드 6기 기술블로그</title>
  <link rel="icon" href="/front_6th/favicon.ico"/>
  
  <script type="module" crossorigin src="/front_6th/assets/index-D-trimLw.js"></script>
  <link rel="stylesheet" crossorigin href="/front_6th/assets/index-CfASphmw.css">
</head>
<body>
<div id="root"><div data-slot="sidebar-wrapper" style="--sidebar-width:16rem;--sidebar-width-icon:3rem" class="group/sidebar-wrapper has-data-[variant=inset]:bg-sidebar flex min-h-svh w-full"><div class="min-h-screen flex w-full"><div class="group peer text-sidebar-foreground hidden md:block" data-state="expanded" data-collapsible="" data-variant="sidebar" data-side="left" data-slot="sidebar"><div data-slot="sidebar-gap" class="relative w-(--sidebar-width) bg-transparent transition-[width] duration-200 ease-linear group-data-[collapsible=offcanvas]:w-0 group-data-[side=right]:rotate-180 group-data-[collapsible=icon]:w-(--sidebar-width-icon)"></div><div data-slot="sidebar-container" class="fixed inset-y-0 z-10 hidden h-svh transition-[left,right,width] duration-200 ease-linear md:flex left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)] group-data-[collapsible=icon]:w-(--sidebar-width-icon) group-data-[side=left]:border-r group-data-[side=right]:border-l w-64"><div data-sidebar="sidebar" data-slot="sidebar-inner" class="bg-sidebar group-data-[variant=floating]:border-sidebar-border flex h-full w-full flex-col group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:shadow-sm"><div data-slot="sidebar-content" data-sidebar="content" class="flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden bg-card border-r border-border"><a class="p-4" href="/front_6th/" data-discover="true"><div class="flex items-center space-x-2 mb-6"><div class="w-8 h-8 bg-gradient-primary rounded-lg flex items-center justify-center"><span class="text-white font-bold text-sm">6기</span></div><h4 class="text-lg font-bold text-primary">항해플러스 프론트엔드</h4></div></a><div data-slot="sidebar-group" data-sidebar="group" class="relative flex w-full min-w-0 flex-col p-2"><div data-slot="sidebar-group-label" data-sidebar="group-label" class="ring-sidebar-ring flex h-8 shrink-0 items-center rounded-md text-xs font-medium outline-hidden transition-[margin,opacity] duration-200 ease-linear focus-visible:ring-2 [&amp;&gt;svg]:size-4 [&amp;&gt;svg]:shrink-0 group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0 text-muted-foreground px-4">학습 관리</div><div data-slot="sidebar-group-content" data-sidebar="group-content" class="w-full text-sm"><ul data-slot="sidebar-menu" data-sidebar="menu" class="flex w-full min-w-0 flex-col gap-1 px-2"><li data-slot="sidebar-menu-item" data-sidebar="menu-item" class="group/menu-item relative"><a data-slot="sidebar-menu-button" data-sidebar="menu-button" data-size="default" data-active="false" class="peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left outline-hidden ring-sidebar-ring transition-[width,height,padding] focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-data-[sidebar=menu-action]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:size-8! group-data-[collapsible=icon]:p-2! [&amp;&gt;span:last-child]:truncate [&amp;&gt;svg]:size-4 [&amp;&gt;svg]:shrink-0 hover:bg-sidebar-accent hover:text-sidebar-accent-foreground text-sm h-12 text-foreground hover:bg-secondary hover:text-secondary-foreground rounded-lg transition-all duration-300" href="/front_6th/" data-discover="true"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-users h-5 w-5" aria-hidden="true"><path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"></path><path d="M16 3.128a4 4 0 0 1 0 7.744"></path><path d="M22 21v-2a4 4 0 0 0-3-3.87"></path><circle cx="9" cy="7" r="4"></circle></svg><span class="ml-3">수강생 목록</span></a></li><li data-slot="sidebar-menu-item" data-sidebar="menu-item" class="group/menu-item relative"><a data-slot="sidebar-menu-button" data-sidebar="menu-button" data-size="default" data-active="false" class="peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left outline-hidden ring-sidebar-ring transition-[width,height,padding] focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-data-[sidebar=menu-action]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:size-8! group-data-[collapsible=icon]:p-2! [&amp;&gt;span:last-child]:truncate [&amp;&gt;svg]:size-4 [&amp;&gt;svg]:shrink-0 hover:bg-sidebar-accent hover:text-sidebar-accent-foreground text-sm h-12 text-foreground hover:bg-secondary hover:text-secondary-foreground rounded-lg transition-all duration-300" href="/front_6th/assignments" data-discover="true"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-book-open h-5 w-5" aria-hidden="true"><path d="M12 7v14"></path><path d="M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z"></path></svg><span class="ml-3">과제 목록</span></a></li></ul></div></div></div></div></div></div><div class="flex-1 min-w-0"><header class="h-12 flex items-center border-b border-border bg-card px-4"><button data-slot="sidebar-trigger" class="inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 size-7 mr-4 text-white" data-sidebar="trigger"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-panel-left" aria-hidden="true"><rect width="18" height="18" x="3" y="3" rx="2"></rect><path d="M9 3v18"></path></svg><span class="sr-only">Toggle Sidebar</span></button><h4 class="text-lg font-semibold "><a href="/front_6th/@Yuyeol/" data-discover="true">Yuyeol<!-- --> 님의 상세페이지</a> ＞ <!-- -->[8팀 정유열] Chapter 2-2. 디자인 패턴과 함수형 프로그래밍 </h4></header><main class="p-6"><div><div class="card-wrap"><div data-slot="card" class="card text-card-foreground flex flex-col gap-6 shadow-sm mb-6 p-6 border border-gray-700 bg-gray-800 rounded-lg"><a href="https://github.com/hanghae-plus/front_6th_chapter2-2/pull/12" target="_blank"><div class="flex items-start gap-4"><div class="flex-shrink-0"><svg xmlns="http://www.w3.org/2000/svg" height="32" aria-hidden="true" viewBox="0 0 24 24" width="32" fill="white" class="w-8 h-8"><path d="M12 1C5.923 1 1 5.923 1 12c0 4.867 3.149 8.979 7.521 10.436.55.096.756-.233.756-.522 0-.262-.013-1.128-.013-2.049-2.764.509-3.479-.674-3.699-1.292-.124-.317-.66-1.293-1.127-1.554-.385-.207-.936-.715-.014-.729.866-.014 1.485.797 1.691 1.128.99 1.663 2.571 1.196 3.204.907.096-.715.385-1.196.701-1.471-2.448-.275-5.005-1.224-5.005-5.432 0-1.196.426-2.186 1.128-2.956-.111-.275-.496-1.402.11-2.915 0 0 .921-.288 3.024 1.128a10.193 10.193 0 0 1 2.75-.371c.936 0 1.871.123 2.75.371 2.104-1.43 3.025-1.128 3.025-1.128.605 1.513.221 2.64.111 2.915.701.77 1.127 1.747 1.127 2.956 0 4.222-2.571 5.157-5.019 5.432.399.344.743 1.004.743 2.035 0 1.471-.014 2.654-.014 3.025 0 .289.206.632.756.522C19.851 20.979 23 16.854 23 12c0-6.077-4.922-11-11-11Z"></path></svg></div><div class="flex-1 min-w-0"><div class="flex items-center gap-2 mb-2"><h3 class="text-lg font-semibold text-white truncate">[8팀 정유열] Chapter 2-2. 디자인 패턴과 함수형 프로그래밍 </h3></div><div class="flex items-center gap-4 text-xs text-gray-500"><span>by <!-- -->Yuyeol</span><span>2025. 8. 3.</span></div></div></div></a></div></div><div class="overflow-auto"><div data-color-mode="dark" class="wmde-markdown wmde-markdown-color p-6 max-w-full" style="word-wrap:break-word;overflow-wrap:break-word"><h2 id="과제-링크"><a class="anchor" aria-hidden="true" tabindex="-1" href="#과제-링크"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>과제 링크</h2>
<p><a href="https://yuyeol.github.io/front_6th_chapter2-2/">https://yuyeol.github.io/front_6th_chapter2-2/</a></p>
<h2 id="과제의-핵심취지"><a class="anchor" aria-hidden="true" tabindex="-1" href="#과제의-핵심취지"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>과제의 핵심취지</h2>
<ul>
<li>React의 hook 이해하기</li>
<li>함수형 프로그래밍에 대한 이해</li>
<li>액션과 순수함수의 분리</li>
</ul>
<h2 id="과제에서-꼭-알아가길-바라는-점"><a class="anchor" aria-hidden="true" tabindex="-1" href="#과제에서-꼭-알아가길-바라는-점"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>과제에서 꼭 알아가길 바라는 점</h2>
<ul>
<li>엔티티를 다루는 상태와 그렇지 않은 상태 - cart, isCartFull vs isShowPopup</li>
<li>엔티티를 다루는 컴포넌트와 훅 - CartItemView, useCart(), useProduct()</li>
<li>엔티티를 다루지 않는 컴포넌트와 훅 - Button, useRoute, useEvent 등</li>
<li>엔티티를 다루는 함수와 그렇지 않은 함수 - calculateCartTotal(cart) vs capaitalize(str)</li>
</ul>
<h3 id="기본과제"><a class="anchor" aria-hidden="true" tabindex="-1" href="#기본과제"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>기본과제</h3>
<ul class="contains-task-list">
<li>
<p>Component에서 비즈니스 로직을 분리하기</p>
</li>
<li>
<p>비즈니스 로직에서 특정 엔티티만 다루는 계산을 분리하기</p>
</li>
<li>
<p>뷰데이터와 엔티티데이터의 분리에 대한 이해</p>
</li>
<li>
<p>entities -&gt; features -&gt; UI 계층에 대한 이해</p>
</li>
<li class="task-list-item">
<p><input type="checkbox" disabled="" checked=""/> Component에서 사용되는 Data가 아닌 로직들은 hook으로 옮겨졌나요?</p>
</li>
<li class="task-list-item">
<p><input type="checkbox" disabled="" checked=""/> 주어진 hook의 책임에 맞도록 코드가 분리가 되었나요?</p>
</li>
<li class="task-list-item">
<p><input type="checkbox" disabled="" checked=""/> 계산함수는 순수함수로 작성이 되었나요?</p>
</li>
<li class="task-list-item">
<p><input type="checkbox" disabled="" checked=""/> Component에서 사용되는 Data가 아닌 로직들은 hook으로 옮겨졌나요?</p>
</li>
<li class="task-list-item">
<p><input type="checkbox" disabled="" checked=""/> 주어진 hook의 책임에 맞도록 코드가 분리가 되었나요?</p>
</li>
<li class="task-list-item">
<p><input type="checkbox" disabled="" checked=""/> 계산함수는 순수함수로 작성이 되었나요?</p>
</li>
<li class="task-list-item">
<p><input type="checkbox" disabled="" checked=""/> 특정 Entitiy만 다루는 함수는 분리되어 있나요?</p>
</li>
<li class="task-list-item">
<p><input type="checkbox" disabled="" checked=""/> 특정 Entitiy만 다루는 Component와 UI를 다루는 Component는 분리되어 있나요?</p>
</li>
<li class="task-list-item">
<p><input type="checkbox" disabled="" checked=""/> 데이터 흐름에 맞는 계층구조를 이루고 의존성이 맞게 작성이 되었나요?</p>
</li>
</ul>
<h3 id="심화과제"><a class="anchor" aria-hidden="true" tabindex="-1" href="#심화과제"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>심화과제</h3>
<ul class="contains-task-list">
<li>
<p>재사용 가능한 Custom UI 컴포넌트를 만들어 보기</p>
</li>
<li>
<p>재사용 가능한 Custom 라이브러리 Hook을 만들어 보기</p>
</li>
<li>
<p>재사용 가능한 Custom 유틸 함수를 만들어 보기</p>
</li>
<li>
<p>그래서 엔티티와는 어떤 다른 계층적 특징을 가지는지 이해하기</p>
</li>
<li class="task-list-item">
<p><input type="checkbox" disabled="" checked=""/> UI 컴포넌트 계층과 엔티티 컴포넌트의 계층의 성격이 다르다는 것을 이해하고 적용했는가?</p>
</li>
<li class="task-list-item">
<p><input type="checkbox" disabled="" checked=""/> 엔티티 Hook과 라이브러리 훅과의 계층의 성격이 다르다는 것을 이해하고 적용했는가?</p>
</li>
<li class="task-list-item">
<p><input type="checkbox" disabled="" checked=""/> 엔티티 순수함수와 유틸리티 함수의 계층의 성격이 다르다는 것을 이해하고 적용했는가?</p>
</li>
</ul>
<h2 id="과제-셀프회고"><a class="anchor" aria-hidden="true" tabindex="-1" href="#과제-셀프회고"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>과제 셀프회고</h2>
<!-- -->
<h3 id="과제를-하면서-내가-알게된-점-좋았던-점은-무엇인가요"><a class="anchor" aria-hidden="true" tabindex="-1" href="#과제를-하면서-내가-알게된-점-좋았던-점은-무엇인가요"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>과제를 하면서 내가 알게된 점, 좋았던 점은 무엇인가요?</h3>
<p>엔티티라는 개념을 제대로 알지 뭇했었고, 처음으로 엔티티를 고려한 리팩토링을 진행 해 보았습니다.</p>
<p>제가 이해한 엔티티의 핵심은 두가지입니다.</p>
<ol>
<li>
<p>엔티티에 귀속된 비즈니스 로직들은 어떤 프레임워크로 마이그레이션 하더라도 그대로 사용할 수 있는 로직을 온전히 떼어 두는 것일 것이다.</p>
<p>예를 들면, 이번 베이직 과제에서 프롭스 드릴링으로 상태를 전달하는 방식으로 개발 한 것을 조타이로 마이그레이션 할 때에 편의성을 체감 할 수 있었어야 했습니다.</p>
<p>그런 측면에서 엔티티를 잘 분리했는가 스스로 회고를 해 보았을때, 만족스러운 수준으로 성공하지 못한 것 같습니다.
리팩토링을 하는 과정중에 저도 모르게 상당량의 순수함수를 다시 조타이의 액션함수로 이전하고 있었습니다.
그리고 결과적으로 비즈니스 로직이 명확하게 분리되지도 못한 아쉬움이 있었습니다.</p>

























<table><thead><tr><th>계층</th><th>현재 상태</th><th>이상적 상태</th></tr></thead><tbody><tr><td>Jotai Atoms</td><td>비즈니스 로직 + 상태관리 혼재</td><td>순수 상태관리만</td></tr><tr><td>Models</td><td>단순한 CRUD 함수들</td><td>풍부한 비즈니스 로직</td></tr><tr><td>프레임워크 독립성</td><td>❌ Jotai에 종속적</td><td>✅ 완전 독립적</td></tr></tbody></table>
</li>
<li>
<p>엔티티는 도메인 모델링과 대응되는 개념이며 도메인은 생각보다 독립적이지 않았다.</p>
<p>처음에는 엔티티 나누는거 뭐 별거 있겠나 하면서 호기롭게 보이는 엔티티부터 쑥쑥 뽑아서 분리해보자. 라고 생각했지만 옷걸이 더미에서 옷걸이 하나만 들어올리려다 다 딸려올라오는 듯한 코드뭉치들을 보고 잠시 내려두고 고민에 잠겼던것 같습니다.</p>
<p>예를들면, 카트라는 거대 도메인을 분리하고 살펴보면 그 안에는 쿠폰도 있고, 또 프로덕트도 존재했던 것입니다.
이 과제에서는 엔티티를 나누라고 했었고, 리팩토링 힌트를 참고 해 보아도 카트 / 쿠폰 / 프로덕트로 엔티티를 나누라는 가이드를 제시해 주었습니다. 애초에 이건 카트라는 하나의 도메인이면 되는거 아닌가? 이걸 꼭 억지로 나누어야 하는걸까? 라는 생각이 들기도 했습니다.</p>
<p>그런 중에도 힌트 대로 카트, 쿠폰, 프로덕트로 구분하여 엔티티를 나누어보았고, 최종적으로는 카트와 쿠폰 엔티티는 하나의 엔티티로 합치게 되었습니다.</p>
<p>쿠폰의 본질적 특성: 쿠폰은 장바구니라는 맥락 없이는 검증조차 불가능</p>
<pre class="language-ts"><code class="language-ts code-highlight"><span class="code-line"><span class="token keyword">const</span> <span class="token function-variable function">applyCoupon</span> <span class="token operator">=</span> <span class="token punctuation">(</span>coupon<span class="token operator">:</span> Coupon<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token keyword">const</span> cartTotal <span class="token operator">=</span> <span class="token function">calculateCartTotal</span><span class="token punctuation">(</span>cart<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 카트 의존성 필수</span>
</span><span class="code-line">  <span class="token keyword">if</span> <span class="token punctuation">(</span>
</span><span class="code-line">    coupon<span class="token punctuation">.</span>discountType <span class="token operator">===</span> <span class="token string">&quot;percentage&quot;</span> <span class="token operator">&amp;&amp;</span>
</span><span class="code-line">    cartTotal <span class="token operator">&lt;</span> <span class="token constant">MIN_ORDER_AMOUNT_FOR_PERCENTAGE_COUPON</span>
</span><span class="code-line">  <span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token keyword">return</span> <span class="token punctuation">{</span> success<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> message<span class="token operator">:</span> <span class="token string">&quot;최소 주문 금액을 충족하지 않습니다&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token punctuation">}</span>
</span><span class="code-line">  <span class="token function">setSelectedCoupon</span><span class="token punctuation">(</span>coupon<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token punctuation">}</span><span class="token punctuation">;</span>
</span></code><div class="copied" data-code="const applyCoupon = (coupon: Coupon) =&gt; {
  const cartTotal = calculateCartTotal(cart, null); // 카트 의존성 필수
  if (
    coupon.discountType === &quot;percentage&quot; &amp;&amp;
    cartTotal &lt; MIN_ORDER_AMOUNT_FOR_PERCENTAGE_COUPON
  ) {
    return { success: false, message: &quot;최소 주문 금액을 충족하지 않습니다&quot; };
  }
  setSelectedCoupon(coupon);
};
"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
<p>이러한 쿠폰의 특성을 고려한 것이었고, 로직의 규모 자체도 카트와 병합하기에 부담스럽지 않은 수준이어서였습니다.
다만, 훅만은 분리하여서 역할이 명확하게 구분되게 의도하였습니다.</p>
<p>그리고 이런 접근이 괜찮은 것인지는 모르겠지만, 어느 모델에도 로직을 두기 어려운 엔티티가 혼합된 로직은 model/index.ts 파일에 두어 관리했습니다.</p>
<pre class="language-ts"><code class="language-ts code-highlight"><span class="code-line"><span class="token comment">// model/index.ts</span>
</span><span class="code-line"><span class="token comment">// 개별 아이템의 할인 적용 후 총액 계산 (discount + product 조합)</span>
</span><span class="code-line"><span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">calculateItemTotal</span><span class="token punctuation">(</span>
</span><span class="code-line">  item<span class="token operator">:</span> CartItem<span class="token punctuation">,</span>
</span><span class="code-line">  cart<span class="token operator">:</span> CartItem<span class="token punctuation">[</span><span class="token punctuation">]</span>
</span><span class="code-line"><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">number</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token keyword">const</span> <span class="token punctuation">{</span> price <span class="token punctuation">}</span> <span class="token operator">=</span> item<span class="token punctuation">.</span>product<span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token keyword">const</span> <span class="token punctuation">{</span> quantity <span class="token punctuation">}</span> <span class="token operator">=</span> item<span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token keyword">const</span> discountRate <span class="token operator">=</span> discount<span class="token punctuation">.</span><span class="token function">getMaxApplicableDiscount</span><span class="token punctuation">(</span>item<span class="token punctuation">,</span> cart<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token keyword">return</span> Math<span class="token punctuation">.</span><span class="token function">round</span><span class="token punctuation">(</span>price <span class="token operator">*</span> quantity <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">-</span> discountRate<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code><div class="copied" data-code="// model/index.ts
// 개별 아이템의 할인 적용 후 총액 계산 (discount + product 조합)
export function calculateItemTotal(
  item: CartItem,
  cart: CartItem[]
): number {
  const { price } = item.product;
  const { quantity } = item;
  const discountRate = discount.getMaxApplicableDiscount(item, cart);
  return Math.round(price * quantity * (1 - discountRate));
}
"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
</li>
</ol>
<p>결론적으로 엔티티를 접하면서 &#x27;고민&#x27;만큼은 많이 할 수 있었던 과제였다고 생각하고, 완성도는... 많이 아쉬운것 같습니다.
그리고 저 스스로가 1차원적인 리팩토링을 하는 것에 그치지 않고 더 성장할 수 있는 가능성을 볼 수 있었던 기회가 되었다고 생각합니다.</p>
<p>솔직히 나만의 기준을 가지고 정돈을 했다 라는 것에 의의가 있는 것이지, 남들이 보기에 편하거나 납득할만한 구조로 작성한 것인지 확신이 들지는 않는것 같습니다.</p>
<h3 id="이번-과제에서-내가-제일-신경-쓴-부분은-무엇인가요"><a class="anchor" aria-hidden="true" tabindex="-1" href="#이번-과제에서-내가-제일-신경-쓴-부분은-무엇인가요"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>이번 과제에서 내가 제일 신경 쓴 부분은 무엇인가요?</h3>
<p>리팩토링 힌트 파일구조에 있는 형태를 최대한 따라 해보고 조금씩 변형해보는 방식으로 과제를 진행했습니다.
내가 평소에 하고 있던 방식으로 리팩토링 해봤자, 배움이 있기보다는 익숙한 것을 되풀이할 뿐이라는 생각이 있었기 때문입니다.</p>
<p>힌트 구조를 따라하면서 확실히 단순한 파일 정리를 넘어서 논리적인 구조를짜는 방식을 유도하는 과제구나 하는 것을 느꼈습니다.
model / hooks / utils 계층에 대한 가이드는 확실한 의도를 전달 해 주고 있었고, 그대로 따르지는 못했지만, 왜 그렇게 해야하는지에 대해서 몸소 깨달을 수 있는 점이 좋았던 것 같습니다.</p>
<h3 id="이번-과제를-통해-앞으로-해보고-싶은게-있다면-알려주세요"><a class="anchor" aria-hidden="true" tabindex="-1" href="#이번-과제를-통해-앞으로-해보고-싶은게-있다면-알려주세요"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>이번 과제를 통해 앞으로 해보고 싶은게 있다면 알려주세요!</h3>
<p>회사 프로젝트의 구조를 비교적 자유롭게 바꿀 수 있는 환경입니다. 이번 과제를 통해 얻은 인사이트로 회사
프로젝트에서 엔티티개념을 적용한 리팩토링을 진행해보고 싶습니다.</p>
<ol>
<li>
<p>종류는 적지만, 도메인 하나하나가 복잡한 로직과 다양한 상태관리가 혼재되어 있어서 엔티티 분리를 적용하면 좋은 개선이 될 것 같습니다.</p>
</li>
<li>
<p>Zunstand를 사용하고 있는데 상태관리 복잡도가 높고, 순수한 상태 변경 로직과 비즈니스 검증 로직이 뒤섞여 있습니다.</p>
</li>
<li>
<p>백엔드 API 스펙이 매우 자주 변경되는 상황입니다. 그러면서도 중간 레이어를 두지 않아 API 변경 시 여러 곳을 수정해야 합니다. 수정사항에 대한 리소스를 줄일 수 있을 것 같습니다.</p>
</li>
<li>
<p>테스트하기 어려운 로직들이 많습니다. 복잡한 계산 로직들이 React 컴포넌트 안에 섞여 있어서
단위 테스트를 작성하기 어렵습니다. 이를 순수 함수로 잘 분리하면 테스트 도입도 고려해볼 수 있을 것 같습니다.</p>
</li>
</ol>
<h3 id="리뷰-받고-싶은-내용이나-궁금한-것에-대한-질문-편하게-남겨주세요-"><a class="anchor" aria-hidden="true" tabindex="-1" href="#리뷰-받고-싶은-내용이나-궁금한-것에-대한-질문-편하게-남겨주세요-"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>리뷰 받고 싶은 내용이나 궁금한 것에 대한 질문 편하게 남겨주세요 :)</h3>
<p>&quot;과제를 하면서 내가 알게된 점, 좋았던 점은 무엇인가요?&quot;의 2번 항목에 기술한 내용들에 대한 질문이 있습니다.</p>
<ol>
<li>
<p>cart와 coupon 엔티티를 나눌지 분리할지에 대한 고민을 적었습니다.
일반적으로 이정도 규모의 도메인에서 cart/coupon/product 엔티티를 정교하게 나누는게 유효한 전략인지 1차적으로 궁금하고, 제가 cart와 coupon은 결합된 정도와 코드 분량을 고려했을때 병합하는게 좋다고 판단했는데 옳은 판단이었을지 궁금합니다.</p>
</li>
<li>
<p>어느 모델에 둬도 애매한것 같은 로직을 model/index.ts 파일에 shared 개념으로 위치시킨 것에 대한 내용을 적었습니다.
제가 로직을 잘 나눴으면 모델이 혼합된 로직을 만들지 않았을 지도 모르겠지만, 모델이 혼합될 수 밖에 없는 로직은 종종 만날 수 있다고 생각합니다.
하지만 제가 작성한 방식이 좋은 방식이었는지는 확신이 안가는데 어떻게 생각하시는지 궁금합니다.</p>
</li>
</ol></div></div><div class="overflow-auto mt-9"><div data-color-mode="dark" class="wmde-markdown wmde-markdown-color p-6 max-w-full" style="word-wrap:break-word;overflow-wrap:break-word"><h2 id="과제-피드백"><a class="anchor" aria-hidden="true" tabindex="-1" href="#과제-피드백"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>과제 피드백</h2>
<p>고생하셨습니다 유열님!
이번주도 잘 정리해주셨네요. 회고를 보면 이번 과제에서 뭔가 고민을 굉장히 많이 하시고 그만큼 얻어가시는게 많았던 주차셨을 것 같아요.  &#x27;옷걸이 더미에서 옷걸이 하나만 들어올리려다 다 딸려오는 듯한&#x27; 은 저도 매우 공감을 많이 하는 비유였네요 ㅎㅎ사실 말씀해주셨던 주제들이 한 주 한다고, 그리고 명확한 규칙이 만들어지는 주제들은 아닌것 같아요. 상황에 따라 매번 고민해야 되는 주제들이니 프로젝트를 보는 좋은 관점 하나가 추가로 생겼다 라고 생각해주심 좋을것 같네요 ㅎㅎ</p>
<p>질문 주신거 답변드려보면요!</p>
<blockquote>
<p>cart와 coupon 엔티티를 나눌지 분리할지에 대한 고민을 적었습니다.</p>
</blockquote>
<p>유효한 전략이라고 생각합니다. 그리고 합치는 판단도 나쁘지 않았던 것 같아요. 유열님 생각에서는 &quot;쿠폰은 장바구니라는 맥락없이는 검증이 불가능하다&quot;라고 말슴해주셨는데, 굳이 분리하고 관리하는게 복잡도를 올리는 관점도 있을 수 있어요. 늘 정답에 해당하는 내용은 아니고 맥락에 맞춰볼때 좋은 선택이였다 라고 볼 수 있을 것 같습니다.</p>
<blockquote>
<p>어느 모델에 둬도 애매한것 같은 로직을 model/index.ts 파일에 shared 개념으로 위치시킨 것에 대한 내용을 적었습니다.</p>
</blockquote>
<p>아뇨! 혼합된 로직은 언제든지 생길수 있습니다. 자주 발생하는 시나리오에요. 지금의 방식처럼 모아서 관리하는 것도 방법일 수 있고, 모델이 아닌 비즈니스 로직관점에서 여러 로직을 함께 조합해서 사용해야 하는 경우에는 helper나 service같이 분리해서 관리하는것도 방법일 수 있어요.</p>
<p>잘 정리해주셨고 다음주도 화이팅입니다!</p></div></div><div class="mt-9"></div></div></main></div></div></div></div>
</body>
</html>
