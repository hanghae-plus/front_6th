<!doctype html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="icon" href="/front_6th/favicon.ico"/>
  
    <title>[5팀 김유현] Chapter 2-1. 클린코드와 리팩토링 - 김유현 | 항해플러스 프론트엔드 6기</title>
    <meta name="description" content=" [항해플러스 프론트엔드 6기] 김유현님이 제출한 [5팀 김유현] Chapter 2-1. 클린코드와 리팩토링 과제를 확인하세요. 코드 구현, 문제 해결 과정, 피드백 내용을 상세히 살펴볼 수 있습니다." />
    <meta name="keywords" content="항해플러스, 프론트엔드, 개발자교육, React, TypeScript, JavaScript, 기술면접, 웹개발, 김유현, [5팀 김유현] Chapter 2-1. 클린코드와 리팩토링, 과제상세, 코드리뷰, 피드백, Pull Request" />
    <meta property="og:title" content="[5팀 김유현] Chapter 2-1. 클린코드와 리팩토링 - 김유현 | 항해플러스 프론트엔드 6기" />
    <meta property="og:description" content=" [항해플러스 프론트엔드 6기] 김유현님이 제출한 [5팀 김유현] Chapter 2-1. 클린코드와 리팩토링 과제를 확인하세요. 코드 구현, 문제 해결 과정, 피드백 내용을 상세히 살펴볼 수 있습니다." />
    <meta property="og:image" content="/defaultThumbnail.jpg" />
    <meta property="og:type" content="website" />
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="[5팀 김유현] Chapter 2-1. 클린코드와 리팩토링 - 김유현 | 항해플러스 프론트엔드 6기" />
    <meta name="twitter:description" content=" [항해플러스 프론트엔드 6기] 김유현님이 제출한 [5팀 김유현] Chapter 2-1. 클린코드와 리팩토링 과제를 확인하세요. 코드 구현, 문제 해결 과정, 피드백 내용을 상세히 살펴볼 수 있습니다." />
    <meta name="twitter:image" content="/defaultThumbnail.jpg" />
  
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-6J8QP7YK1E"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-6J8QP7YK1E');
  </script>
  <script type="module" crossorigin src="/front_6th/assets/index-DtEqFcg_.js"></script>
  <link rel="stylesheet" crossorigin href="/front_6th/assets/index-BXO68frB.css">
</head>
<body>
<div id="root"><link rel="preload" as="image" href="https://velog.velcdn.com/images/jujini31/post/33cf154b-3b73-4b45-b0ab-df68c80c186e/image.png"/><link rel="preload" as="image" href="https://velog.velcdn.com/images/jujini31/post/5a233dec-cc23-41ad-b42d-42faa898757a/image.png"/><div data-slot="sidebar-wrapper" style="--sidebar-width:16rem;--sidebar-width-icon:3rem" class="group/sidebar-wrapper has-data-[variant=inset]:bg-sidebar flex min-h-svh w-full"><div class="min-h-screen flex w-full"><div class="group peer text-sidebar-foreground hidden md:block" data-state="expanded" data-collapsible="" data-variant="sidebar" data-side="left" data-slot="sidebar"><div data-slot="sidebar-gap" class="relative w-(--sidebar-width) bg-transparent transition-[width] duration-200 ease-linear group-data-[collapsible=offcanvas]:w-0 group-data-[side=right]:rotate-180 group-data-[collapsible=icon]:w-(--sidebar-width-icon)"></div><div data-slot="sidebar-container" class="fixed inset-y-0 z-10 hidden h-svh transition-[left,right,width] duration-200 ease-linear md:flex left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)] group-data-[collapsible=icon]:w-(--sidebar-width-icon) group-data-[side=left]:border-r group-data-[side=right]:border-l w-64"><div data-sidebar="sidebar" data-slot="sidebar-inner" class="bg-sidebar group-data-[variant=floating]:border-sidebar-border flex h-full w-full flex-col group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:shadow-sm"><div data-slot="sidebar-content" data-sidebar="content" class="flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden bg-card border-r border-border"><a class="p-4" href="/front_6th/" data-discover="true"><div class="flex items-center space-x-2 mb-6"><div class="w-8 h-8 bg-gradient-primary rounded-lg flex items-center justify-center"><span class="text-white font-bold text-sm">6기</span></div><h4 class="text-lg font-bold text-primary">항해플러스 프론트엔드</h4></div></a><div data-slot="sidebar-group" data-sidebar="group" class="relative flex w-full min-w-0 flex-col p-2"><div data-slot="sidebar-group-label" data-sidebar="group-label" class="ring-sidebar-ring flex h-8 shrink-0 items-center rounded-md text-xs font-medium outline-hidden transition-[margin,opacity] duration-200 ease-linear focus-visible:ring-2 [&amp;&gt;svg]:size-4 [&amp;&gt;svg]:shrink-0 group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0 text-muted-foreground px-4">학습 관리</div><div data-slot="sidebar-group-content" data-sidebar="group-content" class="w-full text-sm"><ul data-slot="sidebar-menu" data-sidebar="menu" class="flex w-full min-w-0 flex-col gap-1 px-2"><li data-slot="sidebar-menu-item" data-sidebar="menu-item" class="group/menu-item relative"><a data-slot="sidebar-menu-button" data-sidebar="menu-button" data-size="default" data-active="false" class="peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left outline-hidden ring-sidebar-ring transition-[width,height,padding] focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-data-[sidebar=menu-action]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:size-8! group-data-[collapsible=icon]:p-2! [&amp;&gt;span:last-child]:truncate [&amp;&gt;svg]:size-4 [&amp;&gt;svg]:shrink-0 hover:bg-sidebar-accent hover:text-sidebar-accent-foreground text-sm h-12 text-foreground hover:bg-secondary hover:text-secondary-foreground rounded-lg transition-all duration-300" href="/front_6th/" data-discover="true"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-users h-5 w-5" aria-hidden="true"><path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"></path><path d="M16 3.128a4 4 0 0 1 0 7.744"></path><path d="M22 21v-2a4 4 0 0 0-3-3.87"></path><circle cx="9" cy="7" r="4"></circle></svg><span class="ml-3">수강생 목록</span></a></li><li data-slot="sidebar-menu-item" data-sidebar="menu-item" class="group/menu-item relative"><a data-slot="sidebar-menu-button" data-sidebar="menu-button" data-size="default" data-active="false" class="peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left outline-hidden ring-sidebar-ring transition-[width,height,padding] focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-data-[sidebar=menu-action]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:size-8! group-data-[collapsible=icon]:p-2! [&amp;&gt;span:last-child]:truncate [&amp;&gt;svg]:size-4 [&amp;&gt;svg]:shrink-0 hover:bg-sidebar-accent hover:text-sidebar-accent-foreground text-sm h-12 text-foreground hover:bg-secondary hover:text-secondary-foreground rounded-lg transition-all duration-300" href="/front_6th/assignments/" data-discover="true"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-book-open h-5 w-5" aria-hidden="true"><path d="M12 7v14"></path><path d="M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z"></path></svg><span class="ml-3">과제 목록</span></a></li></ul></div></div></div></div></div></div><div class="flex-1 min-w-0"><header class="h-12 flex items-center border-b border-border bg-card px-4"><button data-slot="sidebar-trigger" class="inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 size-7 mr-4 text-white" data-sidebar="trigger"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-panel-left" aria-hidden="true"><rect width="18" height="18" x="3" y="3" rx="2"></rect><path d="M9 3v18"></path></svg><span class="sr-only">Toggle Sidebar</span></button><h4 class="text-lg font-semibold "><a href="/front_6th/@yuhyeon99/" data-discover="true">yuhyeon99<!-- --> 님의 상세페이지</a> ＞ <!-- -->[5팀 김유현] Chapter 2-1. 클린코드와 리팩토링</h4></header><main class="p-6"><div><div class="card-wrap"><div data-slot="card" class="card text-card-foreground flex flex-col gap-6 shadow-sm mb-6 p-6 border border-gray-700 bg-gray-800 rounded-lg"><a href="https://github.com/hanghae-plus/front_6th_chapter2-1/pull/25" target="_blank"><div class="flex items-start gap-4"><div class="flex-shrink-0"><svg xmlns="http://www.w3.org/2000/svg" height="32" aria-hidden="true" viewBox="0 0 24 24" width="32" fill="white" class="w-8 h-8"><path d="M12 1C5.923 1 1 5.923 1 12c0 4.867 3.149 8.979 7.521 10.436.55.096.756-.233.756-.522 0-.262-.013-1.128-.013-2.049-2.764.509-3.479-.674-3.699-1.292-.124-.317-.66-1.293-1.127-1.554-.385-.207-.936-.715-.014-.729.866-.014 1.485.797 1.691 1.128.99 1.663 2.571 1.196 3.204.907.096-.715.385-1.196.701-1.471-2.448-.275-5.005-1.224-5.005-5.432 0-1.196.426-2.186 1.128-2.956-.111-.275-.496-1.402.11-2.915 0 0 .921-.288 3.024 1.128a10.193 10.193 0 0 1 2.75-.371c.936 0 1.871.123 2.75.371 2.104-1.43 3.025-1.128 3.025-1.128.605 1.513.221 2.64.111 2.915.701.77 1.127 1.747 1.127 2.956 0 4.222-2.571 5.157-5.019 5.432.399.344.743 1.004.743 2.035 0 1.471-.014 2.654-.014 3.025 0 .289.206.632.756.522C19.851 20.979 23 16.854 23 12c0-6.077-4.922-11-11-11Z"></path></svg></div><div class="flex-1 min-w-0"><div class="flex items-center gap-2 mb-2"><h3 class="text-lg font-semibold text-white truncate">[5팀 김유현] Chapter 2-1. 클린코드와 리팩토링</h3></div><div class="flex items-center gap-4 text-xs text-gray-500"><span>by <!-- -->yuhyeon99</span><span>2025. 7. 28.</span></div></div></div></a></div></div><div class="overflow-auto"><div data-color-mode="dark" class="wmde-markdown wmde-markdown-color p-6 max-w-full" style="word-wrap:break-word;overflow-wrap:break-word"><h2 id="과제-체크포인트"><a class="anchor" aria-hidden="true" tabindex="-1" href="#과제-체크포인트"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>과제 체크포인트</h2>
<h3 id="배포-링크"><a class="anchor" aria-hidden="true" tabindex="-1" href="#배포-링크"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>배포 링크</h3>
<p><a href="https://yuhyeon99.github.io/front_6th_chapter2-1/">https://yuhyeon99.github.io/front_6th_chapter2-1/</a></p>
<h3 id="기본과제"><a class="anchor" aria-hidden="true" tabindex="-1" href="#기본과제"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>기본과제</h3>
<ul class="contains-task-list">
<li class="task-list-item"><input type="checkbox" disabled="" checked=""/> 코드가 Prettier를 통해 일관된 포맷팅이 적용되어 있는가?</li>
<li class="task-list-item"><input type="checkbox" disabled="" checked=""/> 적절한 줄바꿈과 주석을 사용하여 코드의 논리적 단위를 명확히 구분했는가?</li>
<li class="task-list-item"><input type="checkbox" disabled="" checked=""/> 변수명과 함수명이 그 역할을 명확히 나타내며, 일관된 네이밍 규칙을 따르는가?</li>
<li class="task-list-item"><input type="checkbox" disabled="" checked=""/> 매직 넘버와 문자열을 의미 있는 상수로 추출했는가?</li>
<li class="task-list-item"><input type="checkbox" disabled="" checked=""/> 중복 코드를 제거하고 재사용 가능한 형태로 리팩토링했는가?</li>
<li class="task-list-item"><input type="checkbox" disabled="" checked=""/> 함수가 단일 책임 원칙을 따르며, 한 가지 작업만 수행하는가?</li>
<li class="task-list-item"><input type="checkbox" disabled="" checked=""/> 조건문과 반복문이 간결하고 명확한가? 복잡한 조건을 함수로 추출했는가?</li>
<li class="task-list-item"><input type="checkbox" disabled="" checked=""/> 코드의 배치가 의존성과 실행 흐름에 따라 논리적으로 구성되어 있는가?</li>
<li class="task-list-item"><input type="checkbox" disabled="" checked=""/> 연관된 코드를 의미 있는 함수나 모듈로 그룹화했는가?</li>
<li class="task-list-item"><input type="checkbox" disabled="" checked=""/> ES6+ 문법을 활용하여 코드를 더 간결하고 명확하게 작성했는가?</li>
<li class="task-list-item"><input type="checkbox" disabled="" checked=""/> 전역 상태와 부수 효과(side effects)를 최소화했는가?</li>
<li class="task-list-item"><input type="checkbox" disabled="" checked=""/> 에러 처리와 예외 상황을 명확히 고려하고 처리했는가?</li>
<li class="task-list-item"><input type="checkbox" disabled="" checked=""/> 코드 자체가 자기 문서화되어 있어, 주석 없이도 의도를 파악할 수 있는가?</li>
<li class="task-list-item"><input type="checkbox" disabled="" checked=""/> 비즈니스 로직과 UI 로직이 적절히 분리되어 있는가?</li>
<li class="task-list-item"><input type="checkbox" disabled="" checked=""/> 코드의 각 부분이 테스트 가능하도록 구조화되어 있는가?</li>
<li class="task-list-item"><input type="checkbox" disabled="" checked=""/> 성능 개선을 위해 불필요한 연산이나 렌더링을 제거했는가?</li>
<li class="task-list-item"><input type="checkbox" disabled="" checked=""/> 새로운 기능 추가나 변경이 기존 코드에 미치는 영향을 최소화했는가?</li>
<li class="task-list-item"><input type="checkbox" disabled="" checked=""/> 코드 리뷰를 통해 다른 개발자들의 피드백을 반영하고 개선했는가?</li>
<li class="task-list-item"><input type="checkbox" disabled="" checked=""/> (핵심!) 리팩토링 시 기존 기능을 그대로 유지하면서 점진적으로 개선했는가?</li>
</ul>
<h3 id="심화과제"><a class="anchor" aria-hidden="true" tabindex="-1" href="#심화과제"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>심화과제</h3>
<ul class="contains-task-list">
<li class="task-list-item"><input type="checkbox" disabled="" checked=""/> 변경한 구조와 코드가 기존의 코드보다 가독성이 높고 이해하기 쉬운가?</li>
<li class="task-list-item"><input type="checkbox" disabled="" checked=""/> 변경한 구조와 코드가 기존의 코드보다 기능을 수정하거나 확장하기에 용이한가?</li>
<li class="task-list-item"><input type="checkbox" disabled="" checked=""/> 변경한 구조와 코드가 기존의 코드보다 테스트를 하기에 더 용이한가?</li>
<li class="task-list-item"><input type="checkbox" disabled="" checked=""/> 변경한 구조와 코드가 기존의 모든 기능은 그대로 유지했는가?</li>
<li class="task-list-item"><input type="checkbox" disabled="" checked=""/> (핵심!) 변경한 구조와 코드를 새로운 한번에 새로만들지 않고 점진적으로 개선했는가?</li>
</ul>
<h2 id="과제-셀프회고"><a class="anchor" aria-hidden="true" tabindex="-1" href="#과제-셀프회고"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>과제 셀프회고</h2>
<!-- -->
<p>이번 과제를 수행하면서 가장 신경 쓴 부분은 <strong>GEMINI.md에 명시된 &quot;마이그레이션 절대 원칙&quot;과 &quot;Clean Code Writing Rules&quot;를 준수</strong>하는 것이었습니다. 특히 basic폴더의 순수 JavaScript 코드와 advanced 폴더의 React 기반 코드 간 차이에서 기술적인 고민이 많았습니다.</p>
<details>
<summary><b>회고 (클릭해서 열기)</b></summary>
<h2 id="1-과제-목표"><a aria-hidden="true" tabindex="-1" href="#1-과제-목표"><span class="icon icon-link"></span></a>1. 과제 목표</h2>
<ul>
<li>클린 코드와 리팩토링</li>
<li>JS 기반 코드를 React + TS 기반 코드로 마이그레이션</li>
</ul>
<hr/>
<h2 id="2-클린-코드란"><a aria-hidden="true" tabindex="-1" href="#2-클린-코드란"><span class="icon icon-link"></span></a>2. 클린 코드란?</h2>
<ul>
<li><strong>읽기 쉽고 이해하기 쉬운</strong> 코드를 작성하는것</li>
<li>코드자체가 <strong>가독성이 뛰어나고 유지보수가 쉽도록 작성</strong>되어야 한다는 원칙</li>
</ul>
<p>일상 속에서도 클린 코드의 개념을 살펴볼 수 있다.
예를 들어 아버지가 방에 들어가시는 상황을 설명할 때:</p>
<blockquote>
<p>아버지가방에들어가신다
-&gt; 아버지가 방에 들어가신다.</p>
</blockquote>
<p><strong>아버지가방에들어가신다</strong> 처럼 띄어쓰기를 하지 않은 채로 작성하면 가독성이 떨어져서 무얼 의미하는지 파악하기가 힘들다.</p>
<p>우리가 작성하는 코드 또한 마찬가지다.</p>
<p>발제 자료를 참고해서 더 자세히 설명하자면</p>
<blockquote>
<p><img src="https://velog.velcdn.com/images/jujini31/post/33cf154b-3b73-4b45-b0ab-df68c80c186e/image.png" alt=""/></p>
</blockquote>
<ul>
<li>시간이 지나고 시스템이 안정이 되면서 <strong>코드를 작성하고 버그를 수정하는 데 비용은 줄어든다.</strong></li>
<li>뭐가 버그이고 뭐가 문제인지 기존의 기능을 확인하고 수정 후 안정성을 <strong>확인하는 비용은 점점 비싸진다.</strong></li>
</ul>
<blockquote>
<p>대부분의 개발자들은 코드를 쓰는 것 보다 <strong>코드를 읽느라 시간을 거의 다 보낸다.</strong></p>
</blockquote>
<p>이러한 문제점들을 해결하기 위한 가장 좋은 방법은</p>
<p><strong>언제나 코드를 깨끗하게 유지하는 습관</strong> 이다.
그런 습관을 만들기 위해서는 여러 원칙들을 정해서
일관성 있는 코드를 작성하는 자세가 중요하다.</p>
<p>관련해서 정리해본 몇 가지 원칙들은 다음과 같다:</p>
<ul>
<li><strong>DRY (Don&#x27;t Repeat Yourself):</strong> 공통으로 사용되는 로직이나 UI 요소는 함수나 컴포넌트로 분리</li>
<li><strong>단일 책임 원칙 (Single Responsibility Principle):</strong> 각 함수나 컴포넌트가 하나의 명확한 책임을 가지도록 설계</li>
<li><strong>명명 규칙 (Naming Requirements):</strong> <code>create~()</code>, <code>get~()</code>, <code>is~</code> , <code>has~</code>와 같은 예측 가능한 명명 패턴을 엄격하도록 준수. 가급적이면 직관적이고 명확한 명칭으로 작성한다.</li>
<li><strong>코드 조직화 (Code Organization):</strong> 관심사별로 폴더를 나누고, 관련 요소들을 근접하게 배치하여 코드의 응집도를 높인다.</li>
</ul>
<p>이제 해당 원칙들을 기반으로 더러운 코드를 깨끗하게 만들어보자</p>
<hr/>
<h2 id="3-code-smell원본-코드"><a aria-hidden="true" tabindex="-1" href="#3-code-smell원본-코드"><span class="icon icon-link"></span></a>3. Code Smell(원본 코드)</h2>
<p>현재 주어진 의도적으로 더럽게 작성된 코드를 각 항목별로 짧게 분석해보자</p>
<blockquote>
<p>전체 코드: <a href="https://github.com/yuhyeon99/front_6th_chapter2-1/blob/main/src/main.original.js">깃허브 링크</a></p>
</blockquote>
<h3 id="3-1-전역-변수-남발--네이밍-규칙-없음"><a aria-hidden="true" tabindex="-1" href="#3-1-전역-변수-남발--네이밍-규칙-없음"><span class="icon icon-link"></span></a>3-1. 전역 변수 남발 &amp; 네이밍 규칙 없음</h3>
<pre class="language-javascript"><code class="language-javascript code-highlight"><span class="code-line"><span class="token keyword">var</span> prodList<span class="token punctuation">;</span>
</span><span class="code-line"><span class="token keyword">var</span> bonusPts <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token keyword">var</span> stockInfo<span class="token punctuation">;</span>
</span><span class="code-line"><span class="token keyword">var</span> itemCnt<span class="token punctuation">;</span>
</span><span class="code-line"><span class="token keyword">var</span> lastSel<span class="token punctuation">;</span>
</span><span class="code-line"><span class="token keyword">var</span> sel<span class="token punctuation">;</span>
</span><span class="code-line"><span class="token keyword">var</span> addBtn<span class="token punctuation">;</span>
</span><span class="code-line"><span class="token keyword">var</span> totalAmt <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token keyword">var</span> <span class="token constant">PRODUCT_ONE</span> <span class="token operator">=</span> <span class="token string">&#x27;p1&#x27;</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token keyword">var</span> p2 <span class="token operator">=</span> <span class="token string">&#x27;p2&#x27;</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token keyword">var</span> product_3 <span class="token operator">=</span> <span class="token string">&#x27;p3&#x27;</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token keyword">var</span> p4 <span class="token operator">=</span> <span class="token string">&#x27;p4&#x27;</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token keyword">var</span> <span class="token constant">PRODUCT_5</span> <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">p5</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token keyword">var</span> cartDisp<span class="token punctuation">;</span>
</span></code><div class="copied" data-code="var prodList;
var bonusPts = 0;
var stockInfo;
var itemCnt;
var lastSel;
var sel;
var addBtn;
var totalAmt = 0;
var PRODUCT_ONE = &#x27;p1&#x27;;
var p2 = &#x27;p2&#x27;;
var product_3 = &#x27;p3&#x27;;
var p4 = &#x27;p4&#x27;;
var PRODUCT_5 = `p5`;
var cartDisp;
"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
<ul>
<li>**문제점: **
<ul>
<li>전역 스코프에 너무 많은 변수를 선언
<ul>
<li>모듈화와 테스트가 어려움</li>
</ul>
</li>
<li>네이밍 규칙이 제각각 다름(PRODUCT_ONE, p2, product_3)
<ul>
<li>일관성 부족으로 인한 유지보수 비용 증가</li>
</ul>
</li>
<li>UI 요소(sel, addBtn, cartDisp)와 상태(prodList, totalAmt)가 혼합되어 있음
<ul>
<li>관심사의 분리 실패(응집도 낮음, 결합도 높음)</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="3-2-거대한-main-함수-srp-원칙-위반"><a aria-hidden="true" tabindex="-1" href="#3-2-거대한-main-함수-srp-원칙-위반"><span class="icon icon-link"></span></a>3-2. 거대한 main() 함수 (SRP 원칙 위반)</h3>
<pre class="language-javascript"><code class="language-javascript code-highlight"><span class="code-line"><span class="token keyword">function</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token keyword">var</span> root<span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token keyword">var</span> header<span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token keyword">var</span> gridContainer<span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token keyword">var</span> leftColumn<span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token keyword">var</span> selectorContainer<span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token keyword">var</span> rightColumn<span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token keyword">var</span> manualToggle<span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token keyword">var</span> manualOverlay<span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token keyword">var</span> manualColumn<span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token keyword">var</span> lightningDelay<span class="token punctuation">;</span>
</span><span class="code-line">  
</span><span class="code-line">  totalAmt <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
</span><span class="code-line">  itemCnt <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
</span><span class="code-line">  lastSel <span class="token operator">=</span> <span class="token keyword null nil">null</span><span class="token punctuation">;</span>
</span><span class="code-line">  
</span><span class="code-line">  prodList <span class="token operator">=</span> <span class="token punctuation">[</span>
</span><span class="code-line">    <span class="token punctuation">{</span> <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token constant">PRODUCT_ONE</span><span class="token punctuation">,</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#x27;버그 없애는 키보드&#x27;</span><span class="token punctuation">,</span> <span class="token literal-property property">val</span><span class="token operator">:</span> <span class="token number">10000</span><span class="token punctuation">,</span> <span class="token literal-property property">q</span><span class="token operator">:</span> <span class="token number">50</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
</span><span class="code-line">    <span class="token punctuation">{</span> <span class="token literal-property property">id</span><span class="token operator">:</span> p2<span class="token punctuation">,</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#x27;생산성 폭발 마우스&#x27;</span><span class="token punctuation">,</span> <span class="token literal-property property">val</span><span class="token operator">:</span> <span class="token number">20000</span><span class="token punctuation">,</span> <span class="token literal-property property">q</span><span class="token operator">:</span> <span class="token number">30</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
</span><span class="code-line">    <span class="token comment">// ...</span>
</span><span class="code-line">  <span class="token punctuation">]</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="token comment">// DOM 생성, 이벤트 바인딩, 초기 상태 세팅, 세일 타이머 로직이 전부 들어있음</span>
</span><span class="code-line">  <span class="token comment">// ...</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code><div class="copied" data-code="function main() {
  var root;
  var header;
  var gridContainer;
  var leftColumn;
  var selectorContainer;
  var rightColumn;
  var manualToggle;
  var manualOverlay;
  var manualColumn;
  var lightningDelay;
  
  totalAmt = 0;
  itemCnt = 0;
  lastSel = null;
  
  prodList = [
    { id: PRODUCT_ONE, name: &#x27;버그 없애는 키보드&#x27;, val: 10000, q: 50 },
    { id: p2, name: &#x27;생산성 폭발 마우스&#x27;, val: 20000, q: 30 },
    // ...
  ];

  // DOM 생성, 이벤트 바인딩, 초기 상태 세팅, 세일 타이머 로직이 전부 들어있음
  // ...
}
"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
<ul>
<li>**문제점: **
<ul>
<li><strong>UI 초기화, 상태 초기화, 비즈니스 로직, 이벤트 바인딩</strong>이 모두 하나의 함수에 섞여 있음</li>
<li>함수 길이가 너무 길어 <strong>가독성 저하</strong> 및 <strong>유지보수 어려움</strong></li>
<li>테스트하기 힘들고 재사용 불가능</li>
</ul>
</li>
</ul>
<h3 id="3-3-중첩-if-else-로직"><a aria-hidden="true" tabindex="-1" href="#3-3-중첩-if-else-로직"><span class="icon icon-link"></span></a>3-3. 중첩 if-else 로직</h3>
<pre class="language-javascript"><code class="language-javascript code-highlight"><span class="code-line"><span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>q <span class="token operator">&gt;=</span> <span class="token number">10</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>curItem<span class="token punctuation">.</span><span class="token property-access">id</span> <span class="token operator">===</span> <span class="token constant">PRODUCT_ONE</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">    disc <span class="token operator">=</span> <span class="token number">10</span> <span class="token operator">/</span> <span class="token number">100</span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token punctuation">}</span> <span class="token keyword control-flow">else</span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>curItem<span class="token punctuation">.</span><span class="token property-access">id</span> <span class="token operator">===</span> p2<span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">      disc <span class="token operator">=</span> <span class="token number">15</span> <span class="token operator">/</span> <span class="token number">100</span><span class="token punctuation">;</span>
</span><span class="code-line">    <span class="token punctuation">}</span> <span class="token keyword control-flow">else</span> <span class="token punctuation">{</span>
</span><span class="code-line">      <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>curItem<span class="token punctuation">.</span><span class="token property-access">id</span> <span class="token operator">===</span> product_3<span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">        disc <span class="token operator">=</span> <span class="token number">20</span> <span class="token operator">/</span> <span class="token number">100</span><span class="token punctuation">;</span>
</span><span class="code-line">      <span class="token punctuation">}</span> <span class="token keyword control-flow">else</span> <span class="token punctuation">{</span>
</span><span class="code-line">        <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>curItem<span class="token punctuation">.</span><span class="token property-access">id</span> <span class="token operator">===</span> p4<span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">          disc <span class="token operator">=</span> <span class="token number">5</span> <span class="token operator">/</span> <span class="token number">100</span><span class="token punctuation">;</span>
</span><span class="code-line">        <span class="token punctuation">}</span> <span class="token keyword control-flow">else</span> <span class="token punctuation">{</span>
</span><span class="code-line">          <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>curItem<span class="token punctuation">.</span><span class="token property-access">id</span> <span class="token operator">===</span> <span class="token constant">PRODUCT_5</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">            disc <span class="token operator">=</span> <span class="token number">25</span> <span class="token operator">/</span> <span class="token number">100</span><span class="token punctuation">;</span>
</span><span class="code-line">          <span class="token punctuation">}</span>
</span><span class="code-line">        <span class="token punctuation">}</span>
</span><span class="code-line">      <span class="token punctuation">}</span>
</span><span class="code-line">    <span class="token punctuation">}</span>
</span><span class="code-line">  <span class="token punctuation">}</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code><div class="copied" data-code="if (q &gt;= 10) {
  if (curItem.id === PRODUCT_ONE) {
    disc = 10 / 100;
  } else {
    if (curItem.id === p2) {
      disc = 15 / 100;
    } else {
      if (curItem.id === product_3) {
        disc = 20 / 100;
      } else {
        if (curItem.id === p4) {
          disc = 5 / 100;
        } else {
          if (curItem.id === PRODUCT_5) {
            disc = 25 / 100;
          }
        }
      }
    }
  }
}
"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
<ul>
<li><strong>문제점:</strong>
<ul>
<li>중첩 if-else가 깊어서 가독성이 매우 떨어짐</li>
<li>할인 정책이 데이터가 아닌 조건문 로직으로 하드코딩
<ul>
<li>변경 시 코드 전체 수정 필요</li>
</ul>
</li>
<li>새로운 제품 추가 시 if-else 블록이 더 커짐
<ul>
<li><strong>OCP(Open/Closed Principle) 위반</strong>
<ul>
<li>소프트웨어 개체(클래스, 모듈, 함수 등등)는 확장에 대해 열려 있어야 하고, 수정에 대해서는 닫혀 있어야 한다는 원칙</li>
<li><strong>기능 추가</strong> 요청이 오면 클래스를 확장을 통해 <strong>손쉽게 구현</strong>하면서, <strong>확장에 따른 클래스 수정</strong>은 <strong>최소화</strong> 하도록 프로그램을 작성해야 하는 설계 기법을 말함.</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="3-4-dom-직접-조작--비즈니스-로직-혼합"><a aria-hidden="true" tabindex="-1" href="#3-4-dom-직접-조작--비즈니스-로직-혼합"><span class="icon icon-link"></span></a>3-4. DOM 직접 조작 + 비즈니스 로직 혼합</h3>
<pre class="language-js"><code class="language-js code-highlight"><span class="code-line">opt <span class="token operator">=</span> <span class="token dom variable">document</span><span class="token punctuation">.</span><span class="token method function property-access">createElement</span><span class="token punctuation">(</span><span class="token string">&#x27;option&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">opt<span class="token punctuation">.</span><span class="token property-access">value</span> <span class="token operator">=</span> item<span class="token punctuation">.</span><span class="token property-access">id</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>item<span class="token punctuation">.</span><span class="token property-access">q</span> <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">  opt<span class="token punctuation">.</span><span class="token property-access">textContent</span> <span class="token operator">=</span> item<span class="token punctuation">.</span><span class="token property-access">name</span> <span class="token operator">+</span> <span class="token string">&#x27; - &#x27;</span> <span class="token operator">+</span> item<span class="token punctuation">.</span><span class="token property-access">val</span> <span class="token operator">+</span> <span class="token string">&#x27;원 (품절)&#x27;</span><span class="token punctuation">;</span>
</span><span class="code-line">  opt<span class="token punctuation">.</span><span class="token property-access">disabled</span> <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token punctuation">}</span> <span class="token keyword control-flow">else</span> <span class="token punctuation">{</span>
</span><span class="code-line">  opt<span class="token punctuation">.</span><span class="token property-access">textContent</span> <span class="token operator">=</span> item<span class="token punctuation">.</span><span class="token property-access">name</span> <span class="token operator">+</span> <span class="token string">&#x27; - &#x27;</span> <span class="token operator">+</span> item<span class="token punctuation">.</span><span class="token property-access">val</span> <span class="token operator">+</span> <span class="token string">&#x27;원&#x27;</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span><span class="code-line">sel<span class="token punctuation">.</span><span class="token method function property-access">appendChild</span><span class="token punctuation">(</span>opt<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></code><div class="copied" data-code="opt = document.createElement(&#x27;option&#x27;);
opt.value = item.id;
if (item.q === 0) {
  opt.textContent = item.name + &#x27; - &#x27; + item.val + &#x27;원 (품절)&#x27;;
  opt.disabled = true;
} else {
  opt.textContent = item.name + &#x27; - &#x27; + item.val + &#x27;원&#x27;;
}
sel.appendChild(opt);
"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
<ul>
<li>**문제점: **
<ul>
<li>DOM 조작과 데이터 처리 로직이 섞여 있음</li>
<li>재사용성과 테스트 가능성 낮음</li>
<li>React, Vue 같은 선언형 UI로 전환이 어려움</li>
</ul>
</li>
</ul>
<h3 id="3-5-매직-넘버--하드코딩된-문자열"><a aria-hidden="true" tabindex="-1" href="#3-5-매직-넘버--하드코딩된-문자열"><span class="icon icon-link"></span></a>3-5. 매직 넘버 &amp; 하드코딩된 문자열</h3>
<pre class="language-js"><code class="language-js code-highlight"><span class="code-line"><span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>itemCnt <span class="token operator">&gt;=</span> <span class="token number">30</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">  totalAmt <span class="token operator">=</span> <span class="token punctuation">(</span>subTot <span class="token operator">*</span> <span class="token number">75</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">100</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span><span class="code-line"><span class="token keyword control-flow">if</span> <span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">getDay</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">  totalAmt <span class="token operator">=</span> <span class="token punctuation">(</span>totalAmt <span class="token operator">*</span> <span class="token number">90</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">100</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code><div class="copied" data-code="if (itemCnt &gt;= 30) {
  totalAmt = (subTot * 75) / 100;
}
if (new Date().getDay() === 2) {
  totalAmt = (totalAmt * 90) / 100;
}
"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
<ul>
<li>**문제점: **
<ul>
<li>30, 75, 90, 2와 같은 숫자가 의미 없이 등장
<ul>
<li><strong>매직 넘버</strong>로 인해 코드 가독성이 떨어지고 유지보수가 어려워짐</li>
</ul>
</li>
<li>할인율, 요일 로직이 코드에 직접 하드코딩
<ul>
<li>정책 변경 시 코드 수정 필요</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="3-6-중복-코드"><a aria-hidden="true" tabindex="-1" href="#3-6-중복-코드"><span class="icon icon-link"></span></a>3-6. 중복 코드</h3>
<pre class="language-js"><code class="language-js code-highlight"><span class="code-line"><span class="token keyword">var</span> totalCount <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token keyword control-flow">for</span> <span class="token punctuation">(</span>j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> cartDisp<span class="token punctuation">.</span><span class="token property-access">children</span><span class="token punctuation">.</span><span class="token property-access">length</span><span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">  totalCount <span class="token operator">+=</span> <span class="token function">parseInt</span><span class="token punctuation">(</span>
</span><span class="code-line">    cartDisp<span class="token punctuation">.</span><span class="token property-access">children</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token method function property-access">querySelector</span><span class="token punctuation">(</span><span class="token string">&#x27;.quantity-number&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token property-access">textContent</span>
</span><span class="code-line">  <span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword">var</span> totalCount <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token keyword control-flow">for</span> <span class="token punctuation">(</span>j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> cartDisp<span class="token punctuation">.</span><span class="token property-access">children</span><span class="token punctuation">.</span><span class="token property-access">length</span><span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">  totalCount <span class="token operator">+=</span> <span class="token function">parseInt</span><span class="token punctuation">(</span>
</span><span class="code-line">    cartDisp<span class="token punctuation">.</span><span class="token property-access">children</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token method function property-access">querySelector</span><span class="token punctuation">(</span><span class="token string">&#x27;.quantity-number&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token property-access">textContent</span>
</span><span class="code-line">  <span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code><div class="copied" data-code="var totalCount = 0;
for (j = 0; j &lt; cartDisp.children.length; j++) {
  totalCount += parseInt(
    cartDisp.children[j].querySelector(&#x27;.quantity-number&#x27;).textContent
  );
}

var totalCount = 0;
for (j = 0; j &lt; cartDisp.children.length; j++) {
  totalCount += parseInt(
    cartDisp.children[j].querySelector(&#x27;.quantity-number&#x27;).textContent
  );
}
"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
<p>**문제점: **</p>
<ul>
<li>동일한 로직이 두 번 등장
<ul>
<li>DRY 원칙 위반</li>
</ul>
</li>
<li>수정 시 한 곳만 바꾸면 버그 발생 가능성 ↑</li>
</ul>
<hr/>
<h2 id="4-gemini-cli와-협업"><a aria-hidden="true" tabindex="-1" href="#4-gemini-cli와-협업"><span class="icon icon-link"></span></a>4. Gemini CLI와 협업</h2>
<p>최근 AI 툴들이 쏟아지는 와중에 현업에서도 활용 능력을 요구하는 상황이 종종 주어진다.
과제 취지 또한 AI를 적극 활용해서 클린한 코드를 만드는걸 지향하고 있다.</p>
<p>이 과정에서 최근 구글에서 무료로 풀어놔서 최근에 활용중인 Gemini CLI를 사용하기로 했다.</p>
<h3 id="불편했던-점"><a aria-hidden="true" tabindex="-1" href="#불편했던-점"><span class="icon icon-link"></span></a>불편했던 점</h3>
<ul>
<li>터미널에서 실행되기 때문에 긴 컨텍스트를 전달하기가 쉽지 않다.</li>
<li>대규모 작업에는 좋지 않은 성능(이건 모든 AI가 동일한가? 비교적 좋지 않은 듯 하다.)</li>
</ul>
<h3 id="개선-방안"><a aria-hidden="true" tabindex="-1" href="#개선-방안"><span class="icon icon-link"></span></a>개선 방안</h3>
<ul>
<li><code>GEMINI.md</code> 파일로 지침 설정
<img src="https://velog.velcdn.com/images/jujini31/post/5a233dec-cc23-41ad-b42d-42faa898757a/image.png" alt=""/>
<ul>
<li>해당 지침을 설정한 후 &quot;GEMINI.md 파일을 참고해서 ~ 작업을 진행하는 과정 설명해&quot; 와 같은 <strong>긴 컨텍스트가 필요한 질문을 1줄로 축약해서 요청할 수 있음.</strong></li>
</ul>
</li>
<li>가급적 <strong>작은 단위와 명확한 요청사항</strong>으로 명령
<ul>
<li>분할과 정복의 개념을 AI 와의 협업에도 적용시키면 좋다.</li>
<li>만약 내가 하는 요청이 큰 작업 내용인지 잘 모르겠다면 &quot;해당 요구사항의 작업 단위가 크다면 작게 분할해서 작업을 진행해&quot; 와 같은 내용으로 요청</li>
</ul>
</li>
</ul>
<p>이런 식으로 AI 와 함께 클린 코드를 만들어가고 마이그레이션을 진행해보면서
다가올지도 모르는 AI의 시대에 적응할 수 있는 기반을 다지는 좋은 기회가 되었다.</p>
<h2 id="5-js-환경에서의-리팩토링"><a aria-hidden="true" tabindex="-1" href="#5-js-환경에서의-리팩토링"><span class="icon icon-link"></span></a>5. JS 환경에서의 리팩토링</h2>
<p>기본 과제는 DOM을 직접 조작하는 순수 JavaScript 환경이었기 때문에 리팩토링 과정에서 React와는 다른 기술적 고민이 필요했다.</p>
<h3 id="51-전체적인-구조-설계"><a aria-hidden="true" tabindex="-1" href="#51-전체적인-구조-설계"><span class="icon icon-link"></span></a>5.1. 전체적인 구조 설계</h3>
<p><code>src/basic</code> 폴더는 다음과 같은 모듈화된 구조를 가지고 있었다. 각 파일은 명확한 책임을 가지도록 설계되어 코드의 가독성과 유지보수성을 높임.</p>
<ul>
<li>main.basic.js
<ul>
<li>애플리케이션의 진입점 역할을 하며 전역 상태를 초기화하고 주요 컴포넌트를 DOM에 렌더링</li>
<li>이벤트 리스너를 설정하고 render 함수를 호출하여 UI를 업데이트</li>
</ul>
</li>
<li>components/
<ul>
<li>UI를 구성하는 작은 단위의 컴포넌트를 모아둔 폴더
<ul>
<li>(예: CartItem.js, Header.js, HelpModal.js, Layout.js, Selector.js)</li>
</ul>
</li>
<li>각 컴포넌트는 자신의 DOM 요소를 생성하고 반환하는 역할을 담당</li>
</ul>
</li>
<li>product/
<ul>
<li>상품 관련 로직과 상태를 관리
<ul>
<li>(예: productState.js, lightningSale.js)</li>
</ul>
</li>
</ul>
</li>
<li>cart/
<ul>
<li>장바구니 관련 로직과 상태를 관리
<ul>
<li>(예: cartState.js)</li>
</ul>
</li>
</ul>
</li>
<li>point/
<ul>
<li>포인트 관련 로직과 상태를 관리
<ul>
<li>(예: pointState.js)</li>
</ul>
</li>
</ul>
</li>
<li>handlers.js
<ul>
<li>사용자 인터랙션(상품 추가, 수량 변경 등)에 대한 이벤트 핸들러 함수를 정의</li>
</ul>
</li>
<li>render.js
<ul>
<li>애플리케이션의 상태 변화에 따라 UI를 업데이트하는 핵심 렌더링 로직을 담당</li>
</ul>
</li>
<li>calculation.js
<ul>
<li>장바구니 총액, 할인율, 포인트 계산 등 순수 계산 로직을 분리</li>
</ul>
</li>
<li>utils/
<ul>
<li>범용적으로 사용되는 유틸리티 함수들을 모아둠
<ul>
<li>(예: utils.js, errorMessages.js)</li>
</ul>
</li>
</ul>
</li>
<li>tests/
<ul>
<li>각 모듈에 대한 단위 테스트 코드를 포함했다.
<ul>
<li>단일 책임 원칙과 코드 조직화 원칙을 적용해 각 모듈이 독립적으로 테스트되고 관리될 수 있도록 했다.</li>
</ul>
</li>
</ul>
</li>
</ul>
<hr/>
<h2 id="52-리팩토링-과정에서-발생한-문제점-및-해결-방안"><a aria-hidden="true" tabindex="-1" href="#52-리팩토링-과정에서-발생한-문제점-및-해결-방안"><span class="icon icon-link"></span></a>5.2. 리팩토링 과정에서 발생한 문제점 및 해결 방안</h2>
<h3 id="521-문제점-1-카트-아이템의-동적-할인-가격-표시-및-이벤트-리스너-유실"><a aria-hidden="true" tabindex="-1" href="#521-문제점-1-카트-아이템의-동적-할인-가격-표시-및-이벤트-리스너-유실"><span class="icon icon-link"></span></a>5.2.1. 문제점 1: 카트 아이템의 동적 할인 가격 표시 및 이벤트 리스너 유실</h3>
<p>**문제 상황: **</p>
<ul>
<li>번개세일·추천할인 등 상품 가격이 변경될 때 cart-items 영역의 개별 상품 가격과 총 가격이 할인 UI로 올바르게 반영되지 않음</li>
<li>src/basic/render.js에서 CartItem DOM 요소를 통째로 교체하려 했을 때 기존에 부착된 수량 변경 버튼의 이벤트 리스너가 유실되는 회귀 발생</li>
<li>npx vitest run 실행 시 expected &#x27;2&#x27; to be &#x27;1&#x27; AssertionError로 문제를 확인함</li>
</ul>
<p>**기술적 고민: **</p>
<ul>
<li>GEMINI.md의 기능 불변성 유지 원칙에 따라 기존 기능(수량 변경 버튼의 작동)을 유지해야 했음</li>
<li>순수 JS에서 DOM 교체 시 이벤트 리스너가 함께 사라진다는 특성을 고려해야 했음</li>
<li>이벤트를 유지하면서 UI를 동적으로 업데이트하는 방식이 필요했음</li>
</ul>
<p>**해결 방안: **</p>
<ol>
<li>render.js 수정
<ul>
<li>CartItem 전체를 교체하지 않고 기존 DOM 요소를 재활용, 내부 특정 요소만 업데이트하도록 변경함</li>
</ul>
</li>
<li>가격 표시 HTML 직접 갱신
<ul>
<li>p.onSale 또는 p.suggest 플래그를 확인해 원래 가격에는 취소선을, 할인 가격은 빨간색 강조를 적용한 HTML을 생성해 innerHTML로 삽입함</li>
</ul>
</li>
</ol>
<p><code>코드 예시 (src/basic/render.js)</code></p>
<pre class="language-js"><code class="language-js code-highlight"><span class="code-line">state<span class="token punctuation">.</span><span class="token property-access">cartItems</span><span class="token punctuation">.</span><span class="token method function property-access">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">ci</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">  alive<span class="token punctuation">.</span><span class="token method function property-access">add</span><span class="token punctuation">(</span>ci<span class="token punctuation">.</span><span class="token property-access">id</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token keyword">let</span> row <span class="token operator">=</span> cartWrap<span class="token punctuation">.</span><span class="token method function property-access">querySelector</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">#</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>ci<span class="token punctuation">.</span><span class="token property-access">id</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>row<span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">    row <span class="token operator">=</span> <span class="token function"><span class="token maybe-class-name">CartItem</span></span><span class="token punctuation">(</span>ci<span class="token punctuation">,</span> state<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">    cartWrap<span class="token punctuation">.</span><span class="token method function property-access">appendChild</span><span class="token punctuation">(</span>row<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token punctuation">}</span>
</span><span class="code-line">  row<span class="token punctuation">.</span><span class="token method function property-access">querySelector</span><span class="token punctuation">(</span><span class="token string">&#x27;.quantity-number&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token property-access">textContent</span> <span class="token operator">=</span> ci<span class="token punctuation">.</span><span class="token property-access">qty</span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token keyword">const</span> product <span class="token operator">=</span> state<span class="token punctuation">.</span><span class="token property-access">productList</span><span class="token punctuation">.</span><span class="token method function property-access">find</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">p</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> p<span class="token punctuation">.</span><span class="token property-access">id</span> <span class="token operator">===</span> ci<span class="token punctuation">.</span><span class="token property-access">id</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="token keyword">const</span> individualPriceHtml <span class="token operator">=</span> product<span class="token punctuation">.</span><span class="token property-access">onSale</span> <span class="token operator">||</span> product<span class="token punctuation">.</span><span class="token property-access">suggest</span>
</span><span class="code-line">    <span class="token operator">?</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;span class=&quot;line-through text-gray-400&quot;&gt;₩</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>product<span class="token punctuation">.</span><span class="token property-access">originalPrice</span><span class="token punctuation">.</span><span class="token method function property-access">toLocaleString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&lt;/span&gt; &lt;span class=&quot;text-red-500&quot;&gt;₩</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>product<span class="token punctuation">.</span><span class="token property-access">price</span><span class="token punctuation">.</span><span class="token method function property-access">toLocaleString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&lt;/span&gt;</span><span class="token template-punctuation string">`</span></span>
</span><span class="code-line">    <span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">₩</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>product<span class="token punctuation">.</span><span class="token property-access">price</span><span class="token punctuation">.</span><span class="token method function property-access">toLocaleString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
</span><span class="code-line">  row<span class="token punctuation">.</span><span class="token method function property-access">querySelector</span><span class="token punctuation">(</span><span class="token string">&#x27;.text-xs.text-black.mb-3&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token property-access">innerHTML</span> <span class="token operator">=</span> individualPriceHtml<span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="token keyword">const</span> totalPriceHtml <span class="token operator">=</span> product<span class="token punctuation">.</span><span class="token property-access">onSale</span> <span class="token operator">||</span> product<span class="token punctuation">.</span><span class="token property-access">suggest</span>
</span><span class="code-line">    <span class="token operator">?</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;span class=&quot;line-through text-gray-400&quot;&gt;₩</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token punctuation">(</span>product<span class="token punctuation">.</span><span class="token property-access">originalPrice</span> <span class="token operator">*</span> ci<span class="token punctuation">.</span><span class="token property-access">qty</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">toLocaleString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&lt;/span&gt; &lt;span class=&quot;text-red-500&quot;&gt;₩</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token punctuation">(</span>product<span class="token punctuation">.</span><span class="token property-access">price</span> <span class="token operator">*</span> ci<span class="token punctuation">.</span><span class="token property-access">qty</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">toLocaleString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&lt;/span&gt;</span><span class="token template-punctuation string">`</span></span>
</span><span class="code-line">    <span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">₩</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token punctuation">(</span>product<span class="token punctuation">.</span><span class="token property-access">price</span> <span class="token operator">*</span> ci<span class="token punctuation">.</span><span class="token property-access">qty</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">toLocaleString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
</span><span class="code-line">  row<span class="token punctuation">.</span><span class="token method function property-access">querySelector</span><span class="token punctuation">(</span><span class="token string">&#x27;.text-lg&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token property-access">innerHTML</span> <span class="token operator">=</span> totalPriceHtml<span class="token punctuation">;</span>
</span><span class="code-line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></code><div class="copied" data-code="state.cartItems.forEach((ci) =&gt; {
  alive.add(ci.id);
  let row = cartWrap.querySelector(`#${ci.id}`);
  if (!row) {
    row = CartItem(ci, state);
    cartWrap.appendChild(row);
  }
  row.querySelector(&#x27;.quantity-number&#x27;).textContent = ci.qty;
  const product = state.productList.find((p) =&gt; p.id === ci.id);

  const individualPriceHtml = product.onSale || product.suggest
    ? `&lt;span class=&quot;line-through text-gray-400&quot;&gt;₩${product.originalPrice.toLocaleString()}&lt;/span&gt; &lt;span class=&quot;text-red-500&quot;&gt;₩${product.price.toLocaleString()}&lt;/span&gt;`
    : `₩${product.price.toLocaleString()}`;
  row.querySelector(&#x27;.text-xs.text-black.mb-3&#x27;).innerHTML = individualPriceHtml;

  const totalPriceHtml = product.onSale || product.suggest
    ? `&lt;span class=&quot;line-through text-gray-400&quot;&gt;₩${(product.originalPrice * ci.qty).toLocaleString()}&lt;/span&gt; &lt;span class=&quot;text-red-500&quot;&gt;₩${(product.price * ci.qty).toLocaleString()}&lt;/span&gt;`
    : `₩${(product.price * ci.qty).toLocaleString()}`;
  row.querySelector(&#x27;.text-lg&#x27;).innerHTML = totalPriceHtml;
});
"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
<p>이 접근 방식으로 기존 이벤트 리스너를 유지하면서 할인 UI를 실시간으로 반영할 수 있었다.</p>
<hr/>
<h3 id="522-문제점-2-이용-안내-모달-버튼의-uiux-불일치"><a aria-hidden="true" tabindex="-1" href="#522-문제점-2-이용-안내-모달-버튼의-uiux-불일치"><span class="icon icon-link"></span></a>5.2.2. 문제점 2: &quot;이용 안내&quot; 모달 버튼의 UI/UX 불일치</h3>
<p><strong>문제 상황:</strong></p>
<ul>
<li>HelpModal.js 추가 시 모달이 열려도 원래의 토글 버튼이 사라지지 않음</li>
<li>버튼 시각 스타일이 main.original.js와 달라 UI 일관성이 깨짐</li>
</ul>
<p><strong>기술적 고민:</strong></p>
<ul>
<li>GEMINI.md의 동작 일관성 보장 원칙에 따라 동일한 사용자 경험을 제공해야 했음</li>
<li>순수 JS 환경에서 DOM 가시성 제어, 동적으로 추가된 &#x27;X&#x27; 버튼의 이벤트 리스너 관리, 인라인 onclick 제거가 필요했음</li>
</ul>
<p><strong>해결 방안:</strong></p>
<ul>
<li>
<p>버튼 시각 스타일 통일
helpBtn에 manualToggle과 동일한 Tailwind CSS 및 SVG 아이콘을 적용함</p>
</li>
<li>
<p>가시성 제어 로직 추가</p>
<ul>
<li>helpBtn.onclick: 모달 열릴 때 helpBtn 숨김</li>
<li>closeHelpModal(): 모달 닫을 때 helpBtn 다시 표시</li>
<li>오버레이 클릭, &#x27;X&#x27; 버튼 클릭 시 closeHelpModal 호출</li>
<li>&#x27;X&#x27; 버튼의 인라인 onclick 제거 후 querySelector로 이벤트 동적 부착</li>
</ul>
</li>
</ul>
<p><code>코드 예시 (src/basic/components/HelpModal.js)</code></p>
<pre class="language-js"><code class="language-js code-highlight"><span class="code-line"><span class="token keyword">const</span> helpBtn <span class="token operator">=</span> <span class="token dom variable">document</span><span class="token punctuation">.</span><span class="token method function property-access">createElement</span><span class="token punctuation">(</span><span class="token string">&#x27;button&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">helpBtn<span class="token punctuation">.</span><span class="token property-access">className</span> <span class="token operator">=</span> <span class="token string">&#x27;fixed top-4 right-4 bg-black text-white p-3 rounded-full hover:bg-gray-900 transition-colors z-50&#x27;</span><span class="token punctuation">;</span>
</span><span class="code-line">helpBtn<span class="token punctuation">.</span><span class="token property-access">innerHTML</span> <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token html language-html">
</span></span></span><span class="code-line"><span class="token template-string"><span class="token html language-html">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>svg</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>w-5 h-5<span class="token punctuation">&quot;</span></span> <span class="token attr-name">fill</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>none<span class="token punctuation">&quot;</span></span> <span class="token attr-name">stroke</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>currentColor<span class="token punctuation">&quot;</span></span> <span class="token attr-name">viewBox</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0 0 24 24<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
</span></span></span><span class="code-line"><span class="token template-string"><span class="token html language-html">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>path</span> <span class="token attr-name">stroke-linecap</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>round<span class="token punctuation">&quot;</span></span> <span class="token attr-name">stroke-linejoin</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>round<span class="token punctuation">&quot;</span></span> <span class="token attr-name">stroke-width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>2<span class="token punctuation">&quot;</span></span> <span class="token attr-name">d</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>path</span><span class="token punctuation">&gt;</span></span>
</span></span></span><span class="code-line"><span class="token template-string"><span class="token html language-html">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>svg</span><span class="token punctuation">&gt;</span></span>
</span></span></span><span class="code-line"><span class="token template-string"><span class="token html language-html"></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line">slide<span class="token punctuation">.</span><span class="token property-access">innerHTML</span> <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token html language-html">
</span></span></span><span class="code-line"><span class="token template-string"><span class="token html language-html">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>absolute top-4 right-4 text-gray-500 hover:text-black help-modal-close-btn<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
</span></span></span><span class="code-line"><span class="token template-string"><span class="token html language-html">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>svg</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>w-6 h-6<span class="token punctuation">&quot;</span></span> <span class="token attr-name">fill</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>none<span class="token punctuation">&quot;</span></span> <span class="token attr-name">stroke</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>currentColor<span class="token punctuation">&quot;</span></span> <span class="token attr-name">viewBox</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0 0 24 24<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
</span></span></span><span class="code-line"><span class="token template-string"><span class="token html language-html">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>path</span> <span class="token attr-name">stroke-linecap</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>round<span class="token punctuation">&quot;</span></span> <span class="token attr-name">stroke-linejoin</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>round<span class="token punctuation">&quot;</span></span> <span class="token attr-name">stroke-width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>2<span class="token punctuation">&quot;</span></span> <span class="token attr-name">d</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>M6 18L18 6M6 6l12 12<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>path</span><span class="token punctuation">&gt;</span></span>
</span></span></span><span class="code-line"><span class="token template-string"><span class="token html language-html">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>svg</span><span class="token punctuation">&gt;</span></span>
</span></span></span><span class="code-line"><span class="token template-string"><span class="token html language-html">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
</span></span></span><span class="code-line"><span class="token template-string"><span class="token html language-html">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text-xl font-bold mb-4<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>이용 안내<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span>
</span></span></span><span class="code-line"><span class="token template-string"><span class="token html language-html"></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword">const</span> <span class="token function-variable function">closeHelpModal</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">  modal<span class="token punctuation">.</span><span class="token property-access">classList</span><span class="token punctuation">.</span><span class="token method function property-access">add</span><span class="token punctuation">(</span><span class="token string">&#x27;hidden&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">  slide<span class="token punctuation">.</span><span class="token property-access">classList</span><span class="token punctuation">.</span><span class="token method function property-access">add</span><span class="token punctuation">(</span><span class="token string">&#x27;translate-x-full&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">  helpBtn<span class="token punctuation">.</span><span class="token property-access">classList</span><span class="token punctuation">.</span><span class="token method function property-access">remove</span><span class="token punctuation">(</span><span class="token string">&#x27;hidden&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token punctuation">}</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line">helpBtn<span class="token punctuation">.</span><span class="token method-variable function-variable method function property-access">onclick</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">  modal<span class="token punctuation">.</span><span class="token property-access">classList</span><span class="token punctuation">.</span><span class="token method function property-access">remove</span><span class="token punctuation">(</span><span class="token string">&#x27;hidden&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">  slide<span class="token punctuation">.</span><span class="token property-access">classList</span><span class="token punctuation">.</span><span class="token method function property-access">remove</span><span class="token punctuation">(</span><span class="token string">&#x27;translate-x-full&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">  helpBtn<span class="token punctuation">.</span><span class="token property-access">classList</span><span class="token punctuation">.</span><span class="token method function property-access">add</span><span class="token punctuation">(</span><span class="token string">&#x27;hidden&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token punctuation">}</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line">modal<span class="token punctuation">.</span><span class="token method-variable function-variable method function property-access">onclick</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token keyword control-flow">if</span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span><span class="token property-access">target</span> <span class="token operator">===</span> modal<span class="token punctuation">)</span> <span class="token function">closeHelpModal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token punctuation">}</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line">slide<span class="token punctuation">.</span><span class="token method function property-access">querySelector</span><span class="token punctuation">(</span><span class="token string">&#x27;.help-modal-close-btn&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method-variable function-variable method function property-access">onclick</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token function">closeHelpModal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token punctuation">}</span><span class="token punctuation">;</span>
</span></code><div class="copied" data-code="const helpBtn = document.createElement(&#x27;button&#x27;);
helpBtn.className = &#x27;fixed top-4 right-4 bg-black text-white p-3 rounded-full hover:bg-gray-900 transition-colors z-50&#x27;;
helpBtn.innerHTML = `
  &lt;svg class=&quot;w-5 h-5&quot; fill=&quot;none&quot; stroke=&quot;currentColor&quot; viewBox=&quot;0 0 24 24&quot;&gt;
    &lt;path stroke-linecap=&quot;round&quot; stroke-linejoin=&quot;round&quot; stroke-width=&quot;2&quot; d=&quot;M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z&quot;&gt;&lt;/path&gt;
  &lt;/svg&gt;
`;

slide.innerHTML = `
  &lt;button class=&quot;absolute top-4 right-4 text-gray-500 hover:text-black help-modal-close-btn&quot;&gt;
    &lt;svg class=&quot;w-6 h-6&quot; fill=&quot;none&quot; stroke=&quot;currentColor&quot; viewBox=&quot;0 0 24 24&quot;&gt;
      &lt;path stroke-linecap=&quot;round&quot; stroke-linejoin=&quot;round&quot; stroke-width=&quot;2&quot; d=&quot;M6 18L18 6M6 6l12 12&quot;&gt;&lt;/path&gt;
    &lt;/svg&gt;
  &lt;/button&gt;
  &lt;h2 class=&quot;text-xl font-bold mb-4&quot;&gt;이용 안내&lt;/h2&gt;
`;

const closeHelpModal = () =&gt; {
  modal.classList.add(&#x27;hidden&#x27;);
  slide.classList.add(&#x27;translate-x-full&#x27;);
  helpBtn.classList.remove(&#x27;hidden&#x27;);
};

helpBtn.onclick = () =&gt; {
  modal.classList.remove(&#x27;hidden&#x27;);
  slide.classList.remove(&#x27;translate-x-full&#x27;);
  helpBtn.classList.add(&#x27;hidden&#x27;);
};

modal.onclick = (e) =&gt; {
  if (e.target === modal) closeHelpModal();
};

slide.querySelector(&#x27;.help-modal-close-btn&#x27;).onclick = () =&gt; {
  closeHelpModal();
};
"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
<p>이렇게 리팩토링해 main.original.js와 동일한 UX를 확보했고 인라인 이벤트를 제거하면서 클린 코드 원칙도 지킬 수 있었다.</p>
<h2 id="6-react--ts-환경으로-마이그레이션"><a aria-hidden="true" tabindex="-1" href="#6-react--ts-환경으로-마이그레이션"><span class="icon icon-link"></span></a>6. React + TS 환경으로 마이그레이션</h2>
<p><code>src/advanced</code> 폴더는 React와 TypeScript를 기반으로 구축해야 한다.</p>
<p>basic 폴더의 순수 JavaScript 코드와 달리 React의 컴포넌트 기반 아키텍처, Hooks를 활용한 상태 관리, TypeScript의 타입 안정성을 적극적으로 적용하며 개발을 진행했다.</p>
<p>마이그레이션 과정에서는 GEMINI.md의 React 관용적 코드와 TypeScript 우선 원칙을 지키면서 리팩토링을 진행했다.</p>
<h3 id="61-전체적인-구조-설계"><a aria-hidden="true" tabindex="-1" href="#61-전체적인-구조-설계"><span class="icon icon-link"></span></a>6.1. 전체적인 구조 설계</h3>
<p><code>src/advanced</code> 폴더는 다음과 같은 계층적이고 모듈화된 구조를 가지고 있었다.</p>
<ul>
<li>
<p>App.tsx</p>
<ul>
<li>애플리케이션의 최상위 컴포넌트</li>
<li>상품 목록과 장바구니 상태 등 주요 상태를 관리하고 하위 컴포넌트에 props로 전달</li>
<li>커스텀 훅을 사용해 비즈니스 로직과 상태 관리를 분리</li>
</ul>
</li>
<li>
<p>components/</p>
<ul>
<li>재사용 가능한 UI 컴포넌트를 모아둔 폴더</li>
<li>(예: Cart.tsx, CartItem.tsx, Header.tsx, HelpModal.tsx, Layout.tsx, OrderSummary.tsx, Selector.tsx)</li>
<li>각 컴포넌트는 자신의 UI 렌더링 로직을 캡슐화</li>
</ul>
</li>
<li>
<p>hooks/</p>
<ul>
<li>React Hooks를 이용해 상태 관리 로직과 기능을 추상화한 커스텀 훅 정의</li>
<li>(예: useProductState.ts, useCartState.ts, useLightningSale.ts, useCartActions.ts)</li>
</ul>
</li>
<li>
<p>types/</p>
<ul>
<li>TypeScript 타입 정의 파일을 모아둔 폴더</li>
<li>(예: cart.ts, point.ts, product.ts)</li>
<li>데이터 구조의 타입을 명확히 정의해 코드 안정성과 생산성을 높임</li>
</ul>
</li>
<li>
<p>utils/</p>
<ul>
<li>범용적으로 사용되는 유틸리티 함수들을 모아둔 폴더</li>
<li>(예: calculation.ts, constants.ts, errorMessages.ts)</li>
</ul>
</li>
</ul>
<p>React의 컴포넌트 기반 아키텍처와 TypeScript 타입 시스템을 최대한 활용해 코드의 응집도를 높이고 결합도를 낮추는 것을 목표로 설계했다.</p>
<hr/>
<h2 id="62-리팩토링-과정에서-발생한-문제점-및-해결-방안"><a aria-hidden="true" tabindex="-1" href="#62-리팩토링-과정에서-발생한-문제점-및-해결-방안"><span class="icon icon-link"></span></a>6.2. 리팩토링 과정에서 발생한 문제점 및 해결 방안</h2>
<h3 id="621-문제점-1-cartitemtsx에서-동적-할인-가격-표시-및-jsx-렌더링-문제"><a aria-hidden="true" tabindex="-1" href="#621-문제점-1-cartitemtsx에서-동적-할인-가격-표시-및-jsx-렌더링-문제"><span class="icon icon-link"></span></a>6.2.1. 문제점 1: CartItem.tsx에서 동적 할인 가격 표시 및 JSX 렌더링 문제</h3>
<p><strong>문제 상황:</strong></p>
<ul>
<li>번개세일이 적용된 상품을 장바구니에 추가했을 때 CartItem.tsx에서 할인 가격이 올바르게 표시되지 않음</li>
<li>₩{(product.val * item.quantity).toLocaleString()} 같은 JavaScript 표현식이 문자열 그대로 화면에 출력되는 문제가 발생함</li>
<li>basic 폴더와 유사한 문제였지만 React 환경에서는 다른 접근이 필요했음</li>
</ul>
<p><strong>기술적 고민:</strong></p>
<ul>
<li>useLightningSale 훅이 productList를 업데이트하지만 Cart.tsx에서 CartItem.tsx로 product 객체를 직접 전달하면 상태 변경이 즉시 반영되지 않을 수 있었음</li>
<li>React의 렌더링 사이클과 prop 불변성을 고려해야 했음</li>
<li>JSX에서 템플릿 리터럴 안의 표현식이 문자열로 평가되는 경우가 있었음</li>
</ul>
<p><strong>해결 방안:</strong></p>
<ol>
<li>
<p>Cart.tsx에서 productList 전체 전달</p>
<ul>
<li>CartItem에 개별 product 대신 productList 전체를 prop으로 전달하도록 변경</li>
</ul>
<p><code>코드 예시 (src/advanced/components/Cart.tsx)</code></p>
<pre class="language-tsx"><code class="language-tsx code-highlight"><span class="code-line">cartItems<span class="token punctuation">.</span><span class="token method function property-access">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">CartItem</span></span> <span class="token attr-name">key</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>item<span class="token punctuation">.</span><span class="token property-access">id</span><span class="token punctuation">}</span></span> <span class="token attr-name">item</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>item<span class="token punctuation">}</span></span> <span class="token attr-name">productList</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>productList<span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token punctuation">}</span><span class="token punctuation">)</span>
</span></code><div class="copied" data-code="cartItems.map((item) =&gt; {
  return &lt;CartItem key={item.id} item={item} productList={productList} /&gt;;
})
"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
</li>
<li>
<p>CartItem.tsx에서 product 동적 조회</p>
<ul>
<li>item.id로 productList에서 해당 product를 찾아 항상 최신 상태를 참조하도록 수정</li>
</ul>
<p><code>코드 예시 (src/advanced/components/CartItem.tsx)</code></p>
<pre class="language-tsx"><code class="language-tsx code-highlight"><span class="code-line"><span class="token keyword">interface</span> <span class="token class-name">CartItemProps</span> <span class="token punctuation">{</span>
</span><span class="code-line">  item<span class="token operator">:</span> <span class="token maybe-class-name">CartItemType</span><span class="token punctuation">;</span>
</span><span class="code-line">  productList<span class="token operator">:</span> <span class="token maybe-class-name">Product</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword">const</span> <span class="token function-variable function">CartItem</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> item<span class="token punctuation">,</span> productList <span class="token punctuation">}</span><span class="token operator">:</span> <span class="token maybe-class-name">CartItemProps</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token keyword">const</span> product <span class="token operator">=</span> productList<span class="token punctuation">.</span><span class="token method function property-access">find</span><span class="token punctuation">(</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> p<span class="token punctuation">.</span><span class="token property-access">id</span> <span class="token operator">===</span> item<span class="token punctuation">.</span><span class="token property-access">id</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>product<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token comment">// ...</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code><div class="copied" data-code="interface CartItemProps {
  item: CartItemType;
  productList: Product[];
}

const CartItem = ({ item, productList }: CartItemProps) =&gt; {
  const product = productList.find((p) =&gt; p.id === item.id);
  if (!product) return null;
  // ...
}
"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
</li>
<li>
<p>JSX 렌더링 방식 수정</p>
<ul>
<li>템플릿 리터럴 대신 명시적인 <code>&lt;span&gt;</code> 태그를 사용해 React가 JavaScript 표현식을 올바르게 평가하도록 변경</li>
</ul>
<p><code>코드 예시 (src/advanced/components/CartItem.tsx)</code></p>
<pre class="language-tsx"><code class="language-tsx code-highlight"><span class="code-line"><span class="token keyword">const</span> <span class="token function-variable function">priceDisplay</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token keyword">if</span> <span class="token punctuation">(</span>product<span class="token punctuation">.</span><span class="token property-access">onSale</span> <span class="token operator">||</span> product<span class="token punctuation">.</span><span class="token property-access">suggestSale</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token keyword">return</span> <span class="token punctuation">(</span>
</span><span class="code-line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
</span></span><span class="code-line"><span class="token plain-text">        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>line-through text-gray-400<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
</span></span><span class="code-line"><span class="token plain-text">          ₩</span><span class="token punctuation">{</span>product<span class="token punctuation">.</span><span class="token property-access">originalVal</span><span class="token punctuation">.</span><span class="token method function property-access">toLocaleString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token plain-text">
</span></span><span class="code-line"><span class="token plain-text">        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
</span></span><span class="code-line"><span class="token plain-text">        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text-red-500<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
</span></span><span class="code-line"><span class="token plain-text">          ₩</span><span class="token punctuation">{</span>product<span class="token punctuation">.</span><span class="token property-access">val</span><span class="token punctuation">.</span><span class="token method function property-access">toLocaleString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token plain-text">
</span></span><span class="code-line"><span class="token plain-text">        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
</span></span><span class="code-line"><span class="token plain-text">      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span></span><span class="token punctuation">&gt;</span></span>
</span><span class="code-line">    <span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token keyword">return</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">₩</span><span class="token punctuation">{</span>product<span class="token punctuation">.</span><span class="token property-access">val</span><span class="token punctuation">.</span><span class="token method function property-access">toLocaleString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token punctuation">}</span>
</span><span class="code-line"><span class="token punctuation">}</span><span class="token punctuation">;</span>
</span></code><div class="copied" data-code="const priceDisplay = () =&gt; {
  if (product.onSale || product.suggestSale) {
    return (
      &lt;&gt;
        &lt;span className=&quot;line-through text-gray-400&quot;&gt;
          ₩{product.originalVal.toLocaleString()}
        &lt;/span&gt;
        &lt;span className=&quot;text-red-500&quot;&gt;
          ₩{product.val.toLocaleString()}
        &lt;/span&gt;
      &lt;/&gt;
    );
  } else {
    return &lt;span&gt;₩{product.val.toLocaleString()}&lt;/span&gt;;
  }
};
"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
</li>
</ol>
<p>이렇게 수정해 React의 상태 관리와 렌더링 메커니즘을 활용해 할인 가격 표시 문제를 해결했다.</p>
<h2 id="7-마무리하며"><a aria-hidden="true" tabindex="-1" href="#7-마무리하며"><span class="icon icon-link"></span></a>7. 마무리하며.</h2>
<p>이번 과제를 통해 단순히 코드를 리팩토링하는 작업이 아니라 <strong>코드의 구조와 책임을 다시 설계</strong>하는 경험을 했다.
특히 JS 환경에서 DOM을 직접 조작할 때와 React + TS 환경에서 상태와 타입을 기반으로 구조를 잡을 때의 차이를 체감할 수 있었다.</p>
<p>기능은 같아도 구조와 설계 방식에 따라 유지보수성과 확장성이 얼마나 달라질 수 있는지 체험한 과제였다.</p>
<p>앞으로도 단순히 동작하는 코드를 작성하는 데서 멈추지 않고 읽기 쉽고 테스트 가능하며 확장 가능한 코드를 작성하는 습관을 유지해야겠다고 다짐했다.
이번에 적용한 원칙과 구조를 실제 프로젝트에서도 계속 실험하고 다듬어 나가면서 더 나은 클린 코드를 만들어가고 싶다.</p>
</details>
<h2 id="과제를-하면서-내가-제일-신경-쓴-부분은-무엇인가요"><a class="anchor" aria-hidden="true" tabindex="-1" href="#과제를-하면서-내가-제일-신경-쓴-부분은-무엇인가요"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>과제를 하면서 내가 제일 신경 쓴 부분은 무엇인가요?</h2>
<h3 id="1-basic--dom-조작과-기능-불변성-유지"><a class="anchor" aria-hidden="true" tabindex="-1" href="#1-basic--dom-조작과-기능-불변성-유지"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>1. <code>basic</code> – DOM 조작과 기능 불변성 유지</h3>
<ul>
<li><strong>문제:</strong> CartItem 전체를 재렌더링할 경우 이벤트 리스너 유실 → 테스트 실패 (<code>expected &#x27;2&#x27; to be &#x27;1&#x27;</code>)</li>
<li><strong>해결:</strong> <code>render.js</code>에서 <code>&lt;span&gt;</code> 요소의 <code>innerHTML</code>만 업데이트 → 기존 이벤트 리스너 유지 + 할인 가격 동적 반영</li>
<li>기능 불변성 유지 + 기존 DOM 구조 손상 방지 작업을 통해 문제를 해결했습니다.</li>
</ul>
<h3 id="2-advanced--react-상태-관리와-데이터-흐름"><a class="anchor" aria-hidden="true" tabindex="-1" href="#2-advanced--react-상태-관리와-데이터-흐름"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>2. <code>advanced</code> – React 상태 관리와 데이터 흐름</h3>
<ul>
<li><strong>문제:</strong> 할인 적용 후 <code>CartItem.tsx</code>가 즉시 업데이트되지 않음</li>
<li><strong>해결:</strong> <code>Cart.tsx</code>에서 <code>productList</code> 전체를 전달, <code>CartItem</code>에서 <code>item.id</code>로 최신 product 검색</li>
<li><strong>추가:</strong> JSX 리터럴 문제 해결 -&gt; <code>&lt;span&gt;</code> 태그로 감싸 React가 표현식 평가하도록 수정</li>
</ul>
<h2 id="과제를-다시-해보면-더-잘-할-수-있었겠다-아쉬운-점이-있다면-무엇인가요"><a class="anchor" aria-hidden="true" tabindex="-1" href="#과제를-다시-해보면-더-잘-할-수-있었겠다-아쉬운-점이-있다면-무엇인가요"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>과제를 다시 해보면 더 잘 할 수 있었겠다 아쉬운 점이 있다면 무엇인가요?</h2>
<h3 id="1-basic--dom-조작-추상화-부족"><a class="anchor" aria-hidden="true" tabindex="-1" href="#1-basic--dom-조작-추상화-부족"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>1. <code>basic</code> – DOM 조작 추상화 부족</h3>
<ul>
<li><strong>아쉬운 점:</strong>
<ul>
<li><code>render.js</code>가 <code>CartItem</code>의 HTML 구조에 강하게 의존</li>
<li>구조 변경 시 유지보수 비용이 올라간다.</li>
</ul>
</li>
<li><strong>개선 아이디어:</strong>
<ul>
<li><code>CartItem.js</code>에 <code>updatePrice()</code> 메서드 추가 -&gt; 단일 책임 원칙 강화 + 결합도 감소</li>
</ul>
</li>
</ul>
<h3 id="2-basic--helpmodal-이벤트-리스너"><a class="anchor" aria-hidden="true" tabindex="-1" href="#2-basic--helpmodal-이벤트-리스너"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>2. <code>basic</code> – HelpModal 이벤트 리스너</h3>
<ul>
<li><strong>아쉬운 점:</strong>
<ul>
<li>직접 리스너 추가 -&gt; DOM 제거 시 메모리 누수 위험</li>
</ul>
</li>
<li><strong>개선 아이디어:</strong>
<ul>
<li><code>init()</code>/<code>destroy()</code> 패턴으로 라이프사이클 명시적 관리</li>
</ul>
</li>
</ul>
<h3 id="3-advanced--cartitem-성능"><a class="anchor" aria-hidden="true" tabindex="-1" href="#3-advanced--cartitem-성능"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>3. <code>advanced</code> – CartItem 성능</h3>
<ul>
<li><strong>아쉬운 점:</strong>
<ul>
<li><code>productList</code> 전체를 전달, 매번 <code>find</code> 수행 -&gt; 대규모 데이터에서 비효율 가능</li>
</ul>
</li>
<li><strong>개선 아이디어:</strong>
<ul>
<li><code>React.memo</code> + Context API 도입 or <code>memoizedProduct</code> 전달</li>
</ul>
</li>
</ul>
<h2 id="리뷰-받고-싶은-내용이나-궁금한-것에-대한-질문-편하게-남겨주세요-"><a class="anchor" aria-hidden="true" tabindex="-1" href="#리뷰-받고-싶은-내용이나-궁금한-것에-대한-질문-편하게-남겨주세요-"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>리뷰 받고 싶은 내용이나 궁금한 것에 대한 질문 편하게 남겨주세요 :)</h2>
<h3 id="1-advanced--productlist-전달-vs-성능"><a class="anchor" aria-hidden="true" tabindex="-1" href="#1-advanced--productlist-전달-vs-성능"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>1. <code>advanced</code> – <code>productList</code> 전달 vs 성능</h3>
<ul>
<li><code>CartItem</code>에서 매번 <code>find</code> 수행 시 대규모 <code>productList</code>에서의 성능 저하 가능성이 있을 것 같습니다.</li>
<li><code>React.memo</code> 외에 Context API or memoizedProduct 전달이 더 나은 선택일까요?</li>
</ul></div></div><div class="overflow-auto mt-9"><div data-color-mode="dark" class="wmde-markdown wmde-markdown-color p-6 max-w-full" style="word-wrap:break-word;overflow-wrap:break-word"><h2 id="과제-피드백"><a class="anchor" aria-hidden="true" tabindex="-1" href="#과제-피드백"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>과제 피드백</h2>
<p>안녕하세요 유현님! 4주차 과제 너무 잘 진행해주셨네요 ㅎㅎ 고생하셨습니다!!</p>
<p>지금 기본과제에서 심화과제로 이어지는 부분이 어느정도 매끄럽게 느껴지는데 아쉬운 부분도 있어요.</p>
<p>기본과제의 calcCartTotals과 심화과제의 calcCartTotals을 보면 함수는 똑같은데 내용이 조금 상이합니다.</p>
<p>아예 기본과제에서 만든 코드를 심화과제에서 불러와서 사용하는 방식을 상상해보면 어떤식으로 코드를 분리하면 좋았을지 감이 잡혔을 것 같아요!</p>
<hr/>
<blockquote>
<p>CartItem에서 매번 find 수행 시 대규모 productList에서의 성능 저하 가능성이 있을 것 같습니다. React.memo 외에 Context API or memoizedProduct 전달이 더 나은 선택일까요?</p>
</blockquote>
<p>지금은 아예 ProductList를 넘기고 있는데요,
딱 필요한 데이터만 가져와서 넘겨주는 방식을 상상해보시면 좋을 것 같아요.</p>
<pre class="language-tsx"><code class="language-tsx code-highlight"><span class="code-line">
</span><span class="code-line"><span class="token comment">// 어딘가에서 carts와 products를 정규화해서 관리해야 함.</span>
</span><span class="code-line"><span class="token keyword">const</span> <span class="token function-variable function">toMap</span> <span class="token operator">=</span> <span class="token punctuation">(</span>items<span class="token punctuation">,</span> targetKey<span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> items<span class="token punctuation">.</span><span class="token method function property-access">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span>acc<span class="token punctuation">,</span> item<span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
</span><span class="code-line">	<span class="token spread operator">...</span>acc<span class="token punctuation">,</span>
</span><span class="code-line">	<span class="token punctuation">[</span>item<span class="token punctuation">[</span>targetKey<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token operator">:</span> item
</span><span class="code-line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword">const</span> <span class="token function-variable function">carts</span> <span class="token operator">=</span> cartList <span class="token arrow operator">=&gt;</span> <span class="token function">toMap</span><span class="token punctuation">(</span>cartList<span class="token punctuation">,</span> <span class="token string">&#x27;id&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword">const</span> <span class="token function-variable function">products</span> <span class="token operator">=</span> productList <span class="token arrow operator">=&gt;</span> <span class="token function">toMap</span><span class="token punctuation">(</span>productList<span class="token punctuation">,</span> <span class="token string">&#x27;id&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword">const</span> <span class="token function-variable function">Cart</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> carts<span class="token punctuation">,</span> products <span class="token punctuation">,</span> onCartClick <span class="token punctuation">}</span><span class="token operator">:</span> <span class="token maybe-class-name">CartProps</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">	<span class="token keyword">const</span> cartWithProduct <span class="token operator">=</span> <span class="token function">useMemo</span><span class="token punctuation">(</span>
</span><span class="code-line">		<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token known-class-name class-name">Object</span><span class="token punctuation">.</span><span class="token method function property-access">values</span><span class="token punctuation">(</span>carts<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">map</span><span class="token punctuation">(</span>cart <span class="token arrow operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
</span><span class="code-line">			<span class="token spread operator">...</span>cart<span class="token punctuation">,</span>
</span><span class="code-line">			product<span class="token operator">:</span> products<span class="token punctuation">[</span>cart<span class="token punctuation">.</span><span class="token property-access">id</span><span class="token punctuation">]</span>
</span><span class="code-line">		<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
</span><span class="code-line">		<span class="token punctuation">[</span>carts<span class="token punctuation">,</span> products<span class="token punctuation">]</span>
</span><span class="code-line">	<span class="token punctuation">)</span>
</span><span class="code-line">  <span class="token keyword">return</span> <span class="token punctuation">(</span>
</span><span class="code-line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span>
</span></span><span class="code-line"><span class="token tag">      <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>cart-items<span class="token punctuation">&quot;</span></span>
</span></span><span class="code-line"><span class="token tag">      <span class="token attr-name">role</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>group<span class="token punctuation">&quot;</span></span>
</span></span><span class="code-line"><span class="token tag">      <span class="token attr-name">aria-label</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Cart Items<span class="token punctuation">&quot;</span></span>
</span></span><span class="code-line"><span class="token tag">      <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>onCartClick<span class="token punctuation">}</span></span>
</span></span><span class="code-line"><span class="token tag">    <span class="token punctuation">&gt;</span></span><span class="token plain-text">
</span></span><span class="code-line"><span class="token plain-text">      </span><span class="token punctuation">{</span>cartItems<span class="token punctuation">.</span><span class="token property-access">length</span> <span class="token operator">===</span> <span class="token number">0</span> <span class="token operator">?</span> <span class="token punctuation">(</span>
</span><span class="code-line">        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text-center text-gray-500 py-10<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token plain-text">
</span></span><span class="code-line"><span class="token plain-text">          장바구니가 비어있습니다.
</span></span><span class="code-line"><span class="token plain-text">        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
</span><span class="code-line">      <span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token punctuation">(</span>
</span><span class="code-line">        cartWithProduct<span class="token punctuation">.</span><span class="token method function property-access">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">{</span> quantity<span class="token punctuation">,</span> product <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">          <span class="token keyword">return</span> <span class="token punctuation">(</span>
</span><span class="code-line">            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">CartItem</span></span> <span class="token attr-name">key</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>item<span class="token punctuation">.</span><span class="token property-access">id</span><span class="token punctuation">}</span></span> <span class="token spread"><span class="token punctuation">{</span><span class="token spread operator">...</span>product<span class="token punctuation">}</span></span> <span class="token attr-name">quantity</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>quantity<span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span>
</span><span class="code-line">          <span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">        <span class="token punctuation">}</span><span class="token punctuation">)</span>
</span><span class="code-line">      <span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token plain-text">
</span></span><span class="code-line"><span class="token plain-text">    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</span><span class="code-line">  <span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token punctuation">}</span><span class="token punctuation">;</span>
</span></code><div class="copied" data-code="
// 어딘가에서 carts와 products를 정규화해서 관리해야 함.
const toMap = (items, targetKey) =&gt; items.reduce((acc, item) =&gt; ({
	...acc,
	[item[targetKey]]: item
}), {});

const carts = cartList =&gt; toMap(cartList, &#x27;id&#x27;);

const products = productList =&gt; toMap(productList, &#x27;id&#x27;);

const Cart = ({ carts, products , onCartClick }: CartProps) =&gt; {
	const cartWithProduct = useMemo(
		() =&gt; Object.values(carts).map(cart =&gt; ({
			...cart,
			product: products[cart.id]
		})),
		[carts, products]
	)
  return (
    &lt;div
      id=&quot;cart-items&quot;
      role=&quot;group&quot;
      aria-label=&quot;Cart Items&quot;
      onClick={onCartClick}
    &gt;
      {cartItems.length === 0 ? (
        &lt;p className=&quot;text-center text-gray-500 py-10&quot;&gt;
          장바구니가 비어있습니다.
        &lt;/p&gt;
      ) : (
        cartWithProduct.map(({ quantity, product }) =&gt; {
          return (
            &lt;CartItem key={item.id} {...product} quantity={quantity} /&gt;
          );
        })
      )}
    &lt;/div&gt;
  );
};
"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
<p>요로코롬..
그리고 CartItem을 메모이제이션 해주는거죠 ㅎㅎ
이러면 CartItem의 props 중 객체가 없기 때문에 높은 확률로 메모이제이션이 잘 적용될 수 있어요.</p>
<p>그리고 context를 만약 CartItem에서 불러온다면 결국 최적화가 제대로 안 될 확률이 높답니다.
차라리 zustand나 jotai 등을 이용하여 최적화를 하는게 더 좋은 방법이라고 생각해요!</p></div></div><div class="mt-9"></div></div></main></div></div></div></div>
</body>
</html>
