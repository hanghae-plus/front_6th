<!doctype html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>항해플러스 프론트엔드 6기 기술블로그</title>
  <link rel="icon" href="/front_6th/favicon.ico"/>
  
  <script type="module" crossorigin src="/front_6th/assets/index-S6z1r9QJ.js"></script>
  <link rel="stylesheet" crossorigin href="/front_6th/assets/index-BXO68frB.css">
</head>
<body>
<div id="root"><link rel="preload" as="image" href="https://github.com/user-attachments/assets/0ead9ea0-5862-4492-8362-649d94f2f754"/><link rel="preload" as="image" href="https://github.com/user-attachments/assets/f17adb8d-b13f-4317-ae9b-72ab9927dfe9"/><link rel="preload" as="image" href="https://github.com/user-attachments/assets/89b403b8-441b-4d9f-9a4c-7c382de59274"/><link rel="preload" as="image" href="https://github.com/user-attachments/assets/626ccc82-6c7d-4366-996a-ee3f1bf2f0ee"/><link rel="preload" as="image" href="https://github.com/user-attachments/assets/33a5e287-151a-4ac1-bbfd-8e6477df11e1"/><link rel="preload" as="image" href="https://github.com/user-attachments/assets/af6f2072-2587-4713-91da-ffe7623b2823"/><link rel="preload" as="image" href="https://github.com/user-attachments/assets/74bd570a-57c2-4712-8bbe-18409b2ef282"/><link rel="preload" as="image" href="https://github.com/user-attachments/assets/4e88ac5d-b649-4a1d-8787-962a93d3f3cf"/><div data-slot="sidebar-wrapper" style="--sidebar-width:16rem;--sidebar-width-icon:3rem" class="group/sidebar-wrapper has-data-[variant=inset]:bg-sidebar flex min-h-svh w-full"><div class="min-h-screen flex w-full"><div class="group peer text-sidebar-foreground hidden md:block" data-state="expanded" data-collapsible="" data-variant="sidebar" data-side="left" data-slot="sidebar"><div data-slot="sidebar-gap" class="relative w-(--sidebar-width) bg-transparent transition-[width] duration-200 ease-linear group-data-[collapsible=offcanvas]:w-0 group-data-[side=right]:rotate-180 group-data-[collapsible=icon]:w-(--sidebar-width-icon)"></div><div data-slot="sidebar-container" class="fixed inset-y-0 z-10 hidden h-svh transition-[left,right,width] duration-200 ease-linear md:flex left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)] group-data-[collapsible=icon]:w-(--sidebar-width-icon) group-data-[side=left]:border-r group-data-[side=right]:border-l w-64"><div data-sidebar="sidebar" data-slot="sidebar-inner" class="bg-sidebar group-data-[variant=floating]:border-sidebar-border flex h-full w-full flex-col group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:shadow-sm"><div data-slot="sidebar-content" data-sidebar="content" class="flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden bg-card border-r border-border"><a class="p-4" href="/front_6th/" data-discover="true"><div class="flex items-center space-x-2 mb-6"><div class="w-8 h-8 bg-gradient-primary rounded-lg flex items-center justify-center"><span class="text-white font-bold text-sm">6기</span></div><h4 class="text-lg font-bold text-primary">항해플러스 프론트엔드</h4></div></a><div data-slot="sidebar-group" data-sidebar="group" class="relative flex w-full min-w-0 flex-col p-2"><div data-slot="sidebar-group-label" data-sidebar="group-label" class="ring-sidebar-ring flex h-8 shrink-0 items-center rounded-md text-xs font-medium outline-hidden transition-[margin,opacity] duration-200 ease-linear focus-visible:ring-2 [&amp;&gt;svg]:size-4 [&amp;&gt;svg]:shrink-0 group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0 text-muted-foreground px-4">학습 관리</div><div data-slot="sidebar-group-content" data-sidebar="group-content" class="w-full text-sm"><ul data-slot="sidebar-menu" data-sidebar="menu" class="flex w-full min-w-0 flex-col gap-1 px-2"><li data-slot="sidebar-menu-item" data-sidebar="menu-item" class="group/menu-item relative"><a data-slot="sidebar-menu-button" data-sidebar="menu-button" data-size="default" data-active="false" class="peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left outline-hidden ring-sidebar-ring transition-[width,height,padding] focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-data-[sidebar=menu-action]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:size-8! group-data-[collapsible=icon]:p-2! [&amp;&gt;span:last-child]:truncate [&amp;&gt;svg]:size-4 [&amp;&gt;svg]:shrink-0 hover:bg-sidebar-accent hover:text-sidebar-accent-foreground text-sm h-12 text-foreground hover:bg-secondary hover:text-secondary-foreground rounded-lg transition-all duration-300" href="/front_6th/" data-discover="true"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-users h-5 w-5" aria-hidden="true"><path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"></path><path d="M16 3.128a4 4 0 0 1 0 7.744"></path><path d="M22 21v-2a4 4 0 0 0-3-3.87"></path><circle cx="9" cy="7" r="4"></circle></svg><span class="ml-3">수강생 목록</span></a></li><li data-slot="sidebar-menu-item" data-sidebar="menu-item" class="group/menu-item relative"><a data-slot="sidebar-menu-button" data-sidebar="menu-button" data-size="default" data-active="false" class="peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left outline-hidden ring-sidebar-ring transition-[width,height,padding] focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-data-[sidebar=menu-action]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:size-8! group-data-[collapsible=icon]:p-2! [&amp;&gt;span:last-child]:truncate [&amp;&gt;svg]:size-4 [&amp;&gt;svg]:shrink-0 hover:bg-sidebar-accent hover:text-sidebar-accent-foreground text-sm h-12 text-foreground hover:bg-secondary hover:text-secondary-foreground rounded-lg transition-all duration-300" href="/front_6th/assignments/" data-discover="true"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-book-open h-5 w-5" aria-hidden="true"><path d="M12 7v14"></path><path d="M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z"></path></svg><span class="ml-3">과제 목록</span></a></li></ul></div></div></div></div></div></div><div class="flex-1 min-w-0"><header class="h-12 flex items-center border-b border-border bg-card px-4"><button data-slot="sidebar-trigger" class="inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 size-7 mr-4 text-white" data-sidebar="trigger"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-panel-left" aria-hidden="true"><rect width="18" height="18" x="3" y="3" rx="2"></rect><path d="M9 3v18"></path></svg><span class="sr-only">Toggle Sidebar</span></button><h4 class="text-lg font-semibold "><a href="/front_6th/@YeongseoYoon-hanghae/" data-discover="true">YeongseoYoon-hanghae<!-- --> 님의 상세페이지</a> ＞ <!-- -->[5팀 윤영서] Chapter 🐷 3-1. 프론트엔드 테스트 코드 🐷</h4></header><main class="p-6"><div><div class="card-wrap"><div data-slot="card" class="card text-card-foreground flex flex-col gap-6 shadow-sm mb-6 p-6 border border-gray-700 bg-gray-800 rounded-lg"><a href="https://github.com/hanghae-plus/front_6th_chapter3-1/pull/24" target="_blank"><div class="flex items-start gap-4"><div class="flex-shrink-0"><svg xmlns="http://www.w3.org/2000/svg" height="32" aria-hidden="true" viewBox="0 0 24 24" width="32" fill="white" class="w-8 h-8"><path d="M12 1C5.923 1 1 5.923 1 12c0 4.867 3.149 8.979 7.521 10.436.55.096.756-.233.756-.522 0-.262-.013-1.128-.013-2.049-2.764.509-3.479-.674-3.699-1.292-.124-.317-.66-1.293-1.127-1.554-.385-.207-.936-.715-.014-.729.866-.014 1.485.797 1.691 1.128.99 1.663 2.571 1.196 3.204.907.096-.715.385-1.196.701-1.471-2.448-.275-5.005-1.224-5.005-5.432 0-1.196.426-2.186 1.128-2.956-.111-.275-.496-1.402.11-2.915 0 0 .921-.288 3.024 1.128a10.193 10.193 0 0 1 2.75-.371c.936 0 1.871.123 2.75.371 2.104-1.43 3.025-1.128 3.025-1.128.605 1.513.221 2.64.111 2.915.701.77 1.127 1.747 1.127 2.956 0 4.222-2.571 5.157-5.019 5.432.399.344.743 1.004.743 2.035 0 1.471-.014 2.654-.014 3.025 0 .289.206.632.756.522C19.851 20.979 23 16.854 23 12c0-6.077-4.922-11-11-11Z"></path></svg></div><div class="flex-1 min-w-0"><div class="flex items-center gap-2 mb-2"><h3 class="text-lg font-semibold text-white truncate">[5팀 윤영서] Chapter 🐷 3-1. 프론트엔드 테스트 코드 🐷</h3></div><div class="flex items-center gap-4 text-xs text-gray-500"><span>by <!-- -->YeongseoYoon-hanghae</span><span>2025. 8. 17.</span></div></div></div></a></div></div><div class="overflow-auto"><div data-color-mode="dark" class="wmde-markdown wmde-markdown-color p-6 max-w-full" style="word-wrap:break-word;overflow-wrap:break-word"><h1 id="hard"><a class="anchor" aria-hidden="true" tabindex="-1" href="#hard"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>HARD</h1>
<h2 id="7주차-과제-체크포인트"><a class="anchor" aria-hidden="true" tabindex="-1" href="#7주차-과제-체크포인트"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>7주차 과제 체크포인트</h2>
<h3 id="기본과제"><a class="anchor" aria-hidden="true" tabindex="-1" href="#기본과제"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>기본과제</h3>
<ul class="contains-task-list">
<li class="task-list-item"><input type="checkbox" disabled="" checked=""/> 총 11개의 파일, 115개의 단위 테스트를 무사히 작성하고 통과시킨다.</li>
</ul>
<h4 id="질문"><a class="anchor" aria-hidden="true" tabindex="-1" href="#질문"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>질문</h4>
<blockquote>
<p>Q. handlersUtils에 남긴 질문에 답변해주세요.
// ! Hard
// ! 이벤트는 생성, 수정 되면 fetch를 다시 해 상태를 업데이트 합니다. 이를 위한 제어가 필요할 것 같은데요. 어떻게 작성해야 테스트가 병렬로 돌아도 안정적이게 동작할까요?
// ! 아래 이름을 사용하지 않아도 되니, 독립적이게 테스트를 구동할 수 있는 방법을 찾아보세요. 그리고 이 로직을 PR에 설명해주세요.</p>
</blockquote>
<p><code>useEventOperations</code>를 확인해보면 <code>saveEvent</code>, <code>deleteEvent</code>에서 처리 후에 <code>fetchEvent</code>를 통해 새로 이벤트를 불러오게 되는데요. 이 경우에 삭제, 수정, 추가 이벤트에 대한 테스트가 병렬로 처리되었을 경우에 데이터가 불안정할 것으로 판단되었습니다.</p>
<p>그래서</p>
<pre class="language-ts"><code class="language-ts code-highlight"><span class="code-line"><span class="token comment">// setupMockHandlerUpdating - 수정 테스트용</span>
</span><span class="code-line"><span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">setupMockHandlerUpdating</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token keyword">const</span> events<span class="token operator">:</span> Event<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span>
</span><span class="code-line">    <span class="token punctuation">{</span>
</span><span class="code-line">      id<span class="token operator">:</span> <span class="token string">&#x27;1&#x27;</span><span class="token punctuation">,</span>
</span><span class="code-line">      title<span class="token operator">:</span> <span class="token string">&#x27;수정테스트입니당&#x27;</span><span class="token punctuation">,</span>
</span><span class="code-line">      date<span class="token operator">:</span> <span class="token string">&#x27;2025-10-17&#x27;</span><span class="token punctuation">,</span>
</span><span class="code-line">      <span class="token comment">// ... 기본 데이터</span>
</span><span class="code-line">    <span class="token punctuation">}</span>
</span><span class="code-line">  <span class="token punctuation">]</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line">  server<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>
</span><span class="code-line">    http<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&#x27;/api/events/:id&#x27;</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> params<span class="token punctuation">,</span> request <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">      <span class="token keyword">const</span> updatedEvent <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">await</span> request<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">as</span> Event<span class="token punctuation">;</span>
</span><span class="code-line">      <span class="token keyword">const</span> index <span class="token operator">=</span> events<span class="token punctuation">.</span><span class="token function">findIndex</span><span class="token punctuation">(</span><span class="token punctuation">(</span>event<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> event<span class="token punctuation">.</span>id <span class="token operator">===</span> params<span class="token punctuation">.</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line">      <span class="token keyword">if</span> <span class="token punctuation">(</span>index <span class="token operator">===</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">HttpResponse</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> status<span class="token operator">:</span> <span class="token number">404</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
</span><span class="code-line">      <span class="token punctuation">}</span>
</span><span class="code-line">
</span><span class="code-line">      events<span class="token punctuation">[</span>index<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token operator">...</span>events<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token operator">...</span>updatedEvent <span class="token punctuation">}</span><span class="token punctuation">;</span>
</span><span class="code-line">      <span class="token keyword">return</span> HttpResponse<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span>events<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">    <span class="token punctuation">}</span><span class="token punctuation">)</span>
</span><span class="code-line">  <span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token punctuation">}</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment">// setupMockHandlerDeletion - 삭제 테스트용  </span>
</span><span class="code-line"><span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">setupMockHandlerDeletion</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token keyword">const</span> events<span class="token operator">:</span> Event<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token comment">/* 삭제용 기본 데이터 */</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
</span><span class="code-line">  
</span><span class="code-line">  server<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>
</span><span class="code-line">    http<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span><span class="token string">&#x27;/api/events/:id&#x27;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> params <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">      <span class="token keyword">const</span> index <span class="token operator">=</span> events<span class="token punctuation">.</span><span class="token function">findIndex</span><span class="token punctuation">(</span><span class="token punctuation">(</span>event<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> event<span class="token punctuation">.</span>id <span class="token operator">===</span> params<span class="token punctuation">.</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line">      <span class="token keyword">if</span> <span class="token punctuation">(</span>index <span class="token operator">===</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">HttpResponse</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> status<span class="token operator">:</span> <span class="token number">404</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">      <span class="token punctuation">}</span>
</span><span class="code-line">
</span><span class="code-line">      events<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span>index<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
</span><span class="code-line">      <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">HttpResponse</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> status<span class="token operator">:</span> <span class="token number">204</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">    <span class="token punctuation">}</span><span class="token punctuation">)</span>
</span><span class="code-line">  <span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token punctuation">}</span><span class="token punctuation">;</span>
</span></code><div class="copied" data-code="// setupMockHandlerUpdating - 수정 테스트용
export const setupMockHandlerUpdating = () =&gt; {
  const events: Event[] = [
    {
      id: &#x27;1&#x27;,
      title: &#x27;수정테스트입니당&#x27;,
      date: &#x27;2025-10-17&#x27;,
      // ... 기본 데이터
    }
  ];

  server.use(
    http.put(&#x27;/api/events/:id&#x27;, async ({ params, request }) =&gt; {
      const updatedEvent = (await request.json()) as Event;
      const index = events.findIndex((event) =&gt; event.id === params.id);

      if (index === -1) {
        return new HttpResponse(null, { status: 404 }); 
      }

      events[index] = { ...events[index], ...updatedEvent };
      return HttpResponse.json(events[index]);
    })
  );
};

// setupMockHandlerDeletion - 삭제 테스트용  
export const setupMockHandlerDeletion = () =&gt; {
  const events: Event[] = [/* 삭제용 기본 데이터 */];
  
  server.use(
    http.delete(&#x27;/api/events/:id&#x27;, ({ params }) =&gt; {
      const index = events.findIndex((event) =&gt; event.id === params.id);

      if (index === -1) {
        return new HttpResponse(null, { status: 404 });
      }

      events.splice(index, 1); 
      return new HttpResponse(null, { status: 204 });
    })
  );
};
"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
<p>위와 같이 MSW 핸들러 자체의 구조를 개선했습니다. 기존에는 하나의 전역 배열을 여러 테스트가 공유하는 형태였다면, 이제는 각 핸들러 설정 함수가 호출될 때마다 완전히 새로운 배열을 생성하도록 변경했습니다. setupMockHandlerCreation 함수에서는 전달받은 초기 데이터를 방어적 복사를 통해 독립적인 배열로 만들고, 이 배열만을 사용하는 GET, POST 핸들러를 설정하도록 구현하였습니다.</p>
<blockquote>
<p>Q. 테스트를 독립적으로 구동시키기 위해 작성했던 설정들을 소개해주세요.</p>
</blockquote>
<p>위에서 핸들러를 변경한것에 추가적으로 setupTests.ts파일에서도 추가적으로 설정을 했는데요.</p>
<pre class="language-ts"><code class="language-ts code-highlight"><span class="code-line"><span class="token keyword">import</span> <span class="token punctuation">{</span> setupServer <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#x27;msw/node&#x27;</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token keyword">import</span> <span class="token string">&#x27;@testing-library/jest-dom&#x27;</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword">import</span> <span class="token punctuation">{</span> handlers <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#x27;./__mocks__/handlers&#x27;</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment">/* msw */</span>
</span><span class="code-line"><span class="token keyword">export</span> <span class="token keyword">const</span> server <span class="token operator">=</span> <span class="token function">setupServer</span><span class="token punctuation">(</span><span class="token operator">...</span>handlers<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token function">beforeAll</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">  server<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">  vi<span class="token punctuation">.</span><span class="token function">useFakeTimers</span><span class="token punctuation">(</span><span class="token punctuation">{</span> shouldAdvanceTime<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token function">beforeEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">  expect<span class="token punctuation">.</span><span class="token function">hasAssertions</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">  vi<span class="token punctuation">.</span><span class="token function">setSystemTime</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token string">&#x27;2025-10-15&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token function">afterEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">  server<span class="token punctuation">.</span><span class="token function">resetHandlers</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">  vi<span class="token punctuation">.</span><span class="token function">clearAllMocks</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">  vi<span class="token punctuation">.</span><span class="token function">clearAllTimers</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token function">afterAll</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">  vi<span class="token punctuation">.</span><span class="token function">resetAllMocks</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">  server<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">  vi<span class="token punctuation">.</span><span class="token function">useRealTimers</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></code><div class="copied" data-code="import { setupServer } from &#x27;msw/node&#x27;;
import &#x27;@testing-library/jest-dom&#x27;;

import { handlers } from &#x27;./__mocks__/handlers&#x27;;

/* msw */
export const server = setupServer(...handlers);

beforeAll(() =&gt; {
  server.listen();
  vi.useFakeTimers({ shouldAdvanceTime: true });
});

beforeEach(() =&gt; {
  expect.hasAssertions();
  vi.setSystemTime(new Date(&#x27;2025-10-15&#x27;));
});

afterEach(() =&gt; {
  server.resetHandlers();
  vi.clearAllMocks();
  vi.clearAllTimers();
});

afterAll(() =&gt; {
  vi.resetAllMocks();
  server.close();
  vi.useRealTimers();
});
"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
<p>각 테스트가 끝난 후 이전 테스트의 영향을 완전히 제거하는 것이라고 판단했습니다. 따라서 setupTests.ts 파일에서 테스트 생명주기를 체계적으로 관리하도록 설정했습니다.
beforeAll 단계에서는 MSW 서버를 시작하고 FakeTimer를 활성화합니다. FakeTimer를 사용하는 이유는 시간에 의존적인 테스트들이 실행 환경에 관계없이 일관된 결과를 얻기 위해서입니다. 특히 shouldAdvanceTime 옵션을 true로 설정하여 타이머가 실제로 진행되도록 했습니다. (하위에서도 이 설정에 대한 언급이 있습니다)</p>
<p>beforeEach 단계에서는 두 가지 중요한 설정을 합니다. 첫째로 expect.hasAssertions()를 호출하여 모든 테스트에 최소 하나 이상의 assertion이 있도록 강제합니다. 이는 빈 테스트나 실수로 assertion이 없는 테스트를 방지하기 위함이지만, 비동기적으로 콜백이 있는 경우에 이를 실행하지 않고 넘어갈 수 있는 상황을 미리 차단하는 역할도 합니다.
예를 들어, Promise가 reject되거나 콜백 함수가 호출되지 않는 경우, 테스트는 성공으로 표시되지만 실제로는 우리가 의도한 검증 로직이 전혀 실행되지 않은 상태가 될 수 있습니다. expect.hasAssertions()를 사용하면 이런 경우 테스트가 실패하도록 하여 false positive를 방지할 수 있습니다. (이 부분도 하위에 내용정리 해두었습니다.)
둘째로 vi.setSystemTime을 사용하여 모든 테스트가 동일한 시간(2025-10-15)에서 실행되도록 고정합니다. 이렇게 하면 날짜나 시간에 의존적인 로직을 테스트할 때 환경에 관계없이 일관된 결과를 얻을 수 있습니다.
가장 중요한 부분은 afterEach 단계입니다. 여기서 server.resetHandlers()를 호출하여 이전 테스트에서 server.use()로 설정한 모든 MSW 핸들러를 기본 상태로 복원하도록 구현하였습니다. 또한 vi.clearAllMocks()로 모든 mock 함수의 호출 이력을 초기화하고, vi.clearAllTimers()로 타이머 상태를 정리하도록 했습니다.</p>
<p>마지막으로 afterAll 단계에서는 모든 mock을 완전히 리셋하고 MSW 서버를 종료한 후 실제 타이머로 복원합니다.</p>
<p>또한 실제 테스트 파일에서는 각 테스트 케이스마다 적절한 핸들러 설정 함수를 호출하여 독립적인 환경을 구성하도록 했습니다. <code>useEventOperations</code> 테스트에서는 새로운 이벤트를 저장하는 테스트에서 <code>setupMockHandlerCreation([])</code>을 호출하여 빈 배열로 시작하는 완전히 새로운 환경을 만듭니다. 이 테스트가 실행되는 동안 다른 어떤 테스트의 데이터도 영향을 주지 않습니다. 수정, 삭제등의 테스트에서도 마찬가지로 새로운 환경에서 동작할 수 있도록 구현하였습니다.</p>
<p><code>enqueueSnackbar</code>와 같은 외부 라이브러리 함수들도 독립성을 보장해야 합니다. notistack 라이브러리를 mocking할 때 vi.fn()으로 생성한 mock 함수를 사용하고, 각 테스트 후 vi.clearAllMocks()로 호출 이력을 초기화했습니다.</p>
<h3 id="심화-과제"><a class="anchor" aria-hidden="true" tabindex="-1" href="#심화-과제"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>심화 과제</h3>
<ul class="contains-task-list">
<li class="task-list-item"><input type="checkbox" disabled="" checked=""/> App 컴포넌트 적절한 단위의 컴포넌트, 훅, 유틸 함수로 분리했는가?</li>
<li class="task-list-item"><input type="checkbox" disabled="" checked=""/> 해당 모듈들에 대한 적절한 테스트를 5개 이상 작성했는가?</li>
</ul>
<h2 id="과제-셀프회고"><a class="anchor" aria-hidden="true" tabindex="-1" href="#과제-셀프회고"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>과제 셀프회고</h2>
<p>테스트코드는 언제 짜려고 해도 명확하게 해답이 있는 문제가 아니라서 어려운 것 같습니다. 그래도 이번주는 수월할줄 알았는데... 발표라는 복병이...! 우하하... 그래도 어째저째 쓰러지진 않고 잘 마무리했으니까 된 거 겠죠...?
<img width="257" height="216" alt="image" src="https://github.com/user-attachments/assets/0ead9ea0-5862-4492-8362-649d94f2f754"/>
과제중에 저에게 힘을 주신...준일님의 팬심덕분에 새벽에 잠이 죽겠는데도 이겨냈습니다...<em>(진짜임,,,나에겐 고양이같은...팬이있다)</em></p>
<h3 id="기술적-성장"><a class="anchor" aria-hidden="true" tabindex="-1" href="#기술적-성장"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>기술적 성장</h3>
<!-- -->
<h4 id="1-test-vs-it"><a class="anchor" aria-hidden="true" tabindex="-1" href="#1-test-vs-it"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>1. test() vs it()</h4>
<p>Jest를 통해서 테스트코드를 작성할때 <code>test</code>와 <code>it</code>이 존재함을 알게되었습니다. 이 둘은 어떻게 다른 것일까요?</p>
<p>Jest에서 <code>test</code>와 <code>it</code>은 기능적으로 완전히 동일한 함수입니다. 둘 다 개별 테스트를 정의하는 데 사용되며, 단지 alias 관계일 뿐입니다. 차이점은 스타일과 가독성, 그리고 팀의 컨벤션에 있습니다.</p>
<pre class="language-javascript"><code class="language-javascript code-highlight"><span class="code-line"><span class="token comment">// 이 둘은 정확히 같은 함수를 가리킵니다</span>
</span><span class="code-line"><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&#x27;calculation works correctly&#x27;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token function">expect</span><span class="token punctuation">(</span><span class="token number">2</span> <span class="token operator">+</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">toBe</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token function">it</span><span class="token punctuation">(</span><span class="token string">&#x27;calculation works correctly&#x27;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token function">expect</span><span class="token punctuation">(</span><span class="token number">2</span> <span class="token operator">+</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">toBe</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></code><div class="copied" data-code="// 이 둘은 정확히 같은 함수를 가리킵니다
test(&#x27;calculation works correctly&#x27;, () =&gt; {
  expect(2 + 2).toBe(4);
});

it(&#x27;calculation works correctly&#x27;, () =&gt; {
  expect(2 + 2).toBe(4);
});
"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
<p><a href="https://jestjs.io/docs/api#testname-fn-timeout">Jest 공식 문서</a>에서 확인할 수 있듯이, <code>test</code> 메서드는 <code>it</code>으로도 aliased되어 있습니다. 내부적으로는 완전히 동일한 함수를 호출하므로 성능이나 기능상의 차이는 전혀 없습니다.</p>
<p>또한 두 함수 모두 Jest의 모든 기능을 동일하게 지원합니다.</p>
<pre class="language-javascript"><code class="language-javascript code-highlight"><span class="code-line"><span class="token comment">// 둘 다 timeout 지원</span>
</span><span class="code-line"><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&#x27;async operation&#x27;</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token comment">/* ... */</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">10000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token function">it</span><span class="token punctuation">(</span><span class="token string">&#x27;async operation&#x27;</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token comment">/* ... */</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">10000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment">// 둘 다 .only, .skip 등의 modifier 지원</span>
</span><span class="code-line">test<span class="token punctuation">.</span><span class="token method function property-access">only</span><span class="token punctuation">(</span><span class="token string">&#x27;focused test&#x27;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token comment">/* ... */</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">it<span class="token punctuation">.</span><span class="token method function property-access">only</span><span class="token punctuation">(</span><span class="token string">&#x27;focused test&#x27;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token comment">/* ... */</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment">// 둘 다 .each로 데이터 주도 테스트 지원</span>
</span><span class="code-line">test<span class="token punctuation">.</span><span class="token method function property-access">each</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token string">&#x27;parameterized test&#x27;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> expected</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token function">expect</span><span class="token punctuation">(</span>a <span class="token operator">+</span> b<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">toBe</span><span class="token punctuation">(</span>expected<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line">it<span class="token punctuation">.</span><span class="token method function property-access">each</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token string">&#x27;parameterized test&#x27;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> expected</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token function">expect</span><span class="token punctuation">(</span>a <span class="token operator">+</span> b<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">toBe</span><span class="token punctuation">(</span>expected<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></code><div class="copied" data-code="// 둘 다 timeout 지원
test(&#x27;async operation&#x27;, async () =&gt; { /* ... */ }, 10000);
it(&#x27;async operation&#x27;, async () =&gt; { /* ... */ }, 10000);

// 둘 다 .only, .skip 등의 modifier 지원
test.only(&#x27;focused test&#x27;, () =&gt; { /* ... */ });
it.only(&#x27;focused test&#x27;, () =&gt; { /* ... */ });

// 둘 다 .each로 데이터 주도 테스트 지원
test.each([[1, 2, 3]])(&#x27;parameterized test&#x27;, (a, b, expected) =&gt; {
  expect(a + b).toBe(expected);
});

it.each([[1, 2, 3]])(&#x27;parameterized test&#x27;, (a, b, expected) =&gt; {
  expect(a + b).toBe(expected);
});
"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
<p><a href="https://stackoverflow.com/questions/45778192/what-is-the-difference-between-it-and-test-in-jest">What is the difference between &#x27;it&#x27; and &#x27;test&#x27; in Jest?</a>에 따르면, <code>test</code>와 <code>it</code>의 차이를 다음과 같이 설명합니다.</p>
<pre class="language-javascript"><code class="language-javascript code-highlight"><span class="code-line"><span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">&#x27;UserService&#x27;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&#x27;사용자 생성이 올바르게 동작한다&#x27;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token keyword">const</span> user <span class="token operator">=</span> <span class="token function">createUser</span><span class="token punctuation">(</span><span class="token string">&#x27;김철수&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;kim@example.com&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">    <span class="token function">expect</span><span class="token punctuation">(</span>user<span class="token punctuation">.</span><span class="token property-access">name</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">toBe</span><span class="token punctuation">(</span><span class="token string">&#x27;김철수&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&#x27;잘못된 이메일로 사용자 생성 시 에러가 발생한다&#x27;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token function">expect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token function">createUser</span><span class="token punctuation">(</span><span class="token string">&#x27;김철수&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;invalid-email&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">toThrow</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></code><div class="copied" data-code="describe(&#x27;UserService&#x27;, () =&gt; {
  test(&#x27;사용자 생성이 올바르게 동작한다&#x27;, () =&gt; {
    const user = createUser(&#x27;김철수&#x27;, &#x27;kim@example.com&#x27;);
    expect(user.name).toBe(&#x27;김철수&#x27;);
  });

  test(&#x27;잘못된 이메일로 사용자 생성 시 에러가 발생한다&#x27;, () =&gt; {
    expect(() =&gt; createUser(&#x27;김철수&#x27;, &#x27;invalid-email&#x27;)).toThrow();
  });
});
"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
<p><code>test</code>는 우선 함수명 자체가 &quot;테스트&quot;라는 목적을 분명히 하여 직접적이고 명확합니다.</p>
<p>반면에 <code>it</code>은 BDD(Behavior Driven Development) 스타일의 자연어적 표현입니다.</p>
<pre class="language-javascript"><code class="language-javascript code-highlight"><span class="code-line"><span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">&#x27;UserService&#x27;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token function">it</span><span class="token punctuation">(</span><span class="token string">&#x27;should create user with valid data&#x27;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token keyword">const</span> user <span class="token operator">=</span> <span class="token function">createUser</span><span class="token punctuation">(</span><span class="token string">&#x27;김철수&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;kim@example.com&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">    <span class="token function">expect</span><span class="token punctuation">(</span>user<span class="token punctuation">.</span><span class="token property-access">name</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">toBe</span><span class="token punctuation">(</span><span class="token string">&#x27;김철수&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="token function">it</span><span class="token punctuation">(</span><span class="token string">&#x27;should throw error when email is invalid&#x27;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token function">expect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token function">createUser</span><span class="token punctuation">(</span><span class="token string">&#x27;김철수&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;invalid-email&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">toThrow</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></code><div class="copied" data-code="describe(&#x27;UserService&#x27;, () =&gt; {
  it(&#x27;should create user with valid data&#x27;, () =&gt; {
    const user = createUser(&#x27;김철수&#x27;, &#x27;kim@example.com&#x27;);
    expect(user.name).toBe(&#x27;김철수&#x27;);
  });

  it(&#x27;should throw error when email is invalid&#x27;, () =&gt; {
    expect(() =&gt; createUser(&#x27;김철수&#x27;, &#x27;invalid-email&#x27;)).toThrow();
  });
});
"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
<p>위 코드처럼 &quot;it should...&quot; 패턴으로 자연어에 가까운 표현이고, 요구사항을 테스트로 직접 번역하기 용이합니다.</p>
<pre class="language-javascript"><code class="language-javascript code-highlight"><span class="code-line"><span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">&#x27;Calculator&#x27;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token function">it</span><span class="token punctuation">(</span><span class="token string">&#x27;should add two numbers correctly&#x27;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token function">expect</span><span class="token punctuation">(</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">toBe</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">  
</span><span class="code-line">  <span class="token function">it</span><span class="token punctuation">(</span><span class="token string">&#x27;should handle negative numbers&#x27;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token function">expect</span><span class="token punctuation">(</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">toBe</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></code><div class="copied" data-code="describe(&#x27;Calculator&#x27;, () =&gt; {
  it(&#x27;should add two numbers correctly&#x27;, () =&gt; {
    expect(add(2, 3)).toBe(5);
  });
  
  it(&#x27;should handle negative numbers&#x27;, () =&gt; {
    expect(add(-1, 1)).toBe(0);
  });
});
"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
<p>영어에서는 <code>it</code>이 자연스럽게 읽힙니다: &quot;Calculator should add two numbers correctly&quot;</p>
<pre class="language-javascript"><code class="language-javascript code-highlight"><span class="code-line"><span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">&#x27;계산기&#x27;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token comment">// 어색한 표현</span>
</span><span class="code-line">  <span class="token function">it</span><span class="token punctuation">(</span><span class="token string">&#x27;두 숫자를 올바르게 더해야 한다&#x27;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token function">expect</span><span class="token punctuation">(</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">toBe</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">  
</span><span class="code-line">  <span class="token comment">// 자연스러운 표현  </span>
</span><span class="code-line">  <span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&#x27;두 숫자를 올바르게 더한다&#x27;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token function">expect</span><span class="token punctuation">(</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">toBe</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></code><div class="copied" data-code="describe(&#x27;계산기&#x27;, () =&gt; {
  // 어색한 표현
  it(&#x27;두 숫자를 올바르게 더해야 한다&#x27;, () =&gt; {
    expect(add(2, 3)).toBe(5);
  });
  
  // 자연스러운 표현  
  test(&#x27;두 숫자를 올바르게 더한다&#x27;, () =&gt; {
    expect(add(2, 3)).toBe(5);
  });
});
"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
<p>한국어로 테스트를 작성할 때는 <code>test</code>가 더 자연스러운 경우가 많습니다.</p>
<pre class="language-javascript"><code class="language-javascript code-highlight"><span class="code-line"><span class="token comment">// 일관성 있는 사용 (Good)</span>
</span><span class="code-line"><span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">&#x27;AuthService&#x27;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&#x27;로그인 성공 시 토큰을 반환한다&#x27;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token comment">/* ... */</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&#x27;잘못된 비밀번호로 로그인 시 에러가 발생한다&#x27;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token comment">/* ... */</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&#x27;토큰 만료 시 자동으로 갱신한다&#x27;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token comment">/* ... */</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment">// 혼재된 사용 (Bad)</span>
</span><span class="code-line"><span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">&#x27;AuthService&#x27;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&#x27;로그인 성공 시 토큰을 반환한다&#x27;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token comment">/* ... */</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token function">it</span><span class="token punctuation">(</span><span class="token string">&#x27;잘못된 비밀번호로 로그인 시 에러가 발생한다&#x27;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token comment">/* ... */</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&#x27;토큰 만료 시 자동으로 갱신한다&#x27;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token arrow operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token comment">/* ... */</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></code><div class="copied" data-code="// 일관성 있는 사용 (Good)
describe(&#x27;AuthService&#x27;, () =&gt; {
  test(&#x27;로그인 성공 시 토큰을 반환한다&#x27;, () =&gt; { /* ... */ });
  test(&#x27;잘못된 비밀번호로 로그인 시 에러가 발생한다&#x27;, () =&gt; { /* ... */ });
  test(&#x27;토큰 만료 시 자동으로 갱신한다&#x27;, () =&gt; { /* ... */ });
});

// 혼재된 사용 (Bad)
describe(&#x27;AuthService&#x27;, () =&gt; {
  test(&#x27;로그인 성공 시 토큰을 반환한다&#x27;, () =&gt; { /* ... */ });
  it(&#x27;잘못된 비밀번호로 로그인 시 에러가 발생한다&#x27;, () =&gt; { /* ... */ });
  test(&#x27;토큰 만료 시 자동으로 갱신한다&#x27;, () =&gt; { /* ... */ });
});
"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
<p>실제 프로젝트에서는 <code>test</code>, <code>it</code> 중 어떤 것을 사용해도 되지만, 팀의 상황과 컨벤션에 맞게 사용하는 것이 중요합니다. 앞서 말했듯 <code>test</code>와 <code>it</code>의 차이는 가독성에 있기 때문입니다.</p>
<p>결국 중요한 것은 <code>test</code>냐 <code>it</code>이냐가 아니라, <strong>의미있고 명확한 테스트를 작성하는 것</strong>이라고 할 수 있습니다.</p>
<h3 id="출처"><a class="anchor" aria-hidden="true" tabindex="-1" href="#출처"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>출처</h3>
<ul>
<li><a href="https://jestjs.io/docs/api#testname-fn-timeout">https://jestjs.io/docs/api#testname-fn-timeout</a></li>
<li><a href="https://stackoverflow.com/questions/45778192/what-is-the-difference-between-it-and-test-in-jest">https://stackoverflow.com/questions/45778192/what-is-the-difference-between-it-and-test-in-jest</a></li>
</ul>
<h4 id="2-expecthasassertions"><a class="anchor" aria-hidden="true" tabindex="-1" href="#2-expecthasassertions"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>2. expect.hasAssertions()</h4>
<p>Jest의 <code>expect.hasAssertions()</code>은 주로 비동기 테스트에서 assertion이 실제로 실행되었는지 확인하기 위해 사용됩니다. 여기서 말하는 assertion은 우리가 테스트를 실행할 때 작성하는 expect().toBe(), expect().toEqual() 같은 검증 코드들을 의미합니다.</p>
<p>비동기 테스트에서 가장 위험한 상황 중 하나는 테스트가 통과했지만 실제로는 아무것도 검증하지 않은 경우입니다.</p>
<pre class="language-ts"><code class="language-ts code-highlight"><span class="code-line"><span class="token keyword">function</span> <span class="token function">fetchUserData</span><span class="token punctuation">(</span>userId<span class="token punctuation">,</span> callback<span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token keyword">if</span> <span class="token punctuation">(</span>userId <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">    api<span class="token punctuation">.</span><span class="token function">getUser</span><span class="token punctuation">(</span>userId<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>user <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">      <span class="token function">callback</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 정상 케이스만 callback 호출</span>
</span><span class="code-line">    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">    <span class="token comment">// .catch()가 없어서 에러 시 callback이 호출되지 않음</span>
</span><span class="code-line">  <span class="token punctuation">}</span>
</span><span class="code-line">  <span class="token comment">// userId &lt;= 0인 경우 callback이 전혀 호출되지 않음</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment">// 이 테스트는 잘못 통과할 수 있음</span>
</span><span class="code-line"><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&#x27;fetchUserData handles invalid userId&#x27;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token function">fetchUserData</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>user<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token function">expect</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBeNull</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 이 assertion이 실행되지 않음</span>
</span><span class="code-line">  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token comment">// Jest는 테스트 함수가 끝나면 성공으로 간주</span>
</span><span class="code-line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></code><div class="copied" data-code="function fetchUserData(userId, callback) {
  if (userId &gt; 0) {
    api.getUser(userId).then(user =&gt; {
      callback(user); // 정상 케이스만 callback 호출
    });
    // .catch()가 없어서 에러 시 callback이 호출되지 않음
  }
  // userId &lt;= 0인 경우 callback이 전혀 호출되지 않음
}

// 이 테스트는 잘못 통과할 수 있음
test(&#x27;fetchUserData handles invalid userId&#x27;, () =&gt; {
  fetchUserData(-1, (user) =&gt; {
    expect(user).toBeNull(); // 이 assertion이 실행되지 않음
  });
  // Jest는 테스트 함수가 끝나면 성공으로 간주
});
"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
<p>테스트를 실행하면 &#x27;fetchUserData handles invalid userId&#x27;인 것처럼 보이지만 실제로는 assertion이 실행되지 않습니다.
그렇기 때문에 해당 테스트는 거짓된 테스트가 됩니다.</p>
<p>그렇기 때문에 이를 <code>expect.hasAssertions()</code>를 추가하여 실행하면 다음과 같이 동작할 수 있습니다.</p>
<pre><code class="code-highlight"><span class="code-line"># hasAssertions()를 추가한 후 실행 결과
</span><span class="code-line">✗ fetchUserData handles invalid userId (5ms)
</span><span class="code-line">  
</span><span class="code-line">  Error: Expected at least one assertion to be called but received zero assertion calls.
</span></code><div class="copied" data-code="# hasAssertions()를 추가한 후 실행 결과
✗ fetchUserData handles invalid userId (5ms)
  
  Error: Expected at least one assertion to be called but received zero assertion calls.
"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
<p>이렇게 작성해주면 테스트가 올바르게 실패합니다. callback이 호출되지 않았다는 것을 명확히 알 수 있습니다.</p>
<h4 id="3-미친-1시간-반동안의-트러블-슈팅---fake-timers와-비동기-작업-간의-타이밍-이슈"><a class="anchor" aria-hidden="true" tabindex="-1" href="#3-미친-1시간-반동안의-트러블-슈팅---fake-timers와-비동기-작업-간의-타이밍-이슈"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>3. 미친 1시간 반동안의 트러블 슈팅 - Fake Timers와 비동기 작업 간의 타이밍 이슈</h4>
<p>제 과제상의 setupTest 파일은 다음과 같이 구성되어 있었습니다.</p>
<pre class="language-ts"><code class="language-ts code-highlight"><span class="code-line"><span class="token comment">/* msw */</span>
</span><span class="code-line"><span class="token keyword">export</span> <span class="token keyword">const</span> server <span class="token operator">=</span> <span class="token function">setupServer</span><span class="token punctuation">(</span><span class="token operator">...</span>handlers<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token function">beforeAll</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">  server<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">  vi<span class="token punctuation">.</span><span class="token function">useFakeTimers</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token function">beforeEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">  expect<span class="token punctuation">.</span><span class="token function">hasAssertions</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">  vi<span class="token punctuation">.</span><span class="token function">setSystemTime</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token string">&#x27;2025-10-15&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token function">afterEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">  server<span class="token punctuation">.</span><span class="token function">resetHandlers</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">  vi<span class="token punctuation">.</span><span class="token function">clearAllMocks</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">  vi<span class="token punctuation">.</span><span class="token function">clearAllTimers</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token function">afterAll</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">  vi<span class="token punctuation">.</span><span class="token function">resetAllMocks</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">  server<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">  vi<span class="token punctuation">.</span><span class="token function">useRealTimers</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></code><div class="copied" data-code="/* msw */
export const server = setupServer(...handlers);

beforeAll(() =&gt; {
  server.listen();
  vi.useFakeTimers();
});

beforeEach(() =&gt; {
  expect.hasAssertions();
  vi.setSystemTime(new Date(&#x27;2025-10-15&#x27;));
});

afterEach(() =&gt; {
  server.resetHandlers();
  vi.clearAllMocks();
  vi.clearAllTimers();
});

afterAll(() =&gt; {
  vi.resetAllMocks();
  server.close();
  vi.useRealTimers();
});
"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
<p>그런데 과제를 하다보니 이상한 점을 발견합니다.</p>
<img width="527" height="699" alt="image" src="https://github.com/user-attachments/assets/f17adb8d-b13f-4317-ae9b-72ab9927dfe9"/>
<img width="542" height="360" alt="image" src="https://github.com/user-attachments/assets/89b403b8-441b-4d9f-9a4c-7c382de59274"/>
<img width="547" height="408" alt="image" src="https://github.com/user-attachments/assets/626ccc82-6c7d-4366-996a-ee3f1bf2f0ee"/>
<p>이걸 1시간 반동안 삽질을 했었는데요. 결론적으로는 <a href="https://github.com/testing-library/dom-testing-library/issues/1218">https://github.com/testing-library/dom-testing-library/issues/1218</a> 의 내용을 확인해보면 <code>vi.useFakeTimers({ shouldAdvanceTime: true });</code> 한 줄만 추가해주면 되는 문제였습니다. <del>아니</del></p>
<p>이게 왜 그런지에 대해서는 일단 <code>shouldAdvanceTime</code> 옵션에 대해서 이해해야할 것 같습니다.
<a href="https://github.com/vitest-dev/vitest/blob/main/docs/config/index.md#faketimersshouldadvancetime">https://github.com/vitest-dev/vitest/blob/main/docs/config/index.md#faketimersshouldadvancetime</a> 를 보면
<code>shouldAdvanceTime</code> 옵션은</p>
<ul>
<li>@sinonjs/fake-timers에게 실제 시스템 시간 변화에 따라 자동으로 가짜 시간을 증가시키라고 지시합니다. (예: 실제 시간이 20ms 변할 때마다 가짜 시간도 20ms씩 증가)
라고 나와있는데요.</li>
</ul>
<p>만약 shouldAdvanceTime가 false(기본값)인 경우에는 개발자가 명시적으로 <code>vi.advanceTimersByTime()</code>으로 수동 조작해야만 시간이 흐르게 됩니다. 때문에 비동기 라이브러리(제 과제에서의 <code>findByText</code>)와 호환성 문제가 발생할 수 있습니다.</p>
<p>반대로 shouldAdvanceTime가 true인 경우에는 위에서 언급된 것처럼 실제 시간이 흐르면 가짜 시간도 따라서 흐르기 때문에 비동기 라이브러리들과 잘 작동합니다.</p>
<p>다시 제 과제로 돌아가서</p>
<pre class="language-ts"><code class="language-ts code-highlight"><span class="code-line">vi<span class="token punctuation">.</span><span class="token function">useFakeTimers</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// shouldAdvanceTime: false (기본값)</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword">await</span> <span class="token function">act</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token function">setup</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>App <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">  vi<span class="token punctuation">.</span><span class="token function">advanceTimersByTime</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ← 이때까지만 시간이 흐름</span>
</span><span class="code-line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment">// 하지만 이 시점부터 시간이 완전히 멈춤</span>
</span><span class="code-line"><span class="token keyword">await</span> screen<span class="token punctuation">.</span><span class="token function">findByText</span><span class="token punctuation">(</span><span class="token string">&#x27;일정 로딩 완료!&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ← 타임아웃!</span>
</span></code><div class="copied" data-code="vi.useFakeTimers(); // shouldAdvanceTime: false (기본값)

await act(async () =&gt; {
  setup(&lt;App /&gt;);
  vi.advanceTimersByTime(100); // ← 이때까지만 시간이 흐름
});

// 하지만 이 시점부터 시간이 완전히 멈춤
await screen.findByText(&#x27;일정 로딩 완료!&#x27;); // ← 타임아웃!
"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
<p><code>shouldAdvanceTime</code>가 false이니 명시적으로 시간을 돌려주지 않으면 시간이 흐르지 않고</p>
<pre class="language-ts"><code class="language-ts code-highlight"><span class="code-line"><span class="token comment">// findByText 내부 구조 (단순화)</span>
</span><span class="code-line"><span class="token keyword">const</span> <span class="token function-variable function">findByText</span> <span class="token operator">=</span> <span class="token punctuation">(</span>text<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name"><span class="token builtin">Promise</span></span><span class="token punctuation">(</span><span class="token punctuation">(</span>resolve<span class="token punctuation">,</span> reject<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token keyword">const</span> timeout <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">      <span class="token function">reject</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">&#x27;타임아웃!&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ← 이 타이머가 실행되지 않음</span>
</span><span class="code-line">    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">    
</span><span class="code-line">    <span class="token keyword">const</span> <span class="token function-variable function">poll</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">      <span class="token keyword">const</span> element <span class="token operator">=</span> <span class="token function">queryByText</span><span class="token punctuation">(</span>text<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">      <span class="token keyword">if</span> <span class="token punctuation">(</span>element<span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">        <span class="token function">resolve</span><span class="token punctuation">(</span>element<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
</span><span class="code-line">        <span class="token function">setTimeout</span><span class="token punctuation">(</span>poll<span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ← 이 타이머도 실행되지 않음</span>
</span><span class="code-line">      <span class="token punctuation">}</span>
</span><span class="code-line">    <span class="token punctuation">}</span><span class="token punctuation">;</span>
</span><span class="code-line">    <span class="token function">poll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token punctuation">}</span><span class="token punctuation">;</span>
</span></code><div class="copied" data-code="// findByText 내부 구조 (단순화)
const findByText = (text) =&gt; {
  return new Promise((resolve, reject) =&gt; {
    const timeout = setTimeout(() =&gt; {
      reject(new Error(&#x27;타임아웃!&#x27;)); // ← 이 타이머가 실행되지 않음
    }, 1000);
    
    const poll = () =&gt; {
      const element = queryByText(text);
      if (element) {
        resolve(element);
      } else {
        setTimeout(poll, 50); // ← 이 타이머도 실행되지 않음
      }
    };
    poll();
  });
};
"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
<p><code>findByText</code>가 내부적으로 타이머를 실행하는데, 이때 타이머가 멈춰있게 되어 타임아웃이 발생한...것이었습니다.</p>
<p>한시간 반이나 투자했으니 다음번엔 잘 기억하겠지 하고... 놓아주었습니다.</p>
<h3 id="코드-품질"><a class="anchor" aria-hidden="true" tabindex="-1" href="#코드-품질"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>코드 품질</h3>
<!-- -->
<h4 id="1-불필요한-테스트"><a class="anchor" aria-hidden="true" tabindex="-1" href="#1-불필요한-테스트"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>1. 불필요한 테스트</h4>
<p>불필요한 테스트라고 여겨지는 부분에 대해서 상단에 주석을 달아두었습니다.</p>
<pre class="language-ts"><code class="language-ts code-highlight"><span class="code-line"><span class="token comment">// getDaysInMonth에 대한 테스트 중</span>
</span><span class="code-line">  <span class="token comment">// NOTE: 이 테스트는 불필요한 테스트라고 판단하였으나 최대한 현재 기능에 유사하게 구현하였습니다.</span>
</span><span class="code-line">  <span class="token comment">// 테스트를 불필요하다고 판단한 이유는, getDaysInMonth 함수가 JavaScript 내장 기능 테스트에 지나치지 않는다고 판단했기 때문입니다.</span>
</span><span class="code-line">  <span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">&#x27;잘못된 월 입력 처리&#x27;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&#x27;13월 입력 시 이전 달(12월)의 일수인 31일을 반환한다&#x27;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">      <span class="token function">expect</span><span class="token punctuation">(</span><span class="token function">getDaysInMonth</span><span class="token punctuation">(</span><span class="token number">2025</span><span class="token punctuation">,</span> <span class="token number">13</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBe</span><span class="token punctuation">(</span><span class="token number">31</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line">    <span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&#x27;0월 입력 시 이전 달(12월)의 일수인 31일을 반환한다&#x27;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">      <span class="token function">expect</span><span class="token punctuation">(</span><span class="token function">getDaysInMonth</span><span class="token punctuation">(</span><span class="token number">2025</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBe</span><span class="token punctuation">(</span><span class="token number">31</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line">    <span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&#x27;-1월 입력 시 이전 달(11월)의 일수인 30일을 반환한다&#x27;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">      <span class="token function">expect</span><span class="token punctuation">(</span><span class="token function">getDaysInMonth</span><span class="token punctuation">(</span><span class="token number">2025</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBe</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">  
</span><span class="code-line">  <span class="token comment">// getTimeErrorMessage에 대한 테스트 중</span>
</span><span class="code-line">    <span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">&#x27;입력값이 비어있는 경우&#x27;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&#x27;시작 시간이 비어있을 때 에러 메시지를 반환하지 않는다&#x27;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">      <span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token function">getTimeErrorMessage</span><span class="token punctuation">(</span><span class="token string">&#x27;&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;15:00&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">      <span class="token function">expect</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>startTimeError<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBeNull</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">      <span class="token function">expect</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>endTimeError<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBeNull</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line">    <span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&#x27;종료 시간이 비어있을 때 에러 메시지를 반환하지 않는다&#x27;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">      <span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token function">getTimeErrorMessage</span><span class="token punctuation">(</span><span class="token string">&#x27;14:00&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">      <span class="token function">expect</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>startTimeError<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBeNull</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">      <span class="token function">expect</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>endTimeError<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBeNull</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line">    <span class="token comment">// NOTE: 해당 테스트의 경우 상위의 두 테스트에서 검증이 가능하므로 불필요한 테스트로 생각됩니다.</span>
</span><span class="code-line">    <span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&#x27;시작 시간과 종료 시간이 모두 비어있을 때 null을 반환한다&#x27;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">      <span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token function">getTimeErrorMessage</span><span class="token punctuation">(</span><span class="token string">&#x27;&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">      <span class="token function">expect</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>startTimeError<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBeNull</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">      <span class="token function">expect</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>endTimeError<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBeNull</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></code><div class="copied" data-code="// getDaysInMonth에 대한 테스트 중
  // NOTE: 이 테스트는 불필요한 테스트라고 판단하였으나 최대한 현재 기능에 유사하게 구현하였습니다.
  // 테스트를 불필요하다고 판단한 이유는, getDaysInMonth 함수가 JavaScript 내장 기능 테스트에 지나치지 않는다고 판단했기 때문입니다.
  describe(&#x27;잘못된 월 입력 처리&#x27;, () =&gt; {
    test(&#x27;13월 입력 시 이전 달(12월)의 일수인 31일을 반환한다&#x27;, () =&gt; {
      expect(getDaysInMonth(2025, 13)).toBe(31);
    });

    test(&#x27;0월 입력 시 이전 달(12월)의 일수인 31일을 반환한다&#x27;, () =&gt; {
      expect(getDaysInMonth(2025, 0)).toBe(31);
    });

    test(&#x27;-1월 입력 시 이전 달(11월)의 일수인 30일을 반환한다&#x27;, () =&gt; {
      expect(getDaysInMonth(2025, -1)).toBe(30);
    });
  });
  
  // getTimeErrorMessage에 대한 테스트 중
    describe(&#x27;입력값이 비어있는 경우&#x27;, () =&gt; {
    test(&#x27;시작 시간이 비어있을 때 에러 메시지를 반환하지 않는다&#x27;, () =&gt; {
      const result = getTimeErrorMessage(&#x27;&#x27;, &#x27;15:00&#x27;);
      expect(result.startTimeError).toBeNull();
      expect(result.endTimeError).toBeNull();
    });

    test(&#x27;종료 시간이 비어있을 때 에러 메시지를 반환하지 않는다&#x27;, () =&gt; {
      const result = getTimeErrorMessage(&#x27;14:00&#x27;, &#x27;&#x27;);
      expect(result.startTimeError).toBeNull();
      expect(result.endTimeError).toBeNull();
    });

    // NOTE: 해당 테스트의 경우 상위의 두 테스트에서 검증이 가능하므로 불필요한 테스트로 생각됩니다.
    test(&#x27;시작 시간과 종료 시간이 모두 비어있을 때 null을 반환한다&#x27;, () =&gt; {
      const result = getTimeErrorMessage(&#x27;&#x27;, &#x27;&#x27;);
      expect(result.startTimeError).toBeNull();
      expect(result.endTimeError).toBeNull();
    });
  });
"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
<p>제가 판단한 &#x27;불필요함&#x27;의 기준은 다음과 같습니다.</p>
<ol>
<li>구현체가 이미 브라우저 api로 충분히 파악 가능한 테스트다.</li>
<li>하위 테스트에서 충분히 검증 가능한 테스트다.</li>
<li>앞선 테스트에서 충분히 검증 되었다.</li>
</ol>
<p>때문에 상기한 테스트들은 불필요하다고 판단했습니다.</p>
<h4 id="2-테스트를-작성하는-규칙"><a class="anchor" aria-hidden="true" tabindex="-1" href="#2-테스트를-작성하는-규칙"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>2. 테스트를 작성하는 규칙</h4>
<p>제가 이번에 테스트를 작성함에 있어서 스스로 규칙을 세워 테스트를 작성하였는데, 그 규칙은 다음과 같습니다.</p>
<ol>
<li>Given When Then 방식으로 테스트를 구현할 것</li>
<li>describe가 구체적일것</li>
<li>모든 구현을 커버하지 않아도 되고, 필요한 부분에 대해서 테스트를 작성할것</li>
<li>무의미한테스트를 작성하지 않을것</li>
<li>정상범위에 대해서는 테스트가 하나만 있고, 경계값이 있다면 그에 대한 테스트를 작성할것. 과도한 오버엔지니어링 금지
이전에는 테스트 커버리지가 높은 테스트 === 좋은 테스트라는 생각을 했었는데 이번에 테스트를 구현하면서는 어떤 것이 좋은 테스트일까를 더 생각하면서 구현했던 것 같습니다.(물론 아직도 쉽지 않습니다)</li>
</ol>
<h4 id="3-qna때-들었던-힌트에-기반해서-테스트-구현하기"><a class="anchor" aria-hidden="true" tabindex="-1" href="#3-qna때-들었던-힌트에-기반해서-테스트-구현하기"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>3. QnA때 들었던 힌트에 기반해서 테스트 구현하기</h4>
<p>이부분은 사실 제가 갈피를 잘 잡은게 맞나 싶은 생각이 드는데요.
일단 제가 질문드렸던 질문 중</p>
<blockquote>
<p>어떤 유닛 테스트의 event에 대해서 목데이터를 위치를 가깝게 둬야할까요? 아니면 멀리 두는게 좋을까요? 가까이 둔다는 의미는 테스트 파일 혹은 각 모듈 내부에 목데이터를 두는것, 멀리 둔다는 것은 따로 fixture를 두어 공통화된 데이터를 사용함을 생각했습니다. 가깝게 두면 의도가 분명하다는 이점이 있을 것 같은데요…그치만 추후에 인터페이스가 변경되면 모든 곳에서 변경해주어야 해서 관리하기가 어려울 수 있을거같습니다. 어떤게 더 나은 방법일까요?</p>
</blockquote>
<p>라는 질문을 통해서, 일반적인 케이스들에 대해서는 관통하는 fixture를 두고 특수한 케이스에 대해서만 특수한 mockEvents를 두도록 변경했습니다.</p>
<p>가장 신경썼던 부분은 &#x27;테스트는 통과하지만 실제로는 통과하지 않은 시나리오를 찾아라&#x27;라는 진짜 수수께끼 같은 말씀이었는데요. 그를 계속 신경쓰면서 짜려고 했는데 어떤 부분에서 그 부분이 필요한 것인지 파악이 어려웠습니다.</p>
<p>그런데 setupTests.ts를 구현하다가 hasAsstions라는 함수에 대해서 알아보게 되었을때 &#x27;주로 비동기 테스트에서 assertion이 실제로 실행되었는지 확인하기 위해 사용한다&#x27; 라는 부분이 있었고 QnA에서도 코치님께서 설명한 부분이 데이터를 불러올때 비동기적으로 데이터를 불러오게 되는데 이에 대한 테스트를 작성해야한다? 라는 늬앙스가 있던 것으로 기억하는데요. 이번 테스트의 경우에 데이터를 로딩하고나서 &#x27;일정 로딩 완료!&#x27;라는 스낵바가 보여지게 되어 이를 통합테스트에서 검증하도록 했습니다.</p>
<pre class="language-ts"><code class="language-ts code-highlight"><span class="code-line">  <span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&#x27;월별 뷰에 일정이 없으면, 일정이 표시되지 않아야 한다.&#x27;</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token comment">// Given: 해당 월에 일정이 없는 상태로 앱 시작</span>
</span><span class="code-line">    vi<span class="token punctuation">.</span><span class="token function">setSystemTime</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token string">&#x27;2019-01-01&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">    <span class="token function">setup</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>App <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">    <span class="token keyword">await</span> screen<span class="token punctuation">.</span><span class="token function">findByText</span><span class="token punctuation">(</span><span class="token string">&#x27;일정 로딩 완료!&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line">    <span class="token comment">// When: 월별 뷰를 확인 (기본값)</span>
</span><span class="code-line">    <span class="token comment">// Then: 검색 결과가 없다는 메시지가 표시되어야 함</span>
</span><span class="code-line">    <span class="token keyword">const</span> eventList <span class="token operator">=</span> <span class="token function">within</span><span class="token punctuation">(</span>screen<span class="token punctuation">.</span><span class="token function">getByTestId</span><span class="token punctuation">(</span><span class="token string">&#x27;event-list&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">    <span class="token function">expect</span><span class="token punctuation">(</span>eventList<span class="token punctuation">.</span><span class="token function">getByText</span><span class="token punctuation">(</span><span class="token string">&#x27;검색 결과가 없습니다.&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBeInTheDocument</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></code><div class="copied" data-code="  test(&#x27;월별 뷰에 일정이 없으면, 일정이 표시되지 않아야 한다.&#x27;, async () =&gt; {
    // Given: 해당 월에 일정이 없는 상태로 앱 시작
    vi.setSystemTime(new Date(&#x27;2019-01-01&#x27;));
    setup(&lt;App /&gt;);
    await screen.findByText(&#x27;일정 로딩 완료!&#x27;);

    // When: 월별 뷰를 확인 (기본값)
    // Then: 검색 결과가 없다는 메시지가 표시되어야 함
    const eventList = within(screen.getByTestId(&#x27;event-list&#x27;));
    expect(eventList.getByText(&#x27;검색 결과가 없습니다.&#x27;)).toBeInTheDocument();
  });
"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
<p>일정이 없는 경우에는 일정이 말그대로 표시되지 않으므로 일정이 전체적으로 로딩되었는지에 대해 판단하기가 어려우므로 이를 &#x27;일정 로딩 완료!&#x27; 토스트가 발생하는지를 파악하도록 구현했고 그를 통해서 좀 더 안정적인 테스트 구현이 가능했다고 생각합니다.</p>
<p>갑자기 작성하면서 든 궁금증인데, 그렇다면 만약 로딩후에 저런 토스트 메시지가 없는 경우에는 어떻게 비동기적으로 데이터가 불러와졌음을 알 수 있을까요? 작성하면서 궁금해집니다.</p>
<h3 id="학습-효과-분석"><a class="anchor" aria-hidden="true" tabindex="-1" href="#학습-효과-분석"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>학습 효과 분석</h3>
<!-- -->
<h4 id="사실은요"><a class="anchor" aria-hidden="true" tabindex="-1" href="#사실은요"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>사실은요...</h4>
<p>과제를 하다가 모달 관리하는 부분에 대해서 useOverlay라는 훅을 만들어볼까 생각했는데, 그렇게 되면 테스트코드를 짜야할거같다는 압박감이 들어 토스의 overlay-kit를...설치했습니다...ㅎㅎ 이부분을 Pr에다가 &#x27;저는 테스트를 전략적으로 라이브러리에 위임했습니다&#x27;하고 싶었는데 사실 좀 더 확실한 보증(?)이 있으면 좋겠다고 생각하던 찰나였습니다.</p>
<p>오프코치님이 개인적으로 질문드린 내용을 문의글에 올리셨는데</p>
<blockquote>
<p>이 부분에 대한 검증은 html, react가 잘 구현이 되어있으면 잘 될거다! 정도로 볼 수도 있는 부분일수도</p>
</blockquote>
<p>라고 하셔서 어? 이거 나한테 필요한 문장인데 싶어서 이때를 놓치면 안된다고 생각해 바로 질문을 드렸습니다.
<img width="697" height="281" alt="image" src="https://github.com/user-attachments/assets/33a5e287-151a-4ac1-bbfd-8e6477df11e1"/></p>
<p>원래 허락보다 용서가 빠르고, overlay-kit 을 써도 되냐 여쭤보면 직접 구현하고 테스트 작성하라는 말씀을 하실 것 같아서 ㅎㅎ 안여쭤보고 진행하려고 했는데 기회는 역시 찾아오더라고요.
<img width="681" height="265" alt="image" src="https://github.com/user-attachments/assets/af6f2072-2587-4713-91da-ffe7623b2823"/>
<img width="80" height="62" alt="image" src="https://github.com/user-attachments/assets/74bd570a-57c2-4712-8bbe-18409b2ef282"/>
일단 넹이라는 글자를 보자마자 &#x27;이때다&#x27; 싶었습니다. 다른 글자는 눈에 보이지도 않고 내가 라이브러리를 사용한 것에 대해서 허락정도가 아니라 타당한 이유를 만들어 주심에 너무 감사했습니다 ㅎㅎ
<img width="676" height="262" alt="image" src="https://github.com/user-attachments/assets/4e88ac5d-b649-4a1d-8787-962a93d3f3cf"/>
제가 문의글에 질문한 내용 중 가장 재밌던 질문이었다고 생각합니다. ㅎㅎ (암튼 전략적이잖아~)</p>
<p>암튼 비슷하게, 사실 실무적으로 테스트코드를 계속 해서 관리하는 조직이 아니라면 테스트 코드는 e2e가 아니더라도 값비싼 코드라고 생각이 드는데요. 이런 부분을 라이브러리에 위임해서 검증토록하는 방식이 유의미하다는 것을 알게되었다고 생각합니다.</p>
<p>또 이번에 준일님이 알려주신
<a href="https://www.npmjs.com/package/fast-check">https://www.npmjs.com/package/fast-check</a>
요 라이브러리를 이번 과제에 써보고 싶었는데 그러지 못해서 좀 아쉬움이 남습니다. 이부분을 랜덤적으로 발생하는 숫자에 대한 검증용도로 사용할 수 있었을 것 같은데...아무튼 다음에 실무에 적용해 볼 수 있다면 써봄직한 수확이라고 생각합니다.</p>
<h3 id="과제-피드백"><a class="anchor" aria-hidden="true" tabindex="-1" href="#과제-피드백"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>과제 피드백</h3>
<!-- -->
<p>오프코치님께서 숨겨놓으셨다는 이스터에그(?)들이 너무너무 궁금합니다...제가 의도를 제대로 파악하는게 맞는것인지..너무너무너무 궁금합니다... 이번주 발제때 알려주셨으면 좋겠어요 ... 🥹</p>
<h2 id="리뷰-받고-싶은-내용"><a class="anchor" aria-hidden="true" tabindex="-1" href="#리뷰-받고-싶은-내용"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>리뷰 받고 싶은 내용</h2>
<ol>
<li><code>useEventForm</code>이라는 애가 너무 책임이 거대한것 같아서 내부적으로 역할을 분리하게 되었습니다. 그중에 <code>useTimeValidation</code>이라는 훅을 만들었습니다. 이 훅은 내부적으로 <code>getTimeErrorMessage</code>를 쓰는데 해당 유틸은 이미 유닛테스트가 존재합니다. 일단 저는 이 <code>getTimeErrorMessage</code>에 대한 검증을 <code>useTimeValidation</code>에서 하는게 의미가 없다고 생각하는데요.</li>
</ol>
<p>그렇다면 <code>useTimeValidation</code>에서 할수있는 테스트는 구현에 대한 부분만 보면 상태 업데이트, 인터페이스관련, 핸들러를 생성하는 부분에 대한 것 정도가 될거같은데 이런 부분에 대한 검증이 의미가 있는 것일까요?</p>
<p>정리하자면 유틸함수에 대한 테스트가 구현되어있고, 이를 단순히 이용해서 상태를 관리하는 훅이 있다고 하면 이 훅에 대한 테스트가 유의미하다고 생각하시나요?  &#x27;오류 상태에서 정상적인 값으로 변경하면 오류가 초기화되어야 한다&#x27; 와 같이 상태 업데이트 정도는 검증할 수 있겠다는 생각이 드는데, 어디까지 검증을 해야하는지 좀 모호한 것 같습니다.</p>
<ol start="2">
<li>
<p>단순히 presentation 컴포넌트로 뷰잉역할을 하는 컴포넌트가 있을때 props로 핸들러들이 넘어온다는 이유로
어떤 이벤트가 발생햇을때 이벤트 핸들러를 모킹해서 테스트 하는게 의미가 있을까요?</p>
</li>
<li>
<p>데이터가 전부 비어져있는 상황인 경우에 로딩후에 &#x27;일정 로딩 완료!&#x27;와 같은 토스트 메시지가 없다면 어떻게 데이터가 불러와졌음을 알아 차릴 수 있을까요?</p>
</li>
</ol></div></div><div class="overflow-auto mt-9"><div data-color-mode="dark" class="wmde-markdown wmde-markdown-color p-6 max-w-full" style="word-wrap:break-word;overflow-wrap:break-word"><h2 id="과제-피드백"><a class="anchor" aria-hidden="true" tabindex="-1" href="#과제-피드백"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>과제 피드백</h2>
<p>안녕하세요 영서님! 7주차 과제 잘 진행해주셨네요 ㅎㅎ
여러가지 일이 겹쳐서 항상 극한의 챌린지(?)를 하고 있는데 그럼에도 불구하고 뚝딱뚝딱 잘 해내는 모습이 멋있으면서도 걱정되네요 ㅋㅋ 너무 무리하진 않았으면 좋겠씁니다..</p>
<blockquote>
<p>test() vs it()</p>
</blockquote>
<p>사실 이에 대해 깊게 고민해본적이 없었는데, 작성해주신 내용을 보고 &quot;아하! 그렇구나!&quot; 라는 생각을 했어요! 굿굿</p>
<blockquote>
<p>expect.hasAssertions()</p>
</blockquote>
<p>이것도 처음 보는데 덕분에 새로운 API를 알아갑니다 ㅋㅋ 감사해요</p>
<blockquote>
<p>미친 1시간 반동안의 트러블 슈팅 - Fake Timers와 비동기 작업 간의 타이밍 이슈</p>
</blockquote>
<p>ㅋㅋㅋ 저도 2기 때 과제 솔루션 만들면서 동일한 문제를 겪었는데요, 1시간만에 해결하셨다니!!! 멋있네요..</p>
<blockquote>
<p>갑자기 작성하면서 든 궁금증인데, 그렇다면 만약 로딩후에 저런 토스트 메시지가 없는 경우에는 어떻게 비동기적으로 데이터가 불러와졌음을 알 수 있을까요? 작성하면서 궁금해집니다.</p>
</blockquote>
<p>이건 뭐.. 내부 로직이 어떻게 구현되었는가에 따라 다르다고 생각해요 ㅎㅎ 특저 함수의 호출로 확인해볼 수도 있고, 혹은 tanstack-query를 사용한다고 했을 때 강제로 onSuccess 혹은 onError 같은 이벤트를 밖에서 주입할수도 있고!?</p>
<blockquote>
<p>useEventForm이라는 애가 너무 책임이 거대한것 같아서 내부적으로 역할을 분리하게 되었습니다. 그중에 useTimeValidation이라는 훅을 만들었습니다. 이 훅은 내부적으로 getTimeErrorMessage를 쓰는데 해당 유틸은 이미 유닛테스트가 존재합니다. 일단 저는 이 getTimeErrorMessage에 대한 검증을 useTimeValidation에서 하는게 의미가 없다고 생각하는데요. 그렇다면 useTimeValidation에서 할수있는 테스트는 구현에 대한 부분만 보면 상태 업데이트, 인터페이스관련, 핸들러를 생성하는 부분에 대한 것 정도가 될거같은데 이런 부분에 대한 검증이 의미가 있는 것일까요? 정리하자면 유틸함수에 대한 테스트가 구현되어있고, 이를 단순히 이용해서 상태를 관리하는 훅이 있다고 하면 이 훅에 대한 테스트가 유의미하다고 생각하시나요? &#x27;오류 상태에서 정상적인 값으로 변경하면 오류가 초기화되어야 한다&#x27; 와 같이 상태 업데이트 정도는 검증할 수 있겠다는 생각이 드는데, 어디까지 검증을 해야하는지 좀 모호한 것 같습니다.</p>
</blockquote>
<p>깊게 들어가서 고민해보자면.. 필요한 구간만 선별해서 검증하자! 라고 이야기할 수 있겠지만 솔직히 그걸 선별하는 과정이 더 오래걸린다고 생각해요 ㅎㅎ 아싸리 다 검증해버리는게 속편하지 않나? 라는 생각입니다. 저는 그냥 다 검증하는 편이랍니다.</p>
<blockquote>
<p>단순히 presentation 컴포넌트로 뷰잉역할을 하는 컴포넌트가 있을때 props로 핸들러들이 넘어온다는 이유로 어떤 이벤트가 발생햇을때 이벤트 핸들러를 모킹해서 테스트 하는게 의미가 있을까요?</p>
</blockquote>
<p>제가 종종 이야기 했었는데, 저는 컴포넌트에 대한 테스트는 의미 없는 경우가 많다고 생각해요. 컴포넌트는 데이터를 표현하는 수단이고, 그렇다면 데이터에 대해 그리고 데이터를 만들어내는 함수에 대해 검증할 수 있다면 컴포넌트에 대한 검증도 어느정도는 되는게 아닐까!? 라고 생각합니다.</p>
<p>다만, 컴포넌트는 인터랙션을 연결하는 수단이 될 수 있기 때문에 인터랙션이 잘 발생하는가!? 정도는 테스트해볼 수 있겠죠 ㅎㅎ
이 경우에는 그냥 e2e 테스트를.... 해보면 어떨까!? 라고 또 연결이 되네요 ㅋㅋ</p>
<blockquote>
<p>데이터가 전부 비어져있는 상황인 경우에 로딩후에 &#x27;일정 로딩 완료!&#x27;와 같은 토스트 메시지가 없다면 어떻게 데이터가 불러와졌음을 알아 차릴 수 있을까요?</p>
</blockquote>
<p>이야기드린 것 처럼 목 함수를 이벤트에 넘겨준 다음에 목 함수가 호출되는지 확인해보는거죠. 다만 이건 어떤식으로 코드가 작성되어있는지에 따라 달라질 수 있다고 생각해요!</p></div></div><div class="mt-9"></div></div></main></div></div></div></div>
</body>
</html>
