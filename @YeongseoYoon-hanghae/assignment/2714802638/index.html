<!doctype html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>항해플러스 프론트엔드 6기 기술블로그</title>
  <link rel="icon" href="/front_6th/favicon.ico"/>
  
  <script type="module" crossorigin src="/front_6th/assets/index-D1PDUPCa.js"></script>
  <link rel="stylesheet" crossorigin href="/front_6th/assets/index-1m8PjJmh.css">
</head>
<body>
<div id="root"><link rel="preload" as="image" href="https://github.com/user-attachments/assets/d0ae2a5f-ba9b-4a1a-a1d7-8c4fee6b22a6"/><div data-slot="sidebar-wrapper" style="--sidebar-width:16rem;--sidebar-width-icon:3rem" class="group/sidebar-wrapper has-data-[variant=inset]:bg-sidebar flex min-h-svh w-full"><div class="min-h-screen flex w-full"><div class="group peer text-sidebar-foreground hidden md:block" data-state="expanded" data-collapsible="" data-variant="sidebar" data-side="left" data-slot="sidebar"><div data-slot="sidebar-gap" class="relative w-(--sidebar-width) bg-transparent transition-[width] duration-200 ease-linear group-data-[collapsible=offcanvas]:w-0 group-data-[side=right]:rotate-180 group-data-[collapsible=icon]:w-(--sidebar-width-icon)"></div><div data-slot="sidebar-container" class="fixed inset-y-0 z-10 hidden h-svh transition-[left,right,width] duration-200 ease-linear md:flex left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)] group-data-[collapsible=icon]:w-(--sidebar-width-icon) group-data-[side=left]:border-r group-data-[side=right]:border-l w-64"><div data-sidebar="sidebar" data-slot="sidebar-inner" class="bg-sidebar group-data-[variant=floating]:border-sidebar-border flex h-full w-full flex-col group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:shadow-sm"><div data-slot="sidebar-content" data-sidebar="content" class="flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden bg-card border-r border-border"><a class="p-4" href="/front_6th/" data-discover="true"><div class="flex items-center space-x-2 mb-6"><div class="w-8 h-8 bg-gradient-primary rounded-lg flex items-center justify-center"><span class="text-white font-bold text-sm">6기</span></div><h4 class="text-lg font-bold text-primary">항해플러스 프론트엔드</h4></div></a><div data-slot="sidebar-group" data-sidebar="group" class="relative flex w-full min-w-0 flex-col p-2"><div data-slot="sidebar-group-label" data-sidebar="group-label" class="ring-sidebar-ring flex h-8 shrink-0 items-center rounded-md text-xs font-medium outline-hidden transition-[margin,opacity] duration-200 ease-linear focus-visible:ring-2 [&amp;&gt;svg]:size-4 [&amp;&gt;svg]:shrink-0 group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0 text-muted-foreground px-4">학습 관리</div><div data-slot="sidebar-group-content" data-sidebar="group-content" class="w-full text-sm"><ul data-slot="sidebar-menu" data-sidebar="menu" class="flex w-full min-w-0 flex-col gap-1 px-2"><li data-slot="sidebar-menu-item" data-sidebar="menu-item" class="group/menu-item relative"><a data-slot="sidebar-menu-button" data-sidebar="menu-button" data-size="default" data-active="false" class="peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left outline-hidden ring-sidebar-ring transition-[width,height,padding] focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-data-[sidebar=menu-action]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:size-8! group-data-[collapsible=icon]:p-2! [&amp;&gt;span:last-child]:truncate [&amp;&gt;svg]:size-4 [&amp;&gt;svg]:shrink-0 hover:bg-sidebar-accent hover:text-sidebar-accent-foreground text-sm h-12 text-foreground hover:bg-secondary hover:text-secondary-foreground rounded-lg transition-all duration-300" href="/front_6th/" data-discover="true"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-users h-5 w-5" aria-hidden="true"><path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"></path><path d="M16 3.128a4 4 0 0 1 0 7.744"></path><path d="M22 21v-2a4 4 0 0 0-3-3.87"></path><circle cx="9" cy="7" r="4"></circle></svg><span class="ml-3">수강생 목록</span></a></li><li data-slot="sidebar-menu-item" data-sidebar="menu-item" class="group/menu-item relative"><a data-slot="sidebar-menu-button" data-sidebar="menu-button" data-size="default" data-active="false" class="peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left outline-hidden ring-sidebar-ring transition-[width,height,padding] focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-data-[sidebar=menu-action]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:size-8! group-data-[collapsible=icon]:p-2! [&amp;&gt;span:last-child]:truncate [&amp;&gt;svg]:size-4 [&amp;&gt;svg]:shrink-0 hover:bg-sidebar-accent hover:text-sidebar-accent-foreground text-sm h-12 text-foreground hover:bg-secondary hover:text-secondary-foreground rounded-lg transition-all duration-300" href="/front_6th/assignments" data-discover="true"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-book-open h-5 w-5" aria-hidden="true"><path d="M12 7v14"></path><path d="M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z"></path></svg><span class="ml-3">과제 목록</span></a></li></ul></div></div></div></div></div></div><div class="flex-1 min-w-0"><header class="h-12 flex items-center border-b border-border bg-card px-4"><button data-slot="sidebar-trigger" class="inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg:not([class*=&#x27;size-&#x27;])]:size-4 shrink-0 [&amp;_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50 size-7 mr-4 text-white" data-sidebar="trigger"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-panel-left" aria-hidden="true"><rect width="18" height="18" x="3" y="3" rx="2"></rect><path d="M9 3v18"></path></svg><span class="sr-only">Toggle Sidebar</span></button><h4 class="text-lg font-semibold "><a href="/front_6th/@YeongseoYoon-hanghae/" data-discover="true">YeongseoYoon-hanghae<!-- --> 님의 상세페이지</a> ＞ <!-- -->[5팀 윤영서] Chapter 2-2. 디자인 패턴과 함수형 프로그래밍 🦍</h4></header><main class="p-6"><div><div class="card-wrap"><div data-slot="card" class="card text-card-foreground flex flex-col gap-6 shadow-sm mb-6 p-6 border border-gray-700 bg-gray-800 rounded-lg"><a href="https://github.com/hanghae-plus/front_6th_chapter2-2/pull/4" target="_blank"><div class="flex items-start gap-4"><div class="flex-shrink-0"><svg xmlns="http://www.w3.org/2000/svg" height="32" aria-hidden="true" viewBox="0 0 24 24" width="32" fill="white" class="w-8 h-8"><path d="M12 1C5.923 1 1 5.923 1 12c0 4.867 3.149 8.979 7.521 10.436.55.096.756-.233.756-.522 0-.262-.013-1.128-.013-2.049-2.764.509-3.479-.674-3.699-1.292-.124-.317-.66-1.293-1.127-1.554-.385-.207-.936-.715-.014-.729.866-.014 1.485.797 1.691 1.128.99 1.663 2.571 1.196 3.204.907.096-.715.385-1.196.701-1.471-2.448-.275-5.005-1.224-5.005-5.432 0-1.196.426-2.186 1.128-2.956-.111-.275-.496-1.402.11-2.915 0 0 .921-.288 3.024 1.128a10.193 10.193 0 0 1 2.75-.371c.936 0 1.871.123 2.75.371 2.104-1.43 3.025-1.128 3.025-1.128.605 1.513.221 2.64.111 2.915.701.77 1.127 1.747 1.127 2.956 0 4.222-2.571 5.157-5.019 5.432.399.344.743 1.004.743 2.035 0 1.471-.014 2.654-.014 3.025 0 .289.206.632.756.522C19.851 20.979 23 16.854 23 12c0-6.077-4.922-11-11-11Z"></path></svg></div><div class="flex-1 min-w-0"><div class="flex items-center gap-2 mb-2"><h3 class="text-lg font-semibold text-white truncate">[5팀 윤영서] Chapter 2-2. 디자인 패턴과 함수형 프로그래밍 🦍</h3></div><div class="flex items-center gap-4 text-xs text-gray-500"><span>by <!-- -->YeongseoYoon-hanghae</span><span>2025. 8. 2.</span></div></div></div></a></div></div><div class="overflow-auto"><div data-color-mode="dark" class="wmde-markdown wmde-markdown-color p-6 max-w-full" style="word-wrap:break-word;overflow-wrap:break-word"><p>배포링크 : <a href="https://yeongseoyoon-hanghae.github.io/front_6th_chapter2-2/">https://yeongseoyoon-hanghae.github.io/front_6th_chapter2-2/</a></p>
<h2 id="과제의-핵심취지"><a class="anchor" aria-hidden="true" tabindex="-1" href="#과제의-핵심취지"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>과제의 핵심취지</h2>
<ul>
<li>React의 hook 이해하기</li>
<li>함수형 프로그래밍에 대한 이해</li>
<li>액션과 순수함수의 분리</li>
</ul>
<h2 id="과제에서-꼭-알아가길-바라는-점"><a class="anchor" aria-hidden="true" tabindex="-1" href="#과제에서-꼭-알아가길-바라는-점"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>과제에서 꼭 알아가길 바라는 점</h2>
<ul>
<li>엔티티를 다루는 상태와 그렇지 않은 상태 - cart, isCartFull vs isShowPopup</li>
<li>엔티티를 다루는 컴포넌트와 훅 - CartItemView, useCart(), useProduct()</li>
<li>엔티티를 다루지 않는 컴포넌트와 훅 - Button, useRoute, useEvent 등</li>
<li>엔티티를 다루는 함수와 그렇지 않은 함수 - calculateCartTotal(cart) vs capaitalize(str)</li>
</ul>
<h3 id="기본과제"><a class="anchor" aria-hidden="true" tabindex="-1" href="#기본과제"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>기본과제</h3>
<ul class="contains-task-list">
<li>
<p>Component에서 비즈니스 로직을 분리하기</p>
</li>
<li>
<p>비즈니스 로직에서 특정 엔티티만 다루는 계산을 분리하기</p>
</li>
<li>
<p>뷰데이터와 엔티티데이터의 분리에 대한 이해</p>
</li>
<li>
<p>entities -&gt; features -&gt; UI 계층에 대한 이해</p>
</li>
<li class="task-list-item">
<p><input type="checkbox" disabled="" checked=""/> Component에서 사용되는 Data가 아닌 로직들은 hook으로 옮겨졌나요?</p>
</li>
<li class="task-list-item">
<p><input type="checkbox" disabled="" checked=""/> 주어진 hook의 책임에 맞도록 코드가 분리가 되었나요?</p>
</li>
<li class="task-list-item">
<p><input type="checkbox" disabled="" checked=""/> 계산함수는 순수함수로 작성이 되었나요?</p>
</li>
<li class="task-list-item">
<p><input type="checkbox" disabled="" checked=""/> 특정 Entitiy만 다루는 함수는 분리되어 있나요?</p>
</li>
<li class="task-list-item">
<p><input type="checkbox" disabled="" checked=""/> 특정 Entitiy만 다루는 Component와 UI를 다루는 Component는 분리되어 있나요?</p>
</li>
<li class="task-list-item">
<p><input type="checkbox" disabled="" checked=""/> 데이터 흐름에 맞는 계층구조를 이루고 의존성이 맞게 작성이 되었나요?</p>
</li>
</ul>
<h3 id="심화과제"><a class="anchor" aria-hidden="true" tabindex="-1" href="#심화과제"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>심화과제</h3>
<ul class="contains-task-list">
<li>
<p>재사용 가능한 Custom UI 컴포넌트를 만들어 보기</p>
</li>
<li>
<p>재사용 가능한 Custom 라이브러리 Hook을 만들어 보기</p>
</li>
<li>
<p>재사용 가능한 Custom 유틸 함수를 만들어 보기</p>
</li>
<li>
<p>그래서 엔티티와는 어떤 다른 계층적 특징을 가지는지 이해하기</p>
</li>
<li class="task-list-item">
<p><input type="checkbox" disabled="" checked=""/> UI 컴포넌트 계층과 엔티티 컴포넌트의 계층의 성격이 다르다는 것을 이해하고 적용했는가?</p>
</li>
<li class="task-list-item">
<p><input type="checkbox" disabled="" checked=""/> 엔티티 Hook과 라이브러리 훅과의 계층의 성격이 다르다는 것을 이해하고 적용했는가?</p>
</li>
<li class="task-list-item">
<p><input type="checkbox" disabled="" checked=""/> 엔티티 순수함수와 유틸리티 함수의 계층의 성격이 다르다는 것을 이해하고 적용했는가?</p>
</li>
</ul>
<h2 id="과제-셀프회고"><a class="anchor" aria-hidden="true" tabindex="-1" href="#과제-셀프회고"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>과제 셀프회고</h2>
<p>일단 폴더구조는 다음과 같습니다.</p>
<pre><code class="code-highlight"><span class="code-line">📁 src/advanced/
</span><span class="code-line">├── App.tsx
</span><span class="code-line">├── main.tsx
</span><span class="code-line">├── __tests__/
</span><span class="code-line">│   └── advanced.test.tsx
</span><span class="code-line">├── app/
</span><span class="code-line">│   ├── components/
</span><span class="code-line">│   │   └── Header.tsx
</span><span class="code-line">│   └── model/
</span><span class="code-line">├── assets/
</span><span class="code-line">│   └── icons/
</span><span class="code-line">│       ├── CartBagIcon.svg
</span><span class="code-line">│       ├── CartIcon.svg
</span><span class="code-line">│       ├── CloseIcon.svg
</span><span class="code-line">│       ├── ImageIcon.svg
</span><span class="code-line">│       ├── PlusIcon.svg
</span><span class="code-line">│       └── TrashIcon.svg
</span><span class="code-line">├── entities/           # 비즈니스 엔티티
</span><span class="code-line">│   ├── cart/          # 장바구니 도메인
</span><span class="code-line">│   │   ├── hooks/
</span><span class="code-line">│   │   ├── libs/
</span><span class="code-line">│   │   ├── model/
</span><span class="code-line">│   │   ├── ui/
</span><span class="code-line">│   │   ├── index.ts
</span><span class="code-line">│   │   └── types.ts
</span><span class="code-line">│   ├── product/       # 상품 도메인
</span><span class="code-line">│   ├── coupon/        # 쿠폰 도메인
</span><span class="code-line">│   ├── notification/  # 알림 도메인
</span><span class="code-line">│   └── index.ts
</span><span class="code-line">├── features/          # 사용자 시나리오
</span><span class="code-line">│   ├── add-coupon/
</span><span class="code-line">│   ├── checkout/
</span><span class="code-line">│   ├── manage-cart/
</span><span class="code-line">│   ├── manage-coupon/
</span><span class="code-line">│   ├── manage-products/
</span><span class="code-line">│   ├── process-order/
</span><span class="code-line">│   ├── search-product/
</span><span class="code-line">│   ├── select-coupon/
</span><span class="code-line">│   ├── show-notification/
</span><span class="code-line">│   ├── view-cart-items/
</span><span class="code-line">│   ├── view-product-list/
</span><span class="code-line">│   └── index.ts
</span><span class="code-line">├── pages/             # 페이지 컴포넌트
</span><span class="code-line">│   ├── AdminPage.tsx
</span><span class="code-line">│   └── CartPage.tsx
</span><span class="code-line">├── shared/            # 공통 유틸리티
</span><span class="code-line">│   ├── hooks/
</span><span class="code-line">│   ├── libs/
</span><span class="code-line">│   ├── ui/
</span><span class="code-line">│   ├── store/
</span><span class="code-line">│   ├── types/
</span><span class="code-line">│   └── index.ts
</span><span class="code-line">└── widgets/           # 독립적인 UI 블록
</span><span class="code-line">    └── admin/
</span><span class="code-line">        └── ui/
</span><span class="code-line">            ├── CouponsTab.tsx
</span><span class="code-line">            └── ProductsTab.tsx
</span></code><div class="copied" data-code="📁 src/advanced/
├── App.tsx
├── main.tsx
├── __tests__/
│   └── advanced.test.tsx
├── app/
│   ├── components/
│   │   └── Header.tsx
│   └── model/
├── assets/
│   └── icons/
│       ├── CartBagIcon.svg
│       ├── CartIcon.svg
│       ├── CloseIcon.svg
│       ├── ImageIcon.svg
│       ├── PlusIcon.svg
│       └── TrashIcon.svg
├── entities/           # 비즈니스 엔티티
│   ├── cart/          # 장바구니 도메인
│   │   ├── hooks/
│   │   ├── libs/
│   │   ├── model/
│   │   ├── ui/
│   │   ├── index.ts
│   │   └── types.ts
│   ├── product/       # 상품 도메인
│   ├── coupon/        # 쿠폰 도메인
│   ├── notification/  # 알림 도메인
│   └── index.ts
├── features/          # 사용자 시나리오
│   ├── add-coupon/
│   ├── checkout/
│   ├── manage-cart/
│   ├── manage-coupon/
│   ├── manage-products/
│   ├── process-order/
│   ├── search-product/
│   ├── select-coupon/
│   ├── show-notification/
│   ├── view-cart-items/
│   ├── view-product-list/
│   └── index.ts
├── pages/             # 페이지 컴포넌트
│   ├── AdminPage.tsx
│   └── CartPage.tsx
├── shared/            # 공통 유틸리티
│   ├── hooks/
│   ├── libs/
│   ├── ui/
│   ├── store/
│   ├── types/
│   └── index.ts
└── widgets/           # 독립적인 UI 블록
    └── admin/
        └── ui/
            ├── CouponsTab.tsx
            └── ProductsTab.tsx
"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
<p>과제를 늦게 시작하여 조금 어색한 부분이 있지만...너무 힘든 관계로..여기까지...</p>
<!-- -->
<h3 id="과제를-하면서-내가-제일-신경-쓴-부분은-무엇인가요"><a class="anchor" aria-hidden="true" tabindex="-1" href="#과제를-하면서-내가-제일-신경-쓴-부분은-무엇인가요"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>과제를 하면서 내가 제일 신경 쓴 부분은 무엇인가요?</h3>
<ol>
<li>FSD(Feature-Sliced Design) 아키텍처 설계
처음에는 테오가 과제로 내주신 refactoring 폴더처럼 잡고갈지, 아니면 회사에서 자주 사용하는 shared-features-pages의 삼단 구조를 가져갈지에 대해서 고민이 되었습니다. 그러다가 FSD 구조를 통해 설계하자는 생각이 들었습니다.</li>
</ol>
<p>현재 대략적인 폴더 구조는 다음과 같이 되어있는데요.</p>
<pre class="language-ts"><code class="language-ts code-highlight"><span class="code-line">app<span class="token operator">/</span>     <span class="token operator">-</span> 앱 초기화<span class="token punctuation">,</span> 라우팅<span class="token punctuation">,</span> 전역 설정
</span><span class="code-line">pages<span class="token operator">/</span>   <span class="token operator">-</span> 페이지별 조합 로직
</span><span class="code-line">widgets<span class="token operator">/</span> <span class="token operator">-</span> <span class="token constant">UI</span> 컴포넌트 조합
</span><span class="code-line">features<span class="token operator">/</span> <span class="token operator">-</span> 비즈니스 <span class="token function">로직</span> <span class="token punctuation">(</span>장바구니 관리<span class="token punctuation">,</span> 주문 처리<span class="token punctuation">)</span>
</span><span class="code-line">entities<span class="token operator">/</span> <span class="token operator">-</span> 도메인 <span class="token function">모델</span> <span class="token punctuation">(</span>Product<span class="token punctuation">,</span> Cart<span class="token punctuation">,</span> Coupon<span class="token punctuation">)</span>
</span><span class="code-line">shared<span class="token operator">/</span>  <span class="token operator">-</span> 공통 유틸리티
</span></code><div class="copied" data-code="app/     - 앱 초기화, 라우팅, 전역 설정
pages/   - 페이지별 조합 로직
widgets/ - UI 컴포넌트 조합
features/ - 비즈니스 로직 (장바구니 관리, 주문 처리)
entities/ - 도메인 모델 (Product, Cart, Coupon)
shared/  - 공통 유틸리티
"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
<p>각각의 계층이 각자의 역할을 명확히 해서 컨벤션만 있다면 충분히 책임이 분리되지 않을까 생각했습니다. FSD의 핵심은 기술적 관심사가 아닌 비즈니스 도메인별 분리에 있기 때문입니다.</p>
<p>또 제가 설계한 의존성 방향은 다음과 같은데요.</p>
<pre class="language-ts"><code class="language-ts code-highlight"><span class="code-line">app → pages → widgets → features → entities → shared
</span></code><div class="copied" data-code="app → pages → widgets → features → entities → shared
"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
<p>상위 계층이 하위 계층을 참조하는 단방향 의존성을 철저히 지키게하고, 단방향 의존성으로 순환 참조를 방지하도록 했고 이를 통해 하위 계층 변경이 상위에 영향을 주지 않도록 구현하였습니다.</p>
<h4 id="왜-의존성-방향이-단방향으로-흘러야할까"><a class="anchor" aria-hidden="true" tabindex="-1" href="#왜-의존성-방향이-단방향으로-흘러야할까"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>왜 의존성 방향이 단방향으로 흘러야할까?</h4>
<p>FSD에서는 <code>순환 참조</code>를 방지할 수 있기 때문에 단방향으로 흘러야 한다고 이야기 합니다. 제가 생각했을때는 만약 A -&gt; B -&gt; C 의 단방향 형태로 흘러가는 형태라면 B가 변경되었을때 C만 영향범위를 고려하면 되지만, A -&gt; B -&gt; C -&gt; A로 순환참조 구조가 된다면 B가 변경되었을때 모든 영향 범위를 고려해야하기 때문이 아닐까 생각했습니다. 때문에 의존성 방향을 단방향으로 흐르도록 설계하지 않았을까요?</p>
<p>아무튼 FSD는 클린 아키텍처 철학과 닮아있는데요,
<img width="1280" height="937" alt="다운로드 (2)" src="https://github.com/user-attachments/assets/d0ae2a5f-ba9b-4a1a-a1d7-8c4fee6b22a6"/>
FSD는 프론트엔드에서 좀 더 최적화된 실용적인 접근을 제공한다고 생각합니다.</p>
<p>계층별 역할과 책임을 명확히 분리했습니다. app은 전역 초기화, 라우팅, Provider 설정을 담당하고, pages는 라우트 컴포넌트와 페이지 조합을 하되 비즈니스 로직은 최소화하도록 구현했습니다. widgets과 features가 조금 불명확해보일 수 있는데, widgets는 사용자의 기능들은 모아 둔 좀 더 큰 기능 단위라고 생각하고, features는 비즈니스 기능을 구현했습니다. entities는 핵심 비즈니스 객체와 도메인 로직을 다루며, shared는 비즈니스와 무관한 재사용 가능 기능을 제공하도록 구현했습니다.</p>
<h4 id="2-entity-간-순환-참조-문제-해결"><a class="anchor" aria-hidden="true" tabindex="-1" href="#2-entity-간-순환-참조-문제-해결"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>2. Entity 간 순환 참조 문제 해결</h4>
<p>처음 제공된 타입은 다음과 같이 되어있었는데요.</p>
<pre class="language-ts"><code class="language-ts code-highlight"><span class="code-line"><span class="token keyword">export</span> <span class="token keyword">interface</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>
</span><span class="code-line">  id<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
</span><span class="code-line">  name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
</span><span class="code-line">  price<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
</span><span class="code-line">  stock<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
</span><span class="code-line">  discounts<span class="token operator">:</span> Discount<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword">export</span> <span class="token keyword">interface</span> <span class="token class-name">CartItem</span> <span class="token punctuation">{</span>
</span><span class="code-line">  product<span class="token operator">:</span> Product<span class="token punctuation">;</span>
</span><span class="code-line">  quantity<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span><span class="code-line">
</span><span class="code-line">
</span></code><div class="copied" data-code="export interface Product {
  id: string;
  name: string;
  price: number;
  stock: number;
  discounts: Discount[];
}

export interface CartItem {
  product: Product;
  quantity: number;
}


"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
<p>위 타입을 확인해보면, <code>CartItem</code>은 <code>Product</code>를 타입을 참조하고 있는 구조로 되어있는 것을 알 수 있습니다.</p>
<p>만약 <code>entity/cart</code>에 <code>CartItem</code>를 분리하게되면, <code>entity/product</code>에 위치한 <code>Product</code>타입을 <code>CartItem</code>이 참조하게 되어 entity가 entity를 참조하는 구조가 될 것이고, 이것은 FSD의 원칙을 위배한다고 생각했습니다.</p>
<p>그래서 이를 해결하기위해서 <code>CartItem</code>타입을 다음과 같이 변경하였습니다.</p>
<pre class="language-ts"><code class="language-ts code-highlight"><span class="code-line"><span class="token keyword">export</span> <span class="token keyword">interface</span> <span class="token class-name">Cart</span> <span class="token punctuation">{</span>
</span><span class="code-line">  id<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
</span><span class="code-line">  name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
</span><span class="code-line">  price<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
</span><span class="code-line">  discounts<span class="token operator">:</span> Discount<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
</span><span class="code-line">  quantity<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword">export</span> <span class="token keyword">interface</span> <span class="token class-name">Discount</span> <span class="token punctuation">{</span>
</span><span class="code-line">  quantity<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
</span><span class="code-line">  rate<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code><div class="copied" data-code="export interface Cart {
  id: string;
  name: string;
  price: number;
  discounts: Discount[];
  quantity: number;
}

export interface Discount {
  quantity: number;
  rate: number;
}
"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
<p>좀 더 생각해보면 <code>CartItem</code>은 id, name, price, discounts가 있어야하는 것은 명확하지만, &#x27;Product&#x27;라는 도메인 정보를 알 필요가 없다고 생각했기때문입니다. Product 객체를 평탄화하니 다른 도메인 정보를 CartItem이 들고있지 않아도 되었습니다.</p>
<h4 id="3-jotai-provider-스코프-최적화"><a class="anchor" aria-hidden="true" tabindex="-1" href="#3-jotai-provider-스코프-최적화"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>3. Jotai Provider 스코프 최적화</h4>
<p>제가 basic에서 advanced 과제로 넘어가면서 제일 신경 쓴 부분은 “진짜 필요한 범위에만 상태를 쓴다”였습니다. Provider를 남발하면 스토어가 쪼개지고, 반대로 너무 위에다 두면 사실상 전역이 된다고 생각했습니다. 만약 그렇게 된다면 전역 상태를 사용하고, 이를 최상단의 레벨에서 그대로 props로 내려주는것과 차이가 있을까? 하는 생각을 했던 것 같습니다.</p>
<p>아무튼 최종적으로 Provider의 배치는 다음과 같게 되었습니다.
전역(앱 어디에서나 필요): Notification
앱 전반(헤더·페이지 공통으로 필요한 데이터): Product
특정 뷰 묶음(헤더의 카트 숫자 ↔ 카트 페이지 아이템 동기화): Cart
페이지/섹션 단위로 공유되는 상태(주로 장바구니/결제 맥락): Coupon</p>
<p>이렇게 하면 헤더의 카트 개수와 카트 페이지의 상태가 같은 스토어를 공유해 동기화되고, 쿠폰은 페이지 컨텍스트 안에서만 공유돼서 과도하게 전역으로 퍼지지 않을 것이라고 생각했습니다.</p>
<p>Jotai는 Provider가 생성될 때마다 createStore()로 완전 독립 스토어가 생기게 되는데, 컴포넌트 내부에 중복 Provider가 있으면 상태가 갈라져서 동기화가 깨지게 됩니다.
반대로 Provider를 너무 위로 올리면 걍 전역 상태랑 다를 바가 없다고 생각했습니다. 그래서 “필요한 최저 위치의 공통적인 조상코드(?)” 기준으로 Provider를 제공했습니다.</p>
<h4 id="4-최대한-계산과-액션을-나눠보기"><a class="anchor" aria-hidden="true" tabindex="-1" href="#4-최대한-계산과-액션을-나눠보기"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>4. 최대한 계산과 액션을 나눠보기</h4>
<p>이번에 과제를 구현하면서, 기존에 구현되어있던 코드들은</p>
<pre class="language-ts"><code class="language-ts code-highlight"><span class="code-line">  <span class="token keyword">const</span> formatPrice <span class="token operator">=</span> <span class="token punctuation">(</span>price<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> productId<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token keyword">if</span> <span class="token punctuation">(</span>productId<span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">      <span class="token keyword">const</span> product <span class="token operator">=</span> products<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span>p <span class="token operator">=&gt;</span> p<span class="token punctuation">.</span>id <span class="token operator">===</span> productId<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">      <span class="token keyword">if</span> <span class="token punctuation">(</span>product <span class="token operator">&amp;&amp;</span> <span class="token function">getRemainingStock</span><span class="token punctuation">(</span>product<span class="token punctuation">)</span> <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">        <span class="token keyword">return</span> <span class="token string">&#x27;SOLD OUT&#x27;</span><span class="token punctuation">;</span>
</span><span class="code-line">      <span class="token punctuation">}</span>
</span><span class="code-line">    <span class="token punctuation">}</span>
</span><span class="code-line">
</span><span class="code-line">    <span class="token keyword">if</span> <span class="token punctuation">(</span>isAdmin<span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">      <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>price<span class="token punctuation">.</span><span class="token function">toLocaleString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">원</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
</span><span class="code-line">    <span class="token punctuation">}</span>
</span><span class="code-line">    
</span><span class="code-line">    <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">₩</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>price<span class="token punctuation">.</span><span class="token function">toLocaleString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token punctuation">}</span><span class="token punctuation">;</span>
</span></code><div class="copied" data-code="  const formatPrice = (price: number, productId?: string): string =&gt; {
    if (productId) {
      const product = products.find(p =&gt; p.id === productId);
      if (product &amp;&amp; getRemainingStock(product) &lt;= 0) {
        return &#x27;SOLD OUT&#x27;;
      }
    }

    if (isAdmin) {
      return `${price.toLocaleString()}원`;
    }
    
    return `₩${price.toLocaleString()}`;
  };
"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
<p>이전 코드는 한 함수 안에 “데이터 조회 + 조건 분기 + 계산 + 표시(문자열 포맷)”가 한데 섞여 있었습니다. 어떻게 보면 폴더별로 분리도 어렵고 재사용도 어려운 코드가 되었다고 생각합니다. 그리고 해당 함수의 책임이 많은 편이라고 생각이 됐습니다.</p>
<p>일단 계산은 전부 순수 함수로 분리하고자했습니다.</p>
<pre class="language-ts"><code class="language-ts code-highlight"><span class="code-line"><span class="token keyword">export</span> <span class="token keyword">const</span> calculateRemainingStock <span class="token operator">=</span> <span class="token punctuation">(</span>
</span><span class="code-line">  totalStock<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span>
</span><span class="code-line">  usedQuantity<span class="token operator">:</span> <span class="token builtin">number</span>
</span><span class="code-line"><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">number</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token keyword">return</span> totalStock <span class="token operator">-</span> usedQuantity<span class="token punctuation">;</span>
</span><span class="code-line"><span class="token punctuation">}</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword">export</span> <span class="token keyword">const</span> isInStock <span class="token operator">=</span> <span class="token punctuation">(</span>
</span><span class="code-line">  totalStock<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span>
</span><span class="code-line">  usedQuantity<span class="token operator">:</span> <span class="token builtin">number</span> <span class="token operator">=</span> <span class="token number">0</span>
</span><span class="code-line"><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">boolean</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token keyword">return</span> <span class="token function">calculateRemainingStock</span><span class="token punctuation">(</span>totalStock<span class="token punctuation">,</span> usedQuantity<span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token punctuation">}</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword">export</span> <span class="token keyword">const</span> getStockDisplay <span class="token operator">=</span> <span class="token punctuation">(</span>
</span><span class="code-line">  totalStock<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span>
</span><span class="code-line">  usedQuantity<span class="token operator">:</span> <span class="token builtin">number</span> <span class="token operator">=</span> <span class="token number">0</span>
</span><span class="code-line"><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token keyword">return</span> <span class="token function">calculateRemainingStock</span><span class="token punctuation">(</span>totalStock<span class="token punctuation">,</span> usedQuantity<span class="token punctuation">)</span> <span class="token operator">&lt;=</span> <span class="token number">0</span>
</span><span class="code-line">    <span class="token operator">?</span> <span class="token string">&quot;SOLD OUT&quot;</span>
</span><span class="code-line">    <span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token punctuation">}</span><span class="token punctuation">;</span>
</span></code><div class="copied" data-code="export const calculateRemainingStock = (
  totalStock: number,
  usedQuantity: number
): number =&gt; {
  return totalStock - usedQuantity;
};

export const isInStock = (
  totalStock: number,
  usedQuantity: number = 0
): boolean =&gt; {
  return calculateRemainingStock(totalStock, usedQuantity) &gt; 0;
};

export const getStockDisplay = (
  totalStock: number,
  usedQuantity: number = 0
): string =&gt; {
  return calculateRemainingStock(totalStock, usedQuantity) &lt;= 0
    ? &quot;SOLD OUT&quot;
    : &quot;&quot;;
};
"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
<p>도메인 정보는 최대한 배제해서 입력과 출력만 명확하게 만들었습니다. 그리고 각각 함수의 역할에 따라 함수를 분리 배치하고 조합하여 사용할 수 있도록 구현하였습니다. 인풋에 따라 아웃풋을 나오게하고 부수효과가 없는 함수를 만들 수 있도록 구현하였습니다.</p>
<p>그렇게 개선하니 더 이상 계산 함수 안에서 products.find(...) 같은 조회를 하지도 않고, isAdmin 같은 환경 분기도 내부에 두지 않을 수 있었습니다. 호출자가 준비해서 넘겨주고, 계산 함수는 그저 받은 값으로 결과만 산출하게 해서 오염을 막도록 구현하였습니다. 결국 FSD 관점에서도 정리가 잘 됐는데, 범용 수학/포맷은 shared, 순수 도메인 계산은 entities, 여러 도메인을 엮는 합성은 features, 그리고 UI는 그 결과를 가져다 보여주기만 하는 구조로 자리 잡을 수 있었다고 생각합니다.</p>
<h3 id="과제를-다시-해보면-더-잘-할-수-있었겠다-아쉬운-점이-있다면-무엇인가요"><a class="anchor" aria-hidden="true" tabindex="-1" href="#과제를-다시-해보면-더-잘-할-수-있었겠다-아쉬운-점이-있다면-무엇인가요"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>과제를 다시 해보면 더 잘 할 수 있었겠다 아쉬운 점이 있다면 무엇인가요?</h3>
<h4 id="features의-분리"><a class="anchor" aria-hidden="true" tabindex="-1" href="#features의-분리"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>features의 분리</h4>
<p>어려웠던 부분이 있다면 features를 사용자 행위 중심으로 나누는 것에 있었다고 생각합니다. 저희 회사에서 사용하는 shared-features-pages의 삼단구조는 공통화된(좀 더 추상화된)레벨의 shared,그리고 페이지에서 사용하는 컴포넌트가 놓여지는 pages 그리고 그 외의 로직들은 다 features에 들어가게되는데요.</p>
<p>그러다보니 features가 기능이라는 이름을 가짐에도 불구하고 &#x27;사용자의 기능&#x27;에 집중을해서 배치하기 보다는 &#x27;coupon&#x27;, &#x27;cart&#x27;, &#x27;product&#x27;와 같이 &#x27;야! 얘들아! 쿠폰이면 다 여기로 와!&#x27;처럼 어떻게 보면...기능 + 도메인의 짬뽕 폴더구조가 되었다고 생각했습니다. 물론 그렇게 배치를 하면 편리한 부분이 있긴하지만 features의 폴더가 너무 거대해지고 관리해야하는 부분이 늘어나게 되더라고요.</p>
<p>이번에 FSD구조를 가져가면서 사용자의 행위를 중심으로 배치를 하니 좀 더 명확하게 기능단위로 분리가 가능하고 각각의 features가 독립적으로 존재하게 되어 나중에 어떤 기능의 유지보수를 하게 된다고 했을때 영향범위가 줄어들 수 있겠다고 느꼈던 것 같습니다.</p>
<p>그런데 이런 부분이 익숙하지 않아 고민했던 부분이 있다면 다음과 같은 부분이었는데요. apply-coupon, delete-coupon등과 같이 기능을 세부적으로 나눠야하는걸까 하는 고민이었습니다. 결론적으로는 &quot;사용자 의도&quot;를 기준으로 슬라이스를 자르고, 서로 다른 맥락이나 복잡도, 재사용 필요, 혹은 컴포넌트가 너무 무거워지는 때만 더 쪼개는 방향으로 정리했습니다.</p>
<h4 id="스토어-격리"><a class="anchor" aria-hidden="true" tabindex="-1" href="#스토어-격리"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>스토어 격리</h4>
<p>zustand에서는 context를 통해서 접근할 수 있는 스코프를 지역적으로 좁혀줄 수 있는데(공식문서에 언급), jotai도 비슷하게 가져갈 수 있는 방향이 있는지 찾아봤습니다. 그런데 jotai에서는 공식문서에서 언급해주는 내용은 딱히 없고 <a href="https://jotai.org/docs/extensions/scope">라이브러리 설치를 통해</a> 관리하는 방법을 언급하고 있었습니다.</p>
<p>지금은 시간이 부족해서 해당 방식을 취하진 않고 단순 프로바이더를 통해서 스토어의 격리(스코프의 지정은 아닌)만 해주긴했는데, 시간이 더 있었다면 해당 방식을 취하지 않았을까싶습니다.</p>
<h3 id="리뷰-받고-싶은-내용이나-궁금한-것에-대한-질문"><a class="anchor" aria-hidden="true" tabindex="-1" href="#리뷰-받고-싶은-내용이나-궁금한-것에-대한-질문"><svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>리뷰 받고 싶은 내용이나 궁금한 것에 대한 질문</h3>
<ol>
<li>CartItem에서 Product라는 도메인이 들어와있는것을 피하기 위해 이를 평탄화된 타입으로 가져가게 되었다고 위에서도 언급을 했는데, 사실 Cart라는것은 클라이언트에서 생성되는 데이터 타입(상품과 할인은 어떻게 잘 조합한)이고, 만약 좀 더 확장한다면 해당 장바구니의 내용에 어떤 상품인지, 어떤 쿠폰을 적용시켰는지에 대한 정보가 들어갈 수 있다고 생각하는데요. 그렇게 확장이 된다면 Cart의 타입에는 비롯 상품의 타입뿐아니라 쿠폰 타입 기타 등등이 들어갈 수 있을 것 같습니다.</li>
</ol>
<p>그렇다면, Cart는 사실상 클라이언트에서 조합을 해서 만들어내는 객체니 이를 features로 분리하는 것이 맞았을까요? 계속 고민이 되는 것은, Cart가 어떻게보면 존재할 수 있는 객체라고 생각했기때문입니다. 만약 Cart에 저장할 수 있는 데이터가 확장이 된다고 하면... Cart는 어떤 폴더에 놓이는게 좋은 선택일까요?</p>
<ol start="2">
<li>계속 고민이 되었던 부분은 거의 비슷한 방향이었는데요. 만약 apply-coupon, delete-coupon과 같은 기능을 &#x27;쿠폰 관리&#x27;에 초점을 맞추어 manage-coupon과 같이 분리하게 된다면...너무 manage-coupon에 많은 책임이 들어가는것이 아닐까?하는생각이 들었습니다. crud에 맞춰 분리를해야할지 아니면 알잘딱깔센하게 분리해야할지...</li>
</ol></div></div><div class="overflow-auto mt-9"><h3 class="text-2xl mb-3">과제 피드백</h3><div data-color-mode="dark" class="wmde-markdown wmde-markdown-color p-6 max-w-full" style="word-wrap:break-word;overflow-wrap:break-word"><p>크.. 멋쟁이 영서님. 5주차도 너무 고생했어요!! 여러가지 개인적인 일도 많이 겹쳤을텐데 그럼에도 불구하고 너무 잘 해주셨네요 ㅎㅎ 지난주에도 했던 말인데, 존경합니다.</p>
<blockquote>
<p>CartItem에서 Product라는 도메인이 들어와있는것을 피하기 위해 이를 평탄화된 타입으로 가져가게 되었다고 위에서도 언급을 했는데, 사실 Cart라는것은 클라이언트에서 생성되는 데이터 타입(상품과 할인은 어떻게 잘 조합한)이고, 만약 좀 더 확장한다면 해당 장바구니의 내용에 어떤 상품인지, 어떤 쿠폰을 적용시켰는지에 대한 정보가 들어갈 수 있다고 생각하는데요. 그렇게 확장이 된다면 Cart의 타입에는 비롯 상품의 타입뿐아니라 쿠폰 타입 기타 등등이 들어갈 수 있을 것 같습니다. 그렇다면, Cart는 사실상 클라이언트에서 조합을 해서 만들어내는 객체니 이를 features로 분리하는 것이 맞았을까요? 계속 고민이 되는 것은, Cart가 어떻게보면 존재할 수 있는 객체라고 생각했기때문입니다. 만약 Cart에 저장할 수 있는 데이터가 확장이 된다고 하면... Cart는 어떤 폴더에 놓이는게 좋은 선택일까요?</p>
</blockquote>
<p>저는 그냥 현재 상황을 유지해도 좋다고 생각해요 ㅎㅎ
완전히 독립적으로 쓰이는게 사실 논리적으로 불가능에 가깝기도 하고,
cart가 다른걸 의존하는게 부자연스러운건 아니라서요.</p>
<p>대신 use-case 라는 폴더를 하나 만들어서 관리할 것 같아요.
use-case는 각각의 entities에 대한 개별 로직이라기보단, 전체 entities의 소통을 총괄하는 역할인거죠.</p>
<p>가령, 사용자 시나리오를 토대로 생각해보자면</p>
<p>&quot;사용자가 A라는 제품을 장바구니에 추가한다&quot; 를 useCase로 만들고, 여기서 쓰이는 모든 로직과 개체를 가져다 조합하여 사용하는 그런 방식입니다.</p>
<p>useCartUseCase 가 있고, 이 UseCase에서 cart, product, coupon 등을 조합하는거죠.</p>
<p>그래서</p>
<p>features/
cart/
entities/
use-case/
useCartUseCase</p>
<p>요로코롬 사용할 수도 있고</p>
<p>혹은
features/
cart/
entities/
use-case/
useCartUseCase
hooks/
useCart</p>
<p>요로코롬 쓰일 수도 있다고 생각해요</p>
<blockquote>
<p>계속 고민이 되었던 부분은 거의 비슷한 방향이었는데요. 만약 apply-coupon, delete-coupon과 같은 기능을 &#x27;쿠폰 관리&#x27;에 초점을 맞추어 manage-coupon과 같이 분리하게 된다면...너무 manage-coupon에 많은 책임이 들어가는것이 아닐까?하는생각이 들었습니다. crud에 맞춰 분리를해야할지 아니면 알잘딱깔센하게 분리해야할지...</p>
</blockquote>
<p>이것도 위와 동일하다고 생각해요. useCouponUseCase 같은걸 만들어서 사용하는거죠!</p>
<hr/>
<p>이번주도 고생하셨어요!! 남은 기간도 화이팅입니다~!</p></div></div></div></main></div></div></div></div>
</body>
</html>
